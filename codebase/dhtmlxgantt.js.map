{"version":3,"sources":["webpack:///dhtmlxgantt.js","webpack:///webpack/bootstrap 3101faf845b64e83b979","webpack:///./sources/utils/utils.js","webpack:///./sources/utils/dom_helpers.js","webpack:///./sources/utils/eventable.js","webpack:///./sources/utils/extends.js","webpack:///./sources/utils/date_helpers.js","webpack:///./sources/core/ui/layout/cell.js","webpack:///./sources/utils/env.js","webpack:///./sources/utils/helpers.js","webpack:///./sources/core/ui/grid/grid.js","webpack:///./sources/core/ui/mouse_event_container.js","webpack:///./sources/utils/timeout.js","webpack:///./sources/utils/dom_event_scope.js","webpack:///./sources/core/ui/layout/layout.js","webpack:///./sources/core/ui/timeline/timeline.js","webpack:///./sources/core/ui/timeline/scales_ignore.js","webpack:///./sources/core/ui/resouce_store_mixin.js","webpack:///./sources/core/datastore/datastore.js","webpack:///./sources/core/datastore/power_array.js","webpack:///./sources/core/datastore/treedatastore.js","webpack:///./sources/core/gantt_data_range.js","webpack:///./sources/utils/task_tree_helpers.js","webpack:///./sources/core/worktime/calendar_arguments_helper.js","webpack:///./sources/dhtmlxgantt.enterprise.js","webpack:///./sources/core/gantt_factory.js","webpack:///./sources/core/gantt.js","webpack:///./sources/core/common/import.js","webpack:///./sources/core/common/services.js","webpack:///./sources/core/common/config.js","webpack:///./sources/core/common/ajax.js","webpack:///./sources/core/common/date.js","webpack:///./sources/core/common/dnd.js","webpack:///./sources/core/common/templates.js","webpack:///./sources/core/common/state.js","webpack:///./sources/core/message.js","webpack:///./sources/core/ui/index.js","webpack:///./sources/core/ui/ui_factory.js","webpack:///./sources/core/ui/configurable.js","webpack:///./sources/core/ui/mouse.js","webpack:///./sources/core/ui/gantt_layers.js","webpack:///./sources/core/ui/render/layer_engine.js","webpack:///./sources/core/ui/render/render_factory.js","webpack:///./sources/core/ui/layout/view_layout.js","webpack:///./sources/core/ui/layout/view_cell.js","webpack:///./sources/core/ui/layout/resizer_cell.js","webpack:///./sources/core/ui/layout/scrollbar_cell.js","webpack:///./sources/core/ui/timeline/scales.js","webpack:///./sources/core/ui/timeline/tasks_canvas_render.js","webpack:///./sources/core/ui/grid/grid_resize.js","webpack:///./sources/core/ui/grid/resource_grid.js","webpack:///./sources/core/ui/timeline/resource_timeline.js","webpack:///./sources/core/ui/render/task_bar_render.js","webpack:///./sources/core/ui/render/task_bg_render.js","webpack:///./sources/core/ui/render/link_render.js","webpack:///./sources/core/ui/render/task_grid_line_render.js","webpack:///./sources/core/ui/grid/main_grid_initializer.js","webpack:///./sources/core/ui/grid/tasks_grid_dnd.js","webpack:///./sources/core/ui/timeline/main_timeline_initializer.js","webpack:///./sources/core/ui/timeline/tasks_dnd.js","webpack:///./sources/core/ui/timeline/links_dnd.js","webpack:///./sources/core/ui/main_layout_initializer.js","webpack:///./sources/core/data_task_layers.js","webpack:///./sources/core/datastore/datastore_hooks.js","webpack:///./sources/core/facades/datastore.js","webpack:///./sources/core/facades/datastore_tasks.js","webpack:///./sources/core/facades/datastore_links.js","webpack:///./sources/core/datastore/select.js","webpack:///./sources/core/datastore/datastore_render.js","webpack:///./sources/core/dataprocessor/hooks.js","webpack:///./sources/core/dataprocessor/live_update_hooks.js","webpack:///./sources/core/dataprocessor/dataprocessor.js","webpack:///./sources/core/plugins/index.js","webpack:///./sources/core/plugins/autoscroll.js","webpack:///./sources/core/plugins/batch_update.js","webpack:///./sources/core/plugins/wbs.js","webpack:///./sources/core/plugins/jquery_hooks.js","webpack:///./sources/core/plugins/dhtmlx_hooks.js","webpack:///./sources/core/plugins/resources.js","webpack:///./sources/core/dynamic_loading.js","webpack:///./sources/core/grid_column_api.js","webpack:///./sources/core/grid_column_api.gpl.js","webpack:///./sources/core/wai_aria.js","webpack:///./sources/core/tasks.js","webpack:///./sources/core/load.js","webpack:///./sources/core/worktime/work_time.js","webpack:///./sources/core/worktime/calendar_manager.js","webpack:///./sources/core/worktime/strategy/calendar_strategy.js","webpack:///./sources/core/worktime/strategy/calendar_workunit_cache.js","webpack:///./sources/core/worktime/time_calculator.js","webpack:///./sources/core/worktime/strategy/no_work_time.js","webpack:///./sources/core/facades/worktime_calendars.js","webpack:///./sources/core/data.js","webpack:///./sources/core/lightbox.js","webpack:///./sources/core/lightbox_optional_time.js","webpack:///./sources/core/data_task_types.js","webpack:///./sources/core/cached_functions.js","webpack:///./sources/core/skin.js","webpack:///./sources/css/skins/skyblue.js","webpack:///./sources/css/skins/meadow.js","webpack:///./sources/css/skins/terrace.js","webpack:///./sources/css/skins/broadway.js","webpack:///./sources/css/skins/material.js","webpack:///./sources/css/skins/contrast_black.js","webpack:///./sources/css/skins/contrast_white.js","webpack:///./sources/core/touch.js","webpack:///./sources/locale/locale.js","webpack:///./sources/core/gantt_core.js","webpack:///./sources/core/common/assert.js","webpack:///./sources/core/destructor.js","webpack:///./sources/core/deprecated_warnings.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","copy","t","result","Array","Number","String","Boolean","length","dateHelper","isDate","Date","apply","mixin","target","source","force","f","undefined","defined","obj","uid","seed","valueOf","bind","functor","arguments","event","el","handler","capture","addEventListener","attachEvent","eventRemove","removeEventListener","detachEvent","elementPosition","elem","top","left","right","bottom","getBoundingClientRect","box","body","document","docElem","documentElement","parentNode","scrollTop","window","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","offsetWidth","offsetHeight","parseInt","offsetTop","offsetLeft","offsetParent","y","Math","round","x","width","height","isVisible","node","display","visibility","getComputedStyle","style","currentStyle","hasNonNegativeTabIndex","isNaN","getAttribute","hasHref","a","area","nodeName","loLowerCase","isEnabled","input","select","textarea","button","toLowerCase","hasAttribute","getFocusableNodes","root","nodes","querySelectorAll","join","nodesArray","slice","splice","getScrollSize","div","createElement","cssText","appendChild","clientWidth","removeChild","getClassName","className","baseVal","indexOf","_trimString","addClassName","removeClassName","split","regEx","RegExp","replace","toNode","getElementById","querySelector","insert","newone","_slave","innerHTML","child","firstChild","remove","getChildren","css","ch","childNodes","len","out","push","getTargetNode","e","trg","tagName","srcElement","locateAttribute","attribute","str","trim","this","locateClassName","classname","strict","ind","charAt","getRelativeEventPosition","ev","pageX","pageY","pos","clientX","clientY","isChildOf","parent","getNodePosition","insertNode","removeNode","getChildNodes","makeEventable","eventHost","EventHost","catcher","callObj","createEventStorage","addEvent","attachAll","callback","callEvent","arg0","_silent_mode","handlerName","concat","checkEvent","id","list","removeEvent","detachAllEvents","_connected","_silentStart","_silentEnd","dhx_catch","z","res","zr","b","__","constructor","create","fields","utils","eventable","domHelpers","Cell","config","factory","gantt","$container","$parent","$config","headerHeight","$gantt","$domEvents","_createDomEventScope","$id","$name","$factory","destructor","$view","$services","getService","detach","_headerClickHandler","detachAll","cell","scrollTo","clear","getNode","padding","resize","final","$preResize","topCont","topSize","getSize","minWidth","maxWidth","minHeight","maxHeight","setSize","hide","_hide","show","mode","index","cellIndex","moveView","hidden","$toHTML","content","header","raw","html","collapseIcon","canCollapse","$fill","init","self","toggle","delegate","collapsed","size","gravity","getContentSize","$lastSize","contentX","contentY","_getBorderSizes","borders","horizontal","vertical","_currentBorders","_borders","_sizeHeader","_sizeContent","_setBorders","view","cssHash","xLayout","floor","transform","env","isIE","navigator","userAgent","isIE6","XMLHttpRequest","isIE7","isIE8","isOpera","isChrome","isKHTML","isFF","isIPad","search","isEdge","getSecondsInUnit","unit","units","hour","forEach","arr","workArray","arrayMap","resArray","second","minute","day","week","month","quarter","year","gridResize","Grid","$state","container","gridAriaAttr","_waiAria","gridAttrString","gridDataAriaAttr","gridDataAttrString","$grid","gridScaleRowAttrString","$grid_scale","$grid_data","attr","$getConfig","item_attribute","layers","_createLayerConfig","resizer","_renderHeaderResizers","doOnRender","_mouseDelegates","_addLayers","_initEvents","columns","getGridColumns","innerWidth","outerWidth","scrollable","_setColumnsWidth","grid_width","dataHeight","max","scale_height","refresh","store","rowStore","contentHeight","row_height","countVisible","contentWidth","_getGridWidth","scrollHeight","scrollWidth","getDatastore","_initSmartRenderingPlaceholder","_calculateGridWidth","_renderGridHeader","getItemTop","getIndexById","renderer","$ui","gridLine","filter","_taskLayers","taskRenderer","getDataRender","createDataRender","defaultContainer","taskLayers","layer","host","bar_layer","addLayer","_staticBgHandler","item","smart_rendering","$rowsPlaceholder","placeholder","close","open","_clearLayers","removeLayer","_getColumnWidth","column","min_width","min_grid_column_width","new_width","max_width","min","_getGridWidthLimits","min_limit","max_limit","newWidth","start_index","columns_width","final_width","extra_width","start_width","col","share","iterator","curExtra","_getColsTotalWidth","cols_width","v","parseFloat","unknown","gridWidth","autofit","diff","delta","changed","_setContentSize","locale","templates","rtl","reverse","cells","labels","lineHeigth","last","colWidth","sort","_sort","direction","cssClass","grid_header_class","label","ariaAttrs","gridScaleCellAttrString","lineHeight","events","mouseEvents","h","checkTimeout","updPerSecond","_on_timeout","timeout","ceil","setTimeout","createScope","handlers","attach","element","extend","__extends","Layout","_super","_this","$root","_parseConfig","$cells","_resizeScrollbars","autosize","scrollbars","showScrollbar","scrollbar","scrollChanged","visibleScrollbars","hideScrollbar","hiddenSrollbars","scroll","shouldHide","shouldShow","visibleGroups","group","_syncCellSizes","groupName","newSize","groups","_eachChild","_syncGroupSize","_xLayout","getNextSibling","ownSize","resizeSibling","getPrevSibling","siblingSize","totalGravity","totalSize","k","mainGrid","getView","$content","startStage","mainCall","_resizeInProgress","contentViews","getCellsByType","setContentSize","_getAutosizeMode","code","type","children","cellId","sub","alert","insertBefore","rows","cols","views","initUI","getCells","render","cellSize","_cleanElSize","value","toString","_getBoxStyles","computed","clientHeight","properties","styles","boxSizing","MozBoxSizing","horPaddings","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","vertPaddings","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","borderBox","innerHeight","outerHeight","boxSizes","contentSizes","_sizes","margin","_calcFreeSpace","side","_free","_gravity","_calcSize","_configureBorders","borderClass","lastVisibleIndex","lastCell","borderColorClass","_updateCellVisibility","oldVisibleCells","_visibleCells","firstCall","visibleCells","cellView","marginSide","dx","dy","_findBinary","array","prev","low","high","ScaleHelper","canvasRender","Timeline","$scaleHelper","$task","$task_scale","$task_data","$task_bg","$task_links","$task_bars","_tasks","col_width","full_width","trace_x","rendered","linksAttr","bindLinks","link_attribute","tasks","linkLayers","links","_attachLayers","backgroundImage","scale","data_els","_refreshScales","smart_scales","scales","_scales","_getScaleChunkHtml","taskFilter","expose","taskBar","taskBg","static_background","link","_linkLayers","_taskRenderer","getLayer","_initStaticBackgroundRender","linkStore","linkRenderer","linkLayer","_linkRenderer","staticRender","getScale","_render_tasks_scales","scales_html","outer_width","state","getState","helpers","_getScales","availWidth","autosize_min_width","cfgs","prepareConfigs","min_column_width","min_date","max_date","cfg","fromPos","toPos","scale_row_class","tplClass","_prepareScaleHtml","globalConfig","globalTemplates","date","template","date_to_str","startIndex","endIndex","count","inherit_scale_class","scale_cell_class","cssclass","ariaAttr","getTimelineCellAttr","dateFromPos","summ","part","_getColumnDuration","posFromDate","columnIndexByDate","assert","wholeCells","partCell","days","trace_x_ascending","ignores","ignore_x","day_ind","transition","trace_index_transition","getItemPosition","task","start_date","end_date","xLeft","xRight","getItemHeight","task_height","offset","task_height_offset","getRowTop","task_id","primaryScale","subscales","sortScales","add","step","ScaleIgnoreHelper","helper","processIgnores","display_count","ignore_time","skip_off_time","ignore","_ignore_time_config","ignored_colls","createMixin","_linkToTaskStore","$data","tasksStore","ownStore","updateDelay","requestAnimationFrame","cancelAnimationFrame","powerArray","DataStore","pull","$initItem","initItem","visibleOrder","$create","fullOrder","_skip_refresh","_filterRule","_searchVisibleOrder","_parseInner","data","loaded","parse","getItem","_updateOrder","updateItem","_removeItemInner","$remove","removeItem","_addItemInner","exists","silent","order","data_size","$insertAt","$find","getVisibleItems","getIndexRange","addItem","_changeIdInner","oldId","newId","changeId","_moveInner","sindex","tindex","getIdByIndex","$removeAt","move","clearAll","master","arraysEqual","arr1","arr2","quick","oldOrder","serialize","eachItem","rule","filteredOrder","from","to","Infinity","ret","getItems","_getNullIfUndefined","getFirst","getLast","getNext","getPrev","$powerArray","$each","$map","$filter","TreeDataStore","_branches","$parentProperty","parentProperty","rootId","$getRootId","val","$openInitially","openInitially","eachParent","$open","_buildTree","setParent","getParent","_add_branch","$level","calculateItemLevel","parentIndex","targetIndex","_move_branch","$rendered_parent","_replace_branch_child","_traverseBranches","branch","itemId","taskId","items","sid","getBranchIndex","source_pid","tbranch","hasChild","childId","parentId","pid","getSiblings","siblings","level","_setParentInner","new_pid","startItem","added_already","old_parent","new_parent","old_id","new_id","newbranch","field","desc","criteria","original_criteria","els","temp","dateRangeResolver","getSubtaskDates","defaultRangeResolver","resolveConfigRange","range","end","start_interval","_scale_range_unit","scale_unit","scale_offset_minimal","_init_tasks_range","calculateEndDate","duration","_min_date","_max_date","_adjust_scales","fit_tasks","old_min","old_max","copyLinkIdsArray","linkIds","targetHash","isLinkExists","getLink","copyLinkIds","$source","$target","getSubtreeLinks","isTaskExists","getTask","eachTask","getSubtreeTasks","calendarArgumentsHelper","getWorkHoursArguments","setWorkTimeArguments","unsetWorkTimeArguments","isWorkTimeArguments","duration_unit","calendar","getClosestWorkTimeArguments","dir","getDurationConfig","start","_getStartEndConfig","param","argumentType","duration_step","getDurationArguments","hasDurationArguments","calculateEndDateArguments","Gantt","getGanttInstance","_seed","plugin","_ganttPlugin","_internal_id","$syncFactory","DHXGantt","version","keys","edit_save","edit_cancel","$inject","ajax","dnd","setService","templatesLoader","StateService","stateService","registerProvider","selected_task","getSelectedId","domEvents","_eventRemoveAll","uiApi","$mouseEvents","layersApi","layersService","register","services","service","layout","scrollX","scrollY","finish_to_start","start_to_start","finish_to_finish","start_to_finish","types","project","milestone","work_time","correct_work_time","cascade_delete","autoscroll","autoscroll_speed","show_links","show_task_cells","branch_loading","branch_loading_property","show_loading","show_chart","show_grid","min_duration","xml_date","api_date","start_on_monday","server_utc","show_progress","select_task","scroll_on_click","preserve_scroll","readonly","date_grid","drag_links","drag_progress","drag_resize","drag_project","drag_move","drag_mode","progress","round_dnd_dates","link_wrapper_width","root_id","tree","align","time_step","date_scale","task_date","time_picker","task_attribute","layer_attribute","buttons_left","_migrate_buttons","dhx_save_btn","dhx_cancel_btn","dhx_delete_btn","buttons_right","lightbox","sections","map_to","focus","project_sections","milestone_sections","single_date","drag_lightbox","details_on_create","details_on_dblclick","initial_scroll","task_scroll_offset","order_branch","order_branch_free","grid_resizer_column_attribute","grid_resizer_attribute","keep_grid_width","grid_resize","show_unscheduled","readonly_property","editable_property","calendar_property","resource_calendars","type_renderers","open_tree_initially","optimize_render","prevent_default_scroll","show_errors","wai_aria_attributes","cache","method","DOMParser","parseFromString","ActiveXObject","async","loadXML","xmltop","tagname","xhr","status","xml","responseXML","responseText","getElementsByTagName","xpath","xpathExp","docObj","selectNodes","first","ownerDocument","evaluate","XPathResult","ANY_TYPE","iterateNext","query","_call","url","headers","onLoad","getSync","put","postData","del","post","postSync","getLong","postLong","longParams","isQt","match","onreadystatechange","readyState","xmlDoc","filePath","getTime","key","setRequestHeader","toUpperCase","send","urlSeparator","month_short","month_short_hash","month_full","month_full_hash","date_part","old","setHours","hour_start","getHours","getDate","getMonth","getFullYear","setTime","time_part","getTimezoneOffset","week_start","shift","getDay","month_start","setDate","quarter_start","res_month","setMonth","year_start","day_start","getMinutes","setMinutes","minute_start","getSeconds","setSeconds","getMilliseconds","setMilliseconds","_add_days","inc","ndate","setYear","add_quarter","to_fixed","num","format","utc","dateToStr","Function","getISOWeek","str_to_date","splt","mask","strToDate","dateString","nday","first_thursday","year_number","ordinal_date","getUTCISOWeek","convert_to_utc","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","parseDate","copyDomEvent","metaKey","shiftKey","ctrlKey","altKey","DnD","_obj","_settings","inputMethods","getInputMethods","_drag_start_timer","clearDragTimer","down","accessor","original_target","touch","dragStart","touch_drag","up","traceDragEvents","domElement","inputMethod","mousemove","dragMove","limited_mousemove","dragScroll","preventDefault","cancelBubble","updates_per_second","mouseup","dragEnd","checkPositionChange","diff_x","diff_y","sqrt","pow","abs","sensitivity","initDnDMarker","marker","backupEventTarget","domEvent","getEvent","cloneNode","backup_element","touchEventsSupported","createEvent","touches","elementFromPoint","pointerEnabled","pointerType","msPointerEnabled","MSPOINTER_TYPE_MOUSE","clearTimeout","started","getPosition","_prevent_touch_scroll","_touch_feedback","initTemplate","initial","template_name","regTemplates","initTemplates","gantt_save_btn","icon_save","gantt_cancel_btn","icon_cancel","gantt_delete_btn","icon_delete","xml_format","progress_text","task_text","text","task_class","grid_row_class","task_row_class","task_cell_class","grid_indent","grid_folder","grid_file","grid_open","grid_blank","isUnscheduledTask","task_unscheduled_time","grid_date_format","task_time","link_class","link_description","drag_link","from_start","to_start","link_start","link_end","drag_link_class","isLinkAllowed","tooltip_date_format","tooltip_text","stateProviders","internal","provider","unregisterProvider","usercall","modalBox","_dhx_msg_cfg","modal_key","which","keyCode","messageBox","keyboard","click","modality","cover","onkeydown","buttonAriaAttrs","messageButtonAttrString","info","position","message","onclick","messageInfoAttr","expire","timers","getFirstDefined","values","_boxStructure","ok","cancel","contentId","messageModalAttr","setAttribute","inner","title","message_ok","message_cancel","buttons","btn","_createBox","alertPopup","confirmPopup","boxPopup","box_params","params","alertBox","confirmBox","focusable","hideAll","popups","confirm","modalbox","attachInitializer","initializer","ext","onCreated","onInitialized","onDestroyed","uiFactory","createFactory","registerView","Resizer","Scrollbar","mainLayoutInitializer","ViewCell","ViewLayout","mainTimelineInitializer","mainGridInitializer","ResourceGrid","ResourceTimeline","layersEngine","createLayers","gridRenderer","renderTaskBg","renderTaskBar","renderLink","ui","parentView","createView","creator","createdViews","configure","reset","viewConstructor","ViewSettings","extendSettings","parentSettings","own","parentConfig","parentTemplates","$getTemplates","createMouseHandler","addEventTarget","eventHandlers","callHandler","eventName","args","onClick","locate","findEventHandlers","callEventHandlers","multiselect","selectTask","onContextMenu","src","linkId","returnValue","hash","delegateHandlers","handlerResult","onDoubleClick","doubleclick","showLightbox","onMouseMove","_last_move_event","contextMenu","global","createLayerFactory","createLayerEngine","previusSiblingContainer","defaultContainerSibling","createGroup","filters","addTaskLayer","_getTaskLayers","getLayers","removeTaskLayer","_clearTaskLayers","addLinkLayer","_getLinkLayers","removeLinkLayer","_clearLinkLayers","mergeFilters","filter_methods","filter_method","renderFactoryProvider","layerFactory","renderFactory","get_container","rel_root","defaultFilters","renderGroup","tempCollection","renderers","_add","pending","topmost","rel","getRenderer","eachLayer","rendererFactory","task_area_renderers","renderOne","render_item","remove_item","dom","append","task_area_pulls","clear_container","render_items","buffer","createDocumentFragment","vis","replace_item","item_id","newNode","replaceChild","restore","change_id","oldid","newid","clearRenderers","$cell","sizes","byMaxSize","otherCell","childConfig","$initialized","unload","outerX","outerY","childSize","ResizerCell","startBackSize","startFrontSize","_moveHandler","_moveResizer","_resizer","_upHandler","newSizes","_getNewSizes","back","front","_setSizes","_setBackground","_clearResizer","_clearListeneres","_startOnMove","_cancelDND","_callStartDNDEvent","_xMode","_behind","_front","_startDND","stop","_eachGroupItem","_getSiblings","_isPosChanged","_downHandler","_setResizer","_positions","timestamp","now","next","classes","overflow","_getDirection","_getResizePosition","behindSide","behindMin","frontSide","frontMin","newBehindSide","newFrontSide","_getGroupName","resizers","_getGroupResizePosition","positions","minMax","av","nextX","nextY","_setGravity","frontSize","behindSize","frontG","behindG","newFrontG","newBehindG","_assignNewSizes","$layout","ScrollbarCell","_scrollHorizontalHandler","_scrollVerticalHandler","_outerScrollVerticalHandler","_outerScrollHorizontalHandler","_mouseWheelHandler","scroll_size","_isHorizontal","scrollPosition","eachCell","_isVertical","_initVertical","_initHorizontal","_initMouseWheel","_initLinkedViews","_getRootParent","_eachView","_getLinkedViews","$scroll_hor","$scroll_ver","_updateLinkedViews","scrollHorizontally","_scrolling","codeScrollLeft","oldSize","scrollVertically","_wheel_time","_touch_scroll_active","_oldLeft","_getScrollSize","scrollSize","outerSize","isHorizontal","linked","scrollProperty","innerSizeProperty","outerProperty","_getScrollOffset","cellScrollSize","nonScrollableSize","scrollableViewPortSize","outerScroll","innerScroll","getScrollState","visible","scrollSizes","_setScrollSize","toggleVisibility","_getScaleOffset","parentLayout","vparent","_oldTop","_checkWheelTarget","targetNode","connectedViews","ff","wx","deltaX","wheelDeltaX","wy","deltaY","wheelDelta","oldLeft","detail","oldTop","getSum","setSumWidth","sum_width","parts","oldWidth","adjustSize","splitSize","full","shared","min_coll_width","container_width","minDate","maxDate","heights","configs","main_scale","initScaleConfig","initColSizes","limitVisibleRange","unshift","alineScaleColumns","reverseScale","setPosSettings","indexes","trace_indexes","skip","probe","isWorkTime","min_col_width","line_height","cont_width","column_count","eachColumn","iterateScales","lower_scale","upper_scale","upper_dates","lower_dates","prevUpper","target_index","upper_start","upper_end","lower_start","lower_end","targetWidth","curr","tzOffset","_correct_dst_change","dates","lastDate","outDate","createStaticBgHelper","renderBgCanvas","totalHeight","getContext","styleParams","getCellStyles","png","createBackgroundTiles","bgDivs","createBgDivs","fragment","getColumnWidths","widths","differentWidths","parseRgb","rgbCss","exec","r","g","getUrlFromCache","canvasBgCache","getHashKey","cellStyles","bottomBorderColor","rightBorderColor","getStyleElement","staticBgStyleId","cacheUrl","generateBgUrl","drawDot","color","matrix","rowLength","canvas","context","rowHeight","image","createImageData","imageSmoothingEnabled","verticalLineWidth","rightBorderWidth","verticalLineColor","w","horizontalLineWidth","bottomBorderWidth","horizontalLineColor","row","putImageData","toDataURL","getCssClass","styleHTML","bgImage","bgTiles","tile","prevCell","divs","prevWidth","leftPos","maxTileSize","appVersion","currentTop","tileWidth","currentHeight","whiteSpace","rowStyles","getPropertyValue","createResizer","grid","_render_grid_header_resize","totalWidth","resize_el","gridSeparatorAttr","_grid_resize","column_before_start","column_index","column_after_start","drag_index","column_drag_move","dd","target_column","pointerPosition","minPointerPosition","maxPointerPosition","markerStartPosition","marker_width","limit_max","column_drag_end","dnd_sensitivity","resourceStoreMixin","resource_store","resourceRow","createTaskRenderer","_render_task_element","painters","getTaskType","defaultRenderer","_task_default_render","_isAllowedUnscheduledTask","taskType","padd","link_line_width","_render_task_progress","_render_task_content","textColor","_combine_item_class","progressColor","_render_leftside_content","_render_rightside_content","setTaskBarAttr","isReadonly","isSummaryTask","_render_pair","outer","showLinkPoints","link_source_id","_render_side_content","_get_link_crossing_css","leftside_text","rightside_text","cond","_get_conditions","ln","tp","done","pr","backgroundColor","opacity","wrapper","drag","markerPos","leftside","basic","drag_id","link_target_id","highlight_critical_path","isCriticalTask","link_landing_area","from_id","link_from_start","link_to_start","allowDrag","dragClass","createTaskBgRender","_render_bg_line","j","cssTemplate","odd","getGlobalTaskIndex","createLinkRender","_render_link_element","dots","path_builder","get_points","lines","drawer","get_lines","isCriticalLink","link_arrow_size","render_line","endpoint","_render_link_arrow","borderColor","linkAttr","point","line_width","dirs","getMilestonePosition","milestoneHeight","getTaskHeight","milestoneWidth","current_pos","path","line_to","get_path","line","_get_line","get_wrapper_sizes","wrapper_size","get_line_sizes","line_size","marginTop","marginLeft","innerPos","get_direction","vect","current","point_to","pt","get_endpoint","xy","e_y","e_x","shiftX","lineType","get_line_type","forward","sign","createGridLineRender","_render_grid_item","has_child","textValue","aria","gridAddButtonAttrString","gridCellAttrString","$dataprocessor_class","css_template","taskRowAttr","rowDnd","extendGantt","initEvents","extendDom","clearEvents","_is_icon_open_click","showDate","conf","sorting_method","createTask","_init_dnd","getStore","hideQuickInfo","_hideQuickInfo","datastore","initial_open_state","outerHTML","$transparent","refreshData","lastTaskOfLevel","last_item","_getGridPos","gridHeight","_getTargetY","_getTaskByY","dropIndex","allowedLevel","over","targetY","nextId","prevId","$drop_target","taskDnD","linkDnD","timeline","_linksDnD","createLinkDND","_tasksDnD","createTaskDND","_attachDomEvents","_attachStateProvider","_clearDomEvents","_clearStateProvider","getTaskTop","getTaskPosition","roundTaskDates","getTaskNode","getLinkNode","_delete_link_handler","question","confirm_link_deleting","_dhtmlx_confirm","deleteLink","coll","coll_date","scale_step","dragMultiple","_events","before_start","before_finish","after_finish","_handlers","_domEvents","clear_drag_state","set_actions","drag_from_start","evs","stage","_move","_resize","_resize_progress","on_mouse_move","on_mouse_down","on_mouse_up","start_x","start_y","coords_x","_drag_task_coords","_init_task_timing","diffValue","_find_max_shift","dragItems","correctShift","minX","maxX","maxShift","minShift","new_start","new_end","obj_s_x","obj_e_x","_mouse_position_change","oldPos","newPos","_is_number","isFinite","start_drag","sX","sY","_start_dnd","_update_on_move","_update_item_on_move","original","refreshTask","curr_date","initialDrag","childDrag","_update_parents","_get_drag_mode","_fix_dnd_scale_time","fixStart","roundDate","_fix_working_times","getClosestWorkTime","correctTaskWorkTime","_finalize_mouse_up","_fireEvent","updateTask","_dhx_changed","modes","dragProperty","trigger","round_task_dates","drag_state","initTaskDND","_tasks_dnd","initLinksDND","getVisibleMilestoneWidth","origWidth","isMilestone","getDndState","_link_source_task","_link_target_task","_link_source_task_start","_link_target_task_start","_link_landing","getLinePos","isStart","taskPos","xEnd","yEnd","updateMarkedHtml","advanceMarker","resetDndState","showDirectingLine","s_x","s_y","getDirectionLine","link_direction_class","dist","tan","angle","atan","coordinateCircleQuarter","PI","sin","cos","ieTransform","shiftLeft","shiftTop","eX","eY","_direction","removeDirectionLine","_dir_start","landing","prevTarget","prevLanding","prevToStart","targ","_dir_end","targetChanged","_get_link_type","addLink","getVerticalScrollbar","getHorizontalScrollbar","_legacyGridResizerClass","gridResizer","mainTimeline","showGrid","colsWidth","grid_limits","_getVerticalScrollbar","_getHorizontalScrollbar","scrollState","gridFirst","initialWidth","prevCellWidth","nextCellWidth","viewCell","limits","newBehindSize","newFrontSize","oldBackSize","oldFrontSize","newBackSize","initDataStores","sync_link","sourceTask","targetTask","sync_link_delete","sync_links","linksStore","mapEvents","mapFrom","mapTo","sourceEvent","targetEvent","_init_task","_set_default_task_timing","_init_link","facade","facadeFactory","createDatastore","$index","resetProjectDates","_update_flags","action","batch_update","oldState","calculateScaleRange","newState","isTaskVisible","treeHelper","deletedLinks","onItemLoading","onBeforeAdd","onAfterAdd","onBeforeUpdate","onAfterUpdate","onBeforeDelete","onAfterDelete","onIdChange","onBeforeItemMove","onAfterItemMove","onFilterItem","onItemOpen","onItemClose","onBeforeSelect","onAfterSelect","onAfterUnselect","getDatastores","storeNames","createFacade","createDatastoreFacade","createTasksFacade","createLinksFacade","createDatastoreSelect","datastoreRender","$StoreType","storeList","bindDataStore","stores","refresh_links","refreshLink","userdata","_clear_data","unselectTask","unselect","createTasksDatastoreFacade","getTaskByTime","addTask","deleteTask","getTaskCount","getVisibleTaskCount","getTaskIndex","startTask","changeTaskId","calculateTaskLevel","getTaskByIndex","moveTask","createLinksStoreFacade","getLinkCount","getLinks","updateLink","changeLinkId","createDataStoreSelectMixin","selectedId","storeRenderCreator","skipRepaint","refreshId","renders","itemRepainter","renderItem","renderItems","addDataProcessorHooks","detachDataProcessor","dp","setGanttMode","_getRowData","afterUpdate","oldAfterUpdate","_dp","_change_id","_row_style","_delete_task","_sendTaskOrder","dataProcessorHandlers","extendDataProcessor","_ganttMode","_in_progress","_invalid","updatedRows","reqUrl","_tMode","pref","substr","taskTiming","_get_task_timing_mode","$no_start","$no_end","action_param","getUserData","row_id","setUpdated","attachDataProcessorEvents","clientSideDelete","updated","clientOnly","getTaskLinks","cascadeDelete","dpMode","updateMode","setUpdateMode","cascade","sendAllData","_tSend","_waitMode","itemLinks","batchUpdate","_serverProcessor","substring","serverProcessor","dataProcessor","_dp_init","setTransactionMode","inserted","deleted","invalid","error","_methods","liveUpdateHooks","setUserData","insertCallback","upd","_xmlNodeToJSON","methods","isExist","deleteCallback","delete","patchDataProcessor","dataprocessor","serverProcessorURL","autoUpdate","_headers","_payload","post_delim","mandatoryFields","messages","invalid_cell","enableUTFencoding","total","payload","_endnm","escape","_utf","encodeURIComponent","setDataColumns","_columns","getSyncState","enableDataNames","enablePartialDataSend","_changed","rowId","findRow","existing","set_invalid","is_invalid","_clearUpdateFlag","markRow","sendData","details","checkBeforeUpdate","mytype","_h2","editStop","_beforeSendData","_sendData","serialize_one","stack","security_key","_applyPayload","a1","that","ids","a3","_user","a4","gr_id","JSON","stringify","valid","_getAllData","has_one","setVerificator","verifFunction","clearVerificator","pattern","defineAction","_uActions","afterUpdateCallback","tid","btag","correct","soid","tag","finalizeUpdate","cleanUpdate","atag","anObj","setOnAfterUpdate","enableDebug","setOnBeforeUpdateHandler","func","setAutoUpdate","interval","user","_need_update","_update_busy","xml_node","afterAutoUpdate","fullSync","setInterval","loadUpdate","getUpdates","_v","nodeValue","_a","vers","upds","isScrollState","dragMarker","isResize","isLink","isMove","defineDelayTimeout","delayTimeout","speed","tick","scrollSpeed","autoscroll_delay","scrollDelay","defineScrollInterval","startPos","eventPos","clearInterval","autoscrollInterval","isScroll","posX","posY","need_scroll","currentScrollTop","scrollOuterHeight","inner_height","scrollInnerHeight","currentScrollLeft","scrollOuterWidth","inner_width","scrollInnerWidth","autoscroll_step","scrollStep","boxSize","startCoord","scrollRange","createMethod","disableMethod","methodName","dummyMethod","restoreMethod","disableMethods","methodsHash","restoreMethods","batchUpdatePayload","console","isActive","noRedraw","dp_mode","call_dp","resetProjects","createWbs","_needRecalc","_isRecalcNeeded","_isGroupSort","_groups","is_active","_getWBSCode","_calcWBS","$virtual","$wbs","_setWBSCode","getWBSCode","_isFirst","_prevSibling","_wbs","_parent","wbs","jQuery","$","fn","dhx_gantt","each","newgantt","dhtmlx","attaches","attachGantt","cmp","attachObject","dataType","dataObj","vs","border","gridId","gridObj","dhtmlXCellObject","createResourceMethods","getTaskBy","propertyName","propertyValue","filterResourceTasks","getResourceTasks","resourceIds","cacheKey","resourceHash","resourceTaskCache","getResourceLoad","resourceId","resourceProperty","calculateResourceLoad","timegrid","currDate","timetable","renderResourceLine","resource","resource_property","resource_cell_class","resource_cell_value","resourceLoadCache","renderLine","filterTasks","needLoading","_load_url","old_has_children","load","_load_type","visibleColumns","getGridColumn","stripHTMLLite","htmlText","htmlTags","extraSpaces","escapeQuotes","singleQuotes","isDisabled","getAttributeString","attributes","aria-label","_taskCommonAttr","isSelectedTask","linkTypes","toStart","fromStart","lightboxHiddenAttr","lightboxVisibleAttr","lightboxAttr","lightboxButtonAttrString","buttonName","role","tabindex","lightboxHeader","headerText","lightboxSelectAttrString","time_option","years","months","hours","minutes","lightboxDurationInputAttrString","section","column_duration","aria-valuemin","attrs","new_task","buttonLabel","quickInfoAttr","quickInfoHeaderAttrString","quickInfoHeader","quickInfoButtonAttrString","tooltipAttr","tooltipVisibleAttr","tooltipHiddenAttr","cl","on_load","resp","_process_loading","collections","_load_collections","firstTask","showTask","collections_loaded","collection","serverList","option","option_key","$ignore","json","dhx_security","serializeTask","_copyObject","serializeLink","_copyLink","rawLinks","attrs_only","nodeType","_getCollections","loader","opts","itms","itm","_getXML","toptag","getXMLTopNode","skey","oldxml","startdate","est","enddate","predecessortasks","CalendarManager","TimeCalculator","worktimeFacadeFactory","manager","timeCalculator","_calendars","createArgumentsHelper","CalendarWorktimeStrategy","_getDayHoursForMultiple","calendars","currPos","is_work_hour","reduce","acc","_is_work_hour","mergeCalendars","newCalendar","createCalendar","worktime","_convertWorktimeSettings","settings","parentCalendar","defaults","fulltime","apiCore","_tryChangeCalendarSettings","getCalendar","createDefaultCalendars","getCalendars","getTaskCalendar","calendarId","addCalendar","worktimes","deleteCalendar","restoreConfigCalendars","CalendarWorkTimeStrategy","argumentsHelper","_workingUnitsCache","Cache","_getUnitOrder","_timestamp","UTC","_checkIfWorkingUnit","_isWorkTime","_is_work_day","_getWorkHours","_internDatesPull","_nextDate","_getWorkUnitsBetweenGeneric","stepStart","stepEnd","checkFirst","checkLast","isLastStep","_getHoursPerDay","_getWorkHoursForRange","_getWorkUnitsBetweenHours","firstDayStart","firstDayEnd","lastDayStart","lastDayEnd","startPart","endPart","hourRange","_getCalendar","_setCalendar","backup","_isEmptyCalendar","datesArray","isFullWeekSet","checkFullArray","getWorkHours","setWorkTime","unsetWorkTime","reset_calendar","is_work_unit","calculateDuration","hasDuration","mult","_calculateEndDate","added","_getClosestWorkTime","future_target","prev_target","both_directins","WorkUnitsCache","_cache","time","calendarManager","$disabledCalendar","NoWorkTimeCalendar","CalendarDisabledTimeStrategy","_calculateDuration","fixedUnits","createWorktimeFacade","_hasDuration","unscheduled","_defaultTaskDate","parent_id","startDate","$new","_lightbox_id","task_type","$rendered_type","task_mode","dirty","taskMode","_assign_project_dates","getSubtaskDuration","has_changed","oldStart","oldEnd","upper","lower","colIndex","steps","_is_chart_visible","_get_type_name","type_value","_lightbox_methods","_lightbox_template","getLightbox","_center_lightbox","showCover","_fill_lightbox","_get_timepicker_step","getLabel","_get_typed_lightbox_config","options","updateCollection","list_name","resetLightbox","getLightboxType","_lightbox_type","_lightbox","_is_lightbox_timepicker","wide_form","onmousedown","_ready_to_dnd","onselectstart","cursor","_init_dnd_events","sns","_render_sections","ds","t_ds","labelBlock","inputBlock","nextSibling","inputId","resizeLightbox","_init_lightbox_events","block","form_blocks","con","lightbox_additional_height","scroll_top","scroll_left","view_height","_cover","_document_height","_scroll_height","lightbox_events","_save_lightbox","$click","hideLightbox","_cancel_lightbox","sec","button_click","previousSibling","buttonTarget","getLightboxValues","_resolve_default_mapping","mapping","time_optional","duration_optional","get_value","hideCover","_custom_lightbox","_set_lightbox_values","lightbox_header","default_value","set_value","getLightboxSection","getValue","setValue","get_template_control","control","get_select_control","get_textarea_control","get_time_control","_move_while_dnd","_finish_dnd","_dnd_start_lb","gantt_unselectable","lb","_lb_start","_focus","getTimePicker","time_format","_time_format_order","dt","limit_time_select","last_hour","first_hour","start_year","end_year","year_range","tdate","_time_values","_fill_lightbox_select","map","_get_input","_dhx_onchange","onchange","_time_format_size","auto_end_date","_update_lightbox_select","mapped_fields","singleDate","_calc_date","_get_start_date","_get_duration","endspan","_change_duration","inps","btns","charCode","duration_val","_filter","_display","allow_root","root_label","tmpDom","newOptions","onselect","_silent_redraw_lightbox","oldType","formData","updTask","_extend_to_optional","lightbox_block","optional_time","disable","enable","disabled","update_block","button_text","checkType","typeselect","oldOnChange","changeLightboxType","activate","_cached_functions","update_if_changed","active","critical_path_mode","wrap_methods","_prefetch_originals","prefetch","methodname","optimizer","argumentsArray","get_arguments_hash","cached_values","has_cached_value","get_cached_value","cache_value","arguments_hash","is_date","stringify_argument","deactivate","setup","override_gantt","gantt_methods","deactivTimeout","_configure","_get_skin","skin","href","skins","skinset","_second_column_width","_third_column_width","_redefine_lightbox_buttons","resetSkin","skyblue","meadow","terrace","broadway","_config_buttons_left","_config_buttons_right","material","indx","getTaskDND","touch_feedback","touch_feedback_duration","vibrate","_touch_events","touchHandlers","names","block_action","cloneTaskRendered","current_target","scroll_state","dblclicktime","action_mode","scroll_mode","action_start","long_tap_timer","new_scroll_state","_locate_css","_touch_drag","day_full","day_short","icon_details","icon_edit","confirm_closing","confirm_deleting","section_description","section_time","section_type","column_wbs","column_text","column_start_date","column_add","type_task","type_project","type_milestone","weeks","resizeDelay","_reinit","edit","confirm_deleting_title","_scroll_state","x_pos","y_pos","x_inner","y_inner","oldV","oldH","newV","newH","date_x","scroll_to","visible_date","new_pos","setSizes","scrollVer","scrollHor","horState","verState","targetAttribute","_locateHTML","getTaskRowNode","prevOffset","time_unit","offsetChanged","check","deprecated","badCode","goodCode","formatting","log","warn","dhtmlxMethods","dynMethods"],"mappings":"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","file":"dhtmlxgantt.js","sourcesContent":["/*!\n * @license\r\n * \r\n * dhtmlxGantt v.5.1.0 Professional\r\n * This software is covered by DHTMLX Enterprise License. Usage without proper license is prohibited.\r\n * \r\n * (c) Dinamenta, UAB.\r\n * \n */\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 22);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dateHelper = __webpack_require__(4);\r\n\r\nfunction copy(object) {\r\n\tvar i, t, result; // iterator, types array, result\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\t\tresult = {};\r\n\t\tt = [Array,Number,String,Boolean];\r\n\t\tfor (i=0; i<t.length; i++) {\r\n\t\t\tif (object instanceof t[i])\r\n\t\t\t\tresult = i ? new t[i](object) : new t[i](); // first one is array\r\n\t\t}\r\n\r\n\t\tif (dateHelper.isDate(object)) {\r\n\t\t\tresult = new Date(object);\r\n\t\t}\r\n\r\n\t\tfor (i in object) {\r\n\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n}\r\n\r\nfunction mixin (target, source, force){\r\n\tfor (var f in source)\r\n\t\tif (((target[f] === undefined) || force)) target[f]=source[f];\r\n\treturn target;\r\n}\r\n\r\nfunction defined(obj) {\r\n\treturn typeof(obj) != \"undefined\";\r\n}\r\n\r\nvar seed;\r\nfunction uid() {\r\n\tif (!seed)\r\n\t\tseed = (new Date()).valueOf();\r\n\r\n\tseed++;\r\n\treturn seed;\r\n}\r\n\r\n//creates function with specified \"this\" pointer\r\nfunction bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n}\r\n\r\nfunction event(el, event, handler, capture){\r\n\tif (el.addEventListener)\r\n\t\tel.addEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.attachEvent)\r\n\t\tel.attachEvent(\"on\"+event, handler);\r\n}\r\n\r\nfunction eventRemove(el, event, handler, capture){\r\n\tif (el.removeEventListener)\r\n\t\tel.removeEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.detachEvent)\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\tcopy: copy,\r\n\tdefined: defined,\r\n\tmixin: mixin,\r\n\tuid: uid,\r\n\tbind: bind,\r\n\tevent: event,\r\n\teventRemove: eventRemove\r\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n//returns position of html element on the page\r\nfunction elementPosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = (document.documentElement ||\r\n\t\t\tdocument.body.parentNode ||\r\n\t\t\tdocument.body);\r\n\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\nfunction isVisible(node){\r\n\tvar display = false,\r\n\t\tvisibility = false;\r\n\tif(window.getComputedStyle){\r\n\t\tvar style = window.getComputedStyle(node, null);\r\n\t\tdisplay = style[\"display\"];\r\n\t\tvisibility = style[\"visibility\"];\r\n\t}else if(node.currentStyle){\r\n\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t}\r\n\treturn (display != \"none\" && visibility != \"hidden\");\r\n}\r\n\r\nfunction hasNonNegativeTabIndex(node){\r\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n}\r\n\r\nfunction hasHref(node){\r\n\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\treturn !!node.getAttribute(\"href\");\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction isEnabled(node){\r\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\treturn !node.hasAttribute(\"disabled\");\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction getFocusableNodes(root){\r\n\tvar nodes = root.querySelectorAll([\r\n\t\t\"a[href]\",\r\n\t\t\"area[href]\",\r\n\t\t\"input\",\r\n\t\t\"select\",\r\n\t\t\"textarea\",\r\n\t\t\"button\",\r\n\t\t\"iframe\",\r\n\t\t\"object\",\r\n\t\t\"embed\",\r\n\t\t\"[tabindex]\",\r\n\t\t\"[contenteditable]\"\r\n\t].join(\", \"));\r\n\r\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tvar node = nodesArray[i];\r\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\tif(!isValid){\r\n\t\t\tnodesArray.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn nodesArray;\r\n}\r\n\r\nfunction getScrollSize(){\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar width = div.offsetWidth-div.clientWidth;\r\n\tdocument.body.removeChild(div);\r\n\r\n\treturn width;\r\n}\r\n\r\nfunction getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = '';\r\n\r\n\treturn _trimString(className);\r\n}\r\n\r\nfunction addClassName(node, className){\r\n\tif (className && node.className.indexOf(className) === -1) {\r\n\t\tnode.className += \" \" + className;\r\n\t}\r\n}\r\n\r\nfunction removeClassName(node, name) {\r\n\tname = name.split(\" \");\r\n\tfor (var i = 0; i < name.length; i++) {\r\n\t\tvar regEx = new RegExp('\\\\s?\\\\b' + name[i] + '\\\\b(?![-_\\.])', \"\");\r\n\t\tnode.className = node.className.replace(regEx, \"\");\r\n\t}\r\n}\r\n\r\nfunction toNode(node) {\r\n\tif (typeof node === \"string\") {\r\n\t\treturn (document.getElementById(node) || document.querySelector(node) || document.body);\r\n\t}\r\n\treturn node || document.body;\r\n}\r\n\r\nvar _slave = document.createElement(\"div\");\r\nfunction insert(node, newone) {\r\n\t_slave.innerHTML = newone;\r\n\tvar child = _slave.firstChild;\r\n\tnode.appendChild(child);\r\n\treturn child;\r\n}\r\n\r\nfunction remove(node) {\r\n\tif (node && node.parentNode) {\r\n\t\tnode.parentNode.removeChild(node);\r\n\t}\r\n}\r\n\r\nfunction getChildren(node, css) {\r\n\tvar ch = node.childNodes;\r\n\tvar len = ch.length;\r\n\tvar out = [];\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tvar obj = ch[i];\r\n\t\tif (obj.className && obj.className.indexOf(css) !== -1) {\r\n\t\t\tout.push(obj);\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n}\r\n\r\nfunction getTargetNode(e){\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te=e||window.event;\r\n\t\ttrg=e.target||e.srcElement;\r\n\t}\r\n\treturn trg;\r\n}\r\n\r\nfunction locateAttribute(e, attribute) {\r\n\tif(!attribute) return;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\r\n\twhile (trg){\r\n\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\r\n\t\t\tvar test = trg.getAttribute(attribute);\r\n\t\t\tif (test) return trg;\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction _trimString(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n}\r\n\r\nfunction locateClassName(e, classname, strict){\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\tvar css = '';\r\n\tvar test = false;\r\n\twhile (trg){\r\n\t\tcss = getClassName(trg);\r\n\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!_trimString(css.charAt(ind - 1)));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!_trimString(css.charAt(ind + classname.length)));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/*\r\nevent position relatively to DOM element\r\n */\r\nfunction getRelativeEventPosition(ev, node){\r\n\tif (ev.pageX || ev.pageY)\r\n\t\tvar pos = {x: ev.pageX, y: ev.pageY};\r\n\r\n\tvar d = document.documentElement;\r\n\tvar pos = {\r\n\t\tx: ev.clientX + d.scrollLeft - d.clientLeft,\r\n\t\ty: ev.clientY + d.scrollTop - d.clientTop\r\n\t};\r\n\r\n\tvar box = elementPosition(node);\r\n\tpos.x = pos.x - box.x + node.scrollLeft;\r\n\tpos.y = pos.y - box.y + node.scrollTop;\r\n\treturn pos;\r\n}\r\n\r\n\r\nfunction isChildOf(child, parent){\r\n\twhile(child && child != parent) {\r\n\t\tchild = child.parentNode;\r\n\t}\r\n\treturn child == parent;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetNodePosition: elementPosition,\r\n\tgetFocusableNodes: getFocusableNodes,\r\n\tgetScrollSize: getScrollSize,\r\n\tgetClassName: getClassName,\r\n\taddClassName: addClassName,\r\n\tremoveClassName: removeClassName,\r\n\tinsertNode: insert,\r\n\tremoveNode: remove,\r\n\tgetChildNodes: getChildren,\r\n\ttoNode: toNode,\r\n\tlocateClassName:locateClassName,\r\n\tlocateAttribute: locateAttribute,\r\n\tgetTargetNode: getTargetNode,\r\n\tgetRelativeEventPosition: getRelativeEventPosition,\r\n\tisChildOf: isChildOf,\r\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nvar EventHost = function(){\r\n\tthis._connected = [];\r\n\tthis._silent_mode = false;\r\n};\r\n\r\nEventHost.prototype = {\r\n\t_silentStart: function() {\r\n\t\tthis._silent_mode = true;\r\n\t},\r\n\t_silentEnd: function() {\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n};\r\n\r\nvar\tcreateEventStorage = function(obj) {\r\n\tvar dhx_catch = [];\r\n\tvar z = function(){\r\n\t\tvar res = true;\r\n\t\tfor (var i = 0; i < dhx_catch.length; i++){\r\n\t\t\tif (dhx_catch[i]){\r\n\t\t\t\tvar zr = dhx_catch[i].apply(obj, arguments);\r\n\t\t\t\tres=res&&zr;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\tz.addEvent=function(ev){\r\n\t\tif (typeof (ev) == \"function\")\r\n\t\t\treturn dhx_catch.push(ev)-1;\r\n\t\treturn false;\r\n\t};\r\n\tz.removeEvent=function(id){\r\n\t\tdhx_catch[id]=null;\r\n\t};\r\n\treturn z;\r\n};\r\n\r\nfunction makeEventable(obj){\r\n\r\n\tvar eventHost = new EventHost();\r\n\tobj.attachEvent=function(name, catcher, callObj){\r\n\t\tname='ev_'+name.toLowerCase();\r\n\t\tif (!eventHost[name])\r\n\t\t\teventHost[name] = createEventStorage(callObj||this);\r\n\r\n\t\treturn(name+':'+eventHost[name].addEvent(catcher)); //return ID (event name & event ID)\r\n\t};\r\n\tobj.attachAll = function(callback, callObj){\r\n\t\tthis.attachEvent('listen_all', callback, callObj);\r\n\t};\r\n\r\n\tobj.callEvent=function(name, arg0, callObj){\r\n\t\tif (eventHost._silent_mode) return true;\r\n\r\n\t\tvar handlerName = 'ev_'+name.toLowerCase();\r\n\r\n\t\tif (eventHost['ev_listen_all']){\r\n\t\t\teventHost['ev_listen_all'].apply(callObj || this, [name].concat(arg0));\r\n\t\t}\r\n\r\n\t\tif (eventHost[handlerName])\r\n\t\t\treturn eventHost[handlerName].apply(callObj || this, arg0);\r\n\t\treturn true;\r\n\t};\r\n\tobj.checkEvent=function(name){\r\n\t\treturn (!!eventHost['ev_'+name.toLowerCase()]);\r\n\t};\r\n\tobj.detachEvent=function(id){\r\n\t\tif (id){\r\n\t\t\tvar list = id.split(':');           //get EventName and ID\r\n\t\t\teventHost[list[0]].removeEvent(list[1]); //remove event\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function(){\r\n\t\tfor (var name in eventHost){\r\n\t\t\tif (name.indexOf(\"ev_\") === 0)\r\n\t\t\t\tdelete eventHost[name];\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = makeEventable;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (d, b) {\r\n\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\tfunction __() { this.constructor = d; }\r\n\td.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nfunction isDate(obj) {\r\n\tvar fields = [\r\n\t\t\"getFullYear\",\r\n\t\t\"getMonth\",\r\n\t\t\"getDate\"\r\n\t];\r\n\t\r\n\tif (obj && typeof obj == \"object\") {\r\n\t\tfor (var i=0; i<fields.length; i++) {\r\n\t\t\tif (!obj[fields[i]])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nmodule.exports = {\r\n\tisDate: isDate\r\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0),\r\n\tdomEventsScope = __webpack_require__(11),\r\n\teventable = __webpack_require__(2),\r\n\tdomHelpers = __webpack_require__(1);\r\n\r\nvar Cell = (function () {\r\n\t\"use strict\";\r\n\r\n\tfunction Cell(parent, config, factory, gantt) {\r\n\t\tif (parent) {\r\n\t\t\tthis.$container = domHelpers.toNode(parent);\r\n\t\t\tthis.$parent = parent;\r\n\t\t}\r\n\t\t// save config\r\n\t\tthis.$config = utils.mixin(config, {\r\n\t\t\theaderHeight: 33\r\n\t\t});\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$domEvents = gantt._createDomEventScope();\r\n\t\t// set id\r\n\t\tthis.$id = config.id || \"c\" + utils.uid();\r\n\r\n\t\tthis.$name = \"cell\";\r\n\t\tthis.$factory = factory;\r\n\r\n\t\teventable(this);\r\n\r\n\t}\r\n\r\n\tCell.prototype.destructor = function () {\r\n\t\tthis.$parent = this.$container = this.$view = null;\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.detach(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\t\tthis.$domEvents.detachAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t};\r\n\tCell.prototype.cell = function (id) {\r\n\t\treturn null;\r\n\t};\r\n\r\n\tCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$view.scrollLeft = left;\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$view.scrollTop = top;\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype.clear = function(){\r\n\t\tthis.getNode().innerHTML = \"\";\r\n\t\tthis.getNode().className = \"gantt_layout_content\";\r\n\t\tthis.getNode().style.padding = \"0\";\r\n\t};\r\n\r\n\tCell.prototype.resize = function (final) {\r\n\t\tif (this.$parent) {\r\n\t\t\treturn this.$parent.resize(final);\r\n\t\t}\r\n\r\n\t\tif(final === false){\r\n\t\t\tthis.$preResize = true;\r\n\t\t}\r\n\r\n\t\tvar topCont = this.$container;\r\n\t\tvar x = topCont.offsetWidth;\r\n\t\tvar y = topCont.offsetHeight;\r\n\t\tvar topSize = this.getSize();\r\n\t\tif (topCont === document.body) {\r\n\t\t\tx = document.body.offsetWidth;\r\n\t\t\ty = document.body.offsetHeight;\r\n\t\t}\r\n\t\tif (x < topSize.minWidth) {\r\n\t\t\tx = topSize.minWidth;\r\n\t\t}\r\n\t\tif (x > topSize.maxWidth) {\r\n\t\t\tx = topSize.maxWidth;\r\n\t\t}\r\n\t\tif (y < topSize.minHeight) {\r\n\t\t\ty = topSize.minHeight;\r\n\t\t}\r\n\t\tif (y > topSize.maxHeight) {\r\n\t\t\ty = topSize.maxHeight;\r\n\t\t}\r\n\t\tthis.setSize(x, y);\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif(!this.$preResize){\r\n\t\t//\tself.callEvent(\"onResize\", [x, y]);\r\n\t\t}\r\n\t\tthis.$preResize = false;\r\n\t};\r\n\r\n\tCell.prototype.hide = function () {\r\n\t\tthis._hide(true);\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.show = function (force) {\r\n\t\tthis._hide(false);\r\n\t\tif (force && this.$parent) {\r\n\t\t\tthis.$parent.show();\r\n\t\t}\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype._hide = function (mode) {\r\n\t\tif (mode === true && this.$view.parentNode) {\r\n\t\t\tthis.$view.parentNode.removeChild(this.$view);\r\n\t\t}\r\n\t\telse if (mode === false && !this.$view.parentNode) {\r\n\t\t\tvar index = this.$parent.cellIndex(this.$id);\r\n\t\t\tthis.$parent.moveView(this, index);\r\n\t\t}\r\n\t\tthis.$config.hidden = mode;\r\n\t};\r\n\tCell.prototype.$toHTML = function (content, css) {\r\n\t\tif (content === void 0) { content = \"\"; }\r\n\t\tcss = [(css || \"\"), (this.$config.css || \"\")].join(\" \");\r\n\t\tvar obj = this.$config;\r\n\t\tvar header = \"\";\r\n\t\tif (obj.raw) {\r\n\t\t\tcontent = typeof obj.raw === \"string\" ? obj.raw : \"\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!content) {\r\n\t\t\t\tcontent = \"<div class='gantt_layout_content' \"+(css ? \" class='\"+css+\"' \" : \"\")+\" >\" + (obj.html || \"\") + \"</div>\";\r\n\t\t\t}\r\n\t\t\tif (obj.header) {\r\n\t\t\t\tvar collapseIcon = obj.canCollapse ? \"<div class='gantt_layout_header_arrow'></div>\" : \"\";\r\n\t\t\t\theader = \"<div class='gantt_layout_header'>\" + collapseIcon + \"<div class='gantt_layout_header_content'>\" + obj.header + \"</div></div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"<div class='gantt_layout_cell \" + css + \"' data-cell-id='\" + this.$id + \"'>\" + header + content + \"</div>\";\r\n\t};\r\n\tCell.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tthis.init();\r\n\t};\r\n\tCell.prototype.getNode = function () {\r\n\t\treturn (this.$view.querySelector(\"gantt_layout_cell\") || this.$view);\r\n\t};\r\n\tCell.prototype.init = function () {\r\n\t\t// [NOT-GOOD] code is executed for each component, while it still has only one handler, it is no good\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tthis._headerClickHandler = function(e){\r\n\t\t\tvar cellId = domHelpers.locateAttribute(e, \"data-cell-id\");\r\n\t\t\tif(cellId == self.$id){\r\n\t\t\t\tself.toggle();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.delegate(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t};\r\n\tCell.prototype.toggle = function () {\r\n\t\tthis.$config.collapsed = !this.$config.collapsed;\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.getSize = function () {\r\n\t\tvar size = {\r\n\t\t\theight: this.$config.height || 0,\r\n\t\t\twidth: this.$config.width || 0,\r\n\t\t\tgravity: this.$config.gravity || 1,\r\n\t\t\tminHeight: this.$config.minHeight || 0,\r\n\t\t\tminWidth: this.$config.minWidth || 0,\r\n\t\t\tmaxHeight: this.$config.maxHeight || 100000,\r\n\t\t\tmaxWidth: this.$config.maxWidth || 100000\r\n\t\t};\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tvar mode = this.$config.mode === \"x\";\r\n\t\t\tsize[mode ? \"width\" : \"height\"] = size[mode ? \"maxWidth\" : \"maxHeight\"] = this.$config.headerHeight;\r\n\t\t}\r\n\t\treturn size;\r\n\t};\r\n\r\n\tCell.prototype.getContentSize = function(){\r\n\r\n\t\tvar width = this.$lastSize.contentX;\r\n\t\tif(width !== width*1){\r\n\t\t\twidth = this.$lastSize.width;\r\n\t\t}\r\n\r\n\t\tvar height = this.$lastSize.contentY;\r\n\t\tif(height !== height*1){\r\n\t\t\theight = this.$lastSize.height;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t};\r\n\r\n\tCell.prototype._getBorderSizes = function(){\r\n\t\tvar borders = {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\thorizontal: 0,\r\n\t\t\tvertical: 0\r\n\t\t};\r\n\t\tif(this._currentBorders){\r\n\t\t\tif(this._currentBorders[this._borders.left]){\r\n\t\t\t\tborders.left = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.right]){\r\n\t\t\t\tborders.right = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.top]){\r\n\t\t\t\tborders.top = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.bottom]){\r\n\t\t\t\tborders.bottom = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn borders;\r\n\r\n\t};\r\n\r\n\tCell.prototype.setSize = function (x, y) {\r\n\t\tthis.$view.style.width = x + \"px\";\r\n\t\tthis.$view.style.height = y + \"px\";\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar contentY = y - borders.vertical;\r\n\t\tvar contentX = x - borders.horizontal;\r\n\r\n\t\tthis.$lastSize = { x: x, y: y, contentX: contentX, contentY: contentY };\r\n\t\tif (this.$config.header) {\r\n\t\t\tthis._sizeHeader();\r\n\t\t}else{\r\n\t\t\tthis._sizeContent();\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._borders = {\r\n\t\t\"left\":\"gantt_layout_cell_border_left\",\r\n\t\t\"right\":\"gantt_layout_cell_border_right\",\r\n\t\t\"top\":\"gantt_layout_cell_border_top\",\r\n\t\t\"bottom\":\"gantt_layout_cell_border_bottom\"\r\n\t};\r\n\r\n\tCell.prototype._setBorders = function(css, view){\r\n\t\tif(!view) {\r\n\t\t\tview = this;\r\n\t\t}\r\n\t\tvar node = view.$view;\r\n\r\n\t\tfor( var i in this._borders){\r\n\t\t\tdomHelpers.removeClassName(node, this._borders[i]);\r\n\t\t}\r\n\r\n\t\tif(typeof css == \"string\"){\r\n\t\t\tcss = [css];\r\n\t\t}\r\n\r\n\t\tvar cssHash = {};\r\n\r\n\t\tfor(var i = 0; i < css.length; i++){\r\n\t\t\tdomHelpers.addClassName(node, css[i]);\r\n\t\t\tcssHash[css[i]] = true;\r\n\t\t}\r\n\r\n\t\tview._currentBorders = cssHash;\r\n\t};\r\n\r\n\r\n\tCell.prototype._sizeContent = function(){\r\n\t\tvar content = this.$view.childNodes[0];\r\n\t\tif(content.className == \"gantt_layout_content\"){\r\n\t\t\tcontent.style.height = this.$lastSize.contentY + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._sizeHeader = function () {\r\n\t\tvar size = this.$lastSize;\r\n\t\tsize.contentY -= this.$config.headerHeight;\r\n\t\tvar header = this.$view.childNodes[0];\r\n\t\tvar content = this.$view.childNodes[1];\r\n\t\tvar xLayout = this.$config.mode === \"x\";\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tcontent.style.display = \"none\";\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_x\";\r\n\t\t\t\theader.style.width = size.y + \"px\";\r\n\t\t\t\tvar d = Math.floor(size.y / 2 - size.x / 2);\r\n\t\t\t\theader.style.transform = \"rotate(90deg) translate(\" + d + \"px, \" + d + \"px)\";\r\n\t\t\t\tcontent.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_y\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header vertical\";\r\n\t\t\t}\r\n\t\t\theader.style.width = 'auto';\r\n\t\t\theader.style.transform = '';\r\n\t\t\tcontent.style.display = \"\";\r\n\t\t\tcontent.style.height = size.contentY + \"px\";\r\n\t\t}\r\n\t\theader.style.height = this.$config.headerHeight + \"px\";\r\n\t};\r\n\treturn Cell;\r\n}());\r\n\r\nmodule.exports = Cell;\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\nvar env = {\r\n\tisIE: (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisIE6: (!window.XMLHttpRequest && navigator.userAgent.indexOf(\"MSIE\") >= 0),\r\n\tisIE7: (navigator.userAgent.indexOf(\"MSIE 7.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") < 0),\r\n\tisIE8: (navigator.userAgent.indexOf(\"MSIE 8.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: (navigator.userAgent.indexOf(\"Opera\") >= 0),\r\n\tisChrome: (navigator.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisKHTML: (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: (navigator.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: (navigator.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: (navigator.userAgent.indexOf(\"Edge\")!=-1)\r\n};\r\n\r\nmodule.exports = env;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\nvar units = {\r\n\t\"second\": 1,\r\n\t\"minute\": 60,\r\n\t\"hour\": 60 * 60,\r\n\t\"day\": 60 * 60 * 24,\r\n\t\"week\": 60 * 60 * 24 * 7,\r\n\t\"month\": 60 * 60 * 24 * 30,\r\n\t\"quarter\": 60 * 60 * 24 * 30 * 3,\r\n\t\"year\": 60 * 60 * 24 * 365\r\n};\r\nfunction getSecondsInUnit(unit){\r\n\treturn units[unit] || units.hour;\r\n}\r\n\r\nfunction forEach(arr, callback){\r\n\tvar workArray = arr.slice();\r\n\tfor(var i = 0; i < workArray.length; i++){\r\n\t\tcallback(workArray[i], i);\r\n\t}\r\n}\r\n\r\nfunction arrayMap(arr, callback){\r\n\tvar workArray = arr.slice();\r\n\tvar resArray = [];\r\n\r\n\tfor(var i = 0; i < workArray.length; i++){\r\n\t\tresArray.push(callback(workArray[i], i));\r\n\t}\r\n\r\n\treturn resArray;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSecondsInUnit: getSecondsInUnit,\r\n\tforEach: forEach,\r\n\tarrayMap: arrayMap\r\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0),\r\n\teventable = __webpack_require__(2),\r\n\tgridResize = __webpack_require__(48);\r\n\r\nvar Grid = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$gantt = gantt;\r\n\tthis.$parent = parent;\r\n\teventable(this);\r\n\tthis.$state = {};\r\n};\r\n\r\nGrid.prototype = {\r\n\tinit: function(container){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar gridAriaAttr = gantt._waiAria.gridAttrString();\r\n\t\tvar gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\r\n\r\n\t\tcontainer.innerHTML = \"<div class='gantt_grid' style='height:inherit;width:inherit;' \"+gridAriaAttr+\"></div>\";\r\n\t\tthis.$grid = container.childNodes[0];\r\n\r\n\t\tthis.$grid.innerHTML = \"<div class='gantt_grid_scale' \"+\r\n\t\t\tgantt._waiAria.gridScaleRowAttrString()+\"></div><div class='gantt_grid_data' \"+gridDataAriaAttr+\"></div>\";\r\n\r\n\t\tthis.$grid_scale = this.$grid.childNodes[0];\r\n\t\tthis.$grid_data = this.$grid.childNodes[1];\r\n\r\n\t\tvar attr = this.$getConfig()[this.$config.bind + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\t\r\n\t\tif(!this.$config.layers){\r\n\t\t\tvar layers = this._createLayerConfig();\r\n\t\t\tthis.$config.layers = layers;\r\n\t\t}\r\n\r\n\t\tvar resizer = gridResize(gantt, this);\r\n\t\tresizer.init();\r\n\t\tthis._renderHeaderResizers = resizer.doOnRender;\r\n\t\tthis._mouseDelegates = __webpack_require__(9)(gantt);\r\n\r\n\t\tthis._addLayers(this.$gantt);\r\n\t\tthis._initEvents();\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\tsetSize: function(width, height){\r\n\t\tthis.$config.width = this.$state.width = width;\r\n\t\tthis.$state.height = height;\r\n\r\n\t\t// TODO: maybe inherit and override in a subclass instead of extending here\r\n\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tinnerWidth = 0;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tinnerWidth += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tvar outerWidth;\r\n\t\tif(isNaN(innerWidth) || !this.$config.scrollable){\r\n\t\t\touterWidth = this._setColumnsWidth(width + 1);\r\n\t\t\tinnerWidth = outerWidth;\r\n\t\t}\r\n\r\n\t\tif(this.$config.scrollable){\r\n\t\t\tthis.$grid_scale.style.width = innerWidth + \"px\";\r\n\t\t\tthis.$grid_data.style.width = innerWidth + \"px\";\r\n\t\t}else{\r\n\t\t\tthis.$grid_scale.style.width = \"inherit\";\r\n\t\t\tthis.$grid_data.style.width = \"inherit\";\r\n\t\t}\r\n\t\tthis.$config.width -= 1;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif(outerWidth !== width){\r\n\t\t\tconfig.grid_width = outerWidth;\r\n\t\t\tthis.$config.width = outerWidth - 1;\r\n\t\t}\r\n\r\n\t\tvar dataHeight = Math.max(this.$state.height - config.scale_height, 0);\r\n\t\tthis.$grid_data.style.height = dataHeight + \"px\";\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetSize: function(){\r\n\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._getGridWidth();\r\n\r\n\t\tvar size = {\r\n\t\t\tx: this.$state.width,\r\n\t\t\ty: this.$state.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth: 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight: 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\r\n\t\treturn size;\r\n\t},\r\n\trefresh: function(){\r\n\t\tif(this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\r\n\t\tthis._calculateGridWidth();\r\n\t\tthis._renderGridHeader();\r\n\t},\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$state.scrollLeft = this.$grid.scrollLeft = left;\r\n\t\t}\r\n\r\n\t\t// var config = this.$getConfig();\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$state.scrollTop = this.$grid_data.scrollTop = top;\r\n\t\t}\r\n\t},\r\n\tgetGridColumns: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.columns.slice();\r\n\t},\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$grid.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetItemTop: function(id){\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\treturn store.getIndexById(id) * this.$getConfig().row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t},\r\n\r\n\t_createLayerConfig: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar self = this;\r\n\t\tvar layers = [\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridLine,\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tfilter: [function(){\r\n\t\t\t\t\treturn self.isVisible();\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t];\r\n\t\treturn layers;\r\n\t},\r\n\r\n\t_addLayers: function(gantt){\r\n\t\tif(!this.$config.bind)\r\n\t\t\treturn;\r\n\r\n\t\tthis._taskLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif(!taskRenderer){\r\n\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\tname: this.$config.bind,\r\n\t\t\t\tdefaultContainer: function(){ return self.$grid_data;}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar taskLayers = this.$config.layers;\r\n\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\tvar layer = taskLayers[i];\r\n\t\t\tlayer.host = this;\r\n\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t}\r\n\r\n\t\tif(this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\t},\r\n\r\n\t_initSmartRenderingPlaceholder: function(){\r\n\t\tvar self = this;\r\n\t\tvar store = this.$config.rowStore;\r\n\t\tif(!store){\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tthis._initSmartRenderingPlaceholder = function(){};\r\n\t\t}\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.smart_rendering) {\r\n\t\t\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0;\r\n\t\t\t\tif(contentHeight){\r\n\t\t\t\t\tif(self.$rowsPlaceholder && self.$rowsPlaceholder.parentNode){\r\n\t\t\t\t\t\tself.$rowsPlaceholder.parentNode.removeChild(self.$rowsPlaceholder);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar placeholder = self.$rowsPlaceholder = document.createElement(\"div\");\r\n\t\t\t\t\tplaceholder.style.visibility = \"hidden\";\r\n\t\t\t\t\tplaceholder.style.height = contentHeight + \"px\";\r\n\t\t\t\t\tplaceholder.style.width = \"1px\";\r\n\t\t\t\t\tself.$grid_data.appendChild(placeholder);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_initEvents: function(){\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_close\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif(target){\r\n\t\t\t\tstore.close(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_open\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif(target){\r\n\t\t\t\tstore.open(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_getColumnWidth: function(column, config, width) {\r\n\t\tvar min_width = column.min_width || config.min_grid_column_width;\r\n\t\tvar new_width = Math.max(width, min_width || 10);\r\n\t\tif (column.max_width)\r\n\t\t\tnew_width = Math.min(new_width, column.max_width);\r\n\t\treturn new_width;\r\n\t},\r\n\t// return min and max possible grid width according to restricts\r\n\t_getGridWidthLimits: function() {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tcolumns = this.getGridColumns(),\r\n\t\t\tmin_limit = 0,\r\n\t\t\tmax_limit = 0;\r\n\r\n\t\t\tfor (var i=0; i<columns.length; i++) {\r\n\t\t\t\tmin_limit += columns[i].min_width ? columns[i].min_width : config.min_grid_column_width;\r\n\t\t\t\tif (max_limit !== undefined) {\r\n\t\t\t\t\tmax_limit = columns[i].max_width ? (max_limit + columns[i].max_width) : undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn [min_limit, max_limit];\r\n\t},\r\n\t// resize columns to get total newWidth, starting from columns[start_index]  \r\n\t_setColumnsWidth: function(newWidth, start_index) {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tcolumns_width = 0,\r\n\t\t\tfinal_width = newWidth;\r\n\r\n\t\tstart_index = !window.isNaN(start_index) ? start_index : -1;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tif (window.isNaN(columns_width)) {\r\n\t\t\tthis._calculateGridWidth(); \r\n\t\t\tcolumns_width = 0;\r\n\t\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar extra_width = final_width - columns_width;\r\n\r\n\t\tvar start_width = 0;\r\n\t\tfor (var i=0; i<start_index+1; i++) {\r\n\t\t\tstart_width += columns[i].width;\r\n\t\t}\r\n\r\n\t\tcolumns_width -= start_width;\r\n\r\n\t\tfor (var i=start_index+1; i<columns.length; i++) {\r\n\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar\tshare = Math.round(extra_width * (col.width / columns_width));\r\n\r\n\t\t\t// columns have 2 additional restrict fields - min_width & max_width that are set by user\r\n\t\t\tif (extra_width < 0) {\r\n\t\t\t\tif (col.min_width && col.width+share < col.min_width)\r\n\t\t\t\t\tshare = col.min_width - col.width;\r\n\t\t\t\telse if (!col.min_width && config.min_grid_column_width && col.width+share < config.min_grid_column_width)\r\n\t\t\t\t\tshare = config.min_grid_column_width - col.width;\r\n\t\t\t} else if (col.max_width && col.width+share > col.max_width)\r\n\t\t\t\tshare = col.max_width - col.width;\r\n\r\n\t\t\tcolumns_width -= col.width;\r\n\t\t\tcol.width += share;\r\n\t\t\textra_width -= share;\r\n\r\n\t\t}\r\n\r\n\t\tvar iterator = extra_width > 0 ? 1 : -1;\r\n\t\twhile ((extra_width > 0 && iterator === 1) || (extra_width < 0 && iterator === -1)) {\r\n\t\t\tvar curExtra = extra_width;\r\n\t\t\tfor (i = start_index+1; i<columns.length; i++) {\r\n\t\t\t\tvar new_width = columns[i].width + iterator;\r\n\r\n\t\t\t\tif (new_width == this._getColumnWidth(columns[i], config, new_width)) {\r\n\t\t\t\t\textra_width -= iterator;\r\n\t\t\t\t\tcolumns[i].width = new_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!extra_width)\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (curExtra == extra_width)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// if impossible to resize the right-side columns, resize the start column\r\n\t\tif (extra_width && start_index > -1) {\r\n\t\t\tvar new_width = columns[start_index].width + extra_width;\r\n\t\t\tif (new_width == this._getColumnWidth(columns[start_index], config, new_width))\r\n\t\t\t\tcolumns[start_index].width = new_width;\r\n\t\t}\r\n\r\n\t\t//if (this.callEvent(\"onGridResizeEnd\", [config.grid_width, final_width]) === false)\r\n\t\t//\treturn;\r\n\r\n\t\treturn this._getColsTotalWidth();\r\n\t},\r\n\r\n\t_getColsTotalWidth: function(){\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\treturn cols_width;\r\n\t},\r\n\t_calculateGridWidth: function() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\t\tvar unknown = [];\r\n\t\tvar width = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\tv = config.min_grid_column_width || 10;\r\n\t\t\t\tunknown.push(i);\r\n\t\t\t}\r\n\t\t\twidth[i] = v;\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\tvar gridWidth = this._getGridWidth() + 1;\r\n\t\tif (config.autofit || unknown.length) {\r\n\t\t\tvar diff = gridWidth - cols_width;\r\n\t\t\t// TODO: logic may be improved for proportional changing of width\r\n\t\t\tif (config.autofit) {\r\n\t\t\t\t// delta must be added for all columns\r\n\t\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (width.length-i));\r\n\t\t\t\t\twidth[i] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[i], config, width[i]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (new_width != width[i]) {\r\n\t\t\t\t\t\tdelta = new_width - width[i];\r\n\t\t\t\t\t\twidth[i] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t} else if (unknown.length) {\r\n\t\t\t\t// there are several columns with undefined width\r\n\t\t\t\tfor (var i = 0; i < unknown.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (unknown.length-i)); // no float values, just integer\r\n\t\t\t\t\tvar index = unknown[i];\r\n\t\t\t\t\twidth[index] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[index], config, width[index]);\r\n\t\t\t\t\tif (new_width != width[index]) {\r\n\t\t\t\t\t\tdelta = new_width - width[index];\r\n\t\t\t\t\t\twidth[index] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\tcolumns[i].width = width[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar changed = (gridWidth != cols_width);\r\n\t\t\tthis.$config.width = cols_width - 1;\r\n\t\t\tconfig.grid_width = cols_width;\r\n\t\t\tif(changed){\r\n\t\t\t\tthis.$parent._setContentSize(this.$config.width, this.$config.height);\r\n//\t\t\t\tthis.$parent.$config.width = cols_width;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_renderGridHeader: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar locale = this.$gantt.locale;\r\n\t\tvar templates = this.$gantt.templates;\r\n\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tif(config.rtl){\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\t\tvar cells = [];\r\n\t\tvar width = 0,\r\n\t\t\tlabels = locale.labels;\r\n\r\n\t\tvar lineHeigth = config.scale_height - 1;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\t// ensure columns have non-empty names\r\n\t\t\tif (!col.name) {\r\n\t\t\t\tcol.name = gantt.uid() + \"\";\r\n\t\t\t}\r\n\r\n\t\t\tvar colWidth = col.width * 1;\r\n\r\n\t\t\tvar gridWidth = this._getGridWidth();\r\n\t\t\tif (last && gridWidth > width + colWidth)\r\n\t\t\t\tcol.width = colWidth = gridWidth - width;\r\n\t\t\twidth += colWidth;\r\n\t\t\tvar sort = (gantt._sort && col.name == gantt._sort.name) ? (\"<div class='gantt_sort gantt_\" + gantt._sort.direction + \"'></div>\") : \"\";\r\n\t\t\tvar cssClass = [\"gantt_grid_head_cell\",\r\n\t\t\t\t(\"gantt_grid_head_\" + col.name),\r\n\t\t\t\t(last ? \"gantt_last_cell\" : \"\"),\r\n\t\t\t\ttemplates.grid_header_class(col.name, col)].join(\" \");\r\n\r\n\t\t\tvar style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tvar label = (col.label || labels[\"column_\" + col.name]);\r\n\t\t\tlabel = label || \"\";\r\n\r\n\t\t\tvar ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\r\n\r\n\t\t\tvar cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \" column_id='\" + col.name + \"'>\" + label + sort + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tthis.$grid_scale.style.height = (config.scale_height) + \"px\";\r\n\t\tthis.$grid_scale.style.lineHeight = lineHeigth + \"px\";\r\n\t\t//this.$grid_scale.style.width = \"inherit\";\r\n\t\tthis.$grid_scale.innerHTML = cells.join(\"\");\r\n\r\n\t\tif(this._renderHeaderResizers){\r\n\t\t\tthis._renderHeaderResizers();\r\n\t\t}\r\n\t},\r\n\r\n\t_getGridWidth: function(){\r\n\t\t// TODO: refactor/remove/comment some of _getGridWidth/this.$config.width/this.$state.width, it's not clear what they do\r\n\t\treturn this.$config.width;\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tthis._clearLayers(this.$gantt);\r\n\t\tthis._mouseDelegates.destructor();\r\n\t\tthis._mouseDelegates = null;\r\n\t\tthis.$grid = null;\r\n\t\tthis.$grid_scale = null;\r\n\t\tthis.$grid_data = null;\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t}\r\n};\r\n\r\nmodule.exports = Grid;\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\nfunction create(gantt){\r\n\tvar events = [];\r\n\r\n\treturn {\r\n\t\tdelegate:function(event, className, handler, root) {\r\n\t\t\tevents.push([event, className, handler, root]);\r\n\r\n\t\t\tvar helper = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\thelper.delegate(event, className, handler, root);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\tfor(var i = 0; i < events.length; i++){\r\n\t\t\t\tvar h = events[i];\r\n\t\t\t\tmouseEvents.detach(h[0], h[1], h[2], h[3]);\r\n\t\t\t}\r\n\t\t\tevents = [];\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = create;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\nfunction checkTimeout(host, updPerSecond){\r\n\tif (!updPerSecond)\r\n\t\treturn true;\r\n\t\r\n\tif (host._on_timeout)\r\n\t\treturn false;\r\n\t\r\n\tvar timeout = Math.ceil(1000/updPerSecond);\r\n\tif (timeout < 2) return true;\r\n\r\n\tsetTimeout(function(){\r\n\t\tdelete host._on_timeout;\r\n\t}, timeout);\r\n\r\n\thost._on_timeout = true;\r\n\treturn true;\r\n}\r\n\r\nmodule.exports = checkTimeout;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nfunction createScope(addEvent, removeEvent){\r\n\taddEvent = addEvent || utils.event;\r\n\tremoveEvent = removeEvent || utils.eventRemove;\r\n\r\n\tvar handlers = [];\r\n\r\n\treturn {\r\n\t\tattach: function(el, event, handler, capture){\r\n\t\t\thandlers.push({element: el, event:event, callback: handler, capture: capture});\r\n\t\t\taddEvent(el, event, handler, capture);\r\n\t\t},\r\n\t\tdetach: function(el, event, handler, capture){\r\n\t\t\tremoveEvent(el, event, handler, capture);\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handler = handlers[i];\r\n\t\t\t\tif(handler.element === el && handler.event === event && handler.callback === handler && handler.capture === capture){\r\n\t\t\t\t\thandlers.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdetachAll: function(){\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, handlers[i].capture);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, undefined);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, false);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, true);\r\n\t\t\t}\r\n\t\t\thandlers = [];\r\n\t\t},\r\n\t\textend: function(){\r\n\t\t\treturn createScope(this.event, this.eventRemove);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createScope;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(3),\r\n\tdomHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0),\r\n\tCell = __webpack_require__(5);\r\n\r\nvar Layout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(Layout, _super);\r\n\tfunction Layout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(parent)\r\n\t\t\t_this.$root = true;\r\n\r\n\t\t_this._parseConfig(config);\r\n\t\t_this.$name = \"layout\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tLayout.prototype.destructor = function () {\r\n\t\tif (this.$container && this.$view) {\r\n\t\t\tdomHelpers.removeNode(this.$view);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tchild.destructor();\r\n\t\t}\r\n\t\tthis.$cells = [];\r\n\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tLayout.prototype._resizeScrollbars = function(autosize, scrollbars){\r\n\t\tvar scrollChanged = false;\r\n\t\tvar visibleScrollbars = [],\r\n\t\t\thiddenSrollbars = [];\r\n\r\n\t\tfunction showScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.show();\r\n\t\t\tscrollChanged = true;\r\n\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t}\r\n\t\tfunction hideScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.hide();\r\n\t\t\tscrollChanged = true;\r\n\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t}\r\n\r\n\t\tvar scrollbar;\r\n\t\tfor(var i = 0; i < scrollbars.length; i++){\r\n\t\t\tscrollbar = scrollbars[i];\r\n\r\n\t\t\tif(autosize[scrollbar.$config.scroll]) {\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldHide()){\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldShow()){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}else{\r\n\t\t\t\tif(scrollbar.isVisible()){\r\n\t\t\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t\t\t}else{\r\n\t\t\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar visibleGroups = {};\r\n\t\tfor(var i = 0; i < visibleScrollbars.length; i++){\r\n\t\t\tif(visibleScrollbars[i].$config.group){\r\n\t\t\t\tvisibleGroups[visibleScrollbars[i].$config.group] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < hiddenSrollbars.length; i++){\r\n\t\t\tscrollbar = hiddenSrollbars[i];\r\n\r\n\t\t\tif(scrollbar.$config.group && visibleGroups[scrollbar.$config.group]){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn scrollChanged;\r\n\t};\r\n\r\n\tLayout.prototype._syncCellSizes = function(groupName, newSize){\r\n\t\tif(!groupName)\r\n\t\t\treturn;\r\n\r\n\t\tvar groups = {};\r\n\r\n\t\tthis._eachChild(function(cell){\r\n\t\t\tif(cell.$config.group && cell.$name != \"scrollbar\" && cell.$name != \"resizer\"){\r\n\t\t\t\tif(!groups[cell.$config.group]){\r\n\t\t\t\t\tgroups[cell.$config.group] = [];\r\n\t\t\t\t}\r\n\t\t\t\tgroups[cell.$config.group].push(cell);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(groups[groupName]){\r\n\t\t\tthis._syncGroupSize(groups[groupName], newSize);\r\n\t\t}\r\n\t\treturn groups[groupName];\r\n\t};\r\n\r\n\tLayout.prototype._syncGroupSize = function(cells, newSize){\r\n\t\tif(!cells.length) return;\r\n\r\n\t\tvar property = cells[0].$parent._xLayout ? \"width\" : \"height\";\r\n\t\tvar direction = cells[0].$parent.getNextSibling(cells[0].$id) ? 1 : -1;\r\n\r\n\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\tvar ownSize = cells[i].getSize();\r\n\r\n\t\t\tvar resizeSibling = direction > 0 ? cells[i].$parent.getNextSibling(cells[i].$id) : cells[i].$parent.getPrevSibling(cells[i].$id);\r\n\t\t\tif(resizeSibling.$name == \"resizer\"){\r\n\t\t\t\tresizeSibling = direction > 0 ? resizeSibling.$parent.getNextSibling(resizeSibling.$id) : resizeSibling.$parent.getPrevSibling(resizeSibling.$id);\r\n\t\t\t}\r\n\t\t\tvar siblingSize = resizeSibling.getSize();\r\n\r\n\t\t\tif(resizeSibling[property]){\r\n\t\t\t\tvar totalGravity = ownSize.gravity + siblingSize.gravity;\r\n\t\t\t\tvar totalSize = ownSize[property] + siblingSize[property];\r\n\t\t\t\tvar k = totalGravity / totalSize;\r\n\t\t\t\tcells[i].$config.gravity = k * newSize;\r\n\r\n\t\t\t\tresizeSibling.$config[property] = totalSize - newSize;\r\n\t\t\t\tresizeSibling.$config.gravity = totalGravity - k * newSize;\r\n\t\t\t}else{\r\n\r\n\r\n\t\t\t\tcells[i].$config[property] = newSize;\r\n\t\t\t}\r\n\r\n\t\t\tvar mainGrid = this.$gantt.$ui.getView(\"grid\");\r\n\t\t\tif(mainGrid && cells[i].$content === mainGrid && !mainGrid.$config.scrollable){\r\n\t\t\t\tthis.$gantt.config.grid_width = newSize;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.resize = function(startStage){\r\n\t\tvar mainCall = false;\r\n\t\tif(this.$root && !this._resizeInProgress){\r\n\t\t\tthis.callEvent(\"onBeforeResize\", []);\r\n\t\t\tmainCall = true;\r\n\t\t\tthis._resizeInProgress = true;\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, true);\r\n\t\t_super.prototype.resize.call(this, false);\r\n\r\n\t\tif(mainCall){\r\n\r\n\t\t\tvar contentViews = [];\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewCell\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewLayout\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"hostCell\"));\r\n\r\n\t\t\tvar scrollbars = this.getCellsByType(\"scroller\");\r\n\r\n\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t}\r\n\r\n\t\t\tvar autosize = this._getAutosizeMode(this.$config.autosize);\r\n\r\n\t\t\tvar scrollChanged = this._resizeScrollbars(autosize, scrollbars);\r\n\r\n\t\t\tif(this.$config.autosize){\r\n\t\t\t\tthis.autosize(this.$config.autosize);\r\n\t\t\t\tscrollChanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollChanged){\r\n\t\t\t\tthis.resize();\r\n\t\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onResize\", []);\r\n\t\t}\r\n\t\tif(mainCall){\r\n\t\t\tthis._resizeInProgress = false;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._eachChild = function(code, cell){\r\n\t\tcell = cell || this;\r\n\t\tcode(cell);\r\n\t\tif(cell.$cells){\r\n\t\t\tfor(var i = 0; i < cell.$cells.length; i++){\r\n\t\t\t\tthis._eachChild(code, cell.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getCellsByType = function(type){\r\n\t\tvar res = [];\r\n\t\tif(type === this.$name){\r\n\t\t\tres.push(this);\r\n\t\t}\r\n\r\n\t\tif(this.$content && this.$content.$name == type){\r\n\t\t\tres.push(this.$content);\r\n\t\t}\r\n\r\n\t\tif(this.$cells){\r\n\t\t\tfor(var i = 0; i < this.$cells.length; i++){\r\n\t\t\t\tvar children = Layout.prototype.getCellsByType.call(this.$cells[i], type);\r\n\t\t\t\tif(children.length){\r\n\t\t\t\t\tres.push.apply(res, children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getNextSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index + 1]){\r\n\t\t\treturn this.$cells[index + 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getPrevSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index - 1]){\r\n\t\t\treturn this.$cells[index - 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tLayout.prototype.cell = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tif (child.$id === id) {\r\n\t\t\t\treturn child;\r\n\t\t\t}\r\n\t\t\tvar sub = child.cell(id);\r\n\t\t\tif (sub) {\r\n\t\t\t\treturn sub;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.cellIndex = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tif (this.$cells[i].$id === id) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n\tLayout.prototype.moveView = function (view, ind) {\r\n\t\tif (this.$cells[ind] !== view) {\r\n\t\t\treturn window.alert(\"Not implemented\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tind += this.$config.header ? 1 : 0;\r\n\t\t\tvar node = this.$view;\r\n\t\t\tif (ind >= node.childNodes.length) {\r\n\t\t\t\tnode.appendChild(view.$view);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode.insertBefore(view.$view, node.childNodes[ind]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype._parseConfig = function (config) {\r\n\t\tthis.$cells = [];\r\n\t\tthis._xLayout = !config.rows;\r\n\t\tvar cells = config.rows || config.cols || config.views;\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tcell.mode = this._xLayout ? \"x\" : \"y\";\r\n\t\t\tvar $content = this.$factory.initUI(cell, this);\r\n\t\t\tif(!$content){\r\n\t\t\t\tcells.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\t$content.$parent = this;\r\n\t\t\t\tthis.$cells.push($content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.getCells = function () {\r\n\t\treturn this.$cells;\r\n\t};\r\n\tLayout.prototype.render = function () {\r\n\t\tvar view = domHelpers.insertNode(this.$container, this.$toHTML());\r\n\t\tthis.$fill(view, null);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\tthis.resize();\r\n\r\n\t\t// do simple repaint after the first call\r\n\t\tthis.render = this.resize;\r\n\t};\r\n\tLayout.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tvar cells = domHelpers.getChildNodes(node, \"gantt_layout_cell\");\r\n\t\tfor (var i = cells.length - 1; i >= 0; i--) {\r\n\t\t\tvar sub = this.$cells[i];\r\n\t\t\tsub.$fill(cells[i], this);\r\n\t\t\t// initially hidden cell\r\n\t\t\tif (sub.$config.hidden) {\r\n\t\t\t\tsub.$view.parentNode.removeChild(sub.$view);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.$toHTML = function () {\r\n\t\tvar mode = this._xLayout ? \"x\" : \"y\";\r\n\t\tvar html = [];\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\thtml.push(this.$cells[i].$toHTML());\r\n\t\t}\r\n\t\treturn _super.prototype.$toHTML.call(this, html.join(\"\"), (this.$root ? \"gantt_layout_root \" : \"\") + \"gantt_layout gantt_layout_\" + mode);\r\n\t};\r\n\r\n\tLayout.prototype.getContentSize = function(mode){\r\n\t\tvar contentWidth = 0,\r\n\t\t\tcontentHeight = 0;\r\n\r\n\t\tvar cellSize, cell, borders;\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif(cell.$config.hidden)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcellSize = cell.getContentSize(mode);\r\n\r\n\t\t\tif(cell.$config.view === \"scrollbar\" && mode[cell.$config.scroll]){\r\n\t\t\t\tcellSize.height = 0;\r\n\t\t\t\tcellSize.width = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(cell.$config.resizer){\r\n\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\tcellSize.height = 0;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellSize.width = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tborders = cell._getBorderSizes();\r\n\r\n\t\t\tif(this._xLayout){\r\n\t\t\t\tcontentWidth += (cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight = Math.max(contentHeight, (cellSize.height + borders.vertical));\r\n\t\t\t}else{\r\n\t\t\t\tcontentWidth = Math.max(contentWidth, cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight += cellSize.height + borders.vertical;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tborders = this._getBorderSizes();\r\n\t\tcontentWidth += borders.horizontal;\r\n\t\tcontentHeight += borders.vertical;\r\n\r\n\t\tif(this.$root){\r\n\t\t\tcontentWidth += 1;\r\n\t\t\tcontentHeight += 1;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: contentWidth,\r\n\t\t\theight: contentHeight\r\n\t\t};\r\n\t};\r\n\r\n\tLayout.prototype._cleanElSize = function(value){\r\n\t\treturn ((value || \"\").toString().replace(\"px\", \"\") * 1 || 0);\r\n\t};\r\n\tLayout.prototype._getBoxStyles = function(div){\r\n\t\tvar computed = null;\r\n\t\tif(window.getComputedStyle){\r\n\t\t\tcomputed = window.getComputedStyle(div, null);\r\n\t\t}else{\r\n\t\t\t//IE with elem.currentStyle does not calculate sizes from %, so will use the default approach\r\n\t\t\tcomputed = {\r\n\t\t\t\t\"width\":div.clientWidth,\r\n\t\t\t\t\"height\":div.clientHeight\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar properties = [\r\n\t\t\t\"width\",\r\n\t\t\t\"height\",\r\n\r\n\t\t\t\"paddingTop\",\r\n\t\t\t\"paddingBottom\",\r\n\t\t\t\"paddingLeft\",\r\n\t\t\t\"paddingRight\",\r\n\r\n\t\t\t\"borderLeftWidth\",\r\n\t\t\t\"borderRightWidth\",\r\n\t\t\t\"borderTopWidth\",\r\n\t\t\t\"borderBottomWidth\"\r\n\t\t];\r\n\t\tvar styles = {\r\n\t\t\tboxSizing:(computed.boxSizing == \"border-box\")\r\n\t\t};\r\n\r\n\t\tif(computed.MozBoxSizing){\r\n\t\t\tstyles.boxSizing = (computed.MozBoxSizing == \"border-box\");\r\n\t\t}\r\n\t\tfor(var i =0; i < properties.length; i++){\r\n\t\t\tstyles[properties[i]] = computed[properties[i]] ? this._cleanElSize(computed[properties[i]]) : 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar box = {\r\n\t\t\thorPaddings : (styles.paddingLeft + styles.paddingRight + styles.borderLeftWidth + styles.borderRightWidth),\r\n\t\t\tvertPaddings : (styles.paddingTop + styles.paddingBottom + styles.borderTopWidth + styles.borderBottomWidth),\r\n\t\t\tborderBox: styles.boxSizing,\r\n\t\t\tinnerWidth : styles.width,\r\n\t\t\tinnerHeight : styles.height,\r\n\t\t\touterWidth : styles.width,\r\n\t\t\touterHeight : styles.height\r\n\t\t};\r\n\r\n\r\n\t\tif(box.borderBox){\r\n\t\t\tbox.innerWidth -= box.horPaddings;\r\n\t\t\tbox.innerHeight -= box.vertPaddings;\r\n\t\t}else{\r\n\t\t\tbox.outerWidth += box.horPaddings;\r\n\t\t\tbox.outerHeight += box.vertPaddings;\r\n\t\t}\r\n\r\n\t\treturn box;\r\n\t};\r\n\r\n\tLayout.prototype._getAutosizeMode = function(config){\r\n\t\tvar res = {x:false, y:false};\r\n\t\tif(config === \"xy\"){\r\n\t\t\tres.x = res.y = true;\r\n\t\t}else if(config === \"y\" || config === true){\r\n\t\t\tres.y = true;\r\n\t\t}else if(config === \"x\"){\r\n\t\t\tres.x = true;\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.autosize = function(mode) {\r\n\t\tvar res = this._getAutosizeMode(mode);\r\n\t\tvar boxSizes = this._getBoxStyles(this.$container);\r\n\t\tvar contentSizes = this.getContentSize(mode);\r\n\r\n\t\tvar node = this.$container;\r\n\t\tif(res.x){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.width += boxSizes.horPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.width = contentSizes.width + \"px\";\r\n\t\t}\r\n\t\tif(res.y){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.height += boxSizes.vertPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.height = contentSizes.height + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getSize = function () {\r\n\t\tthis._sizes = [];\r\n\t\tvar width = 0;\r\n\t\tvar minWidth = 0;\r\n\t\tvar maxWidth = 100000;\r\n\t\tvar height = 0;\r\n\t\tvar maxHeight = 100000;\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\r\n\t\t\tvar size = this._sizes[i] = this.$cells[i].getSize();\r\n\t\t\tif (this.$cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width && size.minWidth) {\r\n\t\t\t\t\twidth += size.minWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twidth += size.width;\r\n\t\t\t\t}\r\n\t\t\t\tmaxWidth += size.maxWidth;\r\n\t\t\t\tminWidth += size.minWidth;\r\n\t\t\t\theight = Math.max(height, size.height);\r\n\t\t\t\tmaxHeight = Math.min(maxHeight, size.maxHeight); // min of maxHeight\r\n\t\t\t\tminHeight = Math.max(minHeight, size.minHeight); // max of minHeight\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height && size.minHeight) {\r\n\t\t\t\t\theight += size.minHeight;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\theight += size.height;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight += size.maxHeight;\r\n\t\t\t\tminHeight += size.minHeight;\r\n\t\t\t\twidth = Math.max(width, size.width);\r\n\t\t\t\tmaxWidth = Math.min(maxWidth, size.maxWidth); // min of maxWidth\r\n\t\t\t\tminWidth = Math.max(minWidth, size.minWidth); // max of minWidth\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar self = _super.prototype.getSize.call(this);\r\n\t\t// maxWidth\r\n\t\tif (self.maxWidth >= 100000) {\r\n\t\t\tself.maxWidth = maxWidth;\r\n\t\t}\r\n\t\t// maxHeight\r\n\t\tif (self.maxHeight >= 100000) {\r\n\t\t\tself.maxHeight = maxHeight;\r\n\t\t}\r\n\t\t// minWidth\r\n\t\tself.minWidth = self.minWidth !== self.minWidth ? 0 : self.minWidth;// || self.width || Math.max(minWidth, width);\r\n\t\t// minHeight\r\n\t\tself.minHeight = self.minHeight !== self.minHeight ? 0 : self.minHeight;//self.minHeight || self.height || Math.max(minHeight, height);\r\n\t\t// sizes with paddings and margins\r\n\t\tif (this._xLayout) {\r\n\t\t\tself.minWidth += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minWidth += this.$config.padding * 2 || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.minHeight += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\t\r\n\t\treturn self;\r\n\t};\r\n\t// calc total gravity and free space\r\n\tLayout.prototype._calcFreeSpace = function (s, cell, xLayout) {\r\n\t\tvar min = xLayout ? cell.minWidth : cell.minHeight;\r\n\t\tvar max = xLayout ? cell.maxWidth : cell.maxWidth;\r\n\t\tvar side = s;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * cell.gravity);\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t}\r\n\t\t\tthis._free -= side;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\tLayout.prototype._calcSize = function (s, size, xLayout) {\r\n\t\tvar side = s;\r\n\t\tvar min = xLayout ? size.minWidth : size.minHeight;\r\n\t\tvar max = xLayout ? size.maxWidth : size.maxHeight;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * size.gravity);\r\n\t\t}\r\n\t\tif (side > max) {\r\n\t\t\tside = max;\r\n\t\t}\r\n\t\tif (side < min) {\r\n\t\t\tside = min;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\r\n\tLayout.prototype._configureBorders = function(){\r\n\t\tif(this.$root){\r\n\t\t\tthis._setBorders([\r\n\t\t\t\tthis._borders.left,\r\n\t\t\t\tthis._borders.top,\r\n\t\t\t\tthis._borders.right,\r\n\t\t\t\tthis._borders.bottom\r\n\t\t\t],\r\n\t\t\tthis);\r\n\t\t}\r\n\r\n\t\tvar borderClass = this._xLayout ? this._borders.right : this._borders.bottom;\r\n\r\n\t\tvar cells = this.$cells;\r\n\r\n\t\tvar lastVisibleIndex = cells.length - 1;\r\n\t\tfor(var i = lastVisibleIndex; i >= 0; i--){\r\n\t\t\tif (!cells[i].$config.hidden) {\r\n\t\t\t\tlastVisibleIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar lastCell = i >= lastVisibleIndex;\r\n\t\t\tvar borderColorClass = \"\";\r\n\t\t\tif(!lastCell && cells[i + 1]){\r\n\t\t\t\tif(cells[i + 1].$config.view == \"scrollbar\"){\r\n\t\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\t\tlastCell = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tborderColorClass = \"gantt_layout_cell_border_transparent\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._setBorders(lastCell ? [] : [borderClass, borderColorClass], cells[i]);\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._updateCellVisibility = function(){\r\n\t\tvar oldVisibleCells = this._visibleCells || {};\r\n\t\tvar firstCall = !this._visibleCells;\r\n\t\tvar visibleCells = {};\r\n\t\tvar cell;\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (!firstCall && cell.$config.hidden && oldVisibleCells[cell.$id]) {\r\n\t\t\t\tcell._hide(true);\r\n\t\t\t}else if(!cell.$config.hidden && !oldVisibleCells[cell.$id]){\r\n\t\t\t\tcell._hide(false);\r\n\t\t\t}\r\n\r\n\t\t\tif(!cell.$config.hidden){\r\n\t\t\t\tvisibleCells[cell.$id] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._visibleCells = visibleCells;\r\n\t};\r\n\r\n\tLayout.prototype.setSize = function (x, y) {\r\n\t\tthis._configureBorders();\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\t\ty = this.$lastSize.contentY;\r\n\t\tx = this.$lastSize.contentX;\r\n\r\n\t\tvar padding = (this.$config.padding || 0);\r\n\t\tthis.$view.style.padding = padding + \"px\";\r\n\t\tthis._gravity = 0;\r\n\t\tthis._free = this._xLayout ? x : y;\r\n\t\tthis._free -= padding * 2;\r\n\t\t// calc all gravity\r\n\r\n\t\tvar cell,\r\n\t\t\tsize;\r\n\r\n\t\tthis._updateCellVisibility();\r\n\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar margin = (this.$config.margin || 0);\r\n\t\t\tif(cell.$name == \"resizer\" && !margin){\r\n\t\t\t\tmargin = -1;\r\n\t\t\t}\r\n\r\n\t\t\t// set margins to child cell\r\n\t\t\tvar cellView = cell.$view;\r\n\r\n\t\t\tvar marginSide = this._xLayout ? \"marginRight\" : \"marginBottom\";\r\n\t\t\tif (i !== this.$cells.length - 1) {\r\n\t\t\t\tcellView.style[marginSide] = margin + \"px\";\r\n\t\t\t\tthis._free -= margin; // calc free space without margin\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar width = size.width;\r\n\t\t\tvar height = size.height;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tthis._calcFreeSpace(width, size, true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._calcFreeSpace(height, size, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden && cell.$config.view != \"timeline\") {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar dx = void 0;\r\n\t\t\tvar dy = void 0;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tdx = this._calcSize(size.width, size, true);\r\n\t\t\t\tdy = y - padding * 2; // layout height without paddings\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdx = x - padding * 2; // layout width without paddings\r\n\t\t\t\tdy = this._calcSize(size.height, size, false);\r\n\t\t\t}\r\n\t\t\tif (cell.$config.view == \"timeline\" && cell.$config.hidden) {\r\n\t\t\t\tdx = 0;\r\n\t\t\t}\r\n\t\t\tcell.setSize(dx, dy);\r\n\t\t}\r\n\r\n\t\t/*if(this.$root && !this._updatingScrollbars){\r\n\t\t\tthis._updatingScrollbars = true;\r\n\t\t\teachCell(function(cell){\r\n\t\t\t\tif(cell.$content && cell.$content.$name == \"scroller\"){\r\n\t\t\t\t\tcell.$content.toggleVisibility();\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tthis._updatingScrollbars = false;\r\n\t\t}*/\r\n\r\n\t};\r\n\r\n\tfunction eachCell(code, root){\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\tcode(root.$cells[i]);\r\n\t\t\t\teachCell(code, root.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn Layout;\r\n}(Cell));\r\n\r\nmodule.exports = Layout;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ScaleHelper = __webpack_require__(14);\r\nvar eventable = __webpack_require__(2);\r\nvar utils = __webpack_require__(0);\r\n\r\nvar canvasRender = __webpack_require__(47);\r\n\r\nvar Timeline = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$scaleHelper = new ScaleHelper(gantt);\r\n\tthis.$gantt = gantt;\r\n\teventable(this);\r\n};\r\n\r\nTimeline.prototype = {\r\n\tinit: function(container){\r\n\t\tcontainer.innerHTML += \"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\";\r\n\t\tthis.$task = container.childNodes[0];\r\n\r\n\t\tthis.$task.innerHTML = \"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\";\r\n\t\tthis.$task_scale = this.$task.childNodes[0];\r\n\r\n\t\tthis.$task_data = this.$task.childNodes[1];\r\n\t\tthis.$task_data.innerHTML = \"<div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div>\";\r\n\t\tthis.$task_bg = this.$task_data.childNodes[0];\r\n\t\tthis.$task_links = this.$task_data.childNodes[1];\r\n\t\tthis.$task_bars = this.$task_data.childNodes[2];\r\n\r\n\t\tthis._tasks = {\r\n\t\t\tcol_width: 0,\r\n\t\t\twidth: [], // width of each column\r\n\t\t\tfull_width: 0, // width of all columns\r\n\t\t\ttrace_x: [],\r\n\t\t\trendered: {}\r\n\t\t};\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar attr = config[this.$config.bind + \"_attribute\"];\r\n\t\tvar linksAttr = config[this.$config.bindLinks + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tif(!linksAttr && this.$config.bindLinks){\r\n\t\t\tlinksAttr = this.$config.bindLinks + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tthis.$config.link_attribute = linksAttr || null;\r\n\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers.tasks;\r\n\t\t}\r\n\t\tif(!this.$config.linkLayers){\r\n\t\t\tthis.$config.linkLayers = layers.links;\r\n\t\t}\r\n\r\n\t\tthis._attachLayers(this.$gantt);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\tsetSize: function(width, height){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tif(width*1 === width){\r\n\t\t\tthis.$config.width = width;\r\n\t\t}\r\n\t\tif(height*1 === height){\r\n\r\n\t\t\tthis.$config.height = height;\r\n\t\t\tvar dataHeight = Math.max(this.$config.height - config.scale_height);\r\n\t\t\tthis.$task_data.style.height = dataHeight + 'px';\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t\tthis.$task_bg.style.backgroundImage = \"\";\r\n\r\n\t\tif(config.smart_rendering && this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tthis.$task_bg.style.height = config.row_height * store.countVisible() +\"px\";\r\n\t\t}else{\r\n\t\t\tthis.$task_bg.style.height = \"\";\r\n\t\t}\r\n\r\n\t\tvar scale = this._tasks;\r\n\t\t//timeline area layers\r\n\t\tvar data_els = this.$task_data.childNodes;\r\n\t\tfor(var i= 0, len = data_els.length; i < len; i++){\r\n\t\t\tvar el = data_els[i];\r\n\t\t\tif(el.hasAttribute(\"data-layer\") && el.style)\r\n\t\t\t\tel.style.width = scale.full_width + \"px\";\r\n\t\t}\r\n\t},\r\n\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$task.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetSize: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._tasks.full_width;\r\n\r\n\t\treturn {\r\n\t\t\tx: this.$config.width,\r\n\t\t\ty: this.$config.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif(top*1 === top){\r\n\t\t\tthis.$config.scrollTop = top;\r\n\t\t\tthis.$task_data.scrollTop = this.$config.scrollTop;\r\n\t\t}\r\n\t\tif (left*1 === left){\r\n\t\t\tthis.$task.scrollLeft = left;\r\n\t\t\tthis.$config.scrollLeft = this.$task.scrollLeft;\r\n\t\t\tthis._refreshScales();\r\n\t\t}\r\n\t},\r\n\r\n\t_refreshScales: function _refreshScales() {\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (!config.smart_scales) return;\r\n\r\n\t\tvar x = this.$config.scrollLeft;\r\n\t\tvar width = this.$config.width;\r\n\r\n\t\tvar scales = this._scales;\r\n\t\tthis.$task_scale.innerHTML = this._getScaleChunkHtml(scales, x, x + width);\r\n\t},\r\n\t_createLayerConfig: function(){\r\n\t\tvar self = this;\r\n\t\tvar taskFilter = function(){\r\n\t\t\treturn self.isVisible();\r\n\t\t};\r\n\r\n\t\tvar taskLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBar,\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg,\r\n\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\tfilter: [\r\n\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\treturn !self.$getConfig().static_background;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttaskFilter\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tvar linkLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.link,\r\n\t\t\t\tcontainer: this.$task_links,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn {\r\n\t\t\ttasks: taskLayers,\r\n\t\t\tlinks: linkLayers\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_attachLayers: function(gantt){\r\n\t\tthis._taskLayers = [];\r\n\t\tthis._linkLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\r\n\t\tif(this.$config.bind){\r\n\r\n\t\t\tself.$config.rowStore = self.$gantt.getDatastore(self.$config.bind);\r\n\r\n\t\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\t\tif(!taskRenderer){\r\n\t\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bind,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttaskRenderer.container = function(){ return self.$task_data;};\r\n\r\n\t\t\tvar taskLayers = this.$config.layers;\r\n\t\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\t\tvar layer = taskLayers[i];\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof layer == \"function\"){\r\n\t\t\t\t\tlayer = {renderer: layer};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t\t\tif(layer.expose){\r\n\t\t\t\t\tthis._taskRenderer = taskRenderer.getLayer(bar_layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._initStaticBackgroundRender();\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks){\r\n\t\t\tself.$config.linkStore = self.$gantt.getDatastore(self.$config.bindLinks);\r\n\r\n\t\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\t\tif(!linkRenderer){\r\n\t\t\t\tlinkRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bindLinks,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar linkLayers = this.$config.linkLayers;\r\n\t\t\tfor(var i = 0; linkLayers && i < linkLayers.length; i++){\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar layer = linkLayers[i];\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar linkLayer = linkRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(linkLayer);\r\n\t\t\t\tif(linkLayers[i].expose){\r\n\t\t\t\t\tthis._linkRenderer = linkRenderer.getLayer(linkLayer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_initStaticBackgroundRender: function(){\r\n\t\tvar self = this;\r\n\t\tvar staticRender = canvasRender.create();\r\n\t\tvar store = self.$config.rowStore;\r\n\t\tif(!store) return;\r\n\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.static_background) {\r\n\t\t\t\tvar store = self.$gantt.getDatastore(self.$config.bind);\r\n\t\t\t\tif (store) {\r\n\t\t\t\t\tstaticRender.render(self.$task_bg, config, self.getScale(), config.row_height * store.countVisible());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._initStaticBackgroundRender = function(){};//init once\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\t\tfor(var i = 0; i < this._linkLayers.length; i++){\r\n\t\t\tlinkRenderer.removeLayer(this._linkLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._linkLayers = [];\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_render_tasks_scales: function _render_tasks_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar scales_html = \"\",\r\n\t\t\touter_width = 0,\r\n\t\t\tscale_height = 0;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (this.isVisible()) {\r\n\t\t\tvar helpers = this.$scaleHelper;\r\n\t\t\tvar scales = this._getScales();\r\n\t\t\tscale_height = config.scale_height;\r\n\r\n\t\t\tvar availWidth = this.$config.width;\r\n\t\t\tif(config.autosize == \"x\" || config.autosize == \"xy\"){\r\n\t\t\t\tavailWidth = Math.max(config.autosize_min_width, 0);\r\n\t\t\t}\r\n\r\n\t\t\tvar cfgs = helpers.prepareConfigs(scales, config.min_column_width, availWidth, scale_height - 1, state.min_date, state.max_date, config.rtl);\r\n\t\t\tvar cfg = this._tasks = cfgs[cfgs.length - 1];\r\n\t\t\tthis._scales = cfgs;\r\n\r\n\t\t\tscales_html = this._getScaleChunkHtml(cfgs, 0, this.$config.width);\r\n\r\n\t\t\touter_width = cfg.full_width + \"px\";//cfg.full_width + (this._scroll_sizes().y ? scrollSizes.scroll_size : 0) + \"px\";\r\n\t\t\tscale_height += \"px\";\r\n\t\t}\r\n\r\n\t\tthis.$task_scale.style.height = scale_height;\r\n\r\n\t\tthis.$task_data.style.width =\r\n\t\t\tthis.$task_scale.style.width = outer_width;\r\n\r\n\t\tthis.$task_scale.innerHTML = scales_html;\r\n\r\n\t},\r\n\r\n\t_getScaleChunkHtml: function _get_scale_chunk_html (scales, fromPos, toPos) {\r\n\t\tvar templates = this.$gantt.$services.templates();\r\n\t\tvar html = [];\r\n\r\n\t\tvar css = templates.scale_row_class;\r\n\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\tvar cssClass = \"gantt_scale_line\";\r\n\t\t\tvar tplClass = css(scales[i]);\r\n\t\t\tif (tplClass) {\r\n\t\t\t\tcssClass += \" \" + tplClass;\r\n\t\t\t}\r\n\r\n\t\t\thtml.push(\"<div class=\\\"\" + cssClass + \"\\\" style=\\\"height:\" + (scales[i].height) +\r\n\t\t\t\t\"px;position:relative;line-height:\" + (scales[i].height) + \"px\\\">\" + this._prepareScaleHtml(scales[i], fromPos, toPos) + \"</div>\");\r\n\t\t}\r\n\r\n\t\treturn html.join(\"\");\r\n\t},\r\n\t_prepareScaleHtml: function _prepare_scale_html(config, fromPos, toPos) {\r\n\t\tvar globalConfig = this.$getConfig();\r\n\t\tvar globalTemplates = this.$gantt.$services.templates();\r\n\r\n\t\tvar cells = [];\r\n\t\tvar date = null, content = null, css = null;\r\n\r\n\t\tif (config.template || config.date) {\r\n\t\t\tcontent = config.template || this.$gantt.date.date_to_str(config.date);\r\n\t\t}\r\n\r\n\t\tvar startIndex = 0,\r\n\t\t\tendIndex = config.count;\r\n\r\n\t\tif (globalConfig.smart_scales && (!isNaN(fromPos) && !isNaN(toPos))) {\r\n\t\t\tstartIndex = _findBinary(config.left, fromPos);\r\n\t\t\tendIndex = _findBinary(config.left, toPos) + 1;\r\n\t\t}\r\n\r\n\t\tcss = config.css || function () {\r\n\t\t\t};\r\n\t\tif (!config.css && globalConfig.inherit_scale_class) {\r\n\t\t\tcss = globalTemplates.scale_cell_class;\r\n\t\t}\r\n\r\n\t\tfor (var i = startIndex; i < endIndex; i++) {\r\n\t\t\tif (!config.trace_x[i]) break;\r\n\r\n\t\t\tdate = new Date(config.trace_x[i]);\r\n\t\t\tvar value = content.call(this, date),\r\n\t\t\t\twidth = config.width[i],\r\n\t\t\t\theight = config.height,\r\n\t\t\t\tleft = config.left[i],\r\n\t\t\t\tstyle = \"\",\r\n\t\t\t\ttemplate = \"\",\r\n\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\tif (width) {\r\n\t\t\t\tvar position = globalConfig.smart_scales ? (\"position:absolute;left:\" + left + \"px\") : \"\";\r\n\r\n\t\t\t\tstyle = \"width:\" + (width) + \"px;height:\" + height + \"px;\" + position;\r\n\t\t\t\tcssclass = \"gantt_scale_cell\" + (i == config.count - 1 ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\t\ttemplate = css.call(this, date);\r\n\t\t\t\tif (template) cssclass += \" \" + template;\r\n\r\n\t\t\t\tvar ariaAttr = this.$gantt._waiAria.getTimelineCellAttr(value);\r\n\t\t\t\tvar cell = \"<div class='\" + cssclass + \"'\" + ariaAttr + \" style='\" + style + \"'>\" + value + \"</div>\";\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t} else {\r\n\t\t\t\t//do not render ignored cells\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn cells.join(\"\");\r\n\t},\r\n\tdateFromPos: function dateFromPos(x) {\r\n\t\tvar scale = this._tasks;\r\n\t\tif (x < 0 || x > scale.full_width || !scale.full_width) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar ind = _findBinary(this._tasks.left, x);\r\n\t\tvar summ = this._tasks.left[ind];\r\n\r\n\t\tvar col_width = scale.width[ind] || scale.col_width;\r\n\t\tvar part = 0;\r\n\t\tif (col_width) {\r\n\t\t\tpart = (x - summ) / col_width;\r\n\t\t\tif(scale.rtl){\r\n\t\t\t\tpart = 1 - part;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar unit = 0;\r\n\t\tif (part) {\r\n\t\t\tunit = this._getColumnDuration(scale, scale.trace_x[ind]);\r\n\t\t}\r\n\r\n\t\tvar date = new Date(scale.trace_x[ind].valueOf() + Math.round(part * unit));\r\n\t\treturn date;\r\n\t},\r\n\tposFromDate: function posFromDate(date) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn 0;\r\n\r\n\t\tvar ind = this.columnIndexByDate(date);\r\n\t\tthis.$gantt.assert(ind >= 0, \"Invalid day index\");\r\n\r\n\t\tvar wholeCells = Math.floor(ind);\r\n\t\tvar partCell = ind % 1;\r\n\r\n\t\tvar pos = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\r\n\t\tif (wholeCells == this._tasks.width.length)\r\n\t\t\tpos += this._tasks.width[this._tasks.width.length - 1];\r\n\t\t//for(var i=1; i <= wholeCells; i++)\r\n\t\t//\tpos += gantt._tasks.width[i-1];\r\n\r\n\t\tif (partCell) {\r\n\t\t\tif (wholeCells < this._tasks.width.length) {\r\n\t\t\t\tpos += this._tasks.width[wholeCells] * (partCell % 1);\r\n\t\t\t} else {\r\n\t\t\t\tpos += 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn Math.round(pos);\r\n\t},\r\n\tcolumnIndexByDate: function columnIndexByDate(date) {\r\n\t\tvar pos = new Date(date).valueOf();\r\n\t\tvar days = this._tasks.trace_x_ascending,\r\n\t\t\tignores = this._tasks.ignore_x;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (pos <= state.min_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn days.length;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (pos >= state.max_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn days.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*var day = null;\r\n\t\t for (var xind = 0, length = days.length-1; xind < length; xind++) {\r\n\t\t // | 8:00, 8:30 | 8:15 should be checked against 8:30\r\n\t\t // clicking at the most left part of the cell, say 8:30 should create event in that cell, not previous one\r\n\t\t day = +days[xind+1];\r\n\t\t if (pos < day && !ignores[day])\r\n\t\t break;\r\n\t\t }*/\r\n\r\n\t\tvar day_ind = _findBinary(days, pos);\r\n\t\tvar day = +days[day_ind];\r\n\t\twhile (ignores[day]) {\r\n\t\t\tday = days[++day_ind];\r\n\t\t}\r\n\r\n\t\tvar transition = this._tasks.trace_index_transition;\r\n\t\tvar index = day_ind;\r\n\t\tif(!day){\r\n\t\t\tif(transition){\r\n\t\t\t\treturn transition[0];\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar part = ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t\tif(transition){\r\n\t\t\treturn transition[index] + (1 - part);\r\n\t\t}else{\r\n\t\t\treturn index + part;\r\n\t\t}\r\n\r\n\t\t//return day_ind + ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t},\r\n\tgetItemPosition:function (task, start_date, end_date) {\r\n\t\tvar xLeft, xRight, width;\r\n\t\tif(this._tasks.rtl){\r\n\t\t\txRight = this.posFromDate(start_date || task.start_date);\r\n\t\t\txLeft = this.posFromDate(end_date || task.end_date);\r\n\t\t}else{\r\n\t\t\txLeft = this.posFromDate(start_date || task.start_date);\r\n\t\t\txRight = this.posFromDate(end_date || task.end_date);\r\n\t\t}\r\n\t\twidth =  Math.max((xRight - xLeft), 0);\r\n\r\n\t\tvar y = this.getItemTop(task.id);\r\n\t\tvar height = this.getItemHeight();\r\n\t\treturn {\r\n\t\t\tleft: xLeft,\r\n\t\t\ttop: y,\r\n\t\t\theight: height,\r\n\t\t\twidth: width\r\n\t\t};\r\n\t},\r\n\r\n\tgetItemHeight: function(){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\t// height of the bar item\r\n\t\tvar height = config.task_height;\r\n\r\n\t\tif (height == \"full\") {\r\n\t\t\tvar offset = config.task_height_offset || 5;\r\n\t\t\theight = config.row_height - offset;\r\n\t\t}\r\n\t\t//item height cannot be bigger than row height\r\n\t\theight = Math.min(height, config.row_height);\r\n\t\treturn Math.max(height, 0);\r\n\t},\r\n\r\n\tgetRowTop: function(index){\r\n\t\treturn index * this.$getConfig().row_height;\r\n\t},\r\n\r\n\tgetItemTop: function (task_id) {\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\treturn store.getIndexById(task_id) * this.$getConfig().row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetScale: function(){\r\n\t\treturn this._tasks;\r\n\t},\r\n\r\n\t_getScales: function _get_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar helpers = this.$scaleHelper;\r\n\t\tvar scales = [helpers.primaryScale()].concat(config.subscales);\r\n\r\n\t\thelpers.sortScales(scales);\r\n\t\treturn scales;\r\n\t},\r\n\r\n\t_getColumnDuration: function _get_coll_duration(scale, date) {\r\n\t\treturn this.$gantt.date.add(date, scale.step, scale.unit) - date;\r\n\t},\r\n\r\n\trefresh: function(){\r\n\t\tif(this.$config.bind) {\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks) {\r\n\t\t\tthis.$config.linkStore = this.$gantt.getDatastore(this.$config.bindLinks);\r\n\t\t}\r\n\r\n\t\tthis._initStaticBackgroundRender();\r\n\t\tthis._render_tasks_scales();\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._clearLayers(gantt);\r\n\r\n\t\tthis.$task = null;\r\n\t\tthis.$task_scale = null;\r\n\t\tthis.$task_data = null;\r\n\t\tthis.$task_bg = null;\r\n\t\tthis.$task_links = null;\r\n\t\tthis.$task_bars = null;\r\n\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\t\tif(this.$config.linkStore){\r\n\t\t\tthis.$config.linkStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t}\r\n};\r\n\r\nmodule.exports = Timeline;\r\n\r\nfunction _findBinary(array, target) {\r\n\t// modified binary search, target value not exactly match array elements, looking for closest one\r\n\r\n\tvar low = 0, high = array.length - 1, i, item, prev;\r\n\twhile (low <= high) {\r\n\r\n\t\ti = Math.floor((low + high) / 2);\r\n\t\titem = +array[i];\r\n\t\tprev = +array[i - 1];\r\n\t\tif (item < target) {\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (item > target) {\r\n\t\t\tif (!(!isNaN(prev) && prev < target)) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\t// if target is between 'i' and 'i-1' return 'i - 1'\r\n\t\t\t\treturn i - 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\twhile (+array[i] == +array[i + 1]) i++;\r\n\r\n\t\treturn i;\r\n\t}\r\n\treturn array.length - 1;\r\n}\r\n\r\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\r\nvar ScaleHelper = __webpack_require__(46);\r\n\r\nfunction ScaleIgnoreHelper(gantt){\r\n\tvar helper = new ScaleHelper(gantt);\r\n\r\n\thelper.processIgnores = function (config) {\r\n\t\tvar display_count = config.count;\r\n\t\tconfig.ignore_x = {};\r\n\t\tif (gantt.ignore_time || gantt.config.skip_off_time) {\r\n\t\t\tvar ignore = gantt.ignore_time || function () {\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\t\t\tdisplay_count = 0;\r\n\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\r\n\t\t\t\tif (ignore.call(gantt, config.trace_x[i]) || this._ignore_time_config.call(gantt, config.trace_x[i], config)) {\r\n\t\t\t\t\tconfig.ignore_x[config.trace_x[i].valueOf()] = true;\r\n\t\t\t\t\tconfig.ignored_colls = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdisplay_count++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tconfig.display_count = display_count;\r\n\t};\r\n\r\n\treturn helper;\r\n}\r\n\r\nmodule.exports = ScaleIgnoreHelper;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\nfunction createMixin(_super){\r\n\treturn {\r\n\t\trefresh: function() {\r\n\t\t\tthis._linkToTaskStore();\r\n\t\t\t_super.prototype.refresh.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\t_linkToTaskStore: function () {\r\n\r\n\t\t\tif (this.$config.rowStore && this.$gantt.$data.tasksStore) {\r\n\t\t\t\tvar tasks = this.$gantt.$data.tasksStore;\r\n\t\t\t\tvar ownStore = this.$config.rowStore;\r\n\r\n\t\t\t\tif (!tasks[\"_attached_\" + ownStore.name]) {\r\n\t\t\t\t\ttasks[\"_attached_\" + ownStore.name] = true;\r\n\t\t\t\t\tvar updateDelay;\r\n\t\t\t\t\ttasks.attachEvent(\"onStoreUpdated\", function (id, item, mode) {\r\n\t\t\t\t\t\tif(window.requestAnimationFrame){\r\n\t\t\t\t\t\t\tcancelAnimationFrame(updateDelay);\r\n\t\t\t\t\t\t\tupdateDelay = requestAnimationFrame(function(){\r\n\t\t\t\t\t\t\t\townStore.refresh();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\townStore.refresh();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._linkToTaskStore = function () {\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createMixin;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar powerArray = __webpack_require__(17);\r\nvar utils = __webpack_require__(0);\r\nvar eventable = __webpack_require__(2);\r\n\r\nvar DataStore = function(config){\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\tthis._searchVisibleOrder = {};\r\n\teventable(this);\r\n\treturn this;\r\n};\r\nDataStore.prototype = {\r\n\r\n\t_parseInner: function(data){\r\n\t\tvar item = null,\r\n\t\t\tloaded = [];\r\n\t\tfor(var i = 0, len = data.length; i< len; i++){\r\n\t\t\titem = data[i];\r\n\t\t\tif(this.$initItem){\r\n\t\t\t\titem = this.$initItem(item);\r\n\t\t\t}\r\n\t\t\tif(this.callEvent(\"onItemLoading\", [item])){\r\n\t\t\t\tif (!this.pull.hasOwnProperty(item.id)) {\r\n\t\t\t\t\tthis.fullOrder.push(item.id);\r\n\t\t\t\t\tloaded.push(item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.pull[item.id] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn loaded;\r\n\t},\r\n\tparse: function(data){\r\n\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\tvar loaded = this._parseInner(data);\r\n\t\tthis.refresh();\r\n\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t},\r\n\tgetItem: function(id){\r\n\t\treturn this.pull[id];\r\n\t},\r\n\r\n\t_updateOrder: function(code){\r\n\t\tcode.call(this.visibleOrder);\r\n\t\tcode.call(this.fullOrder);\r\n\t},\r\n\tupdateItem: function(id, item){\r\n\t\tif (!utils.defined(item)) item = this.getItem(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeUpdate\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\t\tthis.pull[id]=item;\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.callEvent(\"onAfterUpdate\", [item.id, item]);\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [item.id, item, \"update\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeItemInner: function(id){\r\n\t\t//clear from collections\r\n\t\t//this.visibleOrder.$remove(id);\r\n\t\tthis._updateOrder(function(){ this.$remove(id);});\r\n\t\tdelete this.pull[id];\r\n\t},\r\n\r\n\tremoveItem: function(id){\r\n\t\t//utils.assert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\r\n\t\tvar obj = this.getItem(id);\t//save for later event\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeDelete\", [obj.id, obj]) === false) return false;\r\n\t\t}\r\n\r\n\t\tthis._removeItemInner(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onAfterDelete\", [obj.id, obj]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"delete\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_addItemInner: function(item, index){\r\n\t\t//in case of treetable order is sent as 3rd parameter\r\n\t\t//var order = index;\r\n\r\n\t\tif(this.exists(item.id)){\r\n\t\t\tthis.silent(function(){this.updateItem(item.id, item);});\r\n\t\t}else{\r\n\t\t\tvar order = this.visibleOrder;\r\n\r\n\t\t\t//by default item is added to the end of the list\r\n\t\t\tvar data_size = order.length;\r\n\r\n\t\t\tif (!utils.defined(index) || index < 0)\r\n\t\t\t\tindex = data_size;\r\n\t\t\t//check to prevent too big indexes\r\n\t\t\tif (index > data_size){\r\n\t\t\t\t//dhx.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\r\n\t\t\t\tindex = Math.min(order.length,index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//gantt.assert(!this.exists(id), \"Not unique ID\");\r\n\r\n\t\tthis.pull[item.id]=item;\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis._updateOrder(function(){ this.$insertAt(item.id,index);});\r\n\t\t}\r\n\r\n\t\t//order.$insertAt(item.id,index);\r\n\t},\r\n\r\n\r\n\tisVisible: function(id){\r\n\t\treturn this.visibleOrder.$find(id) > -1;\r\n\t},\r\n\tgetVisibleItems: function(){\r\n\t\treturn this.getIndexRange();\r\n\t},\r\n\r\n\taddItem: function(item, index){\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif(this.$initItem){\r\n\t\t\titem = this.$initItem(item);\r\n\t\t}\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tif (this.callEvent(\"onBeforeAdd\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\r\n\r\n\t\tthis._addItemInner(item, index);\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis.callEvent(\"onAfterAdd\",[item.id, item]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[item.id,item,\"add\"]);\r\n\t\t}\r\n\t\treturn item.id;\r\n\t},\r\n\r\n\t_changeIdInner: function(oldId, newId){\r\n\t\tif(this.pull[oldId])\r\n\t\t\tthis.pull[newId] = this.pull[oldId];\r\n\r\n\t\tthis.pull[newId].id = newId;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis[this.$find(oldId)] = newId;\r\n\t\t});\r\n\t\tthis._searchVisibleOrder[newId] = this._searchVisibleOrder[oldId];\r\n\t\tdelete this._searchVisibleOrder[oldId];\r\n\r\n\t\t//this.visibleOrder[this.visibleOrder.$find(oldId)]=newId;\r\n\t\tdelete this.pull[oldId];\r\n\t},\r\n\tchangeId: function(oldId, newId){\r\n\t\tthis._changeIdInner(oldId, newId);\r\n\r\n\t\tthis.callEvent(\"onIdChange\", [oldId, newId]);\r\n\r\n\t},\r\n\texists: function(id){\r\n\t\treturn !!(this.pull[id]);\r\n\t},\r\n\r\n\t_moveInner: function(sindex, tindex){\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis.$removeAt(sindex);\r\n\t\t\tthis.$insertAt(id,Math.min(this.length, tindex));\r\n\t\t});\r\n\t\t//this.visibleOrder.$removeAt(sindex);\t//remove at old position\r\n\t\t//if (sindex<tindex) tindex--;\t//correct shift, caused by element removing\r\n\t\t//this.visibleOrder.$insertAt(id,Math.min(this.visibleOrder.length, tindex));\t//insert at new position\r\n\t},\r\n\r\n\tmove: function(sindex, tindex){\r\n\t\t//gantt.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\r\n\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\t\tvar obj = this.getItem(id);\r\n\t\tthis._moveInner(sindex, tindex);\r\n\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"move\"]);\r\n\t\t}\r\n\t},\r\n\tclearAll: function(){\r\n\t\tthis.pull = {};\r\n\t\tthis.visibleOrder = powerArray.$create();\r\n\t\tthis.fullOrder = powerArray.$create();\r\n\t\tif (this._skip_refresh) return;\r\n\t\tthis.callEvent(\"onClearAll\",[]);\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\tsilent:function(code, master){\r\n\t\tthis._skip_refresh = true;\r\n\t\tcode.call(master||this);\r\n\t\tthis._skip_refresh = false;\r\n\t},\r\n\r\n\tarraysEqual: function (arr1, arr2) {\r\n\t\tif(arr1.length !== arr2.length)\r\n\t\t\treturn false;\r\n\t\tfor(var i = 0; i < arr1.length; i++) {\r\n\t\t\tif(arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\trefresh: function(id, quick){\r\n\t\tif (this._skip_refresh) return;\r\n\r\n\t\tif(id){\r\n\t\t\t// if item changes visible order (e.g. expand-collapse branch) - do a complete repaint\r\n\t\t\tif(!quick){\r\n\t\t\t\tvar oldOrder = this.visibleOrder;\r\n\t\t\t\tthis.filter();\r\n\t\t\t\tif(!this.arraysEqual(oldOrder, this.visibleOrder)){\r\n\t\t\t\t\tid = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis.filter();\r\n\t\t}\r\n\r\n\t\tif (id)\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[id, this.pull[id], \"paint\"]);\r\n\t\telse\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[null,null,null]);\r\n\t},\r\n\r\n\tcount: function(){\r\n\t\treturn this.fullOrder.length;\r\n\t},\r\n\tcountVisible: function(){\r\n\t\treturn this.visibleOrder.length;\r\n\t},\r\n\r\n\tsort: function(sort){},\r\n\r\n\tserialize: function(){},\r\n\r\n\teachItem: function(code){\r\n\t\tfor (var i=0; i<this.fullOrder.length; i++) {\r\n\t\t\tvar item = this.pull[this.fullOrder[i]];\r\n\t\t\tcode.call(this, item);\r\n\t\t}\r\n\t},\r\n\t\r\n\tfilter: function(rule){\r\n\t\tvar filteredOrder = powerArray.$create();\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tif(this.callEvent(\"onFilterItem\", [item.id, item])){\r\n\t\t\t\tfilteredOrder.push(item.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.visibleOrder = filteredOrder;\r\n\t\tthis._searchVisibleOrder = {};\r\n\t\tfor(var i = 0; i < this.visibleOrder.length; i++){\r\n\t\t\tthis._searchVisibleOrder[this.visibleOrder[i]] = i;\r\n\t\t}\r\n\t},\r\n\r\n\tgetIndexRange: function(from, to){\r\n\t\tto=Math.min((to||Infinity),this.countVisible()-1);\r\n\r\n\t\tvar ret= [];\r\n\t\tfor (var i=(from||0); i <= to; i++)\r\n\t\t\tret.push(this.getItem(this.visibleOrder[i]));\r\n\t\treturn ret;\r\n\t},\r\n\tgetItems: function(){\r\n\t\tvar res = [];\r\n\t\tfor(var i in this.pull){\r\n\t\t\tres.push(this.pull[i]);\r\n\t\t}\r\n\t/*\tfor(var i = 0; i < this.fullOrder.length; i++){\r\n\r\n\t\t}*/\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetIdByIndex: function(index){\r\n\t\treturn this.visibleOrder[index];\r\n\t},\r\n\tgetIndexById: function(id){\r\n\t\tvar res = this._searchVisibleOrder[id];\r\n\t\tif(res === undefined){\r\n\t\t\tres = -1;\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getNullIfUndefined: function(value){\r\n\t\tif(value === undefined){\r\n\t\t\treturn null;\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\tgetFirst: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[0]);\r\n\t},\r\n\tgetLast: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1]);\r\n\t},\r\n\tgetNext: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) + 1]);\r\n\t},\r\n\tgetPrev: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) - 1]);\r\n\t},\r\n\tdestructor: function(){\r\n\t\tthis.detachAllEvents();\r\n\t\tthis.pull = null;\r\n\t\tthis.$initItem = null;\r\n\t\tthis.visibleOrder = null;\r\n\t\tthis.fullOrder = null;\r\n\t\tthis._skip_refresh = null;\r\n\t\tthis._filterRule = null;\r\n\t\tthis._searchVisibleOrder = null;\r\n\t}\r\n};\r\n\r\nmodule.exports = DataStore;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nvar $powerArray  = {\r\n\t$create: function(array){\r\n\t\treturn utils.mixin(array || [], this);\r\n\t},\r\n\t//remove element at specified position\r\n\t$removeAt:function(pos,len){\r\n\t\tif (pos>=0) this.splice(pos,(len||1));\r\n\t},\r\n\t//find element in collection and remove it\r\n\t$remove:function(value){\r\n\t\tthis.$removeAt(this.$find(value));\r\n\t},\r\n\t//add element to collection at specific position\r\n\t$insertAt:function(data,pos){\r\n\t\tif (!pos && pos!==0) \t//add to the end by default\r\n\t\t\tthis.push(data);\r\n\t\telse {\r\n\t\t\tvar b = this.splice(pos,(this.length-pos));\r\n\t\t\tthis[pos] = data;\r\n\t\t\tthis.push.apply(this,b); //reconstruct array without loosing this pointer\r\n\t\t}\r\n\t},\r\n\t//return index of element, -1 if it doesn't exists\r\n\t$find:function(data){\r\n\t\tfor (var i=0; i<this.length; i++)\r\n\t\t\tif (data==this[i]) return i;\r\n\t\treturn -1;\r\n\t},\r\n\t//execute some method for each element of array\r\n\t$each:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tfunctor.call((master||this),this[i]);\r\n\t},\r\n\t//create new array from source, by using results of functor\r\n\t$map:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tthis[i]=functor.call((master||this),this[i]);\r\n\t\treturn this;\r\n\t},\r\n\t$filter:function(functor, master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tif (!functor.call((master||this),this[i])){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nmodule.exports = $powerArray;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar powerArray = __webpack_require__(17);\r\nvar utils = __webpack_require__(0);\r\nvar eventable = __webpack_require__(2);\r\nvar DataStore = __webpack_require__(16);\r\n\r\nvar TreeDataStore = function(config){\r\n\tthis._branches = {};\r\n\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.$parentProperty = config.parentProperty || \"parent\";\r\n\r\n\tif(typeof config.rootId !== \"function\"){\r\n\t\tthis.$getRootId = (function(val){\r\n\t\t\treturn function(){return val;};\r\n\t\t})(config.rootId || 0);\r\n\t}else{\r\n\t\tthis.$getRootId = config.rootId;\r\n\t}\r\n\r\n\t// TODO: replace with live reference to gantt config\r\n\tthis.$openInitially = config.openInitially;\r\n\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._skip_refresh = false;\r\n\r\n\teventable(this);\r\n\r\n\tthis.attachEvent(\"onFilterItem\", function(id, item){\r\n\t\tvar open = true;\r\n\t\tthis.eachParent(function(parent){\r\n\t\t\topen = open && parent.$open;\r\n\t\t}, item);\r\n\t\treturn !!open;\r\n\t});\r\n\r\n\treturn this;\r\n};\r\n\r\nTreeDataStore.prototype = utils.mixin({\r\n\r\n\t\t_buildTree: function(data){\r\n\t\t\tvar item = null;\r\n\t\t\tvar rootId = this.$getRootId();\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis.setParent(item, this.getParent(item) || rootId);\r\n\t\t\t}\r\n\r\n\t\t\t// calculating $level for each item\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t\titem.$level = this.calculateItemLevel(item);\r\n\r\n\t\t\t\tif (!utils.defined(item.$open)) {\r\n\t\t\t\t\titem.$open = utils.defined(item.open) ? item.open : this.$openInitially();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis._updateOrder();\r\n\t\t},\r\n\r\n\t\tparse: function(data){\r\n\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t\tvar loaded = this._parseInner(data);\r\n\t\t\tthis._buildTree(loaded);\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t},\r\n\r\n\t\t_addItemInner: function(item, index){\r\n\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\tif(!utils.defined(parent)){\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t\tthis.setParent(item, parent);\r\n\t\t\t}\r\n\r\n\t\t\tvar parentIndex = this.getIndexById(parent);\r\n\t\t\tvar targetIndex = parentIndex + Math.min(Math.max(index, 0), this.visibleOrder.length);\r\n\r\n\t\t\tif(targetIndex*1 !== targetIndex){\r\n\t\t\t\ttargetIndex = undefined;\r\n\t\t\t}\r\n\t\t\tDataStore.prototype._addItemInner.call(this, item, targetIndex);\r\n\t\t\tthis.setParent(item, parent);\r\n\r\n\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\tthis._move_branch(item, item.$rendered_parent);\r\n\t\t\t}\r\n\t\t\tthis._add_branch(item, index);\r\n\t\t},\r\n\t\t_changeIdInner: function(oldId, newId){\r\n\r\n\t\t\tvar children = this.getChildren(newId);\r\n\t\t\tDataStore.prototype._changeIdInner.call(this, oldId, newId);\r\n\r\n\t\t\tvar parent = this.getParent(newId);\r\n\r\n\t\t\tthis._replace_branch_child(parent, oldId, newId);\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tthis.setParent(this.getItem[children[i]], newId);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_traverseBranches: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar branch = this._branches[parent];\r\n\t\t\tif (branch) {\r\n\t\t\t\tfor (var i = 0; i < branch.length; i++) {\r\n\t\t\t\t\tvar itemId = branch[i];\r\n\t\t\t\t\tcode.call(this, itemId);\r\n\t\t\t\t\tif (this._branches[itemId])\r\n\t\t\t\t\t\tthis._traverseBranches(code, itemId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_updateOrder: function(code){\r\n\t\t\tif(code)\r\n\t\t\t\tDataStore.prototype._updateOrder.call(this, code);\r\n\t\t\tthis.fullOrder = powerArray.$create();\r\n\t\t\tthis._traverseBranches(function(taskId){\r\n\t\t\t\tthis.fullOrder.push(taskId);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_removeItemInner: function(id){\r\n\r\n\t\t\tvar items = [];\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\titems.push(child);\r\n\t\t\t}, id);\r\n\r\n\t\t\titems.push(this.getItem(id));\r\n\r\n\t\t\tfor(var i = 0; i < items.length; i++){\r\n\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t\tDataStore.prototype._removeItemInner.call(this, items[i].id);\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i].id), null);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmove: function(sid, tindex, parent){\r\n\t\t\t//target id as 4th parameter\r\n\t\t\tvar id = arguments[3];\r\n\t\t\tif (id) {\r\n\t\t\t\tif (id === sid) return;\r\n\r\n\t\t\t\tparent = this.getParent(id);\r\n\t\t\t\ttindex = this.getBranchIndex(id);\r\n\t\t\t}\r\n\t\t\tif(sid == parent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar source = this.getItem(sid);\r\n\t\t\tvar source_pid = this.getParent(source.id);\r\n\t\t\tvar sbranch = this.getChildren(this.getParent(source.id));\r\n\r\n\t\t\tvar tbranch = this.getChildren(parent);\r\n\t\t\tif (tindex == -1)\r\n\t\t\t\ttindex = tbranch.length + 1;\r\n\t\t\tif (source_pid == parent) {\r\n\t\t\t\tvar sindex = this.getBranchIndex(sid);\r\n\t\t\t\tif (sindex == tindex) return;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.callEvent(\"onBeforeItemMove\", [sid, parent, tindex]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._replace_branch_child(source_pid, sid);\r\n\t\t\ttbranch = this.getChildren(parent);\r\n\r\n\t\t\tvar tid = tbranch[tindex];\r\n\t\t\tif (!tid) //adding as last element\r\n\t\t\t\ttbranch.push(sid);\r\n\t\t\telse\r\n\t\t\t\ttbranch = tbranch.slice(0, tindex).concat([ sid ]).concat(tbranch.slice(tindex));\r\n\r\n\t\t\tthis.setParent(source, parent);\r\n\t\t\tthis._branches[parent] = tbranch;\r\n\r\n\t\t\tvar diff = this.calculateItemLevel(source) - source.$level;\r\n\t\t\tsource.$level += diff;\r\n\t\t\tthis.eachItem(function(item){\r\n\t\t\t\titem.$level += diff;\r\n\t\t\t}, source.id, this);\r\n\r\n\r\n\t\t\tthis._moveInner(this.getIndexById(sid), this.getIndexById(parent) + tindex);\r\n\r\n\t\t\tif(!this.callEvent(\"onAfterItemMove\", [sid, parent, tindex]))\r\n\t\t\t\treturn;\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\r\n\t\tgetBranchIndex: function(id){\r\n\t\t\tvar branch = this.getChildren(this.getParent(id));\r\n\t\t\tfor (var i = 0; i < branch.length; i++)\r\n\t\t\t\tif (branch[i] == id)\r\n\t\t\t\t\treturn i;\r\n\r\n\t\t\treturn -1;\r\n\t\t},\r\n\t\thasChild: function(id){\r\n\t\t\treturn (utils.defined(this._branches[id]) && this._branches[id].length);\r\n\t\t},\r\n\t\tgetChildren: function(id){\r\n\t\t\treturn utils.defined(this._branches[id]) ? this._branches[id] : powerArray.$create();\r\n\t\t},\r\n\r\n\t\tisChildOf: function(childId, parentId){\r\n\t\t\tif (!this.exists(childId))\r\n\t\t\t\treturn false;\r\n\t\t\tif (parentId === this.$getRootId())\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar item = this.getItem(childId);\r\n\t\t\tvar pid = this.getParent(childId);\r\n\r\n\t\t\twhile (item && this.exists(pid)) {\r\n\t\t\t\titem = this.getItem(pid);\r\n\r\n\t\t\t\tif (item && item.id == parentId)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tpid = this.getParent(item);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetSiblings: function(id){\r\n\t\t\tif(!this.exists(id)){\r\n\t\t\t\treturn powerArray.$create();\r\n\t\t\t}\r\n\t\t\tvar parent = this.getParent(id);\r\n\t\t\treturn this.getChildren(parent);\r\n\r\n\t\t},\r\n\t\tgetNextSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i+1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetPrevSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i-1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetParent: function(id){\r\n\t\t\tvar item = null;\r\n\t\t\tif(id.id !== undefined){\r\n\t\t\t\titem = id;\r\n\t\t\t}else{\r\n\t\t\t\titem = this.getItem(id);\r\n\t\t\t}\r\n\r\n\t\t\tvar parent = this.$getRootId();\r\n\t\t\tif(item){\r\n\t\t\t\tparent = item[this.$parentProperty];\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\r\n\t\t},\r\n\r\n\t\tclearAll: function(){\r\n\t\t\tthis._branches = {};\r\n\t\t\tDataStore.prototype.clearAll.call(this);\r\n\t\t},\r\n\r\n\t\tcalculateItemLevel: function(item){\r\n\t\t\tvar level = 0;\r\n\t\t\tthis.eachParent(function(){\r\n\t\t\t\tlevel++;\r\n\t\t\t}, item);\r\n\t\t\treturn level;\r\n\t\t},\r\n\r\n\t\t_setParentInner: function(item, new_pid, silent){\r\n\t\t\tif(!silent){\r\n\t\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\t\tthis._move_branch(item, item.$rendered_parent, new_pid);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._move_branch(item, item[this.$parentProperty], new_pid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetParent: function(item, new_pid, silent){\r\n\t\t\tthis._setParentInner(item, new_pid, silent);\r\n\r\n\t\t\titem[this.$parentProperty] = new_pid;\r\n\t\t},\r\n\t\teachItem: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\r\n\r\n\t\t\tvar branch = this.getChildren(parent);\r\n\t\t\tif (branch)\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tvar item = this.pull[branch[i]];\r\n\t\t\t\t\tcode.call(this, item);\r\n\t\t\t\t\tif (this.hasChild(item.id))\r\n\t\t\t\t\t\tthis.eachItem(code, item.id);\r\n\t\t\t\t}\r\n\t\t},\r\n\t\teachParent: function(code, startItem){\r\n\t\t\tvar item = startItem;\r\n\t\t\twhile (this.getParent(item)) {\r\n\t\t\t\tif (!this.exists(this.getParent(item))) break;\r\n\t\t\t\titem = this.getItem(this.getParent(item));\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_add_branch: function(item, index, parent){\r\n\t\t\tvar pid = parent === undefined ? this.getParent(item) : parent;\r\n\t\t\tif (!this.hasChild(pid))\r\n\t\t\t\tthis._branches[pid] = powerArray.$create();\r\n\t\t\tvar branch = this.getChildren(pid);\r\n\t\t\tvar added_already = false;\r\n\t\t\tfor(var i = 0, length = branch.length; i < length; i++){\r\n\t\t\t\tif(branch[i] == item.id){\r\n\t\t\t\t\tadded_already = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!added_already){\r\n\t\t\t\tif(index*1 == index){\r\n\r\n\t\t\t\t\tbranch.splice(index, 0, item.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbranch.push(item.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.$rendered_parent = pid;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_move_branch: function(item, old_parent, new_parent){\r\n\t\t\t//this.setParent(item, new_parent);\r\n\t\t\t//this._sync_parent(task);\r\n\t\t\tthis._replace_branch_child(old_parent, item.id);\r\n\t\t\tif(this.exists(new_parent) || new_parent == this.$getRootId()){\r\n\r\n\t\t\t\tthis._add_branch(item, undefined, new_parent);\r\n\t\t\t}else{\r\n\t\t\t\tdelete this._branches[item.id];\r\n\t\t\t}\r\n\t\t\titem.$level =  this.calculateItemLevel(item);\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\tchild.$level = this.calculateItemLevel(child);\r\n\t\t\t}, item.id);\r\n\t\t},\r\n\r\n\t\t_replace_branch_child: function(node, old_id, new_id){\r\n\t\t\tvar branch = this.getChildren(node);\r\n\t\t\tif (branch){\r\n\t\t\t\tvar newbranch = powerArray.$create();\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tif (branch[i] != old_id)\r\n\t\t\t\t\t\tnewbranch.push(branch[i]);\r\n\t\t\t\t\telse if (new_id)\r\n\t\t\t\t\t\tnewbranch.push(new_id);\r\n\t\t\t\t}\r\n\t\t\t\tthis._branches[node] = newbranch;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsort: function(field, desc, parent){\r\n\t\t\tif (!this.exists(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\r\n\t\t\tif (!field) field = \"order\";\r\n\t\t\tvar criteria = (typeof(field) == \"string\") ? (function(a, b) {\r\n\t\t\t\tif(a[field] == b[field]){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = a[field] > b[field];\r\n\t\t\t\treturn result ? 1 : -1;\r\n\t\t\t}) : field;\r\n\r\n\t\t\tif (desc) {\r\n\t\t\t\tvar original_criteria = criteria;\r\n\t\t\t\tcriteria = function (a, b) {\r\n\t\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar els = this.getChildren(parent);\r\n\t\t\tif (els){\r\n\t\t\t\tvar temp = [];\r\n\t\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\t\ttemp[i] = this.getItem(els[i]);\r\n\r\n\t\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\t\tthis.sort(field, desc, els[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfilter: function(rule){\r\n\t\t\tfor(var i  in this.pull){\r\n\t\t\t\tif(this.pull[i].$rendered_parent !== this.getParent(this.pull[i])){\r\n\t\t\t\t\tthis._move_branch(this.pull[i], this.pull[i].$rendered_parent, this.getParent(this.pull[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn DataStore.prototype.filter.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\topen: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = true;\r\n\t\t\t\tthis.callEvent(\"onItemOpen\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclose: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = false;\r\n\t\t\t\tthis.callEvent(\"onItemClose\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdestructor: function(){\r\n\t\t\tDataStore.prototype.destructor.call(this);\r\n\t\t\tthis._branches = null;\r\n\t\t}\r\n\t},\r\n\tDataStore.prototype\r\n);\r\n\r\nmodule.exports = TreeDataStore;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ScaleHelper = __webpack_require__(14);\r\n\r\n\r\nfunction dateRangeResolver(gantt){\r\n\t//reset project timing\r\n\t//_get_tasks_data(gantt);\r\n\treturn gantt.getSubtaskDates();\r\n}\r\n\r\nfunction defaultRangeResolver(){\r\n\treturn {\r\n\t\tstart_date: new Date(),\r\n\t\tend_date: new Date()\r\n\t};\r\n}\r\n\r\nfunction resolveConfigRange(unit, gantt){\r\n\tvar range = {\r\n\t\tstart_date:null,\r\n\t\tend_date:null\r\n\t};\r\n\r\n\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](new Date(gantt.config.start_date));\r\n\r\n\t\tvar end = new Date(gantt.config.end_date);\r\n\t\tvar start_interval = gantt.date[unit + \"_start\"](new Date(end));\r\n\t\tif (+end != +start_interval) {\r\n\t\t\tend = gantt.date.add(start_interval, 1, unit);\r\n\t\t} else {\r\n\t\t\tend = start_interval;\r\n\t\t}\r\n\r\n\t\trange.end_date = end;\r\n\t}\r\n\treturn range;\r\n}\r\n\r\nfunction _scale_range_unit(gantt) {\r\n\tvar unit = gantt.config.scale_unit;\r\n\tvar step = gantt.config.step;\r\n\tif (gantt.config.scale_offset_minimal) {\r\n\r\n\t\tvar helper = new ScaleHelper(gantt);\r\n\t\tvar scales = [helper.primaryScale()].concat(gantt.config.subscales);\r\n\r\n\t\thelper.sortScales(scales);\r\n\t\tunit = scales[scales.length - 1].unit;\r\n\t\tstep = scales[scales.length - 1].step || 1;\r\n\t}\r\n\treturn { unit:unit, step:step };\r\n}\r\n\r\nfunction _init_tasks_range(gantt) {\r\n\tvar cfg = _scale_range_unit(gantt);\r\n\tvar unit = cfg.unit,\r\n\t\tstep = cfg.step;\r\n\tvar range = resolveConfigRange(unit, gantt);\r\n\r\n\tif(!(range.start_date && range.end_date)){\r\n\t\trange = dateRangeResolver(gantt);\r\n\t\tif(!range.start_date || !range.end_date){\r\n\t\t\trange = defaultRangeResolver(gantt);\r\n\t\t}\r\n\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](range.start_date);\r\n\t\trange.start_date = gantt.calculateEndDate({\r\n\t\t\tstart_date: gantt.date[unit + \"_start\"](range.start_date),\r\n\t\t\tduration: -1,\r\n\t\t\tunit: unit,\r\n\t\t\tstep:step\r\n\t\t});//one free column before first task\r\n\r\n\t\trange.end_date = gantt.date[unit + \"_start\"](range.end_date);\r\n\t\trange.end_date = gantt.calculateEndDate({start_date: range.end_date, duration: 2, unit: unit, step:step});//one free column after last task\r\n\t}\r\n\r\n\tgantt._min_date = range.start_date;\r\n\tgantt._max_date = range.end_date;\r\n}\r\n\r\nfunction _adjust_scales(gantt) {\r\n\tif (gantt.config.fit_tasks) {\r\n\t\tvar old_min = +gantt._min_date,\r\n\t\t\told_max = +gantt._max_date;\r\n\t\t//this._init_tasks_range();\r\n\t\tif (+gantt._min_date != old_min || +gantt._max_date != old_max) {\r\n\t\t\tgantt.render();\r\n\r\n\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports = function updateTasksRange(gantt){\r\n\t_init_tasks_range(gantt);\r\n\t_adjust_scales(gantt);\r\n};\r\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\nfunction copyLinkIdsArray(gantt, linkIds, targetHash){\r\n\tfor(var i = 0; i < linkIds.length; i++) {\r\n\t\tif(gantt.isLinkExists(linkIds[i])){\r\n\t\t\ttargetHash[linkIds[i]] = gantt.getLink(linkIds[i]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction copyLinkIds(gantt, task, targetHash){\r\n\tcopyLinkIdsArray(gantt, task.$source, targetHash);\r\n\tcopyLinkIdsArray(gantt, task.$target, targetHash);\r\n}\r\n\r\nfunction getSubtreeLinks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tif(gantt.isTaskExists(rootId)){\r\n\t\tcopyLinkIds(gantt, gantt.getTask(rootId), res);\r\n\t}\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tcopyLinkIds(gantt, child, res);\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nfunction getSubtreeTasks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tres[child.id] = child;\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSubtreeLinks: getSubtreeLinks,\r\n\tgetSubtreeTasks: getSubtreeTasks\r\n};\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar dateHelper = __webpack_require__(4);\r\n\r\nvar calendarArgumentsHelper = function(gantt){\r\n\treturn {\r\n\t\tgetWorkHoursArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tunsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tisWorkTimeArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (!config.date) {\r\n\t\t\t\tconfig = {};\r\n\t\t\t\tconfig.date = arguments[0];\r\n\t\t\t\tconfig.unit = arguments[1];\r\n\t\t\t\tconfig.task = arguments[2];\r\n\t\t\t\tconfig.calendar = arguments[3];\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\t\tconfig.task = config.task || null;\r\n\t\t\t\tconfig.calendar = config.calendar || null;\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tgetClosestWorkTimeArguments: function (config) {\r\n\t\t\tconfig = arguments[0];\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\t\t\tconfig.dir = config.dir || 'any';\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationConfig: function (start, end, task, calendar) {\r\n\t\t\tthis.start_date = start;\r\n\t\t\tthis.end_date = end;\r\n\t\t\tthis.task = task;\r\n\t\t\tthis.calendar = calendar;\r\n\t\t\tthis.unit = null;\r\n\t\t\tthis.step = null;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t_getStartEndConfig: function (param) {\r\n\t\t\tvar argumentType = this.getDurationConfig;\r\n\t\t\tvar config;\r\n\t\t\tif (param instanceof argumentType)\r\n\t\t\t\treturn param;\r\n\r\n\t\t\tif (dateHelper.isDate(param)) {\r\n\t\t\t\tconfig = new argumentType(arguments[0], arguments[1], arguments[2], arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = new argumentType(param.start_date, param.end_date, param.task);\r\n\t\t\t\tif (param.id) {\r\n\t\t\t\t\tconfig.task = param;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\t\t\tconfig.start_date = config.start_date || config.start || config.date;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\thasDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\tcalculateEndDateArguments: function (start, duration, unit, step) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tstart_date: arguments[0],\r\n\t\t\t\t\tduration: arguments[1],\r\n\t\t\t\t\tunit: arguments[2],\r\n\t\t\t\t\ttask: arguments[3],\r\n\t\t\t\t\tcalendar: arguments[4]\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\r\n\t\t\treturn config;\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = calendarArgumentsHelper;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(23);\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\nwindow.Gantt = __webpack_require__(24);\r\nwindow.gantt = window.Gantt.getGanttInstance();\r\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Gantt = { _seed: 0 };\r\nGantt.plugin = function(code){\r\n\tthis._ganttPlugin.push(code);\r\n\tcode(window.gantt);\r\n};\r\nGantt._ganttPlugin = [];\r\nGantt.getGanttInstance = function() {\r\n\tvar gantt = __webpack_require__(25)();\r\n\tfor (var i=0; i<Gantt._ganttPlugin.length; i++) {\r\n\t\tGantt._ganttPlugin[i](gantt);\r\n\t}\r\n\tgantt._internal_id = (Gantt._seed++);\r\n\r\n\tif (Gantt.$syncFactory)\r\n\t\tGantt.$syncFactory(gantt);\r\n\r\n\t__webpack_require__(109)(gantt);\r\n\r\n\treturn gantt;\r\n};\r\n\r\nmodule.exports = Gantt;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction DHXGantt(){\r\n\tthis.version = \"5.1.0\";\r\n\tthis.templates = {};\r\n\tthis.keys = {\r\n\t\tedit_save: 13,\r\n\t\tedit_cancel: 27\r\n\t};\r\n}\r\n\r\nmodule.exports = function() {\r\n\t// use a named constructor to make gantt instance discoverable in heap snapshots\r\n\tvar gantt = new DHXGantt();\r\n\r\n\t__webpack_require__(26)(gantt);\r\n\r\n\tgantt.$services = gantt.$inject(__webpack_require__(27));\r\n\tgantt.config = gantt.$inject(__webpack_require__(28));\r\n\tgantt.ajax =  __webpack_require__(29)(gantt);\r\n\tgantt.date = __webpack_require__(30)(gantt);\r\n\tvar dnd = __webpack_require__(31)(gantt);\r\n\tgantt.$services.setService(\"dnd\", function(){return dnd;});\r\n\r\n\tgantt.$services.setService(\"config\", function () {\r\n\t\treturn gantt.config;\r\n\t});\r\n\tgantt.$services.setService(\"date\", function () {\r\n\t\treturn gantt.date;\r\n\t});\r\n\tgantt.$services.setService(\"locale\", function () {\r\n\t\treturn gantt.locale;\r\n\t});\r\n\tgantt.$services.setService(\"templates\", function () {\r\n\t\treturn gantt.templates;\r\n\t});\r\n\r\n\tvar templatesLoader = __webpack_require__(32)(gantt);\r\n\tgantt.$services.setService(\"templateLoader\", function () {\r\n\t\treturn templatesLoader;\r\n\t});\r\n\r\n\tvar eventable = __webpack_require__(2);\r\n\teventable(gantt);\r\n\r\n\tvar StateService = __webpack_require__(33);\r\n\tvar stateService = new StateService();\r\n\r\n\tstateService.registerProvider(\"global\", function () {\r\n\t\treturn {\r\n\t\t\tmin_date: gantt._min_date,\r\n\t\t\tmax_date: gantt._max_date,\r\n\t\t\tselected_task: gantt.$data.tasksStore.getSelectedId()\r\n\t\t};\r\n\t});\r\n\tgantt.getState = stateService.getState;\r\n\tgantt.$services.setService(\"state\", function () {\r\n\t\treturn stateService;\r\n\t});\r\n\r\n\tvar utils = __webpack_require__(0);\r\n\tutils.mixin(gantt, utils);\r\n\tgantt.env = __webpack_require__(6);\r\n\r\n\tvar domEvents = __webpack_require__(11)();\r\n\tgantt.event = domEvents.attach;\r\n\tgantt.eventRemove = domEvents.detach;\r\n\tgantt._eventRemoveAll = domEvents.detachAll;\r\n\tgantt._createDomEventScope = domEvents.extend;\r\n\r\n\tutils.mixin(gantt, __webpack_require__(34)(gantt));\r\n\tvar uiApi = __webpack_require__(35).init(gantt);\r\n\tgantt.$ui = uiApi.factory;\r\n\tgantt.$ui.layers = uiApi.render;\r\n\tgantt.$mouseEvents = uiApi.mouseEvents;\r\n\tgantt.$services.setService(\"mouseEvents\", function () {\r\n\t\treturn gantt.$mouseEvents;\r\n\t});\r\n\tgantt.mixin(gantt, uiApi.layersApi);\r\n\r\n\t__webpack_require__(61)(gantt);\r\n\r\n\tgantt.$services.setService(\"layers\", function () {\r\n\t\treturn uiApi.layersService;\r\n\t});\r\n\r\n\t__webpack_require__(62)(gantt);\r\n\r\n\t__webpack_require__(68)(gantt);\r\n\t__webpack_require__(71)(gantt);\r\n\r\n\t__webpack_require__(78)(gantt);\r\n\t__webpack_require__(79)(gantt);\r\n\t__webpack_require__(81)(gantt);\r\n\t__webpack_require__(82)(gantt);\r\n\t__webpack_require__(83)(gantt);\r\n\t__webpack_require__(84)(gantt);\r\n\t__webpack_require__(91)(gantt);\r\n\t__webpack_require__(92)(gantt);\r\n\t__webpack_require__(93)(gantt);\r\n\t__webpack_require__(94)(gantt);\r\n\t__webpack_require__(95)(gantt);\r\n\t__webpack_require__(96)(gantt);\r\n\t__webpack_require__(97)(gantt);\r\n\t__webpack_require__(98)(gantt);\r\n\t__webpack_require__(99)(gantt);\r\n\t__webpack_require__(100)(gantt);\r\n\t__webpack_require__(101)(gantt);\r\n\t__webpack_require__(102)(gantt);\r\n\t__webpack_require__(103)(gantt);\r\n\t__webpack_require__(104)(gantt);\r\n\t__webpack_require__(105)(gantt);\r\n\t__webpack_require__(106)(gantt);\r\n\t__webpack_require__(108)(gantt);\r\n\r\n\treturn gantt;\r\n};\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt){\r\n\tgantt.$inject = function(module){\r\n\t\treturn module(this.$services);\r\n\t};\r\n};\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(){\r\n\tvar services = {};\r\n\tfunction register (name, getter){\r\n\t\tservices[name] = getter;\r\n\t}\r\n\r\n\tfunction getService(name){\r\n\t\tif(!services[name]){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn services[name]();\r\n\t}\r\n\r\n\tvar servicesEnum = {\r\n\t\t\"config\": \"config\",\r\n\t\t\"templates\": \"templates\",\r\n\t\t\"locale\": \"locale\"\r\n\t};\r\n\r\n\treturn {\r\n\t\tservices: servicesEnum,\r\n\t\tsetService: register,\r\n\t\tgetService: getService,\r\n\t\tconfig: function(){\r\n\t\t\treturn this.getService(\"config\");\r\n\t\t},\r\n\t\ttemplates: function(){\r\n\t\t\treturn this.getService(\"templates\");\r\n\t\t},\r\n\t\tlocale: function(){\r\n\t\t\treturn this.getService(\"locale\");\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tfor(var i in services){\r\n\t\t\t\tif(services[i]){\r\n\t\t\t\t\tvar service = services[i];\r\n\t\t\t\t\tif(service && service.destructor){\r\n\t\t\t\t\t\tservice.destructor();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tservices = null;\r\n\t\t}\r\n\t};\r\n};\r\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\nmodule.exports = function() {\r\n\treturn {\r\n\t\tlayout: {\r\n\t\t\tcss: \"gantt_container\",\r\n\t\t\trows: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcols: [\r\n\t\t\t\t\t\t{view: \"grid\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{resizer: true, width: 1},\r\n\t\t\t\t\t\t{view: \"timeline\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{view: \"scrollbar\", id: \"scrollVer\"}\r\n\t\t\t\t\t]\r\n\r\n\t\t\t\t},\r\n\t\t\t\t{view: \"scrollbar\", id: \"scrollHor\", height: 20}\r\n\t\t\t]\r\n\t\t},\r\n\t\tlinks: {\r\n\t\t\t\"finish_to_start\": \"0\",\r\n\t\t\t\"start_to_start\": \"1\",\r\n\t\t\t\"finish_to_finish\": \"2\",\r\n\t\t\t\"start_to_finish\": \"3\"\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\t'task': 'task',\r\n\t\t\t'project': 'project',\r\n\t\t\t'milestone': 'milestone'\r\n\t\t},\r\n\t\tduration_unit: \"day\",\r\n\t\twork_time: false,\r\n\t\tcorrect_work_time: false,\r\n\t\tskip_off_time: false,\r\n\r\n\t\tcascade_delete: true,\r\n\r\n\t\tautosize: false,\r\n\t\tautosize_min_width: 0,\r\n\t\tautoscroll: true,\r\n\t\tautoscroll_speed: 30,\r\n\r\n\t\tshow_links: true,\r\n\t\tshow_task_cells: true,\r\n\t\t// replace backgroung of the task area with a canvas img\r\n\t\tstatic_background: false,\r\n\t\tbranch_loading: false,\r\n\t\tbranch_loading_property: \"$has_child\",\r\n\t\tshow_loading: false,\r\n\t\tshow_chart: true,\r\n\t\tshow_grid: true,\r\n\t\tmin_duration: 60 * 60 * 1000,\r\n\t\txml_date: \"%d-%m-%Y %H:%i\",\r\n\t\tapi_date: \"%d-%m-%Y %H:%i\",\r\n\t\tstart_on_monday: true,\r\n\t\tserver_utc: false,\r\n\t\tshow_progress: true,\r\n\t\tfit_tasks: false,\r\n\t\tselect_task: true,\r\n\t\tscroll_on_click: true,\r\n\t\tpreserve_scroll: true,\r\n\t\treadonly: false,\r\n\r\n\t\t/*grid */\r\n\t\tdate_grid: \"%Y-%m-%d\",\r\n\r\n\t\tdrag_links: true,\r\n\t\tdrag_progress: true,\r\n\t\tdrag_resize: true,\r\n\t\tdrag_project: false,\r\n\t\tdrag_move: true,\r\n\t\tdrag_mode: {\r\n\t\t\t\"resize\": \"resize\",\r\n\t\t\t\"progress\": \"progress\",\r\n\t\t\t\"move\": \"move\",\r\n\t\t\t\"ignore\": \"ignore\"\r\n\t\t},\r\n\t\tround_dnd_dates: true,\r\n\t\tlink_wrapper_width: 20,\r\n\t\troot_id: 0,\r\n\r\n\t\tautofit: false, // grid column automatic fit grid_width config\r\n\t\tcolumns: [\r\n\t\t\t{name: \"text\", tree: true, width: '*', resize: true},\r\n\t\t\t{name: \"start_date\", align: \"center\", resize: true},\r\n\t\t\t{name: \"duration\", align: \"center\"},\r\n\t\t\t{name: \"add\", width: 44}\r\n\t\t],\r\n\r\n\t\t/*scale*/\r\n\t\tstep: 1,\r\n\t\tscale_unit: \"day\",\r\n\t\tscale_offset_minimal: true,\r\n\t\tsubscales: [],\r\n\r\n\t\tinherit_scale_class: false,\r\n\r\n\t\ttime_step: 60,\r\n\t\tduration_step: 1,\r\n\t\tdate_scale: \"%d %M\",\r\n\t\ttask_date: \"%d %F %Y\",\r\n\t\ttime_picker: \"%H:%i\",\r\n\t\ttask_attribute: \"task_id\",\r\n\t\tlink_attribute: \"link_id\",\r\n\t\tlayer_attribute: \"data-layer\",\r\n\t\tbuttons_left: [\r\n\t\t\t\"gantt_save_btn\",\r\n\t\t\t\"gantt_cancel_btn\"\r\n\t\t],\r\n\t\t_migrate_buttons: {\r\n\t\t\t\"dhx_save_btn\": \"gantt_save_btn\",\r\n\t\t\t\"dhx_cancel_btn\": \"gantt_cancel_btn\",\r\n\t\t\t\"dhx_delete_btn\": \"gantt_delete_btn\"\r\n\t\t},\r\n\t\tbuttons_right: [\r\n\t\t\t\"gantt_delete_btn\"\r\n\t\t],\r\n\t\tlightbox: {\r\n\t\t\tsections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"time\", type: \"duration\", map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tproject_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", readonly: true, map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tmilestone_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", single_date: true, map_to: \"auto\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\tdrag_lightbox: true,\r\n\t\tsort: false,\r\n\t\tdetails_on_create: true,\r\n\t\tdetails_on_dblclick: true,\r\n\t\tinitial_scroll: true,\r\n\t\ttask_scroll_offset: 100,\r\n\r\n\t\torder_branch: false,\r\n\t\torder_branch_free: false,\r\n\r\n\t\ttask_height: \"full\",//number px of 'full' for row height\r\n\t\tmin_column_width: 70,\r\n\r\n\t\t// min width for grid column (when resizing)\r\n\t\tmin_grid_column_width: 70,\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_column_attribute: \"column_index\",\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_attribute: \"grid_resizer\",\r\n\r\n\t\t// grid width can be increased after the column has been resized\r\n\t\tkeep_grid_width: false,\r\n\r\n\t\t// grid width can be adjusted\r\n\t\tgrid_resize: false,\r\n\r\n\t\tshow_unscheduled: true,\r\n\r\n\t\t//\r\n\t\treadonly_property: \"readonly\",\r\n\t\teditable_property: \"editable\",\r\n\t\tcalendar_property: \"calendar_id\",\r\n\t\tresource_calendars: {},\r\n\r\n\t\ttype_renderers: {},\r\n\r\n\t\topen_tree_initially: false,\r\n\t\toptimize_render: true,\r\n\t\tprevent_default_scroll: false,\r\n\t\tshow_errors: true,\r\n\t\twai_aria_attributes: true,\r\n\t\tsmart_scales: true,\r\n\t\trtl:false\r\n\t};\r\n};\r\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar env = __webpack_require__(6);\r\n\r\nmodule.exports = function(gantt){\r\n\treturn {\r\n\r\n\t\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t\t// if true - do not add extra params\r\n\t\tcache: true,\r\n\r\n\t\t// default method for load/loadStruct, post/get allowed\r\n\t\t// get - since 4.1.1, this should fix 412 error for macos safari\r\n\t\tmethod: \"get\",\r\n\r\n\t\tparse: function(data) {\r\n\t\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\t\tvar obj;\r\n\t\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\t\tif (window.DOMParser && !env.isIE) { // ff,ie9\r\n\t\t\t\tobj = (new window.DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t\t} else if (window.ActiveXObject !== window.undefined) {\r\n\t\t\t\tobj = new window.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\tobj.async = \"false\";\r\n\t\t\t\tobj.loadXML(data);\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t},\r\n\t\txmltop: function(tagname, xhr, obj) {\r\n\t\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (obj !== -1) gantt.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\t\treturn document.createElement(\"DIV\");\r\n\t\t},\r\n\t\txpath: function(xpathExp, docObj) {\r\n\t\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\t\tif (env.isIE) {\r\n\t\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t\t} else {\r\n\t\t\t\tvar rows = [];\r\n\t\t\t\tvar first;\r\n\t\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\t\twhile (true){\r\n\t\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\t\tif(first){\r\n\t\t\t\t\t\trows.push(first);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn rows;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquery: function(config) {\r\n\t\t\tthis._call(\r\n\t\t\t\t(config.method || \"GET\"),\r\n\t\t\t\tconfig.url,\r\n\t\t\t\tconfig.data || \"\",\r\n\t\t\t\t(config.async || true),\r\n\t\t\t\tconfig.callback,\r\n\t\t\t\tnull,\r\n\t\t\t\tconfig.headers\r\n\t\t\t);\r\n\t\t},\r\n\t\tget: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad);\r\n\t\t},\r\n\t\tgetSync: function(url) {\r\n\t\t\treturn this._call(\"GET\", url, null, false);\r\n\t\t},\r\n\t\tput: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"PUT\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tdel: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"DELETE\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpost: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 1) {\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else if (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]) == \"function\")) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tpostData = String(postData);\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpostSync: function(url, postData) {\r\n\t\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\t\t\treturn this._call(\"POST\", url, postData, false);\r\n\t\t},\r\n\t\tgetLong: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad, {url:url});\r\n\t\t},\r\n\t\tpostLong: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]))) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad, {url:url, postData:postData});\r\n\t\t},\r\n\t\t_call: function(method, url, postData, async, onLoad, longParams, headers) {\r\n\r\n\t\t\tvar t = (window.XMLHttpRequest && !env.isIE ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\t\t\tif (!!async) {\r\n\t\t\t\tt.onreadystatechange = function() {\r\n\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\t\tif (t.status != 200 || t.responseText === \"\")\r\n\t\t\t\t\t\t\tif (!gantt.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function(){\r\n\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\tonLoad.apply(window, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (longParams) {\r\n\t\t\t\t\t\t\t\tif (typeof(longParams.postData) != \"undefined\") {\r\n\t\t\t\t\t\t\t\t\tthis.postLong(longParams.url, longParams.postData, onLoad);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.getLong(longParams.url, onLoad);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t\t},1);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (method == \"GET\" && !this.cache) {\r\n\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t\t}\r\n\r\n\t\t\tt.open(method, url, async);\r\n\r\n\t\t\tif (headers){\r\n\t\t\t\tfor (var key in headers)\r\n\t\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t} else if (method == \"GET\") {\r\n\t\t\t\tpostData = null;\r\n\t\t\t}\r\n\r\n\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\t\tt.send(postData);\r\n\r\n\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\r\n\t\t},\r\n\t\turlSeparator: function(str){\r\n\t\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\t\treturn \"&\";\r\n\t\t\telse\r\n\t\t\t\treturn \"?\";\r\n\t\t}\r\n\t};\r\n};\r\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports) {\n\n/*\r\n %d - the day as a number with a leading zero ( 01 to 31 );\r\n %j - the day as a number without a leading zero ( 1 to 31 );\r\n %D - the day as an abbreviation ( Sun to Sat );\r\n %l - the day as a full name ( Sunday to Saturday );\r\n %W - the ISO-8601 week number of the year. Weeks start on Monday; 1)\r\n %m - the month as a number without a leading zero ( 1 to 12 );\r\n %n - the month as a number with a leading zero ( 01 to 12);\r\n %M - the month as an abbreviation ( Jan to Dec );\r\n %F - the month as a full name ( January to December );\r\n %y - the year as a two-digit number ( 00 to 99 );\r\n %Y - the year as a four-digit number ( 19009999 );\r\n %h - the hour based on the 12-hour clock ( 00 to 11 );\r\n %H - the hour based on the 24-hour clock ( 00 to 23 );\r\n %i - the minute as a number with a leading zero ( 00 to 59 );\r\n %s - the second as a number without a leading zero ( 00 to 59 ); 2)\r\n %a - displays am (for times from midnight until noon) and pm (for times from noon until midnight);\r\n %A - displays AM (for times from midnight until noon) and PM (for times from noon until midnight).\r\n*/\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar dateHelper = {\r\n\t\tinit: function () {\r\n\t\t\tvar locale = gantt.locale;\r\n\r\n\t\t\tvar s = locale.date.month_short;\r\n\t\t\tvar t = locale.date.month_short_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\r\n\t\t\tvar s = locale.date.month_full;\r\n\t\t\tvar t = locale.date.month_full_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\t\t},\r\n\t\tdate_part: function (date) {\r\n\t\t\tvar old = new Date(date);\r\n\t\t\tdate.setHours(0);\r\n\t\t\tthis.hour_start(date);\r\n\t\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()))\r\n\t\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\ttime_part: function (date) {\r\n\t\t\treturn (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\r\n\t\t},\r\n\t\tweek_start: function (date) {\r\n\t\t\tvar shift = date.getDay();\r\n\t\t\tif (gantt.config.start_on_monday) {\r\n\t\t\t\tif (shift === 0) shift = 6;\r\n\t\t\t\telse shift--;\r\n\t\t\t}\r\n\t\t\treturn this.date_part(this.add(date, -1 * shift, \"day\"));\r\n\t\t},\r\n\t\tmonth_start: function (date) {\r\n\t\t\tdate.setDate(1);\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\tquarter_start: function (date) {\r\n\t\t\tthis.month_start(date);\r\n\t\t\tvar m = date.getMonth(),\r\n\t\t\t\tres_month;\r\n\r\n\t\t\tif (m >= 9) {\r\n\t\t\t\tres_month = 9;\r\n\t\t\t} else if (m >= 6) {\r\n\t\t\t\tres_month = 6;\r\n\t\t\t} else if (m >= 3) {\r\n\t\t\t\tres_month = 3;\r\n\t\t\t} else {\r\n\t\t\t\tres_month = 0;\r\n\t\t\t}\r\n\r\n\t\t\tdate.setMonth(res_month);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tyear_start: function (date) {\r\n\t\t\tdate.setMonth(0);\r\n\t\t\treturn this.month_start(date);\r\n\t\t},\r\n\t\tday_start: function (date) {\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\thour_start: function (date) {\r\n\t\t\tif (date.getMinutes())\r\n\t\t\t\tdate.setMinutes(0);\r\n\t\t\tthis.minute_start(date);\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tminute_start: function (date) {\r\n\t\t\tif (date.getSeconds())\r\n\t\t\t\tdate.setSeconds(0);\r\n\t\t\tif (date.getMilliseconds())\r\n\t\t\t\tdate.setMilliseconds(0);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\t_add_days: function (date, inc) {\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\r\n\t\t\tndate.setDate(ndate.getDate() + inc);\r\n\t\t\tif (inc >= 0 && (!date.getHours() && ndate.getHours()) &&//shift to yesterday on dst\r\n\t\t\t\t(ndate.getDate() <= date.getDate() || ndate.getMonth() < date.getMonth() || ndate.getFullYear() < date.getFullYear()))\r\n\t\t\t\tndate.setTime(ndate.getTime() + 60 * 60 * 1000 * (24 - ndate.getHours()));\r\n\t\t\treturn ndate;\r\n\t\t},\r\n\r\n\t\tadd: function (date, inc, mode) {\r\n\t\t\t/*jsl:ignore*/\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase \"day\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"week\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc * 7);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"month\":\r\n\t\t\t\t\tndate.setMonth(ndate.getMonth() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"year\":\r\n\t\t\t\t\tndate.setYear(ndate.getFullYear() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hour\":\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tadding hours/minutes via setHour(getHour() + inc) gives weird result when\r\n\t\t\t\t\t\tadding one hour to the time before switch to a Daylight Saving time\r\n\r\n\t\t\t\t\t\texample: //Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\t\t\t\t\t\tnew Date(2014, 02, 30, 1).setHours(2)\r\n\t\t\t\t\t\t>>Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\r\n\t\t\t\t\t\tsetTime seems working as expected\r\n\t\t\t\t\t */\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"minute\":\r\n\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn this[\"add_\" + mode](date, inc, mode);\r\n\t\t\t}\r\n\t\t\treturn ndate;\r\n\t\t\t/*jsl:end*/\r\n\t\t},\r\n\t\tadd_quarter: function (date, inc) {\r\n\t\t\treturn this.add(date, inc * 3, \"month\");\r\n\t\t},\r\n\r\n\t\tto_fixed: function (num) {\r\n\t\t\tif (num < 10) return \"0\" + num;\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\tcopy: function (date) {\r\n\t\t\treturn new Date(date.valueOf());\r\n\t\t},\r\n\t\tdate_to_str: function (format, utc) {\r\n\t\t\tformat = format.replace(/%[a-zA-Z]/g, function (a) {\r\n\t\t\t\tswitch (a) {\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getDate())+\\\"\";\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getMonth()+1))+\\\"\";\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getDate()+\\\"\";\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getMonth()+1)+\\\"\";\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getFullYear()%100)+\\\"\";\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getFullYear()+\\\"\";\r\n\t\t\t\t\tcase \"%D\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_short[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%l\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_full[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_short[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_full[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\t\treturn \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getHours()+\\\"\";\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getHours())+\\\"\";\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getMinutes())+\\\"\";\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"pm\\\":\\\"am\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"PM\\\":\\\"AM\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getSeconds())+\\\"\";\r\n\t\t\t\t\tcase \"%W\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getISOWeek(date))+\\\"\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn a;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (utc) format = format.replace(/date\\.get/g, \"date.getUTC\");\r\n\t\t\tvar dateToStr = new Function(\"date\", \"to_fixed\", \"locale\", \"getISOWeek\", \"return \\\"\" + format + \"\\\";\");\r\n\r\n\t\t\treturn function (date) {\r\n\t\t\t\treturn dateToStr(date, dateHelper.to_fixed, gantt.locale, dateHelper.getISOWeek);\r\n\t\t\t};\r\n\t\t},\r\n\t\tstr_to_date: function (format, utc) {\r\n\t\t\tvar splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\t\t\tvar mask = format.match(/%[a-zA-Z]/g);\r\n\t\t\tfor (var i = 0; i < mask.length; i++) {\r\n\t\t\t\tswitch (mask[i]) {\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsplt += \"set[2]=temp[\" + i + \"]||1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsplt += \"set[1]=(temp[\" + i + \"]||1)-1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]*1+(temp[\" + i + \"]>50?1900:2000);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\tsplt += \"set[3]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\tsplt += \"set[4]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\tsplt += \"set[3]=set[3]%12+((temp[\" + i + \"]||'').toLowerCase()=='am'?0:12);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\tsplt += \"set[5]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_short_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_full_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\t\t\tif (utc) code = \" Date.UTC(\" + code + \")\";\r\n\t\t\tvar strToDate = new Function(\"date\", \"locale\", \"var set=[0,0,1,0,0,0]; \" + splt + \" return new Date(\" + code + \");\");\r\n\r\n\t\t\treturn function (dateString) {\r\n\t\t\t\treturn strToDate(dateString, gantt.locale);\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetISOWeek: function (ndate) {\r\n\t\t\tif (!ndate) return false;\r\n\t\t\tvar nday = ndate.getDay();\r\n\t\t\tif (nday === 0) {\r\n\t\t\t\tnday = 7;\r\n\t\t\t}\r\n\t\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\t\tvar ordinal_date = Math.round((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\t\tvar week_number = 1 + Math.floor(ordinal_date / 7);\r\n\t\t\treturn week_number;\r\n\t\t},\r\n\t\tgetUTCISOWeek: function (ndate) {\r\n\t\t\treturn this.getISOWeek(ndate);\r\n\t\t},\r\n\t\tconvert_to_utc: function (date) {\r\n\t\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t\t},\r\n\t\tparseDate: function (date, format) {\r\n\t\t\t// raw date may be of type string, number (timestamp) or something else\r\n\t\t\t// do not check for instanceof Date explicitly, since we may swap native date with different date implementation at some point\r\n\t\t\tif (date && !date.getFullYear) {\r\n\t\t\t\tif (gantt.defined(format)) {\r\n\t\t\t\t\tif (typeof(format) == \"string\")\r\n\t\t\t\t\t\tformat = gantt.defined(gantt.templates[format]) ? gantt.templates[format] : gantt.date.str_to_date(format);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tformat = gantt.templates.xml_date;\r\n\t\t\t\t}\r\n\t\t\t\tif (date)\r\n\t\t\t\t\tdate = format(date);\r\n\t\t\t\telse\r\n\t\t\t\t\tdate = null;\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t}\r\n\t};\r\n\treturn dateHelper;\r\n};\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar eventable = __webpack_require__(2);\r\nvar utils = __webpack_require__(0);\r\nvar timeout = __webpack_require__(10);\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tfunction copyDomEvent(e){\r\n\t\treturn {\r\n\t\t\ttarget: e.target || e.srcElement,\r\n\t\t\tpageX: e.pageX,\r\n\t\t\tpageY: e.pageY,\r\n\t\t\tclientX: e.clientX,\r\n\t\t\tclientY: e.clientY,\r\n\t\t\tmetaKey: e.metaKey,\r\n\t\t\tshiftKey: e.shiftKey,\r\n\t\t\tctrlKey: e.ctrlKey,\r\n\t\t\taltKey: e.altKey\r\n\t\t};\r\n\t}\r\n\r\n\tfunction DnD(obj, config) {\r\n\t\tthis._obj = obj;\r\n\t\tthis._settings = config || {};\r\n\t\teventable(this);\r\n\r\n\t\tvar inputMethods = this.getInputMethods();\r\n\r\n\t\tthis._drag_start_timer = null;\r\n\t\tgantt.attachEvent(\"onGanttScroll\", utils.bind(function (left, top) {\r\n\t\t\tthis.clearDragTimer();\r\n\t\t}, this));\r\n\r\n\t\tfor(var i = 0; i < inputMethods.length; i++){\r\n\t\t\t(utils.bind(function(input){\r\n\r\n\t\t\t\tgantt.event(obj, input.down, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._settings.original_target = copyDomEvent(e);\r\n\r\n\t\t\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t\t\tthis.clearDragTimer();\r\n\r\n\t\t\t\t\t\tthis._drag_start_timer = setTimeout(utils.bind(function () {\r\n\t\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t\t}, this), gantt.config.touch_drag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t\tgantt.event(document.body, input.up, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t}, this))(inputMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tDnD.prototype = {\r\n\t\ttraceDragEvents: function (domElement, inputMethod) {\r\n\t\t\tvar mousemove = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragMove(domElement, e, inputMethod.accessor);\r\n\t\t\t}, this);\r\n\t\t\tvar scroll = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragScroll(domElement, e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar limited_mousemove = utils.bind(function (e) {\r\n\t\t\t\tif (e && e.preventDefault) //Cancel default action on DND\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t(e || event).cancelBubble = true;\r\n\t\t\t\tif (utils.defined(this.config.updates_per_second)) {\r\n\t\t\t\t\tif (!timeout(this, this.config.updates_per_second))\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn mousemove(e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar mouseup = utils.bind(function (e) {\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.up, mouseup);\r\n\t\t\t\treturn this.dragEnd(domElement);\r\n\t\t\t}, this);\r\n\r\n\r\n\t\t\tgantt.event(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\tgantt.event(document.body, inputMethod.up, mouseup);\r\n\t\t},\r\n\t\tcheckPositionChange: function (pos) {\r\n\t\t\tvar diff_x = pos.x - this.config.pos.x;\r\n\t\t\tvar diff_y = pos.y - this.config.pos.y;\r\n\t\t\tvar distance = Math.sqrt(Math.pow(Math.abs(diff_x), 2) + Math.pow(Math.abs(diff_y), 2));\r\n\r\n\t\t\tif (distance > this.config.sensitivity) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitDnDMarker: function () {\r\n\t\t\t// create dnd placeholder and put it in dom\r\n\t\t\tvar marker = this.config.marker = document.createElement(\"div\");\r\n\t\t\tmarker.className = \"gantt_drag_marker\";\r\n\t\t\tmarker.innerHTML = \"Dragging object\";\r\n\t\t\tdocument.body.appendChild(marker);\r\n\t\t},\r\n\t\tbackupEventTarget: function (domEvent, getEvent) {\r\n\t\t\tif (!gantt.config.touch) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// keep original event target in DOM in order to keep dnd on touchmove event\r\n\t\t\tvar e = getEvent(domEvent);\r\n\r\n\t\t\tvar el = e.target || e.srcElement;\r\n\t\t\tvar copy = el.cloneNode(true);\r\n\t\t\t//this.config.target.target = copy;\r\n\t\t\tthis.config.original_target = copyDomEvent(e);\r\n\t\t\tthis.config.original_target.target = copy;\r\n\t\t\tthis.config.backup_element = el;\r\n\t\t\tel.parentNode.appendChild(copy);\r\n\r\n\t\t\tel.style.display = \"none\";\r\n\t\t\tdocument.body.appendChild(el);\r\n\t\t},\r\n\t\tgetInputMethods: function () {\r\n\t\t\t// bind actions to browser events\r\n\t\t\tvar inputMethods = [];\r\n\r\n\t\t\tinputMethods.push({\r\n\t\t\t\t\"move\": \"mousemove\",\r\n\t\t\t\t\"down\": \"mousedown\",\r\n\t\t\t\t\"up\": \"mouseup\",\r\n\t\t\t\t\"accessor\": function (e) {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\r\n\t\t\t\tvar touchEventsSupported = true;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t\t}catch (e){\r\n\t\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(touchEventsSupported){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"touchmove\",\r\n\t\t\t\t\t\t\"down\": \"touchstart\",\r\n\t\t\t\t\t\t\"up\": \"touchend\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttarget: document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY),\r\n\t\t\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(window.navigator.pointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"pointermove\",\r\n\t\t\t\t\t\t\"down\": \"pointerdown\",\r\n\t\t\t\t\t\t\"up\": \"pointerup\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}else if (window.navigator.msPointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"MSPointerMove\",\r\n\t\t\t\t\t\t\"down\": \"MSPointerDown\",\r\n\t\t\t\t\t\t\"up\": \"MSPointerUp\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn inputMethods;\r\n\t\t},\r\n\t\tclearDragTimer: function () {\r\n\t\t\tif (this._drag_start_timer) {\r\n\t\t\t\tclearTimeout(this._drag_start_timer);\r\n\t\t\t\tthis._drag_start_timer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdragStart: function (obj, e, inputMethod) {\r\n\t\t\tthis.config = {\r\n\t\t\t\tobj: obj,\r\n\t\t\t\tmarker: null,\r\n\t\t\t\tstarted: false,\r\n\t\t\t\tpos: this.getPosition(e),\r\n\t\t\t\tsensitivity: 4\r\n\t\t\t};\r\n\t\t\tif (this._settings)\r\n\t\t\t\tutils.mixin(this.config, this._settings, true);\r\n\r\n\r\n\t\t\tthis.traceDragEvents(obj, inputMethod);\r\n\r\n\t\t\tgantt._prevent_touch_scroll = true;\r\n\t\t\tdocument.body.className += \" gantt_noselect\";\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\tthis.dragMove(obj, e, inputMethod.accessor);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdragMove: function (obj, e, getEvent) {\r\n\t\t\tvar source = getEvent(e);\r\n\t\t\tif (!source) return;\r\n\r\n\t\t\tif (!this.config.marker && !this.config.started) {\r\n\t\t\t\tvar pos = this.getPosition(source);\r\n\r\n\t\t\t\tif (gantt.config.touch || this.checkPositionChange(pos)) {\r\n\t\t\t\t\t// real drag starts here,\r\n\t\t\t\t\t// when user moves mouse at first time after onmousedown\r\n\t\t\t\t\tthis.config.started = true;\r\n\t\t\t\t\tthis.config.ignore = false;\r\n\t\t\t\t\tif (this.callEvent(\"onBeforeDragStart\", [obj, this.config.original_target]) === false) {\r\n\t\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.backupEventTarget(e, getEvent);\r\n\t\t\t\t\tthis.initDnDMarker();\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\tthis.callEvent(\"onAfterDragStart\", [obj, this.config.original_target]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!this.config.ignore) {\r\n\t\t\t\tsource.pos = this.getPosition(source);\r\n\t\t\t\tthis.config.marker.style.left = source.pos.x + \"px\";\r\n\t\t\t\tthis.config.marker.style.top = source.pos.y + \"px\";\r\n\t\t\t\tthis.callEvent(\"onDragMove\", [obj, source]);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdragEnd: function (obj) {\r\n\t\t\tvar target = this.config.backup_element;\r\n\t\t\tif (target && target.parentNode) {\r\n\t\t\t\ttarget.parentNode.removeChild(target);\r\n\t\t\t}\r\n\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\tif (this.config.marker) {\r\n\t\t\t\tthis.config.marker.parentNode.removeChild(this.config.marker);\r\n\t\t\t\tthis.config.marker = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onDragEnd\", []);\r\n\t\t\t}\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_noselect\", \"\");\r\n\t\t},\r\n\r\n\t\tgetPosition: function (e) {\r\n\t\t\tvar x = 0, y = 0;\r\n\t\t\te = e || window.event;\r\n\t\t\tif (e.pageX || e.pageY) {\r\n\t\t\t\tx = e.pageX;\r\n\t\t\t\ty = e.pageY;\r\n\t\t\t} else if (e.clientX || e.clientY) {\r\n\t\t\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n\t\t\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n\t\t\t}\r\n\t\t\treturn {x: x, y: y};\r\n\t\t}\r\n\t};\r\n\r\n\treturn DnD;\r\n};\r\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\r\n\tvar regTemplates = {};\r\n\r\n\tfunction initTemplate(name, initial, template_name) {\r\n\t\ttemplate_name = template_name || name;\r\n\t\tvar config = gantt.config,\r\n\t\t\ttemplates = gantt.templates;\r\n\r\n\t\tif (gantt.config[name] && regTemplates[template_name] != config[name]) {\r\n\t\t\tif (!(initial && templates[template_name])) {\r\n\t\t\t\ttemplates[template_name] = gantt.date.date_to_str(config[name]);\r\n\t\t\t\tregTemplates[template_name] = config[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initTemplates() {\r\n\t\tvar labels = gantt.locale.labels;\r\n\t\tlabels.gantt_save_btn = labels.icon_save;\r\n\t\tlabels.gantt_cancel_btn = labels.icon_cancel;\r\n\t\tlabels.gantt_delete_btn = labels.icon_delete;\r\n\r\n\r\n\t\tvar date = gantt.date;\r\n\r\n\t\t//build configuration based templates\r\n\t\tvar d = date.date_to_str;\r\n\t\tvar c = gantt.config;\r\n\t\tinitTemplate(\"date_scale\", true, undefined, gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"date_grid\", true, \"grid_date_format\", gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"task_date\", true, undefined, gantt.config, gantt.templates);\r\n\r\n\t\tgantt.mixin(gantt.templates, {\r\n\t\t\txml_date: date.str_to_date(c.xml_date, c.server_utc),\r\n\t\t\txml_format: d(c.xml_date, c.server_utc),\r\n\t\t\tapi_date: date.str_to_date(c.api_date),\r\n\t\t\tprogress_text: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_header_class: function (column, config) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttask_text: function (start, end, task) {\r\n\t\t\t\treturn task.text;\r\n\t\t\t},\r\n\t\t\ttask_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_cell_class: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_cell_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_row_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\tgrid_indent: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_indent'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_folder: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_folder_\" + (item.$open ? \"open\" : \"closed\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_file: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_file'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_open: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_\" + (item.$open ? \"close\" : \"open\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_blank: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_blank'></div>\";\r\n\t\t\t},\r\n\t\t\tdate_grid: function (date, item) {\r\n\t\t\t\tif (item && gantt.isUnscheduledTask(item) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.grid_date_format(date);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_time: function (start, end, ev) {\r\n\t\t\t\tif (gantt.isUnscheduledTask(ev) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(ev);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.task_date(start) + \" - \" + gantt.templates.task_date(end);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_unscheduled_time: function (task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttime_picker: d(c.time_picker),\r\n\t\t\tlink_class: function (link) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tlink_description: function (link) {\r\n\t\t\t\tvar from = gantt.getTask(link.source),\r\n\t\t\t\t\tto = gantt.getTask(link.target);\r\n\r\n\t\t\t\treturn \"<b>\" + from.text + \"</b> &ndash;  <b>\" + to.text + \"</b>\";\r\n\t\t\t},\r\n\r\n\t\t\tdrag_link: function (from, from_start, to, to_start) {\r\n\t\t\t\tfrom = gantt.getTask(from);\r\n\t\t\t\tvar labels = gantt.locale.labels;\r\n\r\n\t\t\t\tvar text = \"<b>\" + from.text + \"</b> \" + (from_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tto = gantt.getTask(to);\r\n\t\t\t\t\ttext += \"<b> \" + to.text + \"</b> \" + (to_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn text;\r\n\t\t\t},\r\n\t\t\tdrag_link_class: function (from, from_start, to, to_start) {\r\n\t\t\t\tvar add = \"\";\r\n\r\n\t\t\t\tif (from && to) {\r\n\t\t\t\t\tvar allowed = gantt.isLinkAllowed(from, to, from_start, to_start);\r\n\t\t\t\t\tadd = \" \" + (allowed ? \"gantt_link_allow\" : \"gantt_link_deny\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"gantt_link_tooltip\" + add;\r\n\t\t\t},\r\n\r\n\t\t\t/* used for aria-labels of bar elements and for tooltip.js */\r\n\t\t\ttooltip_date_format: date.date_to_str(\"%Y-%m-%d\"),\r\n\t\t\ttooltip_text: function (start, end, event) {\r\n\t\t\t\treturn \"<b>Task:</b> \" + event.text + \"<br/><b>Start date:</b> \" + gantt.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + gantt.templates.tooltip_date_format(end);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tinitTemplates: initTemplates,\r\n\t\tinitTemplate: initTemplate\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nvar StateService = (function(){\r\n\tvar stateProviders = {};\r\n\r\n\tfunction getState(name){\r\n\t\tif(name){\r\n\t\t\treturn stateProviders[name].method();\r\n\t\t}else{\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i in stateProviders){\r\n\t\t\t\tif(!stateProviders[i].internal)\r\n\t\t\t\t\tutils.mixin(res, stateProviders[i].method(), true);\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction registerProvider(name, provider, internal){\r\n\t\tstateProviders[name] = { method: provider, internal: internal};\r\n\t}\r\n\r\n\tfunction unregisterProvider(name){\r\n\t\tdelete stateProviders[name];\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetState: getState,\r\n\t\tregisterProvider: registerProvider,\r\n\t\tunregisterProvider: unregisterProvider\r\n\t};\r\n});\r\n\r\nmodule.exports = StateService;\r\n\r\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar domHelpers = __webpack_require__(1);\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tvar _dhx_msg_cfg = null;\r\n\r\n\tfunction callback(config, result) {\r\n\t\tvar usercall = config.callback;\r\n\t\tmodalBox.hide(config.box);\r\n\r\n\t\t_dhx_msg_cfg = config.box = null;\r\n\t\tif (usercall)\r\n\t\t\tusercall(result);\r\n\t}\r\n\r\n\tfunction modal_key(e) {\r\n\t\tif (_dhx_msg_cfg) {\r\n\t\t\te = e || event;\r\n\t\t\tvar code = e.which || event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (messageBox.keyboard) {\r\n\t\t\t\tif (code == 13 || code == 32) {\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"gantt_popup_button\") > -1 && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27) {\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preventDefault) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\treturn !(e.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.event(document, \"keydown\", modal_key, true);\r\n\r\n\tfunction modality(mode) {\r\n\t\tif (!modality.cover) {\r\n\t\t\tmodality.cover = document.createElement(\"DIV\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tmodality.cover.onkeydown = modal_key;\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\t\tvar height = document.body.scrollHeight;\r\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\r\n\t}\r\n\r\n\tfunction button(text, className, result) {\r\n\t\tvar buttonAriaAttrs = gantt._waiAria.messageButtonAttrString(text);\r\n\t\tvar name = className.toLowerCase().replace(/ /g, \"_\");\r\n\t\tvar button_css = \"gantt_\" + name + \"_button\" + \" dhtmlx_\" + name + \"_button\"; // dhtmlx_ok_button, dhtmlx_click_me_button\r\n\t\treturn \"<div \" + buttonAriaAttrs + \" class='gantt_popup_button dhtmlx_popup_button \" + button_css + \"' result='\" + result + \"' ><div>\" + text + \"</div></div>\";\r\n\t}\r\n\r\n\tfunction info(text) {\r\n\t\tif (!messageBox.area) {\r\n\t\t\tmessageBox.area = document.createElement(\"DIV\");\r\n\t\t\tmessageBox.area.className = \"gantt_message_area dhtmlx_message_area\";\r\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\r\n\t\t\tdocument.body.appendChild(messageBox.area);\r\n\t\t}\r\n\r\n\t\tmessageBox.hide(text.id);\r\n\t\tvar message = document.createElement(\"DIV\");\r\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\r\n\t\tmessage.className = \"gantt-info dhtmlx-info gantt-\" + text.type + \" dhtmlx-\" + text.type;\r\n\t\tmessage.onclick = function () {\r\n\t\t\tmessageBox.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t};\r\n\r\n\t\tgantt._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\r\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\r\n\t\telse\r\n\t\t\tmessageBox.area.appendChild(message);\r\n\r\n\t\tif (text.expire > 0)\r\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\r\n\t\t\t\tmessageBox.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tmessageBox.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\r\n\tfunction getFirstDefined() {\r\n\t\tvar values = [].slice.apply(arguments, [0]);\r\n\r\n\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i]) {\r\n\t\t\t\treturn values[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _boxStructure(config, ok, cancel) {\r\n\t\tvar box = document.createElement(\"DIV\");\r\n\r\n\t\tvar locale = gantt.locale;\r\n\r\n\t\tvar contentId = utils.uid();\r\n\t\tgantt._waiAria.messageModalAttr(box, contentId);\r\n\r\n\r\n\t\tbox.className = \" gantt_modal_box dhtmlx_modal_box gantt-\" + config.type + \" dhtmlx-\" + config.type;\r\n\t\tbox.setAttribute(\"dhxbox\", 1);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title)\r\n\t\t\tinner += '<div class=\"gantt_popup_title dhtmlx_popup_title\">' + config.title + '</div>';\r\n\t\tinner += '<div class=\"gantt_popup_text dhtmlx_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"gantt_popup_controls dhtmlx_popup_controls\">';\r\n\t\tif (ok)\r\n\t\t\tinner += button(getFirstDefined(config.ok, gantt.locale.labels.message_ok, \"OK\"), \"ok\", true);\r\n\t\tif (cancel)\r\n\t\t\tinner += button(getFirstDefined(config.cancel, gantt.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\r\n\r\n\t\tif (config.buttons) {\r\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\r\n\t\t\t\tvar btn = config.buttons[i];\r\n\t\t\t\tif (typeof btn == \"object\") {\r\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\r\n\t\t\t\t\tvar label = btn.label;\r\n\t\t\t\t\tvar css = btn.css || (\"gantt_\" + btn.label.toLowerCase() + \"_button dhtmlx_\" + btn.label.toLowerCase() + \"_button\");\r\n\t\t\t\t\tvar value = btn.value || i;\r\n\t\t\t\t\tinner += button(label, css, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinner += button(btn, btn, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content) {\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\")\r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tbox.onclick = function (e) {\r\n\t\t\te = e || event;\r\n\t\t\tvar source = e.target || e.srcElement;\r\n\t\t\tif (!source.className) source = source.parentNode;\r\n\t\t\tif (source.className.split(\" \")[0] == \"gantt_popup_button\") {\r\n\t\t\t\tvar result = source.getAttribute(\"result\");\r\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconfig.box = box;\r\n\t\tif (ok || cancel)\r\n\t\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction _createBox(config, ok, cancel) {\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y + 'px';\r\n\t\tbox.style.left = x + 'px';\r\n\t\t//necessary for IE only\r\n\t\tbox.onkeydown = modal_key;\r\n\r\n\t\tmodalBox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tmodalBox.hide(box);\r\n\r\n\t\tgantt.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config) {\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\r\n\tfunction confirmPopup(config) {\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\r\n\tfunction boxPopup(config) {\r\n\t\treturn _createBox(config);\r\n\t}\r\n\r\n\tfunction box_params(text, type, callback) {\r\n\t\tif (typeof text != \"object\") {\r\n\t\t\tif (typeof type == \"function\") {\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text: text, type: type, callback: callback};\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction params(text, type, expire, id) {\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text: text, type: type, expire: expire, id: id};\r\n\t\ttext.id = text.id || utils.uid();\r\n\t\ttext.expire = text.expire || messageBox.expire;\r\n\t\treturn text;\r\n\t}\r\n\r\n\tvar alertBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tvar confirmBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tvar modalBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tmodalBox.hide = function (node) {\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(\"dhxbox\"))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\r\n\t\t\tgantt.callEvent(\"onAfterMessagePopup\", [node]);\r\n\t\t}\r\n\t};\r\n\r\n\tvar domHelpers = __webpack_require__(1);\r\n\r\n\tmodalBox.focus = function (node) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\r\n\t\t\tif (focusable.length) {\r\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar messageBox = function (text, type, expire, id) {\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype) {\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tmessageBox.seed = (new Date()).valueOf();\r\n\tmessageBox.uid = utils.uid;\r\n\tmessageBox.expire = 4000;\r\n\tmessageBox.keyboard = true;\r\n\tmessageBox.position = \"top\";\r\n\tmessageBox.pull = {};\r\n\tmessageBox.timers = {};\r\n\r\n\tmessageBox.hideAll = function () {\r\n\t\tfor (var key in messageBox.pull)\r\n\t\t\tmessageBox.hide(key);\r\n\t};\r\n\tmessageBox.hide = function (id) {\r\n\t\tvar obj = messageBox.pull[id];\r\n\t\tif (obj && obj.parentNode) {\r\n\t\t\twindow.setTimeout(function () {\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t}, 2000);\r\n\t\t\tobj.className += \" hidden\";\r\n\r\n\t\t\tif (messageBox.timers[id])\r\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\r\n\t\t\tdelete messageBox.pull[id];\r\n\t\t}\r\n\t};\r\n\r\n\tvar popups = [];\r\n\tgantt.attachEvent(\"onMessagePopup\", function(box){\r\n\t\tpopups.push(box);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterMessagePopup\", function(box){\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i] === box){\r\n\t\t\t\tpopups.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tif(modality.cover && modality.cover.parentNode){\r\n\t\t\tmodality.cover.parentNode.removeChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i].parentNode){\r\n\t\t\t\tpopups[i].parentNode.removeChild(popups[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpopups = null;\r\n\r\n\t\tif(messageBox.area && messageBox.area.parentNode){\r\n\t\t\tmessageBox.area.parentNode.removeChild(messageBox.area);\r\n\t\t}\r\n\t\tmessageBox = null;\r\n\t});\r\n\r\n\treturn {\r\n\t\talert: alertBox,\r\n\t\tconfirm: confirmBox,\r\n\t\tmessage: messageBox,\r\n\t\tmodalbox: modalBox\r\n\t};\r\n};\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar uiFactory = __webpack_require__(36),\r\n\tmouseEvents = __webpack_require__(38),\r\n\tcreateLayers = __webpack_require__(39),\r\n\tCell = __webpack_require__(5),\r\n\tLayout = __webpack_require__(12),\r\n\tViewLayout = __webpack_require__(42),\r\n\tViewCell = __webpack_require__(43),\r\n\tResizer = __webpack_require__(44),\r\n\tScrollbar = __webpack_require__(45),\r\n\tTimeline = __webpack_require__(13),\r\n\tGrid = __webpack_require__(8),\r\n\tResourceGrid = __webpack_require__(49),\r\n\tResourceTimeline = __webpack_require__(50);\r\n\r\nvar renderTaskBar = __webpack_require__(51),\r\n\trenderTaskBg = __webpack_require__(52),\r\n\trenderLink = __webpack_require__(53),\r\n\tgridRenderer = __webpack_require__(54);\r\n\r\nvar mainGridInitializer = __webpack_require__(55);\r\nvar mainTimelineInitializer = __webpack_require__(57);\r\nvar mainLayoutInitializer = __webpack_require__(60);\r\n\r\nfunction initUI(gantt){\r\n\tfunction inheritGridConfig(id){\r\n\t\treturn {\r\n\t\t\t//width: gantt.config.grid_width\r\n\t\t};\r\n\t}\r\n\r\n\tfunction attachInitializer(view, initializer){\r\n\t\tvar ext = initializer(gantt);\r\n\t\tif(ext.onCreated)\r\n\t\t\text.onCreated(view);\r\n\t\tview.attachEvent(\"onReady\", function(){\r\n\t\t\tif(ext.onInitialized)\r\n\t\t\t\text.onInitialized(view);\r\n\t\t});\r\n\t\tview.attachEvent(\"onDestroy\", function(){\r\n\t\t\tif(ext.onDestroyed)\r\n\t\t\t\text.onDestroyed(view);\r\n\t\t});\r\n\t}\r\n\r\n\tvar factory = uiFactory.createFactory(gantt);\r\n\tfactory.registerView(\"cell\", Cell);\r\n\tfactory.registerView(\"resizer\", Resizer);\r\n\tfactory.registerView(\"scrollbar\", Scrollbar);\r\n\tfactory.registerView(\"layout\", Layout, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"main\"){\r\n\t\t\tattachInitializer(view, mainLayoutInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"viewcell\", ViewCell);\r\n\tfactory.registerView(\"multiview\", ViewLayout);\r\n\tfactory.registerView(\"timeline\", Timeline, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"timeline\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainTimelineInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"grid\", Grid, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"grid\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainGridInitializer);\r\n\t\t}\r\n\t});\r\n\r\n\tfactory.registerView(\"resourceGrid\", ResourceGrid);\r\n\tfactory.registerView(\"resourceTimeline\", ResourceTimeline);\r\n\r\n\tvar layersEngine = createLayers(gantt);\r\n\r\n\treturn {\r\n\t\tfactory:factory,\r\n\t\tmouseEvents: mouseEvents.init(gantt),\r\n\t\tlayersApi: layersEngine.init(),\r\n\t\trender:{\r\n\t\t\tgridLine: gridRenderer(gantt),\r\n\t\t\ttaskBg: renderTaskBg(gantt),\r\n\t\t\ttaskBar: renderTaskBar(gantt),\r\n\t\t\tlink: renderLink(gantt)\r\n\t\t},\r\n\t\tlayersService: {\r\n\t\t\tgetDataRender: function(name){\r\n\t\t\t\treturn layersEngine.getDataRender(name, gantt);\r\n\t\t\t},\r\n\t\t\tcreateDataRender: function(config){\r\n\t\t\t\treturn layersEngine.createDataRender(config, gantt);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: initUI\r\n};\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0),\r\n\tconfigurable = __webpack_require__(37);\r\n\r\nvar uiFactory = function createFactory(gantt){\r\n\tvar views = {};\r\n\r\n\tfunction ui(cell, parentView) {\r\n\t\tvar content;\r\n\t\tvar view = \"cell\";\r\n\t\tif (cell.view){\r\n\t\t\tview = \"viewcell\";\r\n\t\t}else if (cell.resizer) {\r\n\t\t\tview = \"resizer\";\r\n\t\t}\r\n\t\telse if (cell.rows || cell.cols) {\r\n\t\t\tview = \"layout\";\r\n\t\t}\r\n\t\telse if (cell.views) {\r\n\t\t\tview = \"multiview\";\r\n\t\t}\r\n\r\n\t\tcontent = createView.call(this, view, null, cell, parentView);\r\n\t\treturn content;\r\n\t}\r\n\t\r\n\tvar createdViews = {};\r\n\r\n\tfunction createView(name, parent, config, parentView) {\r\n\t\tvar creator = views[name];\r\n\r\n\t\tif(!creator || !creator.create)\r\n\t\t\treturn false;\r\n\r\n\t\tif(name == \"resizer\" && !config.mode){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.mode = \"x\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.mode = \"y\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(name == \"viewcell\" && config.view == \"scrollbar\" && !config.scroll){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.scroll = \"y\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.scroll = \"x\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar config = utils.copy(config);\r\n\r\n\t\tif(!config.id && !createdViews[config.view]){\r\n\t\t\tconfig.id = config.view;\r\n\t\t}\r\n\r\n\t\tif(config.id && !config.css){\r\n\t\t\tconfig.css = config.id+\"_cell\";\r\n\t\t}\r\n\r\n\t\tvar view = new creator.create(parent, config, this, gantt);\r\n\r\n\t\tif(creator.configure){\r\n\t\t\tcreator.configure(view);\r\n\t\t}\r\n\r\n\t\tconfigurable(view, parentView);\r\n\t\tif(!view.$id){\r\n\t\t\tview.$id = config.id || gantt.uid();\r\n\t\t}\r\n\r\n\t\tif(!view.$parent && typeof parent == \"object\"){\r\n\t\t\tview.$parent = parent;\r\n\t\t}\r\n\t\tif(!view.$config){\r\n\t\t\tview.$config = config;\r\n\t\t}\r\n\r\n\t\tif(createdViews[view.$id]){\r\n\t\t\tview.$id = gantt.uid();\r\n\t\t}\r\n\r\n\t\tcreatedViews[view.$id] = view;\r\n\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction reset(){\r\n\t\tcreatedViews = {};\r\n\t}\r\n\r\n\tfunction register(name, viewConstructor, configure){\r\n\t\tviews[name] = {create: viewConstructor, configure: configure};\r\n\t}\r\n\r\n\tfunction getView(id){\r\n\t\treturn createdViews[id];\r\n\t}\r\n\r\n\tvar factory = {\r\n\t\tinitUI:ui,\r\n\t\treset: reset,\r\n\t\tregisterView: register,\r\n\t\tcreateView: createView,\r\n\t\tgetView: getView\r\n\t};\r\n\r\n\treturn factory;\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateFactory: uiFactory\r\n};\r\n\r\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nfunction ViewSettings(config){\r\n\tutils.mixin(this, config, true);\r\n}\r\n\r\n\r\nfunction extendSettings (store, parentSettings){\r\n\tvar own = this.$config[store];\r\n\r\n\tif(own){\r\n\t\tif(own instanceof ViewSettings){\r\n\t\t\treturn own;\r\n\t\t}else{\r\n\t\t\tViewSettings.prototype = parentSettings;\r\n\t\t\tthis.$config[store] = new ViewSettings(own);\r\n\t\t\treturn this.$config[store];\r\n\t\t}\r\n\t}else{\r\n\t\treturn parentSettings;\r\n\t}\r\n}\r\n\r\nvar configurable = function(parentView){\r\n\tvar parentConfig,\r\n\t\tparentTemplates;\r\n\r\n\treturn {\r\n\t\t$getConfig: function(){\r\n\t\t\tif(!parentConfig){\r\n\t\t\t\tparentConfig = parentView ? parentView.$getConfig() : this.$gantt.config;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"config\", parentConfig);\r\n\t\t},\r\n\t\t$getTemplates: function(){\r\n\t\t\tif(!parentTemplates){\r\n\t\t\t\tparentTemplates = parentView ? parentView.$getTemplates() : this.$gantt.templates;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"templates\", parentTemplates);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = function(obj, parent){\r\n\tutils.mixin(obj, configurable(parent));\r\n};\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nvar createMouseHandler = (function(domHelpers) {\r\n\treturn function (gantt) {\r\n\t\tvar eventHandlers = {\r\n\t\t\t\"click\": {},\r\n\t\t\t\"doubleclick\": {},\r\n\t\t\t\"contextMenu\": {}\r\n\t\t};\r\n\r\n\t\tfunction addEventTarget(event, className, handler, root) {\r\n\t\t\tif(!eventHandlers[event][className]){\r\n\t\t\t\teventHandlers[event][className] = [];\r\n\t\t\t}\r\n\r\n\t\t\teventHandlers[event][className].push({\r\n\t\t\t\thandler: handler,\r\n\t\t\t\troot: root\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction callHandler(eventName, className, root, args) {\r\n\t\t\tvar handlers = eventHandlers[eventName][className];\r\n\t\t\tif(handlers){\r\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\t\tif(!(root || handlers[i].root) || handlers[i].root === root){\r\n\t\t\t\t\t\thandlers[i].handler.apply(this, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.click);\r\n\t\t\tvar res = true;\r\n\t\t\tif (id !== null) {\r\n\t\t\t\tres = !gantt.checkEvent(\"onTaskClick\") || gantt.callEvent(\"onTaskClick\", [id, e]);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.callEvent(\"onEmptyClick\", [e]);\r\n\t\t\t}\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id && gantt.getTask(id) && gantt.config.select_task && !gantt.config.multiselect) {\r\n\t\t\t\t\tgantt.selectTask(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onContextMenu(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target || e.srcElement,\r\n\t\t\t\ttaskId = gantt.locate(src),\r\n\t\t\t\tlinkId = gantt.locate(src, gantt.config.link_attribute);\r\n\r\n\t\t\tvar res = !gantt.checkEvent(\"onContextMenu\") || gantt.callEvent(\"onContextMenu\", [taskId, linkId, e]);\r\n\t\t\tif (!res) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\telse\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction findEventHandlers(e, hash){\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar handlers = [];\r\n\t\t\twhile (trg) {\r\n\t\t\t\tvar css = domHelpers.getClassName(trg);\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tcss = css.split(\" \");\r\n\t\t\t\t\tfor (var i = 0; i < css.length; i++) {\r\n\t\t\t\t\t\tif (!css[i]) continue;\r\n\t\t\t\t\t\tif (hash[css[i]]) {\r\n\t\t\t\t\t\t\tvar delegateHandlers = hash[css[i]];\r\n\r\n\t\t\t\t\t\t\tfor(var h = 0; h < delegateHandlers.length; h++){\r\n\t\t\t\t\t\t\t\tif(delegateHandlers[h].root){\r\n\t\t\t\t\t\t\t\t\tif(!domHelpers.isChildOf(trg, delegateHandlers[h].root)){\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\thandlers.push(delegateHandlers[h].handler);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttrg = trg.parentNode;\r\n\t\t\t}\r\n\t\t\treturn handlers;\r\n\t\t}\r\n\r\n\t\tfunction callEventHandlers(handlers, e, id){\r\n\t\t\tvar res = true;\r\n\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handlerResult =  handlers[i].call(gantt, e, id, e.target || e.srcElement);\r\n\t\t\t\tres = res && !(typeof handlerResult != \"undefined\" && handlerResult !== true);\r\n\t\t\t}\r\n\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\r\n\t\tfunction onDoubleClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.doubleclick);\r\n\t\t\tvar res = !gantt.checkEvent(\"onTaskDblClick\") || gantt.callEvent(\"onTaskDblClick\", [id, e]);\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id !== null && gantt.getTask(id)) {\r\n\t\t\t\t\tif (res && gantt.config.details_on_dblclick) {\r\n\t\t\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(e) {\r\n\t\t\tif (gantt.checkEvent(\"onMouseMove\")) {\r\n\t\t\t\tvar id = gantt.locate(e);\r\n\t\t\t\tgantt._last_move_event = e;\r\n\t\t\t\tgantt.callEvent(\"onMouseMove\", [id, e]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction detach(eventName, className, handler, root) {\r\n\t\t\tif (eventHandlers[eventName]) {\r\n\t\t\t\tfor(var i = 0; i < eventHandlers[eventName].length; i++){\r\n\t\t\t\t\tif(eventHandlers[eventName][i].root == root){\r\n\t\t\t\t\t\teventHandlers[eventName].splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar domEvents = gantt._createDomEventScope();\r\n\r\n\t\tfunction reset(node){\r\n\r\n\t\t\tdomEvents.detachAll();\r\n\r\n\t\t\tif(node){\r\n\t\t\t\tdomEvents.attach(node, \"click\", onClick);\r\n\t\t\t\tdomEvents.attach(node, \"dblclick\", onDoubleClick);\r\n\t\t\t\tdomEvents.attach(node, \"mousemove\", onMouseMove);\r\n\t\t\t\tdomEvents.attach(node, \"contextmenu\", onContextMenu);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn {\r\n\t\t\treset: reset,\r\n\t\t\tglobal: function(event, classname, handler){\r\n\t\t\t\taddEventTarget(event, classname, handler, null);\r\n\t\t\t},\r\n\t\t\tdelegate: addEventTarget,\r\n\t\t\tdetach: detach,\r\n\t\t\tcallHandler: callHandler,\r\n\t\t\tonDoubleClick: onDoubleClick,\r\n\t\t\tonMouseMove: onMouseMove,\r\n\t\t\tonContextMenu: onContextMenu,\r\n\t\t\tonClick: onClick,\r\n\t\t\tdestructor: function(){\r\n\t\t\t\treset();\r\n\t\t\t\teventHandlers = null;\r\n\t\t\t\tdomEvents = null;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t};\r\n\r\n})(domHelpers);\r\n\r\n\r\nmodule.exports = {\r\n\tinit:createMouseHandler\r\n};\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar createLayerFactory = __webpack_require__(40);\r\n\r\nvar createLayerEngine = function(gantt){\r\n\tvar factory = createLayerFactory(gantt);\r\n\treturn {\r\n\t\tgetDataRender: function(name){\r\n\t\t\treturn gantt.$services.getService(\"layer:\" + name) || null;\r\n\t\t},\r\n\t\tcreateDataRender: function(config){\r\n\t\t\tvar name = config.name,\r\n\t\t\t\tdefaultContainer = config.defaultContainer,\r\n\t\t\t\tpreviusSiblingContainer = config.defaultContainerSibling;\r\n\r\n\t\t\tvar layers = factory.createGroup(\r\n\t\t\t\tdefaultContainer,\r\n\t\t\t\tpreviusSiblingContainer,\r\n\t\t\t\tfunction(itemId, item){\r\n\t\t\t\t\tif(layers.filters){\r\n\t\t\t\t\t\tfor(var i = 0; i < layers.filters.length; i++){\r\n\t\t\t\t\t\t\tif(layers.filters[i](itemId, item) === false){\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tgantt.$services.setService(\"layer:\" + name, function(){\r\n\t\t\t\treturn layers;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function () {\r\n\t\t\t\tlayers.addLayer();// init layers on start\r\n\t\t\t});\r\n\r\n\t\t\treturn layers;\r\n\t\t},\r\n\t\tinit: function(){\r\n\t\t\tvar taskLayers = this.createDataRender({\r\n\t\t\t\tname: \"task\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefaultContainerSibling: function(){\r\n\t\t\t\t\tif(gantt.$task_links){\r\n\t\t\t\t\t\treturn gantt.$task_links;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_links;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function(item){\r\n\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\tvar linkLayers = this.createDataRender({\r\n\t\t\t\tname: \"link\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\treturn {\r\n\t\t\t\taddTaskLayer: function(config){\r\n\t\t\t\t\treturn taskLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/*getTaskLayer: function(id){\r\n\t\t\t\t\treturn taskLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\r\n\t\t\t\t_getTaskLayers: function(){\r\n\t\t\t\t\treturn taskLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveTaskLayer: function(id){\r\n\t\t\t\t\ttaskLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachTaskLayer: function(code){\r\n\t\t\t\t\ttaskLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearTaskLayers: function(){\r\n\t\t\t\t\ttaskLayers.clear();\r\n\t\t\t\t},\r\n\t\t\t\taddLinkLayer: function(config){\r\n\t\t\t\t\treturn linkLayers.addLayer(config);\r\n\t\t\t\t},\r\n\t\t\t\t/*getLinkLayer: function(id){\r\n\t\t\t\t\treturn linkLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\t\t\t\t_getLinkLayers: function(){\r\n\t\t\t\t\treturn linkLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveLinkLayer: function(id){\r\n\t\t\t\t\tlinkLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachLinkLayer: function(code){\r\n\t\t\t\t\tlinkLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearLinkLayers: function(){\r\n\t\t\t\t\tlinkLayers.clear();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = createLayerEngine;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar renderFactoryProvider = __webpack_require__(41);\r\nvar utils = __webpack_require__(0);\r\n\r\nvar layerFactory = function(gantt){\r\n\r\n\tvar renderFactory = renderFactoryProvider(gantt);\r\n\treturn {\r\n\tcreateGroup: function (get_container, rel_root, defaultFilters) {\r\n\r\n\t\tvar renderGroup = {\r\n\t\t\ttempCollection: [],\r\n\t\t\trenderers: {},\r\n\t\t\tcontainer: get_container,\r\n\t\t\tfilters: [],\r\n\t\t\tgetLayers: function () {\r\n\t\t\t\tvar res = [];\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tres.push(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t},\r\n\t\t\tgetLayer: function (id) {\r\n\t\t\t\treturn this.renderers[id];\r\n\t\t\t},\r\n\t\t\t_add: function (layer) {\r\n\t\t\t\tif (layer) {\r\n\t\t\t\t\tlayer.id = layer.id || utils.uid();\r\n\t\t\t\t\tthis.tempCollection.push(layer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this.container()) return;\r\n\r\n\t\t\t\tvar container = this.container();\r\n\r\n\t\t\t\tvar pending = this.tempCollection;\r\n\t\t\t\tfor (var i = 0; i < pending.length; i++) {\r\n\t\t\t\t\tlayer = pending[i];\r\n\r\n\r\n\t\t\t\t\tvar node = layer.container,\r\n\t\t\t\t\t\tid = layer.id,\r\n\t\t\t\t\t\ttopmost = layer.topmost;\r\n\t\t\t\t\tif (!node.parentNode) {\r\n\t\t\t\t\t\t//insert on top or below the tasks\r\n\t\t\t\t\t\tif (topmost) {\r\n\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar rel = rel_root ? rel_root() : container.firstChild;\r\n\t\t\t\t\t\t\tif (rel)\r\n\t\t\t\t\t\t\t\tcontainer.insertBefore(node, rel);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renderers[id] = renderFactory.getRenderer(\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tlayer,\r\n\t\t\t\t\t\tnode\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.tempCollection.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddLayer: function (config) {\r\n\t\t\t\t//config = prepareConfig(config);\r\n\t\t\t\tif(config){\r\n\t\t\t\t\tif(typeof config == \"function\"){\r\n\t\t\t\t\t\tconfig = {renderer: config};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.filter === undefined){\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(defaultFilters || []);\r\n\t\t\t\t\t}else if(config.filter instanceof Array){\r\n\t\t\t\t\t\tconfig.filter.push(defaultFilters);\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(config.filter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!config.container){\r\n\t\t\t\t\t\tconfig.container = document.createElement(\"div\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._add(config);\r\n\t\t\t\treturn (config ? config.id : undefined);\r\n\t\t\t},\r\n\t\t\teachLayer: function(code){\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tcode(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveLayer: function (id) {\r\n\t\t\t\tif(!this.renderers[id])\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.renderers[id].destructor();\r\n\t\t\t\tdelete this.renderers[id];\r\n\t\t\t},\r\n\t\t\tclear: function () {\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tthis.renderers[i].destructor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.renderers = {};\r\n\t\t\t}//,\r\n\t\t\t//prepareConfig: prepareConfig\r\n\t\t};\r\n\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\trenderGroup.clear();\r\n\t\t\trenderGroup = null;\r\n\t\t});\r\n\r\n\t\treturn renderGroup;\r\n\t}\r\n};};\r\n\r\n\r\nfunction mergeFilters(filter_methods){\r\n\tif(!(filter_methods instanceof Array)){\r\n\t\tfilter_methods = Array.prototype.slice.call(arguments, 0);\r\n\t}\r\n\r\n\treturn function(obj){\r\n\t\tvar res = true;\r\n\t\tfor(var i = 0, len = filter_methods.length; i < len; i++){\r\n\t\t\tvar filter_method = filter_methods[i];\r\n\t\t\tif(filter_method){\r\n\t\t\t\tres = res && (filter_method(obj.id, obj) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t};\r\n}\r\n\r\n\r\nmodule.exports = layerFactory;\r\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports) {\n\nvar rendererFactory = function(gantt){\r\n\tvar services = gantt.$services;\r\n\r\n\t//hash of dom elements is needed to redraw single bar/link\r\n\tvar task_area_pulls = {},\r\n\t\ttask_area_renderers = {};\r\n\r\n\tfunction getRenderer(id, layer, node) {\r\n\r\n\t\tif (task_area_renderers[id])\r\n\t\t\treturn task_area_renderers[id];\r\n\r\n\t\tif (!layer.renderer)\r\n\t\t\tgantt.assert(false, \"Invalid renderer call\");\r\n\r\n\t\tvar renderOne = function(item){\r\n\t\t\treturn layer.renderer.call(this, item, layer.host);\r\n\t\t} ;\r\n\r\n\t\tvar filter = layer.filter;\r\n\r\n\t\tif (node)\r\n\t\t\tnode.setAttribute(services.config().layer_attribute, true);\r\n\r\n\t\ttask_area_renderers[id] = {\r\n\t\t\trender_item: function (item, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tif (filter) {\r\n\t\t\t\t\tif (!filter(item)) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dom = renderOne.call(gantt, item);\r\n\t\t\t\tthis.append(item, dom, container);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclear: function (container) {\r\n\t\t\t\tthis.rendered = task_area_pulls[id] = {};\r\n\t\t\t\tthis.clear_container(container);\r\n\t\t\t},\r\n\t\t\tclear_container: function (container) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (container)\r\n\t\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t},\r\n\t\t\trender_items: function (items, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\t\t\t\tthis.clear(container);\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tthis.render_item(items[i], buffer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer.appendChild(buffer);\r\n\t\t\t},\r\n\t\t\tappend: function (item, node, container) {\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tif (this.rendered[item.id]) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.rendered[item.id] && this.rendered[item.id].parentNode) {\r\n\t\t\t\t\tthis.replace_item(item.id, node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item.id] = node;\r\n\r\n\t\t\t},\r\n\t\t\treplace_item: function (item_id, newNode) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.replaceChild(newNode, item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item_id] = newNode;\r\n\t\t\t},\r\n\t\t\tremove_item: function (item_id) {\r\n\t\t\t\tthis.hide(item_id);\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\thide: function (item_id) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.removeChild(item);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trestore: function (item) {\r\n\t\t\t\tvar dom = this.rendered[item.id];\r\n\t\t\t\tif (dom) {\r\n\t\t\t\t\tif (!dom.parentNode) {\r\n\t\t\t\t\t\tthis.append(item, dom, node);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render_item(item, node);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchange_id: function (oldid, newid) {\r\n\t\t\t\tthis.rendered[newid] = this.rendered[oldid];\r\n\t\t\t\tdelete this.rendered[oldid];\r\n\t\t\t},\r\n\t\t\trendered: task_area_pulls[id],\r\n\t\t\tnode: node,\r\n\t\t\tdestructor: function () {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tdelete task_area_renderers[id];\r\n\t\t\t\tdelete task_area_pulls[id];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn task_area_renderers[id];\r\n\t}\r\n\r\n\r\n\tfunction clearRenderers() {\r\n\t\tfor (var i in task_area_renderers) {\r\n\t\t\tgetRenderer(i).destructor();\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetRenderer: getRenderer,\r\n\t\tclearRenderers: clearRenderers\r\n\t};\r\n\r\n};\r\n\r\nmodule.exports = rendererFactory;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(3),\r\n\tLayout = __webpack_require__(12),\r\n\tCell = __webpack_require__(5);\r\n\r\nvar ViewLayout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewLayout, _super);\r\n\tfunction ViewLayout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tfor (var i = 0; i < _this.$cells.length; i++) {\r\n\t\t\t_this.$cells[i].$config.hidden = (i !== 0);\r\n\t\t}\r\n\t\t_this.$cell = _this.$cells[0];\r\n\t\t_this.$name = \"viewLayout\";\r\n\r\n\t\treturn _this;\r\n\t}\r\n\tViewLayout.prototype.cell = function (id) {\r\n\t\tvar cell = _super.prototype.cell.call(this, id);\r\n\t\tif (!cell.$view) {\r\n\t\t\tthis.$fill(null, this);\r\n\t\t}\r\n\t\treturn cell;\r\n\t};\r\n\tViewLayout.prototype.moveView = function (view) {\r\n\t\tvar body = this.$view;\r\n\t\tif (this.$cell) {\r\n\t\t\tthis.$cell.$config.hidden = true;\r\n\t\t\tbody.removeChild(this.$cell.$view);\r\n\t\t}\r\n\t\tthis.$cell = view;\r\n\t\tbody.appendChild(view.$view);\r\n\t};\r\n\tViewLayout.prototype.setSize = function (x, y) {\r\n\t\tCell.prototype.setSize.call(this, x, y);\r\n\t};\r\n\r\n\tViewLayout.prototype.setContentSize = function(){\r\n\t\tvar size = this.$lastSize;\r\n\t\tthis.$cell.setSize(size.contentX, size.contentY);\r\n\t};\r\n\r\n\tViewLayout.prototype.getSize = function () {\r\n\t\tvar sizes = _super.prototype.getSize.call(this);\r\n\t\tif (this.$cell) {\r\n\t\t\tvar cellSize = this.$cell.getSize();\r\n\t\t\tif (this.$config.byMaxSize) {\r\n\t\t\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\t\t\tvar otherCell = this.$cells[i].getSize();\r\n\t\t\t\t\tfor (var cell in cellSize) {\r\n\t\t\t\t\t\tcellSize[cell] = Math.max(cellSize[cell], otherCell[cell]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var size in sizes) {\r\n\t\t\t\tsizes[size] = sizes[size] || cellSize[size];\r\n\t\t\t}\r\n\t\t\tsizes.gravity = Math.max(sizes.gravity, cellSize.gravity);\r\n\t\t}\r\n\t\treturn sizes;\r\n\t};\r\n\treturn ViewLayout;\r\n}(Layout));\r\n\r\nmodule.exports = ViewLayout;\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(3),\r\n\tutils = __webpack_require__(0),\r\n\tCell = __webpack_require__(5);\r\n\r\nvar ViewCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewCell, _super);\r\n\tfunction ViewCell(parent, config, factory) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(config.view){\r\n\t\t\tif(config.id){\r\n\t\t\t\t// pass id to the nested view\r\n\t\t\t\tthis.$id = utils.uid();\r\n\t\t\t}\r\n\t\t\tvar childConfig = utils.copy(config);\r\n\t\t\tdelete childConfig.config;\r\n\t\t\tdelete childConfig.templates;\r\n\r\n\t\t\tthis.$content = this.$factory.createView(config.view, this, childConfig, this);\r\n\t\t\tif(!this.$content)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t_this.$name = \"viewCell\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tViewCell.prototype.destructor = function(){\r\n\t\tthis.clear();\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tViewCell.prototype.clear = function(){\r\n\r\n\t\tthis.$initialized = false;\r\n\r\n\t\t// call destructor\r\n\t\tif (this.$content){\r\n\t\t\tvar method = this.$content.unload || this.$content.destructor;\r\n\t\t\tif (method){\r\n\t\t\t\tmethod.call(this.$content);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.clear.call(this);\r\n\r\n\t};\r\n\r\n\tViewCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif(this.$content && this.$content.scrollTo){\r\n\t\t\tthis.$content.scrollTo(left, top);\r\n\t\t}else{\r\n\t\t\t_super.prototype.scrollTo.call(this, left, top);\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype._setContentSize = function(x, y){\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar outerX = x + borders.horizontal;\r\n\t\tvar outerY = y + borders.vertical;\r\n\t\tthis.$config.width = outerX;\r\n\t\tthis.$config.height = outerY;\r\n\t};\r\n\r\n\tViewCell.prototype.setSize = function(x, y){\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (!this.$initialized) {\r\n\t\t\t\tthis.$initialized = true;\r\n\t\t\t\tvar header = this.$view.childNodes[0];\r\n\t\t\t\tvar content = this.$view.childNodes[1];\r\n\t\t\t\tif(!content) content = header;\r\n\r\n\t\t\t\t/*if(this.$content.$config){\r\n\t\t\t\t\tthis.$content.$config.width = this.$lastSize.contentX;\r\n\t\t\t\t\tthis.$content.$config.height = this.$lastSize.contentY;\r\n\t\t\t\t}*/\r\n\t\t\t\tthis.$content.init(content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.setContentSize = function(){\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (this.$initialized) {\r\n\t\t\t\tthis.$content.setSize(this.$lastSize.contentX, this.$lastSize.contentY);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tViewCell.prototype.getContentSize = function(){\r\n\t\tvar size = _super.prototype.getContentSize.call(this);\r\n\r\n\t\tif(this.$content && this.$initialized){\r\n\t\t\tvar childSize = this.$content.getSize();\r\n\t\t\tsize.width = childSize.contentX === undefined ? childSize.width : childSize.contentX;\r\n\t\t\tsize.height = childSize.contentY === undefined ? childSize.height : childSize.contentY;\r\n\t\t}\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tsize.width += borders.horizontal;\r\n\t\tsize.height += borders.vertical;\r\n\r\n\t\treturn size;\r\n\t};\r\n\r\n\treturn ViewCell;\r\n}(Cell));\r\n\r\nmodule.exports = ViewCell;\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(3),\r\n\tdomHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0),\r\n\tCell = __webpack_require__(5);\r\n\r\nvar ResizerCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ResizerCell, _super);\r\n\tfunction ResizerCell(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tvar startBackSize, startFrontSize;\r\n\r\n\t\t_this._moveHandler = function (e) {\r\n\t\t\t_this._moveResizer(_this._resizer, e.pageX, e.pageY);\r\n\t\t};\r\n\t\t_this._upHandler = function () {\r\n\t\t\tvar newSizes = _this._getNewSizes();\r\n\t\t\tif(_this.callEvent(\"onResizeEnd\", [startBackSize, startFrontSize, newSizes ? newSizes.back : 0, newSizes ? newSizes.front : 0]) !== false){\r\n\t\t\t\t_this._setSizes();\r\n\t\t\t}\r\n\r\n\t\t\t_this._setBackground(false);\r\n\t\t\t_this._clearResizer();\r\n\t\t\t_this._clearListeneres();\r\n\t\t};\r\n\r\n\t\t_this._clearListeneres = function(){\r\n\t\t\tthis.$domEvents.detach(document, \"mouseup\", _this._upHandler);\r\n\t\t\tthis.$domEvents.detach(document, \"mousemove\", _this._moveHandler);\r\n\t\t\tthis.$domEvents.detach(document, \"mousemove\", _this._startOnMove);\r\n\t\t\tthis.$domEvents.detach(document, \"mouseup\", _this._cancelDND);\r\n\t\t};\r\n\r\n\t\t_this._callStartDNDEvent = function(){\r\n\t\t\tif (this._xMode) {\r\n\t\t\t\tstartBackSize = this._behind.$config.width || this._behind.$view.offsetWidth;\r\n\t\t\t\tstartFrontSize = this._front.$config.width || this._front.$view.offsetWidth;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tstartBackSize = this._behind.$config.height || this._behind.$view.offsetHeight;\r\n\t\t\t\tstartFrontSize = this._front.$config.height || this._front.$view.offsetHeight;\r\n\t\t\t}\r\n\r\n\t\t\tif(_this.callEvent(\"onResizeStart\", [startBackSize, startFrontSize]) === false){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t_this._startDND = function(e){\r\n\t\t\tvar res = this._callStartDNDEvent();\r\n\t\t\tif(res === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar stop = false;\r\n\t\t\tthis._eachGroupItem(function(resizer){\r\n\t\t\t\tresizer._getSiblings();\r\n\t\t\t\tif(resizer._callStartDNDEvent() === false){\r\n\t\t\t\t\tstop = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(stop){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_this._moveHandler(e);\r\n\r\n\t\t\t_this.$domEvents.attach(document, \"mousemove\", _this._moveHandler);\r\n\t\t\t_this.$domEvents.attach(document, \"mouseup\", _this._upHandler);\r\n\t\t};\r\n\r\n\t\t_this._cancelDND = function(){\r\n\t\t\t_this._setBackground(false);\r\n\t\t\t_this._clearResizer();\r\n\t\t\t_this._clearListeneres();\r\n\t\t};\r\n\r\n\t\t_this._startOnMove = function(e){\r\n\t\t\tif(_this._isPosChanged(e)){\r\n\t\t\t\t_this._clearListeneres();\r\n\t\t\t\t_this._startDND(e);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t_this._downHandler = function (e) {\r\n\t\t\t_this._getSiblings();\r\n\r\n\t\t\tif (_this._behind.$config.collapsed || _this._front.$config.collapsed) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_this._setBackground(true);\r\n\t\t\t_this._resizer = _this._setResizer();\r\n\r\n\t\t\t_this._positions = {\r\n\t\t\t\tx: e.pageX,\r\n\t\t\t\ty: e.pageY,\r\n\t\t\t\ttimestamp: Date.now()\r\n\t\t\t};\r\n\r\n\t\t\t_this.$domEvents.attach(document, \"mousemove\", _this._startOnMove);\r\n\t\t\t_this.$domEvents.attach(document, \"mouseup\", _this._cancelDND);\r\n\t\t};\r\n\t\t_this.$name = \"resizer\";\r\n\t\treturn _this;\r\n\t}\r\n\tResizerCell.prototype.init = function () {\r\n\t\tvar _this = this;\r\n\t\t_super.prototype.init.call(this);\r\n\t\tthis._xMode = this.$config.mode === \"x\";\r\n\t\tif (this._xMode && !this.$config.width) {\r\n\t\t\tthis.$config.width = this.$config.minWidth = 1;\r\n\t\t}\r\n\t\telse if (!this._xMode && !this.$config.height) {\r\n\t\t\tthis.$config.height = this.$config.minHeight = 1;\r\n\t\t}\r\n\r\n\t\tthis.$config.margin = -1;\r\n\r\n\t\tthis.$domEvents.attach(this.$view, \"mousedown\", _this._downHandler);\r\n\r\n\t};\r\n\tResizerCell.prototype.$toHTML = function () {\r\n\t\tvar mode = this.$config.mode;\r\n\t\tvar css = this.$config.css || \"\";\r\n\t\treturn \"<div class='gantt_layout_cell gantt_resizer gantt_resizer_\"+mode+\"'><div class='gantt_layout_content gantt_resizer_\" + mode + (css ? (\" \" + css) : \"\") + \"'></div></div>\";\r\n\t};\r\n\r\n\tResizerCell.prototype._clearResizer = function(){\r\n\t\tif(this._resizer){\r\n\t\t\tif(this._resizer.parentNode){\r\n\t\t\t\tthis._resizer.parentNode.removeChild(this._resizer);\r\n\t\t\t}\r\n\t\t\tthis._resizer = null;\r\n\t\t}\r\n\t};\r\n\r\n\tResizerCell.prototype._isPosChanged = function(e){\r\n\t\tif(!this._positions){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(Math.abs(this._positions.x - e.pageX) > 3 || Math.abs(this._positions.y - e.pageY) > 3){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif(Date.now() - this._positions.timestamp > 300){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tResizerCell.prototype._getSiblings = function () {\r\n\t\tvar cells = this.$parent.getCells();\r\n\r\n\t\tif(this.$config.prev){\r\n\t\t\tthis._behind = this.$factory.getView(this.$config.prev);\r\n\t\t}\r\n\t\tif(this.$config.next){\r\n\t\t\tthis._front = this.$factory.getView(this.$config.next);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (this === cells[i]) {\r\n\t\t\t\tif(!this._behind)\r\n\t\t\t\t\tthis._behind = cells[i - 1];\r\n\t\t\t\tif(!this._front)\r\n\t\t\t\t\tthis._front = cells[i + 1];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tResizerCell.prototype._setBackground = function (state) {\r\n\t\tvar classes = \"gantt_resizing\";\r\n\t\tif (!state) {\r\n\t\t\tdomHelpers.removeClassName(this._behind.$view, classes);\r\n\t\t\tdomHelpers.removeClassName(this._front.$view, classes);\r\n\t\t\tdomHelpers.removeClassName(document.body, 'gantt_noselect');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdomHelpers.addClassName(this._behind.$view, classes, true);\r\n\t\tdomHelpers.addClassName(this._front.$view, classes, true);\r\n\t\tdomHelpers.addClassName(document.body, 'gantt_noselect', true);\r\n\t};\r\n\tResizerCell.prototype._setResizer = function () {\r\n\t\tvar resizer = document.createElement(\"div\");\r\n\t\tresizer.className = \"gantt_resizer_stick\";\r\n\t\tthis.$view.appendChild(resizer);\r\n\t\tthis.$view.style.overflow = \"visible\";\r\n\t\tresizer.style.height = this.$view.style.height;\r\n\t\treturn resizer;\r\n\t};\r\n\r\n\tResizerCell.prototype._getDirection = function(x, y){\r\n\t\tvar shift;\r\n\t\tif (this._xMode) {\r\n\t\t\tshift = x - this._positions.x;\r\n\t\t}else{\r\n\t\t\tshift = y - this._positions.y;\r\n\t\t}\r\n\t\treturn shift ? shift < 0 ? -1 : 1 : 0;\r\n\t};\r\n\r\n\tResizerCell.prototype._getResizePosition = function(x, y){\r\n\t\tvar size;\r\n\t\tvar behindSide;\r\n\t\tvar behindMin;\r\n\t\tvar frontSide;\r\n\t\tvar frontMin;\r\n\t\tif (this._xMode) {\r\n\t\t\tsize = x - this._positions.x;\r\n\t\t\tbehindSide = this._behind.$config.width || this._behind.$view.offsetWidth;\r\n\t\t\tfrontSide = this._front.$config.width || this._front.$view.offsetWidth;\r\n\t\t\tbehindMin = this._behind.$config.minWidth;\r\n\t\t\tfrontMin = this._front.$config.minWidth;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsize = y - this._positions.y;\r\n\t\t\tbehindSide = this._behind.$config.height || this._behind.$view.offsetHeight;\r\n\t\t\tfrontSide = this._front.$config.height || this._front.$view.offsetHeight;\r\n\t\t\tbehindMin = this._front.$config.minHeight;\r\n\t\t\tfrontMin = this._front.$config.minHeight;\r\n\t\t}\r\n\t\tvar direction = this._getDirection(x, y);\r\n\t\tvar newBehindSide,\r\n\t\t\tnewFrontSide;\r\n\r\n\t\tif (direction === -1) {\r\n\t\t\tnewFrontSide = frontSide - size;\r\n\t\t\tnewBehindSide = behindSide - Math.abs(size);\r\n\r\n\t\t\tif (frontSide - size > this._front.$config.maxWidth) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (Math.abs(size) >= behindSide) {\r\n\t\t\t\tsize = -Math.abs(behindSide - 2);\r\n\t\t\t}\r\n\t\t\t// if min width\r\n\t\t\tif (behindSide - Math.abs(size) <= behindMin) {\r\n\t\t\t\t//this._resizer.style.background = \"red\";\r\n\t\t\t\tsize = -Math.abs(behindSide - behindMin);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnewFrontSide = frontSide - Math.abs(size);\r\n\t\t\tnewBehindSide = behindSide + size;\r\n\r\n\t\t\tif (behindSide + size > this._behind.$config.maxWidth) {\r\n\t\t\t\tsize = this._behind.$config.maxWidth - behindSide;\r\n\t\t\t\t// return;\r\n\t\t\t}\r\n\t\t\tif (Math.abs(size) >= frontSide) {\r\n\t\t\t\tsize = frontSide - 2;\r\n\t\t\t}\r\n\t\t\t// if min width\r\n\t\t\tif (frontSide - Math.abs(size) <= frontMin) {\r\n\t\t\t\tsize = Math.abs(frontSide - frontMin);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (direction === -1) {\r\n\t\t\tnewFrontSide = frontSide - size;\r\n\t\t\tnewBehindSide = behindSide - Math.abs(size);\r\n\t\t} else {\r\n\t\t\tnewFrontSide = frontSide - Math.abs(size);\r\n\t\t\tnewBehindSide = behindSide + size;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsize: size,\r\n\t\t\tnewFrontSide: newFrontSide,\r\n\t\t\tnewBehindSide: newBehindSide\r\n\t\t};\r\n\t};\r\n\r\n\tResizerCell.prototype._getGroupName = function(){\r\n\t\tthis._getSiblings();\r\n\t\treturn this._front.$config.group || this._behind.$config.group;\r\n\t};\r\n\r\n\tResizerCell.prototype._eachGroupItem = function(callback, master){\r\n\t\tvar layout = this.$factory.getView(\"main\");\r\n\r\n\t\tvar group = this._getGroupName();\r\n\r\n\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\tfor(var i = 0; i < resizers.length; i++) {\r\n\t\t\tif (resizers[i]._getGroupName() == group && resizers[i] != this) {\r\n\t\t\t\tcallback.call(master || this, resizers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tResizerCell.prototype._getGroupResizePosition = function(x, y){\r\n\t\tvar sizes = this._getResizePosition(x, y);\r\n\r\n\t\tif(!this._getGroupName()){\r\n\t\t\treturn sizes;\r\n\t\t}\r\n\r\n\t\tvar positions = [sizes];\r\n\r\n\t\tthis._eachGroupItem(function(resizer){\r\n\t\t\tresizer._getSiblings();\r\n\t\t\tvar pos = utils.copy(this._positions);\r\n\t\t\tif(this._xMode){\r\n\t\t\t\tpos.x += (resizer._behind.$config.width - this._behind.$config.width);\r\n\t\t\t}else{\r\n\t\t\t\tpos.y += (resizer._behind.$config.height - this._behind.$config.height);\r\n\t\t\t}\r\n\t\t\tresizer._positions = pos;\r\n\t\t\tpositions.push(resizer._getResizePosition(x, y));\r\n\t\t});\r\n\r\n\t\tvar minMax;\r\n\t\tfor(var i =0; i < positions.length; i++){\r\n\t\t\tif(!positions[i]) return;\r\n\t\t\tif(minMax === undefined){\r\n\t\t\t\tminMax = positions[i];\r\n\t\t\t}else if(positions[i].newBehindSide > minMax.newBehindSide){\r\n\t\t\t\tminMax = positions[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t/*\tif(minMax != sizes){\r\n\t\t\tminMax.size = minMax.size;\r\n\t\t}*/\r\n\r\n\t\treturn minMax;\r\n\t};\r\n\r\n\tResizerCell.prototype._moveResizer = function (av, x, y) {\r\n\t\tif (x === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar sizes = this._getGroupResizePosition(x, y);\r\n\t\tif(!sizes)\r\n\t\t\treturn;\r\n\r\n\t\tif (Math.abs(sizes.size) === 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this._xMode) {\r\n\t\t\tav.style.left = sizes.size + 'px';\r\n\t\t\tthis._positions.nextX = sizes.size || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tav.style.top = sizes.size + 'px';\r\n\t\t\tthis._positions.nextY = sizes.size || 0;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onResize\", [sizes.newBehindSide, sizes.newFrontSide]);\r\n\t};\r\n\tResizerCell.prototype._setGravity = function (cell) {\r\n\t\tvar size = this._xMode ? \"offsetWidth\" : \"offsetHeight\";\r\n\t\tvar position = this._xMode ? this._positions.nextX : this._positions.nextY;\r\n\t\tvar frontSize = this._front.$view[size];\r\n\t\tvar behindSize = this._behind.$view[size];\r\n\t\tvar frontG = this._front.getSize().gravity;\r\n\t\tvar behindG = this._behind.getSize().gravity;\r\n\t\tvar newFrontG = (frontSize - position) / frontSize * frontG;\r\n\t\tvar newBehindG = (behindSize + position) / behindSize * behindG;\r\n\t\tif (cell !== \"front\") {\r\n\t\t\tthis._front.$config.gravity = newFrontG;\r\n\t\t}\r\n\t\tif (cell !== \"behind\") {\r\n\t\t\tthis._behind.$config.gravity = newBehindG;\r\n\t\t}\r\n\t};\r\n\r\n/*\tResizerCell.prototype.setSize = function(){\r\n\t\t_super.apply(this, arguments)\r\n\t};*/\r\n\r\n\tResizerCell.prototype._getNewSizes = function(){\r\n\t\tvar behindSize = this._xMode ? this._behind.$config.width : this._behind.$config.height;\r\n\t\tvar frontSize = this._xMode ? this._front.$config.width : this._front.$config.height;\r\n\t\tvar position = this._xMode ? this._positions.nextX : this._positions.nextY;\r\n\r\n\t\tif(!frontSize && !behindSize){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tfront: frontSize ? ((frontSize - position) || 1) : 0,\r\n\t\t\tback: behindSize ? ((behindSize + position) || 1) : 0\r\n\t\t};\r\n\t};\r\n\r\n\tResizerCell.prototype._assignNewSizes = function(newSizes){\r\n\t\tthis._getSiblings();\r\n\t\tvar side = this._xMode ? 'width' : 'height';\r\n\r\n\t\t// if only gravity cells\r\n\t\tif (!newSizes) {\r\n\t\t\tthis._setGravity();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!newSizes.front) {\r\n\t\t\t\tthis._setGravity(\"behind\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._front.$config[side] = newSizes.front;\r\n\t\t\t}\r\n\t\t\tif (!newSizes.back) {\r\n\t\t\t\tthis._setGravity(\"front\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._behind.$config[side] = newSizes.back;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tResizerCell.prototype._setSizes = function () {\r\n\t\tif (this._resizer) {\r\n\t\t\tthis.$view.removeChild(this._resizer);\r\n\t\t}\r\n\t\tvar newSizes = this._getNewSizes();\r\n\r\n\t\tif (this._positions.nextX || this._positions.nextY) {\r\n\t\t\tthis._assignNewSizes(newSizes);\r\n\r\n\t\t\tvar side = this._xMode ? 'width' : 'height';\r\n\t\t\tif(this._front.$config.group){\r\n\t\t\t\tthis.$gantt.$layout._syncCellSizes(this._front.$config.group, this._front.$config[side]);\r\n\t\t\t}else if(this._behind.$config.group){\r\n\t\t\t\tthis.$gantt.$layout._syncCellSizes(this._behind.$config.group, this._behind.$config[side]);\r\n\t\t\t}\r\n\r\n\t\t\tif(this._getGroupName()){\r\n\t\t\t\tthis.$factory.getView(\"main\").resize();\r\n\t\t\t}else{\r\n\t\t\t\tthis.$parent.resize();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n\treturn ResizerCell;\r\n}(Cell));\r\n\r\nmodule.exports = ResizerCell;\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(3),\r\n\tdomHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0),\r\n\tenv = __webpack_require__(6),\r\n\teventable = __webpack_require__(2),\r\n\tCell = __webpack_require__(5);\r\n\r\nvar ScrollbarCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ScrollbarCell, _super);\r\n\tfunction ScrollbarCell(parent, config, factory, gantt) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tthis.$config = utils.mixin(config, {scroll: \"x\"});\r\n\t\t_this._scrollHorizontalHandler = utils.bind(_this._scrollHorizontalHandler, _this);\r\n\t\t_this._scrollVerticalHandler = utils.bind(_this._scrollVerticalHandler, _this);\r\n\t\t_this._outerScrollVerticalHandler = utils.bind(_this._outerScrollVerticalHandler, _this);\r\n\t\t_this._outerScrollHorizontalHandler = utils.bind(_this._outerScrollHorizontalHandler, _this);\r\n\t\t_this._mouseWheelHandler = utils.bind(_this._mouseWheelHandler, _this);\r\n\r\n\t\tthis.$config.hidden = true;\r\n\t\tvar size = gantt.config.scroll_size;\r\n\r\n\t\tif(gantt.env.isIE){\r\n\t\t\t// full element height/width must be bigger than just a browser scrollbar,\r\n\t\t\t// otherwise the scrollbar element won't be scrolled on click\r\n\t\t\tsize += 1;\r\n\t\t}\r\n\r\n\t\tif(this._isHorizontal()){\r\n\t\t\t_this.$config.height = size;\r\n\t\t\t_this.$parent.$config.height = size;\r\n\t\t}else{\r\n\t\t\t_this.$config.width = size;\r\n\t\t\t_this.$parent.$config.width = size;\r\n\t\t}\r\n\r\n\t\tthis.$config.scrollPosition = 0;\r\n\r\n\t\t_this.$name = \"scroller\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tScrollbarCell.prototype.init = function(container){\r\n\t\tcontainer.innerHTML = this.$toHTML();\r\n\t\tthis.$view = container.firstChild;\r\n\r\n\t\tif(!this.$view){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tif(this._isVertical()){\r\n\t\t\tthis._initVertical();\r\n\t\t}else{\r\n\t\t\tthis._initHorizontal();\r\n\t\t}\r\n\t\tthis._initMouseWheel();\r\n\t\tthis._initLinkedViews();\r\n\t};\r\n\r\n\tScrollbarCell.prototype.$toHTML = function () {\r\n\t\tvar className = this._isHorizontal() ? \"gantt_hor_scroll\" : \"gantt_ver_scroll\";\r\n\t\treturn \"<div class='gantt_layout_cell \"+className+\"'><div style='\"+(this._isHorizontal() ? \"width:2000px\" : \"height:2000px\")+\"'></div></div>\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getRootParent = function(){\r\n\t\tvar parent = this.$parent;\r\n\t\twhile(parent && parent.$parent){\r\n\t\t\tparent = parent.$parent;\r\n\t\t}\r\n\t\tif(parent){\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction eachCell(root, res){\r\n\t\tres.push(root);\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\teachCell(root.$cells[i], res);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tScrollbarCell.prototype._eachView = function(){\r\n\t\tvar res = [];\r\n\t\teachCell(this._getRootParent(), res);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getLinkedViews = function(){\r\n\t\tvar views = this._eachView();\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].$config && ((this._isVertical() && views[i].$config.scrollY == this.$id) || (this._isHorizontal() && views[i].$config.scrollX == this.$id)) ){\r\n\t\t\t\tres.push(views[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype._initHorizontal = function(){\r\n\t\tthis.$scroll_hor = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollHorizontalHandler);\r\n\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initLinkedViews = function(){\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tvar css = this._isVertical() ?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\" : \"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\";\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\t//views[i].$config.css = [views[i].$config.css || \"\", css].join(\" \");\r\n\t\t\tdomHelpers.addClassName(views[i].$view || views[i].getNode(), css);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initVertical = function(){\r\n\t\tthis.$scroll_ver = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollVerticalHandler);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._updateLinkedViews = function(){\r\n\t\tvar root = this._getRootParent();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initMouseWheel = function(){\r\n\t\tvar ff = env.isFF;\r\n\t\tif (ff)\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"wheel\", this._mouseWheelHandler);\r\n\t\telse\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"mousewheel\", this._mouseWheelHandler);\r\n\t};\r\n\r\n\r\n\r\n\r\n\tScrollbarCell.prototype.scrollHorizontally = function(left){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\tthis.$config.codeScrollLeft = left;\r\n\t\tleft = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(left, undefined);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = left;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, left, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\tScrollbarCell.prototype.scrollVertically = function(top){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_ver.scrollTop = top;\r\n\t\ttop = this.$scroll_ver.scrollTop;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(undefined, top);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = top;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, top, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVertical = function(){\r\n\t\treturn this.$config.scroll == \"y\";\r\n\t};\r\n\tScrollbarCell.prototype._isHorizontal = function(){\r\n\t\treturn this.$config.scroll == \"x\";\r\n\t};\r\n\tScrollbarCell.prototype._scrollHorizontalHandler = function (e) {\r\n\t\tif(this._isVertical() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//in safari we can catch previous onscroll after setting new value from mouse-wheel event\r\n\t\t//set delay to prevent value drifiting\r\n\t\tif ((new Date()) - ( this._wheel_time || 0 ) < 100) return true;\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar left = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tthis.scrollHorizontally(left);\r\n\r\n\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollHorizontalHandler = function(e){\r\n\t\tif(this._isVertical()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.show = function(){\r\n\t\tthis.$parent.show();\r\n\t};\r\n\tScrollbarCell.prototype.hide = function(){\r\n\t\tthis.$parent.hide();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollSize = function(){\r\n\t\tvar scrollSize = 0;\r\n\t\tvar outerSize = 0;\r\n\t\tvar isHorizontal = this._isHorizontal();\r\n\r\n\t\tvar linked = this._getLinkedViews();\r\n\t\tvar view;\r\n\t\tvar scrollProperty = isHorizontal ? \"scrollWidth\" : \"scrollHeight\",\r\n\t\t\tinnerSizeProperty = isHorizontal ? \"contentX\" : \"contentY\";\r\n\t\tvar outerProperty = isHorizontal ? \"x\" : \"y\";\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tfor(var i = 0; i < linked.length; i++){\r\n\t\t\tview = linked[i];\r\n\t\t\tif(!(view && view.$content && view.$content.getSize)) continue;\r\n\r\n\t\t\tvar sizes = view.$content.getSize();\r\n\t\t\tvar cellScrollSize;\r\n\t\t\tif(sizes.hasOwnProperty(scrollProperty)){\r\n\t\t\t\tcellScrollSize = sizes[scrollProperty];\r\n\t\t\t}else{\r\n\t\t\t\tcellScrollSize = sizes[innerSizeProperty];\r\n\t\t\t}\r\n\r\n\t\t\tif(offset){\r\n\t\t\t\t// precalculated vertical/horizontal offsets of scrollbar to emulate 4.x look\r\n\t\t\t\tif(sizes[innerSizeProperty] > sizes[outerProperty] && sizes[innerSizeProperty] > scrollSize && (cellScrollSize > (sizes[outerProperty] - offset + 2))){\r\n\t\t\t\t\tscrollSize = cellScrollSize + (isHorizontal ? 0 : 2);\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar nonScrollableSize = Math.max(sizes[innerSizeProperty] - cellScrollSize, 0);\r\n\t\t\t\tvar scrollableViewPortSize = Math.max(sizes[outerProperty] - nonScrollableSize, 0);\r\n\t\t\t\tcellScrollSize = cellScrollSize + nonScrollableSize;\r\n\r\n\t\t\t\tif(cellScrollSize > scrollableViewPortSize && (cellScrollSize > scrollSize) ){\r\n\t\t\t\t\t//|| (cellScrollSize === scrollSize && sizes[outerProperty] < outerSize) // same scroll width but smaller scrollable view port\r\n\r\n\t\t\t\t\tscrollSize = cellScrollSize;\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\touterScroll: outerSize,\r\n\t\t\tinnerScroll: scrollSize\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.scroll = function(position){\r\n\t\tif(this._isHorizontal()){\r\n\t\t\tthis.scrollHorizontally(position);\r\n\t\t}else{\r\n\t\t\tthis.scrollVertically(position);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.getScrollState = function(){\r\n\t\treturn {\r\n\t\t\tvisible: this.isVisible(),\r\n\t\t\tdirection: this.$config.scroll,\r\n\t\t\tsize: this.$config.outerSize,\r\n\t\t\tscrollSize: this.$config.scrollSize || 0,\r\n\t\t\tposition: this.$config.scrollPosition || 0\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.setSize = function(width, height){\r\n\t\t_super.prototype.setSize.apply(this, arguments);\r\n\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\r\n\t\tvar ownSize = (this._isVertical() ? height : width) - this._getScrollOffset() + (this._isHorizontal() ? 1 : 0);\r\n\r\n\t\tif(scrollSizes.innerScroll && ownSize > scrollSizes.outerScroll){\r\n\t\t\tscrollSizes.innerScroll += (ownSize - scrollSizes.outerScroll);\r\n\t\t}\r\n\t\tthis.$config.scrollSize = scrollSizes.innerScroll;\r\n\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$config.height = height;\r\n\t\tthis._setScrollSize(scrollSizes.innerScroll);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.isVisible = function(){\r\n\t\treturn !!(this.$parent && this.$parent.$view.parentNode);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldShow = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn false;\r\n\t\t}else if(scrollSizes.innerScroll && !(this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldHide = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype.toggleVisibility = function(){\r\n\t\tif(this.shouldHide()){\r\n\t\t\tthis.hide();\r\n\t\t}else if(this.shouldShow()){\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\t\r\n\tScrollbarCell.prototype._getScaleOffset = function(view){\r\n\t\tvar offset = 0;\r\n\t\tif(view && (view.$config.view == \"timeline\" || view.$config.view == \"grid\")){\r\n\t\t\toffset = view.$content.$getConfig().scale_height;\r\n\t\t}\r\n\t\treturn offset;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollOffset = function(){\r\n\t\tvar offset = 0;\r\n\t\tif(this._isVertical()){\r\n\t\t\tvar parentLayout = this.$parent.$parent;\r\n\t\t\toffset = Math.max(\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getPrevSibling(this.$parent.$id)),\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getNextSibling(this.$parent.$id))\r\n\t\t\t\t);\r\n\t\t}else{\r\n\t\t\tvar linked = this._getLinkedViews();\r\n\r\n\t\t\tfor (var i = 0; i < linked.length; i++) {\r\n\t\t\t\tvar view = linked[i],\r\n\t\t\t\t\tvparent = view.$parent;\r\n\t\t\t\tvar cells = vparent.$cells;\r\n\r\n\t\t\t\tvar last = cells[cells.length - 1];\r\n\r\n\t\t\t\tif (last && last.$config.view == \"scrollbar\" && last.$config.hidden === false) {\r\n\t\t\t\t\toffset = last.$config.width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn offset || 0;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._setScrollSize = function(size){\r\n\t\tvar property = this._isHorizontal() ? \"width\" : \"height\";\r\n\t\tvar scrollbar = this._isHorizontal() ? this.$scroll_hor : this.$scroll_ver;\r\n\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tvar node = scrollbar.firstChild;\r\n\r\n\t\tif(offset){\r\n\t\t\tif(this._isVertical()){\r\n\r\n\t\t\t\tthis.$config.outerSize = (this.$config.height - offset + 3);\r\n\t\t\t\tscrollbar.style.height = this.$config.outerSize + \"px\";\r\n\t\t\t\tscrollbar.style.top = (offset-1) + \"px\";\r\n\t\t\t\tdomHelpers.addClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\t\tdomHelpers.addClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\t}else{\r\n\t\t\t\tthis.$config.outerSize = (this.$config.width - offset + 1);\r\n\t\t\t\tscrollbar.style.width = this.$config.outerSize + \"px\";\r\n\t\t\t\t//domHelpers.addClassName(scrollbar, this.$parent._borders.right);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tscrollbar.style.top = \"auto\";\r\n\t\t\tdomHelpers.removeClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\tdomHelpers.removeClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t}\r\n\r\n\t\tnode.style[property] = size + \"px\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._scrollVerticalHandler = function (e) {\r\n\t\tif(this._scrollHorizontalHandler() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar top = this.$scroll_ver.scrollTop;\r\n\t\tvar prev = this._oldTop;\r\n\t\tif(top == prev) return;\r\n\r\n\t\tthis.scrollVertically(top);\r\n\r\n\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollVerticalHandler = function(e){\r\n\t\tif(this._scrollHorizontalHandler()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._checkWheelTarget = function(targetNode){\r\n\t\tvar connectedViews = this._getLinkedViews().concat(this);\r\n\r\n\t\tfor(var i = 0; i < connectedViews.length; i++){\r\n\t\t\tvar node = connectedViews[i].$view;\r\n\t\t\tif(domHelpers.isChildOf(targetNode, node)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._mouseWheelHandler = function(e){\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif(!this._checkWheelTarget(target))\r\n\t\t\treturn;\r\n\r\n\t\tthis._wheel_time = new Date();\r\n\r\n\t\tvar res = {};\r\n\t\tvar ff = env.isFF;\r\n\t\tvar wx = ff ? (e.deltaX*-20) : e.wheelDeltaX*2;\r\n\t\tvar wy = ff ? (e.deltaY*-40) : e.wheelDelta;\r\n\r\n\t\tif(e.shiftKey && !(e.deltaX || e.wheelDeltaX)){\r\n\t\t\t// shift+mousewheel for horizontal scroll\r\n\t\t\twx = wy*2;\r\n\t\t\twy = 0;\r\n\t\t}\r\n\r\n\t\tif (wx && Math.abs(wx) > Math.abs(wy)){\r\n\t\t\tif(this._isVertical()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.x) return true;//no horisontal scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_hor || !this.$scroll_hor.offsetWidth) return true;\r\n\r\n\t\t\tvar dir  = wx/-40;\r\n\t\t\tvar oldLeft = this._oldLeft;\r\n\t\t\tvar left = oldLeft+dir*30;\r\n\t\t\tthis.scrollHorizontally(left);\r\n\t\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldLeft == this.$scroll_hor.scrollLeft){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t\t} else {\r\n\t\t\tif(this._isHorizontal()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.y) return true;//no vertical scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_ver || !this.$scroll_ver.offsetHeight) return true;\r\n\r\n\t\t\tvar dir  = wy/-40;\r\n\t\t\tif (typeof wy == \"undefined\")\r\n\t\t\t\tdir = e.detail;\r\n\r\n\t\t\tvar oldTop = this._oldTop;\r\n\t\t\tvar top = this.$scroll_ver.scrollTop+dir*30;\r\n\r\n\t\t\t//if(!this.$gantt.config.prevent_default_scroll &&\r\n\t\t\t//\t(this.$gantt._cached_scroll_pos && ((this.$gantt._cached_scroll_pos.y == top) || (this.$gantt._cached_scroll_pos.y <= 0 && top <= 0)))) return true;\r\n\r\n\r\n\t\t\tthis.scrollVertically(top);\r\n\t\t\tthis.$scroll_ver.scrollTop = top;\r\n\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldTop == this.$scroll_ver.scrollTop){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble=true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\treturn ScrollbarCell;\r\n})(Cell);\r\n\r\nmodule.exports = ScrollbarCell;\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nfunction ScaleHelper(gantt){\r\n\tvar dateHelper = gantt.date;\r\n\tvar services = gantt.$services;\r\n\r\n\treturn {\r\n\t\tgetSum: function (sizes, from, to) {\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = sizes.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\r\n\t\t\tvar summ = 0;\r\n\t\t\tfor (var i = from; i <= to; i++)\r\n\t\t\t\tsumm += sizes[i];\r\n\r\n\t\t\treturn summ;\r\n\t\t},\r\n\t\tsetSumWidth: function (sum_width, scale, from, to) {\r\n\t\t\tvar parts = scale.width;\r\n\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tif (from > parts.length - 1 || length <= 0 || to > parts.length - 1)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar oldWidth = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar diff = sum_width - oldWidth;\r\n\r\n\t\t\tthis.adjustSize(diff, parts, from, to);\r\n\t\t\tthis.adjustSize(-diff, parts, to + 1);\r\n\r\n\t\t\tscale.full_width = this.getSum(parts);\r\n\t\t},\r\n\t\tsplitSize: function (width, count) {\r\n\t\t\tvar arr = [];\r\n\t\t\tfor (var i = 0; i < count; i++) arr[i] = 0;\r\n\r\n\t\t\tthis.adjustSize(width, arr);\r\n\t\t\treturn arr;\r\n\r\n\t\t},\r\n\t\tadjustSize: function (width, parts, from, to) {\r\n\t\t\tif (!from)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tvar full = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar shared = 0;\r\n\r\n\t\t\tfor (var i = from; i <= to; i++) {\r\n\t\t\t\tvar share = Math.floor(width * (full ? (parts[i] / full) : (1 / length)));\r\n\r\n\t\t\t\tfull -= parts[i];\r\n\t\t\t\twidth -= share;\r\n\t\t\t\tlength--;\r\n\r\n\t\t\t\tparts[i] += share;\r\n\t\t\t\tshared += share;\r\n\t\t\t}\r\n\t\t\tparts[parts.length - 1] += width;\r\n\t\t\t//parts[parts.length - 1] += width - shared;\r\n\t\t},\r\n\t\tsortScales: function (scales) {\r\n\t\t\tfunction cellSize(unit, step) {\r\n\t\t\t\tvar d = new Date(1970, 0, 1);\r\n\t\t\t\treturn dateHelper.add(d, step, unit) - d;\r\n\t\t\t}\r\n\r\n\t\t\tscales.sort(function (a, b) {\r\n\t\t\t\tif (cellSize(a.unit, a.step) < cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else if (cellSize(a.unit, a.step) > cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\t\tscales[i].index = i;\r\n\t\t\t}\r\n\t\t},\r\n\t\tprimaryScale: function () {\r\n\r\n\t\t\tvar config = services.getService(\"templateLoader\");\r\n\t\t\tconfig.initTemplate(\"date_scale\", undefined, undefined, services.config(), services.templates());\r\n\r\n\t\t\treturn {\r\n\t\t\t\tunit: services.config().scale_unit,\r\n\t\t\t\tstep: services.config().step,\r\n\t\t\t\ttemplate: services.templates().date_scale,\r\n\t\t\t\tdate: services.config().date_scale,\r\n\t\t\t\tcss: services.templates().scale_cell_class\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tprepareConfigs: function (scales, min_coll_width, container_width, scale_height, minDate, maxDate, rtl) {\r\n\t\t\tvar heights = this.splitSize(scale_height, scales.length);\r\n\t\t\tvar full_width = container_width;\r\n\r\n\t\t\tvar configs = [];\r\n\t\t\tfor (var i = scales.length - 1; i >= 0; i--) {\r\n\t\t\t\tvar main_scale = (i == scales.length - 1);\r\n\t\t\t\tvar cfg = this.initScaleConfig(scales[i], minDate, maxDate);\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tthis.processIgnores(cfg);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initColSizes(cfg, min_coll_width, full_width, heights[i]);\r\n\t\t\t\tthis.limitVisibleRange(cfg);\r\n\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tfull_width = cfg.full_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfigs.unshift(cfg);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < configs.length - 1; i++) {\r\n\t\t\t\tthis.alineScaleColumns(configs[configs.length - 1], configs[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\r\n\t\t\t\tif(rtl){\r\n\t\t\t\t\tthis.reverseScale(configs[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosSettings(configs[i]);\r\n\t\t\t}\r\n\t\t\treturn configs;\r\n\r\n\t\t},\r\n\r\n\t\treverseScale: function(scale){\r\n\t\t\tscale.width = scale.width.reverse();\r\n\t\t\tscale.trace_x = scale.trace_x.reverse();\r\n\r\n\t\t\tvar indexes = scale.trace_indexes;\r\n\t\t\tscale.trace_indexes = {};\r\n\t\t\tscale.trace_index_transition = {};\r\n\t\t\tscale.rtl = true;\r\n\t\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\t\tscale.trace_indexes[scale.trace_x[i].valueOf()] = i;\r\n\t\t\t\tscale.trace_index_transition[indexes[scale.trace_x[i].valueOf()]] = i;\r\n\t\t\t}\r\n\t\t\treturn scale;\r\n\t\t},\r\n\r\n\t\tsetPosSettings: function (config) {\r\n\t\t\tfor (var i = 0, len = config.trace_x.length; i < len; i++) {\r\n\t\t\t\tconfig.left.push((config.width[i - 1] || 0) + (config.left[i - 1] || 0));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_ignore_time_config: function (date, scale) {\r\n\r\n\t\t\tif (services.config().skip_off_time) {\r\n\t\t\t\tvar skip = true;\r\n\t\t\t\tvar probe = date;\r\n\r\n\t\t\t\t// check dates in case custom scale unit, e.g. {unit: \"month\", step: 3}\r\n\t\t\t\tfor (var i = 0; i < scale.step; i++) {\r\n\t\t\t\t\tif (i) {\r\n\t\t\t\t\t\tprobe = dateHelper.add(date, i, scale.unit);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tskip = skip && !this.isWorkTime(probe, scale.unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn skip;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t//defined in an extension\r\n\t\tprocessIgnores: function (config) {\r\n\t\t\tconfig.ignore_x = {};\r\n\t\t\tconfig.display_count = config.count;\r\n\t\t},\r\n\t\tinitColSizes: function (config, min_col_width, full_width, line_height) {\r\n\t\t\tvar cont_width = full_width;\r\n\r\n\t\t\tconfig.height = line_height;\r\n\r\n\t\t\tvar column_count = config.display_count === undefined ? config.count : config.display_count;\r\n\r\n\t\t\tif (!column_count)\r\n\t\t\t\tcolumn_count = 1;\r\n\r\n\t\t\tconfig.col_width = Math.floor(cont_width / column_count);\r\n\r\n\t\t\tif (min_col_width) {\r\n\t\t\t\tif (config.col_width < min_col_width) {\r\n\t\t\t\t\tconfig.col_width = min_col_width;\r\n\t\t\t\t\tcont_width = config.col_width * column_count;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconfig.width = [];\r\n\t\t\tvar ignores = config.ignore_x || {};\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\t\t\t\tif (ignores[config.trace_x[i].valueOf()] || (config.display_count == config.count)) {\r\n\t\t\t\t\tconfig.width[i] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// width of month columns should be proportional month duration\r\n\t\t\t\t\tvar width = 1;\r\n\t\t\t\t\tif (config.unit == \"month\") {\r\n\t\t\t\t\t\tvar days = Math.round((dateHelper.add(config.trace_x[i], config.step, config.unit) - config.trace_x[i]) / (1000 * 60 * 60 * 24));\r\n\t\t\t\t\t\twidth = days;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.width[i] = width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.adjustSize(cont_width - this.getSum(config.width)/* 1 width per column from the code above */, config.width);\r\n\t\t\tconfig.full_width = this.getSum(config.width);\r\n\t\t},\r\n\t\tinitScaleConfig: function (config, min_date, max_date) {\r\n\t\t\tvar cfg = utils.mixin({\r\n\t\t\t\tcount: 0,\r\n\t\t\t\tcol_width: 0,\r\n\t\t\t\tfull_width: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: [],\r\n\t\t\t\tleft: [],\r\n\t\t\t\ttrace_x: [],\r\n\t\t\t\ttrace_indexes: {},\r\n\t\t\t\tmin_date: new Date(min_date),\r\n\t\t\t\tmax_date: new Date(max_date)\r\n\t\t\t}, config);\r\n\r\n\t\t\tthis.eachColumn(config.unit, config.step, min_date, max_date, function (date) {\r\n\t\t\t\tcfg.count++;\r\n\t\t\t\tcfg.trace_x.push(new Date(date));\r\n\t\t\t\tcfg.trace_indexes[date.valueOf()] = cfg.trace_x.length - 1;\r\n\t\t\t});\r\n\r\n\t\t\tcfg.trace_x_ascending = cfg.trace_x.slice();\r\n\t\t\treturn cfg;\r\n\t\t},\r\n\t\titerateScales: function (lower_scale, upper_scale, from, to, callback) {\r\n\t\t\tvar upper_dates = upper_scale.trace_x;\r\n\t\t\tvar lower_dates = lower_scale.trace_x;\r\n\r\n\t\t\tvar prev = from || 0;\r\n\t\t\tvar end = to || (lower_dates.length - 1);\r\n\t\t\tvar prevUpper = 0;\r\n\r\n\r\n\t\t\tfor (var up = 1; up < upper_dates.length; up++) {\r\n\t\t\t\tvar target_index = (lower_scale.trace_indexes[+upper_dates[up]]);\r\n\t\t\t\tif (target_index !== undefined && target_index <= end) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(this, [prevUpper, up, prev, target_index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprev = target_index;\r\n\t\t\t\t\tprevUpper = up;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\talineScaleColumns: function (lower_scale, upper_scale, from, to) {\r\n\t\t\tthis.iterateScales(lower_scale, upper_scale, from, to, function (upper_start, upper_end, lower_start, lower_end) {\r\n\t\t\t\tvar targetWidth = this.getSum(lower_scale.width, lower_start, lower_end - 1);\r\n\t\t\t\tvar actualWidth = this.getSum(upper_scale.width, upper_start, upper_end - 1);\r\n\t\t\t\tif (actualWidth != targetWidth) {\r\n\t\t\t\t\tthis.setSumWidth(targetWidth, upper_scale, upper_start, upper_end - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teachColumn: function (unit, step, min_date, max_date, callback) {\r\n\t\t\tvar start = new Date(min_date),\r\n\t\t\t\tend = new Date(max_date);\r\n\t\t\tif (dateHelper[unit + \"_start\"]) {\r\n\t\t\t\tstart = dateHelper[unit + \"_start\"](start);\r\n\t\t\t}\r\n\r\n\t\t\tvar curr = new Date(start);\r\n\t\t\tif (+curr >= +end) {\r\n\t\t\t\tend = dateHelper.add(curr, step, unit);\r\n\t\t\t}\r\n\t\t\twhile (+curr < +end) {\r\n\t\t\t\tcallback.call(this, new Date(curr));\r\n\t\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\t\tcurr = dateHelper.add(curr, step, unit);\r\n\t\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, step, unit);\r\n\t\t\t\tif (dateHelper[unit + '_start'])\r\n\t\t\t\t\tcurr = dateHelper[unit + \"_start\"](curr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlimitVisibleRange: function (cfg) {\r\n\t\t\tvar dates = cfg.trace_x;\r\n\r\n\t\t\tvar left = 0, right = cfg.width.length - 1;\r\n\t\t\tvar diff = 0;\r\n\t\t\tif (+dates[0] < +cfg.min_date && left != right) {\r\n\t\t\t\tvar width = Math.floor(cfg.width[0] * ((dates[1] - cfg.min_date) / (dates[1] - dates[0])));\r\n\t\t\t\tdiff += cfg.width[0] - width;\r\n\t\t\t\tcfg.width[0] = width;\r\n\r\n\t\t\t\tdates[0] = new Date(cfg.min_date);\r\n\t\t\t}\r\n\r\n\t\t\tvar last = dates.length - 1;\r\n\t\t\tvar lastDate = dates[last];\r\n\t\t\tvar outDate = dateHelper.add(lastDate, cfg.step, cfg.unit);\r\n\t\t\tif (+outDate > +cfg.max_date && last > 0) {\r\n\t\t\t\tvar width = cfg.width[last] - Math.floor(cfg.width[last] * ((outDate - cfg.max_date) / (outDate - lastDate)));\r\n\t\t\t\tdiff += cfg.width[last] - width;\r\n\t\t\t\tcfg.width[last] = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (diff) {\r\n\t\t\t\tvar full = this.getSum(cfg.width);\r\n\t\t\t\tvar shared = 0;\r\n\t\t\t\tfor (var i = 0; i < cfg.width.length; i++) {\r\n\t\t\t\t\tvar share = Math.floor(diff * (cfg.width[i] / full));\r\n\t\t\t\t\tcfg.width[i] += share;\r\n\t\t\t\t\tshared += share;\r\n\t\t\t\t}\r\n\t\t\t\tthis.adjustSize(diff - shared, cfg.width);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = ScaleHelper;\r\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0),\r\n\tenv = __webpack_require__(6);\r\n\r\nvar createStaticBgHelper = function(utils, env){\r\n\r\n\tvar canvasBgCache = {};\r\n\tvar staticBgStyleId = \"gantt-static-bg-styles-\" + utils.uid();\r\n\r\n\tfunction renderBgCanvas(targetNode, config, scale, totalHeight) {\r\n\t\tif (!config.static_background) return;\r\n\r\n\t\tvar canvas = document.createElement(\"canvas\");\r\n\t\tif (!canvas.getContext) return; // if canvas is not supported (for IE8)\r\n\r\n\t\t// clear previous bg data\r\n\t\ttargetNode.innerHTML = \"\";\r\n\r\n\t\tvar styleParams = getCellStyles(targetNode);\r\n\t\tvar png = createBackgroundTiles(styleParams, config, scale);\r\n\t\tvar bgDivs = createBgDivs(png, config, scale, totalHeight);\r\n\r\n\t\tvar fragment = document.createDocumentFragment();\r\n\r\n\t\tbgDivs.forEach(function (div) {\r\n\t\t\tfragment.appendChild(div);\r\n\t\t});\r\n\r\n\t\ttargetNode.appendChild(fragment);\r\n\t}\r\n\r\n\tfunction getColumnWidths(scale) {\r\n\t\tvar widths = scale.width;\r\n\t\tvar differentWidths = {};\r\n\t\tfor (var i = 0; i < widths.length; i++) {\r\n\t\t\tif (widths[i] * 1)\r\n\t\t\t\tdifferentWidths[widths[i]] = true;\r\n\t\t}\r\n\t\treturn differentWidths;\r\n\t}\r\n\r\n\tfunction parseRgb(rgbCss) {\r\n\t\tvar result = /^rgba?\\(([\\d]{1,3}), *([\\d]{1,3}), *([\\d]{1,3}) *(,( *[\\d\\.]+ *))?\\)$/i.exec(rgbCss);\r\n\t\treturn result ? {\r\n\t\t\tr: result[1] * 1,\r\n\t\t\tg: result[2] * 1,\r\n\t\t\tb: result[3] * 1,\r\n\t\t\ta: (result[5] * 255) || 255\r\n\t\t} : null;\r\n\t}\r\n\r\n\tfunction getUrlFromCache(key) {\r\n\t\treturn canvasBgCache[key] || null;\r\n\t}\r\n\r\n\tfunction getHashKey(width, height, cellStyles) {\r\n\t\treturn (width + '' + height + cellStyles.bottomBorderColor + cellStyles.rightBorderColor).replace(/[^\\w\\d]/g, '');\r\n\t}\r\n\r\n\tfunction getStyleElement() {\r\n\t\tvar style = document.getElementById(staticBgStyleId);\r\n\r\n\t\tif (!style) {\r\n\t\t\tstyle = document.createElement(\"style\");\r\n\t\t\tstyle.id = staticBgStyleId;\r\n\t\t\tdocument.body.appendChild(style);\r\n\t\t}\r\n\t\treturn style;\r\n\t}\r\n\r\n\tfunction cacheUrl(key, url) {\r\n\t\tcanvasBgCache[key] = url;\r\n\t}\r\n\r\n\tfunction generateBgUrl(width, height, cellStyles) {\r\n\t\t// use relatively big bg image about 500*500px in order to reduce misalignments due browser zoom\r\n\t\tvar cols = Math.floor(500 / width) || 1;\r\n\t\tvar rows = Math.floor(500 / height) || 1;\r\n\r\n\t\tvar canvas = document.createElement(\"canvas\");\r\n\t\tcanvas.height = height * rows;\r\n\t\tcanvas.width = width * cols;\r\n\r\n\t\tvar context = canvas.getContext(\"2d\");\r\n\r\n\t\tdrawGrid(height, width, rows, cols, context, cellStyles);\r\n\r\n\t\treturn canvas.toDataURL();\r\n\r\n\t\tfunction drawGrid(rowHeight, colWidth, rows, cols, context, styles) {\r\n\t\t\t// paint pixels manually instead of using lineTo in order to prevent canvas aliasing\r\n\t\t\tvar image = context.createImageData(colWidth * cols, rowHeight * rows);\r\n\t\t\timage.imageSmoothingEnabled = false;\r\n\r\n\t\t\tvar verticalLineWidth = styles.rightBorderWidth * 1;\r\n\t\t\tvar verticalLineColor = parseRgb(styles.rightBorderColor);\r\n\r\n\t\t\tvar x = 0,\r\n\t\t\t\ty = 0,\r\n\t\t\t\tw = 0;\r\n\r\n\t\t\tfor (var col = 1; col <= cols; col++) {\r\n\t\t\t\tx = col * colWidth - 1;\r\n\t\t\t\tfor (w = 0; w < verticalLineWidth; w++) {\r\n\t\t\t\t\tfor (y = 0; y < rowHeight * rows; y++) {\r\n\t\t\t\t\t\tdrawDot(x - w, y, verticalLineColor, image);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar horizontalLineWidth = styles.bottomBorderWidth * 1;\r\n\t\t\tvar horizontalLineColor = parseRgb(styles.bottomBorderColor);\r\n\r\n\t\t\ty = 0;\r\n\t\t\tfor (var row = 1; row <= rows; row++) {\r\n\t\t\t\ty = row * rowHeight - 1;\r\n\t\t\t\tfor (w = 0; w < horizontalLineWidth; w++) {\r\n\t\t\t\t\tfor (x = 0; x < colWidth * cols; x++) {\r\n\t\t\t\t\t\tdrawDot(x, y - w, horizontalLineColor, image);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcontext.putImageData(image, 0, 0);\r\n\t\t}\r\n\r\n\t\tfunction drawDot(x, y, color, matrix) {\r\n\t\t\tvar rowLength = width * cols;\r\n\r\n\t\t\tvar index = (y * rowLength + x) * 4;\r\n\r\n\t\t\tmatrix.data[index] = color.r;\r\n\t\t\tmatrix.data[index + 1] = color.g;\r\n\t\t\tmatrix.data[index + 2] = color.b;\r\n\t\t\tmatrix.data[index + 3] = color.a;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getCssClass(key) {\r\n\t\treturn \"gantt-static-bg-\" + key;\r\n\t}\r\n\r\n\tfunction createBackgroundTiles(cellStyles, config, scale) {\r\n\t\tvar data = {};\r\n\t\tvar widths = getColumnWidths(scale),\r\n\t\t\theight = config.row_height;\r\n\r\n\t\tvar styleHTML = \"\";\r\n\t\tfor (var i in widths) {\r\n\r\n\t\t\tvar width = i * 1;\r\n\t\t\tvar key = getHashKey(width, height, cellStyles);\r\n\t\t\tvar cachedUrl = getUrlFromCache(key);\r\n\r\n\t\t\tif (!cachedUrl) {\r\n\t\t\t\tvar bgImage = generateBgUrl(width, height, cellStyles);\r\n\t\t\t\tcacheUrl(key, bgImage);\r\n\t\t\t\tstyleHTML += \".\" + getCssClass(key) + \"{ background-image: url('\" + bgImage + \"');}\";\r\n\t\t\t}\r\n\r\n\t\t\tdata[i] = getCssClass(key);\r\n\t\t}\r\n\r\n\t\tif (styleHTML) {\r\n\t\t\tvar style = getStyleElement();\r\n\t\t\tstyle.innerHTML += styleHTML;\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tfunction createBgDivs(bgTiles, config, scale, dataHeight) {\r\n\t\tvar divs = [];\r\n\t\tvar tile,\r\n\t\t\tprevWidth = 0,\r\n\t\t\tprevCell;\r\n\r\n\t\tvar widths = scale.width.filter(function (i) {\r\n\t\t\treturn !!i;\r\n\t\t});\r\n\r\n\t\tvar leftPos = 0;\r\n\r\n\t\t//TODO: fixme\r\n\t\t// bg image misalignments on horizontal scroll on very large time scales, especially in IE/Edge browsers\r\n\t\t// limiting max tile width seems to solve the issue, but can increase rendering time\r\n\t\tvar maxTileSize = 100000;\r\n\t\tif (env.isIE) {\r\n\t\t\t// special case for IE11 on win7x and probably 8x\r\n\t\t\tvar appVersion = navigator.appVersion || \"\";\r\n\t\t\tif (appVersion.indexOf(\"Windows NT 6.2\") != -1 ||\r\n\t\t\t\tappVersion.indexOf(\"Windows NT 6.1\") != -1 ||\r\n\t\t\t\tappVersion.indexOf(\"Windows NT 6.0\") != -1) {\r\n\r\n\t\t\t\tmaxTileSize = 20000;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < widths.length; i++) {\r\n\t\t\t//var currentWidth = cells[i].clientWidth;\r\n\t\t\tvar cell = widths[i];\r\n\r\n\t\t\tif ((cell != prevCell && prevCell !== undefined) || (i == widths.length - 1) || (prevWidth > maxTileSize)) {\r\n\r\n\t\t\t\tvar totalHeight = dataHeight,\r\n\t\t\t\t\tcurrentTop = 0,\r\n\t\t\t\t\trowHeight = Math.floor(maxTileSize / config.row_height) * config.row_height;\r\n\r\n\t\t\t\tvar tileWidth = prevWidth;\r\n\r\n\t\t\t\twhile (totalHeight > 0) {\r\n\t\t\t\t\tvar currentHeight = Math.min(totalHeight, rowHeight);\r\n\t\t\t\t\ttotalHeight -= rowHeight;\r\n\r\n\t\t\t\t\ttile = document.createElement(\"div\");\r\n\r\n\t\t\t\t\ttile.style.height = currentHeight + \"px\";\r\n\t\t\t\t\ttile.style.position = \"absolute\";\r\n\t\t\t\t\ttile.style.top = currentTop + \"px\";\r\n\t\t\t\t\ttile.style.left = leftPos + \"px\";\r\n\r\n\t\t\t\t\ttile.style.whiteSpace = \"no-wrap\";\r\n\t\t\t\t\ttile.className = bgTiles[prevCell || cell];\r\n\r\n\t\t\t\t\t// if last - short by 1 px (bug fix)\r\n\t\t\t\t\tif (i == widths.length - 1) {\r\n\t\t\t\t\t\ttileWidth = cell + tileWidth - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttile.style.width = tileWidth + \"px\";\r\n\r\n\t\t\t\t\tdivs.push(tile);\r\n\t\t\t\t\tcurrentTop += currentHeight;\r\n\t\t\t\t}\r\n\t\t\t\tprevWidth = 0;\r\n\t\t\t\tleftPos += tileWidth;\r\n\r\n\t\t\t\t//cell = 0;\r\n\t\t\t}\r\n\t\t\tif (cell) {\r\n\t\t\t\tprevWidth += cell;\r\n\t\t\t\tprevCell = cell;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn divs;\r\n\t}\r\n\r\n\tfunction getCellStyles(targetNode) {\r\n\t\t// creating temp DOM structure for resolving style parameters. Will be removed after calculating.\r\n\t\tvar cell = document.createElement(\"div\");\r\n\t\tcell.className = \"gantt_task_cell\";\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\trow.className = \"gantt_task_row\";\r\n\t\trow.appendChild(cell);\r\n\t\ttargetNode.appendChild(row);\r\n\r\n\t\tvar rowStyles = getComputedStyle(row),\r\n\t\t\tcellStyles = getComputedStyle(cell);\r\n\r\n\t\tvar params = {\r\n\t\t\tbottomBorderWidth: rowStyles.getPropertyValue(\"border-bottom-width\").replace(\"px\", \"\"),\r\n\t\t\trightBorderWidth: cellStyles.getPropertyValue(\"border-right-width\").replace(\"px\", \"\"),\r\n\t\t\tbottomBorderColor: rowStyles.getPropertyValue(\"border-bottom-color\"),\r\n\t\t\trightBorderColor: cellStyles.getPropertyValue(\"border-right-color\")\r\n\t\t};\r\n\r\n\t\ttargetNode.removeChild(row);\r\n\r\n\t\treturn params;\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: renderBgCanvas\r\n\t};\r\n};\r\n\r\nmodule.exports = {\r\n\tcreate: function(){\r\n\t\treturn createStaticBgHelper(utils, env);\r\n\t}\r\n};\r\n\r\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nfunction createResizer(gantt, grid){\r\n// renders resize elements in the grid header\r\n\tvar _render_grid_header_resize = function () {\r\n\t\tvar columns = grid.getGridColumns(),\r\n\t\t\tconfig = grid.$getConfig(),\r\n\t\t\twidth = 0,\r\n\t\t\ttotalWidth = grid.$config.width,\r\n\t\t\tlineHeigth = config.scale_height;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\tvar pos;\r\n\t\t\twidth += col.width;\r\n\t\t\tif(config.rtl){\r\n\t\t\t\tpos = totalWidth - width;\r\n\t\t\t}else{\r\n\t\t\t\tpos = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (col.resize) {\r\n\t\t\t\tvar resize_el = document.createElement(\"div\");\r\n\t\t\t\tresize_el.className = \"gantt_grid_column_resize_wrap\";\r\n\t\t\t\tresize_el.style.top = \"0px\";\r\n\t\t\t\tresize_el.style.height = lineHeigth + \"px\";\r\n\t\t\t\tresize_el.innerHTML = \"<div class='gantt_grid_column_resize'></div>\";\r\n\t\t\t\tresize_el.setAttribute(config.grid_resizer_column_attribute, i);\r\n\r\n\t\t\t\tgantt._waiAria.gridSeparatorAttr(resize_el);\r\n\r\n\t\t\t\tgrid.$grid_scale.appendChild(resize_el);\r\n\r\n\t\t\t\tresize_el.style.left = Math.max(0, pos) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar _grid_resize = {\r\n\t\tcolumn_before_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar el = domHelpers.locateAttribute(e, config.grid_resizer_column_attribute);\r\n\t\t\tif (!el) return false;\r\n\r\n\t\t\tvar column_index = this.locate(e, config.grid_resizer_column_attribute),\r\n\t\t\t\tcolumn = grid.getGridColumns()[column_index];\r\n\r\n\t\t\tif (grid.callEvent(\"onColumnResizeStart\", [column_index, column]) === false)\r\n\t\t\t\treturn false;\r\n\t\t}, gantt),\r\n\r\n\t\tcolumn_after_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar column_index = this.locate(e, config.grid_resizer_column_attribute);\r\n\t\t\tdnd.config.marker.innerHTML = \"\";\r\n\t\t\tdnd.config.marker.className += \" gantt_grid_resize_area\";\r\n\t\t\tdnd.config.marker.style.height = grid.$grid.offsetHeight + \"px\";\r\n\t\t\tdnd.config.marker.style.top = \"0px\";\r\n\t\t\tdnd.config.drag_index = column_index;\r\n\r\n\t\t}, gantt),\r\n\r\n\t\tcolumn_drag_move: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar dd = dnd.config,\r\n\t\t\t\tcolumns = grid.getGridColumns();\r\n\t\t\tvar index = parseInt(dd.drag_index, 10);\r\n\t\t\tvar target_column = columns[index];\r\n\t\t\tvar\tpos = domHelpers.getNodePosition(grid.$grid_scale),\r\n\t\t\t\tpointerPosition = parseInt(dd.marker.style.left, 10),\r\n\t\t\t\tminPointerPosition = target_column.min_width ? target_column.min_width : config.min_grid_column_width,\r\n\t\t\t\tmaxPointerPosition = grid.$grid_data.offsetWidth,// - config.min_grid_column_width * (columns.length - dd.drag_index - 2),// 1 for current column + 1 for last column\r\n\t\t\t\tmarkerStartPosition = 0,\r\n\t\t\t\tmarker_width = 0;\r\n\r\n\t\t\t\r\n\t\t/*\tif(config.rtl){\r\n\t\t\t\tindex = columns.length - 1 - index;\r\n\t\t\t\tcolumns = columns.reverse();\r\n\t\t\t}*/\r\n\r\n\t\t\tif(!config.rtl){\r\n\t\t\t\tpointerPosition -= pos.x - 1;\r\n\t\t\t}else{\r\n\t\t\t\tpointerPosition = (pos.x + pos.width - 1) - pointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\t//pointerPosition -= pos.x - 1;\r\n\t\t\tfor (var i = 0; i < index; i++) {\r\n\t\t\t\tminPointerPosition += columns[i].width;\r\n\t\t\t\tmarkerStartPosition += columns[i].width;\r\n\t\t\t}\r\n\r\n\t\t\tif (pointerPosition < minPointerPosition) {\r\n\t\t\t\tpointerPosition = minPointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\tif (config.keep_grid_width) {\r\n\t\t\t\tvar limit_max = 0;\r\n\t\t\t\tfor (var i=index+1; i<columns.length; i++) {\r\n\t\t\t\t\tif (columns[i].min_width)\r\n\t\t\t\t\t\tmaxPointerPosition -= columns[i].min_width;\r\n\t\t\t\t\telse if (config.min_grid_column_width)\r\n\t\t\t\t\t\tmaxPointerPosition -= config.min_grid_column_width;\r\n\r\n\t\t\t\t\tif (columns[i].max_width && limit_max !== false)\r\n\t\t\t\t\t\tlimit_max += columns[i].max_width;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tlimit_max = false;\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// we have to restrict min value if only ALL right-side columns have 'max_width' field\r\n\t\t\t\tif (limit_max) {\r\n\t\t\t\t\tminPointerPosition = grid.$grid_data.offsetWidth - limit_max;\r\n\t\t\t\t}\r\n\t\t\t\tif (pointerPosition < minPointerPosition) {\r\n\t\t\t\t\tpointerPosition = minPointerPosition;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (pointerPosition > maxPointerPosition)\r\n\t\t\t\t\tpointerPosition = maxPointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\tdd.left = pointerPosition - 1;// -1 for border\r\n\r\n\t\t\tmarker_width = Math.abs(pointerPosition - markerStartPosition);\r\n\r\n\t\t\t// column.max_width - maximum width of the column, user defined\r\n\t\t\tif (target_column.max_width && marker_width > target_column.max_width)\r\n\t\t\t\tmarker_width = target_column.max_width;\r\n\r\n\t\t\tif(config.rtl){\r\n\t\t\t\tmarkerStartPosition = (pos.width - markerStartPosition) + 2 - marker_width;\r\n\t\t\t}\r\n\t\t\tdd.marker.style.top = pos.y + \"px\";\r\n\t\t\tdd.marker.style.left = pos.x - 1 + markerStartPosition + \"px\";\r\n\t\t\tdd.marker.style.width = marker_width + \"px\";\r\n\r\n\t\t\tgrid.callEvent(\"onColumnResize\", [index, columns[index], marker_width - 1]);\r\n\t\t\treturn true;\r\n\t\t}, gantt),\r\n\r\n\t\tcolumn_drag_end: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar columns = grid.getGridColumns(),\r\n\t\t\t\tcolumns_width = 0,\r\n\t\t\t\tindex = parseInt(dnd.config.drag_index, 10),\r\n\t\t\t\ttarget_column = columns[index];\r\n\r\n\t\t\t// var colIndex = index;\r\n\t\t\t/*if(config.rtl){\r\n\t\t\t\tcolIndex = columns.length - 1 - target_index;\r\n\t\t\t\tcolumns = columns.reverse();\r\n\t\t\t}*/\r\n\r\n\t\t\tfor (var i = 0; i < index; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width;\r\n\t\t\t}\r\n\r\n\t\t\tvar final_width = (target_column.min_width && (dnd.config.left - columns_width) < target_column.min_width) ?\r\n\t\t\t\ttarget_column.min_width : (dnd.config.left - columns_width);\r\n\r\n\t\t\tif (target_column.max_width && target_column.max_width < final_width) // TODO: probably can be omitted\r\n\t\t\t\tfinal_width = target_column.max_width;\r\n\r\n\t\t\tif (grid.callEvent(\"onColumnResizeEnd\", [index, target_column, final_width]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (target_column.width == final_width)\r\n\t\t\t\treturn;\r\n\r\n\t\t\ttarget_column.width = final_width;\r\n\r\n\t\t\tif (config.keep_grid_width) {\r\n\t\t\t\tcolumns_width = config.grid_width;\r\n\t\t\t} else {\r\n\t\t\t\t// in other case we set a new grid width and call gantt render\r\n\t\t\t\tfor (var i = index, l = columns.length; i < l; i++) {\r\n\t\t\t\t\tcolumns_width += columns[i].width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgrid.callEvent(\"onColumnResizeComplete\", [columns, grid._setColumnsWidth(columns_width, index)]);\r\n\r\n\t\t\tif(!grid.$config.scrollable){\r\n\t\t\t\tgantt.$layout._syncCellSizes(grid.$config.group, config.grid_width);\r\n\t\t\t}\r\n\t\t\t//grid.callEvent(\"onColumnResizeComplete\", [columns, columns_width]);\r\n\r\n\t\t\tthis.render();\r\n\t\t}, gantt)\r\n\t};\r\n\r\n// calls the initialization of the D'n'D events for resize elements\r\n\tvar _init_resize = function () {\r\n\t\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\r\n\t\tvar dnd = new DnD(grid.$grid_scale, {updates_per_second: 60});\r\n\t\tif (gantt.defined(config.dnd_sensitivity))\r\n\t\t\tdnd.config.sensitivity = config.dnd_sensitivity;\r\n\r\n\t\tdnd.attachEvent(\"onBeforeDragStart\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_before_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onAfterDragStart\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_after_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragMove\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_drag_move(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragEnd\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_drag_end(dnd, obj, e);\r\n\t\t});\r\n\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: _init_resize,\r\n\t\tdoOnRender: _render_grid_header_resize\r\n\t};\r\n}\r\n\r\nmodule.exports = createResizer;\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0),\r\n\tresourceStoreMixin = __webpack_require__(15),\r\n\tGrid = __webpack_require__(8);\r\nvar __extends = __webpack_require__(3);\r\n\r\nvar ResourceGrid = (function (_super) {\r\n\r\n\tfunction ResourceGrid(parent, config, factory, gantt) {\r\n\t\treturn _super.apply(this, arguments) || this;\r\n\t}\r\n\r\n\t__extends(ResourceGrid, _super);\r\n\r\n\tutils.mixin(ResourceGrid.prototype, {\r\n\t\tinit: function(){\r\n\t\t\tif(this.$config.bind === undefined){\r\n\t\t\t\tthis.$config.bind = this.$getConfig().resource_store;\r\n\t\t\t}\r\n\t\t\t_super.prototype.init.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\t_initEvents: function(){\r\n\t\t\t_super.prototype._initEvents.apply(this, arguments);\r\n\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tif(!store) return true;\r\n\r\n\t\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\t\tif(target){\r\n\t\t\t\t\tstore.select(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}, this), this.$grid);\r\n\r\n\t\t}\r\n\r\n\t}, true);\r\n\r\n\tutils.mixin(ResourceGrid.prototype, resourceStoreMixin(_super), true);\r\n\r\n\treturn ResourceGrid;\r\n})(Grid);\r\n\r\nmodule.exports = ResourceGrid;\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar Timeline = __webpack_require__(13);\r\nvar resourceStoreMixin = __webpack_require__(15);\r\nvar __extends = __webpack_require__(3);\r\n\r\nvar ResourceTimeline = (function (_super) {\r\n\r\n\tfunction ResourceTimeline(parent, config, factory, gantt) {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\tself.$config.bindLinks = null;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(ResourceTimeline, _super);\r\n\r\n\tutils.mixin(ResourceTimeline.prototype, {\r\n\t\tinit: function(){\r\n\t\t\tif(this.$config.bind === undefined){\r\n\t\t\t\tthis.$config.bind = this.$getConfig().resource_store;\r\n\t\t\t}\r\n\t\t\t_super.prototype.init.apply(this, arguments);\r\n\t\t},\r\n\t\t_createLayerConfig: function(){\r\n\t\t\tvar self = this;\r\n\t\t\tvar taskFilter = function(){\r\n\t\t\t\treturn self.isVisible();\r\n\t\t\t};\r\n\r\n\t\t\tvar taskLayers = [\r\n\t\t\t\t{\r\n\t\t\t\t\trenderer: this.$gantt.$ui.layers.resourceRow,\r\n\t\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\t\tfilter: [taskFilter]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg,\r\n\t\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\t\tfilter: [taskFilter]\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tvar linkLayers = [];\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttasks: taskLayers,\r\n\t\t\t\tlinks: linkLayers\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t}, true);\r\n\r\n\tutils.mixin(ResourceTimeline.prototype, resourceStoreMixin(_super), true);\r\n\r\n\treturn ResourceTimeline;\r\n})(Timeline);\r\n\r\n\r\nmodule.exports = ResourceTimeline;\r\n\r\n\r\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports) {\n\nfunction createTaskRenderer(gantt){\r\n\r\n\tfunction _render_task_element(task, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar painters = config.type_renderers;\r\n\t\tvar renderer = painters[gantt.getTaskType(task.type)],\r\n\t\t\tdefaultRenderer = _task_default_render;\r\n\r\n\t\tif (!renderer) {\r\n\t\t\treturn defaultRenderer.call(gantt, task, view);\r\n\t\t}else{\r\n\t\t\treturn renderer.call(gantt, task, function(task){ return defaultRenderer.call(gantt, task, view);}, view);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _task_default_render(task, view) {\r\n\t\tif (gantt._isAllowedUnscheduledTask(task))\r\n\t\t\treturn;\r\n\r\n\r\n\t\tvar pos = view.getItemPosition(task);\r\n\r\n\t\tvar cfg = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar height = view.getItemHeight();\r\n\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tvar padd = Math.floor((gantt.config.row_height - height) / 2);\r\n\t\tif (taskType == cfg.types.milestone && cfg.link_line_width > 1) {\r\n\t\t\t//little adjust milestone position, so horisontal corners would match link arrow when thickness of link line is more than 1px\r\n\t\t\tpadd += 1;\r\n\t\t}\r\n\r\n\t\tif (taskType == cfg.types.milestone){\r\n\t\t\tpos.left -= Math.round(height / 2);\r\n\t\t\tpos.width = height;\r\n\t\t}\r\n\r\n\t\tvar div = document.createElement(\"div\");\r\n\r\n\t\tvar width = Math.round(pos.width);\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tdiv.setAttribute(view.$config.item_attribute, task.id);\r\n\t\t}\r\n\r\n\t\tif (cfg.show_progress && taskType != cfg.types.milestone) {\r\n\t\t\t_render_task_progress(task, div, width, cfg, templates);\r\n\t\t}\r\n\r\n\t\t//use separate div to display content above progress bar\r\n\t\tvar content = _render_task_content(task, width, templates);\r\n\t\tif (task.textColor) {\r\n\t\t\tcontent.style.color = task.textColor;\r\n\t\t}\r\n\t\tdiv.appendChild(content);\r\n\r\n\t\tvar css = _combine_item_class(\"gantt_task_line\",\r\n\t\t\ttemplates.task_class(task.start_date, task.end_date, task),\r\n\t\t\ttask.id,\r\n\t\t\tview);\r\n\t\tif (task.color || task.progressColor || task.textColor) {\r\n\t\t\tcss += \" gantt_task_inline_color\";\r\n\t\t}\r\n\t\tdiv.className = css;\r\n\r\n\t\tvar styles = [\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"top:\" + (padd + pos.top) + 'px',\r\n\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\"line-height:\" + (Math.max(height < 30 ? height - 2 : height, 0)) + 'px',\r\n\t\t\t\"width:\" + width + 'px'\r\n\t\t];\r\n\t\tif (task.color) {\r\n\t\t\tstyles.push(\"background-color:\" + task.color);\r\n\t\t}\r\n\t\tif (task.textColor) {\r\n\t\t\tstyles.push(\"color:\" + task.textColor);\r\n\t\t}\r\n\r\n\t\tdiv.style.cssText = styles.join(\";\");\r\n\t\tvar side = _render_leftside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tside = _render_rightside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tgantt._waiAria.setTaskBarAttr(task, div);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tif (!gantt.isReadonly(task)) {\r\n\t\t\tif (cfg.drag_resize && !gantt.isSummaryTask(task) && taskType != cfg.types.milestone) {\r\n\t\t\t\t_render_pair(div, \"gantt_task_drag\", task, function (css) {\r\n\t\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\t\tel.className = css;\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t\tif (cfg.drag_links && cfg.show_links) {\r\n\t\t\t\t_render_pair(div, \"gantt_link_control\", task, function (css) {\r\n\t\t\t\t\tvar outer = document.createElement(\"div\");\r\n\t\t\t\t\touter.className = css;\r\n\t\t\t\t\touter.style.cssText = [\r\n\t\t\t\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\t\t\t\"line-height:\" + height + 'px'\r\n\t\t\t\t\t].join(\";\");\r\n\t\t\t\t\tvar inner = document.createElement(\"div\");\r\n\t\t\t\t\tinner.className = \"gantt_link_point\";\r\n\r\n\t\t\t\t\tvar showLinkPoints = false;\r\n\t\t\t\t\tif(state.link_source_id && cfg.touch){\r\n\t\t\t\t\t\tshowLinkPoints = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinner.style.display = showLinkPoints ? \"block\" : \"\";\r\n\t\t\t\t\touter.appendChild(inner);\r\n\t\t\t\t\treturn outer;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn div;\r\n\t}\r\n\r\n\tfunction _render_side_content(task, template, cssClass) {\r\n\t\tif (!template) return null;\r\n\r\n\t\tvar text = template(task.start_date, task.end_date, task);\r\n\t\tif (!text) return null;\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tcontent.className = \"gantt_side_content \" + cssClass;\r\n\t\tcontent.innerHTML = text;\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_leftside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_left \" + _get_link_crossing_css(!cfg.rtl ? true : false, task, cfg);\r\n\t\treturn _render_side_content(task, templates.leftside_text, css);\r\n\t}\r\n\r\n\tfunction _render_rightside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_right \" + _get_link_crossing_css(!cfg.rtl ? false : true, task, cfg);\r\n\t\treturn _render_side_content(task, templates.rightside_text, css);\r\n\t}\r\n\r\n\tfunction _get_link_crossing_css(left, task) {\r\n\t\tvar cond = _get_conditions(left);\r\n\r\n\t\tfor (var i in cond) {\r\n\t\t\tvar links = task[i];\r\n\t\t\tfor (var ln = 0; ln < links.length; ln++) {\r\n\t\t\t\tvar link = gantt.getLink(links[ln]);\r\n\r\n\t\t\t\tfor (var tp = 0; tp < cond[i].length; tp++) {\r\n\t\t\t\t\tif (link.type == cond[i][tp]) {\r\n\t\t\t\t\t\treturn \"gantt_link_crossing\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\r\n\tfunction _render_task_content(task, width, templates) {\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif (gantt.getTaskType(task.type) != gantt.config.types.milestone)\r\n\t\t\tcontent.innerHTML = templates.task_text(task.start_date, task.end_date, task);\r\n\t\tcontent.className = \"gantt_task_content\";\r\n\t\t//content.style.width = width + 'px';\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_task_progress(task, element, maxWidth, cfg, templates) {\r\n\t\tvar done = task.progress * 1 || 0;\r\n\r\n\t\tmaxWidth = Math.max(maxWidth - 2, 0);//2px for borders\r\n\t\tvar pr = document.createElement(\"div\");\r\n\t\tvar width = Math.round(maxWidth * done);\r\n\r\n\t\twidth = Math.min(maxWidth, width);\r\n\t\tif (task.progressColor) {\r\n\t\t\tpr.style.backgroundColor = task.progressColor;\r\n\t\t\tpr.style.opacity = 1;\r\n\t\t}\r\n\t\tpr.style.width = width + 'px';\r\n\t\tpr.className = \"gantt_task_progress\";\r\n\t\tpr.innerHTML = templates.progress_text(task.start_date, task.end_date, task);\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tpr.style.position = \"absolute\";\r\n\t\t\tpr.style.right = \"0px\";\r\n\t\t}\r\n\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.className = \"gantt_task_progress_wrapper\";\r\n\t\twrapper.appendChild(pr);\r\n\t\telement.appendChild(wrapper);\r\n\r\n\t\tif (gantt.config.drag_progress && !gantt.isReadonly(task)) {\r\n\t\t\tvar drag = document.createElement(\"div\");\r\n\r\n\t\t\tvar markerPos = width;\r\n\t\t\tif(cfg.rtl){\r\n\t\t\t\tmarkerPos = maxWidth - width;\r\n\t\t\t}\r\n\r\n\t\t\tdrag.style.left = markerPos + 'px';\r\n\t\t\tdrag.className = \"gantt_task_progress_drag\";\r\n\t\t\tpr.appendChild(drag);\r\n\t\t\telement.appendChild(drag);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _get_conditions(leftside) {\r\n\t\tif (leftside) {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.start_to_start\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.start_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_start\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.finish_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _combine_item_class(basic, template, itemId, view) {\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar css = [basic];\r\n\t\tif (template)\r\n\t\t\tcss.push(template);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tvar task = gantt.getTask(itemId);\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.milestone) {\r\n\t\t\tcss.push(\"gantt_milestone\");\r\n\t\t}\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.project) {\r\n\t\t\tcss.push(\"gantt_project\");\r\n\t\t}\r\n\r\n\t\tif (gantt.isSummaryTask(task))\r\n\t\t\tcss.push(\"gantt_dependent_task\");\r\n\r\n\t\tif (cfg.select_task && itemId == state.selected_task)\r\n\t\t\tcss.push(\"gantt_selected\");\r\n\r\n\t\tif (itemId == state.drag_id) {\r\n\t\t\tcss.push(\"gantt_drag_\" + state.drag_mode);\r\n\t\t\tif (state.touch_drag) {\r\n\t\t\t\tcss.push(\"gantt_touch_\" + state.drag_mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_source_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_source\");\r\n\r\n\t\tif (state.link_target_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_target\");\r\n\r\n\r\n\t\tif (cfg.highlight_critical_path && gantt.isCriticalTask) {\r\n\t\t\tif (gantt.isCriticalTask(task))\r\n\t\t\t\tcss.push(\"gantt_critical_task\");\r\n\t\t}\r\n\r\n\t\tif (state.link_landing_area &&\r\n\t\t\t(state.link_target_id && state.link_source_id) &&\r\n\t\t\t(state.link_target_id != state.link_source_id)) {\r\n\r\n\t\t\tvar from_id = state.link_source_id;\r\n\t\t\tvar from_start = state.link_from_start;\r\n\t\t\tvar to_start = state.link_to_start;\r\n\r\n\t\t\tvar allowDrag = gantt.isLinkAllowed(from_id, itemId, from_start, to_start);\r\n\r\n\t\t\tvar dragClass = \"\";\r\n\t\t\tif (allowDrag) {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_allow\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_allow\";\r\n\t\t\t} else {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_deny\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_deny\";\r\n\t\t\t}\r\n\t\t\tcss.push(dragClass);\r\n\t\t}\r\n\t\treturn css.join(\" \");\r\n\t}\r\n\r\n\tfunction _render_pair(parent, css, task, content, config) {\r\n\t\tvar state = gantt.getState();\r\n\t\tvar className, element;\r\n\t\tif (+task.start_date >= +state.min_date) {\r\n\t\t\tclassName = [css, config.rtl ? \"task_right\" : \"task_left\", \"task_start_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"start_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t\tif (+task.end_date <= +state.max_date){\r\n\t\t\tclassName = [css, config.rtl ? \"task_left\" : \"task_right\", \"task_end_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"end_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn _render_task_element;\r\n}\r\n\r\nmodule.exports = createTaskRenderer;\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports) {\n\nfunction createTaskBgRender(gantt){\r\n\t//this.getTaskTop\r\n\tfunction _render_bg_line(item, view) {\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\tif (config.show_task_cells) {\r\n\t\t\tfor (var j = 0; j < count; j++) {\r\n\t\t\t\tvar width = cfg.width[j],\r\n\t\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\t\tif (width > 0) {//do not render skipped columns\r\n\t\t\t\t\tvar cell = document.createElement(\"div\");\r\n\t\t\t\t\tcell.style.width = (width) + \"px\";\r\n\r\n\t\t\t\t\tcssclass = \"gantt_task_cell\" + (j == count - 1 ? \" gantt_last_cell\" : \"\");\r\n\t\t\t\t\tcssTemplate = templates.task_cell_class(item, cfg.trace_x[j]);\r\n\t\t\t\t\tif (cssTemplate)\r\n\t\t\t\t\t\tcssclass += \" \" + cssTemplate;\r\n\t\t\t\t\tcell.className = cssclass;\r\n\r\n\t\t\t\t\trow.appendChild(cell);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar odd = gantt.getGlobalTaskIndex(item.id) % 2 !== 0;\r\n\t\tvar cssTemplate = templates.task_row_class(item.start_date, item.end_date, item);\r\n\t\tvar css = \"gantt_task_row\" + (odd ? \" odd\" : \"\") + (cssTemplate ? ' ' + cssTemplate : '');\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\t//var row = \"<div class='\" + css + \"' \" + this.config.task_attribute + \"='\" + item.id + \"'>\" + cells.join(\"\") + \"</div>\";\r\n\r\n\t\trow.className = css;\r\n\r\n\t\tif (config.smart_rendering) {\r\n\t\t\trow.style.position = \"absolute\";\r\n\t\t\trow.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t\trow.style.width = \"100%\";\r\n\t\t}\r\n\t\trow.style.height = (config.row_height) + \"px\";\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\trow.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\treturn _render_bg_line;\r\n}\r\n\r\nmodule.exports = createTaskBgRender;\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports) {\n\n\r\nfunction createLinkRender(gantt){\r\n\r\nfunction _render_link_element(link, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar dots = path_builder.get_points(link, view);\r\n\tvar lines = drawer.get_lines(dots, view);\r\n\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\tvar css = \"gantt_task_link\";\r\n\r\n\tif (link.color) {\r\n\t\tcss += \" gantt_link_inline_color\";\r\n\t}\r\n\tvar cssTemplate = gantt.templates.link_class ? gantt.templates.link_class(link) : \"\";\r\n\tif (cssTemplate) {\r\n\t\tcss += \" \" + cssTemplate;\r\n\t}\r\n\r\n\tif (config.highlight_critical_path && gantt.isCriticalLink) {\r\n\t\tif (gantt.isCriticalLink(link))\r\n\t\t\tcss += \" gantt_critical_link\";\r\n\t}\r\n\r\n\tdiv.className = css;\r\n\r\n\tif(view.$config.link_attribute){\r\n\t\tdiv.setAttribute(view.$config.link_attribute, link.id);\r\n\t}\r\n\r\n\tfor (var i = 0; i < lines.length; i++) {\r\n\t\tif (i == lines.length - 1) {\r\n\t\t\tlines[i].size -= config.link_arrow_size;\r\n\t\t}\r\n\t\tvar el = drawer.render_line(lines[i], lines[i + 1], view);\r\n\t\tif (link.color) {\r\n\t\t\tel.firstChild.style.backgroundColor = link.color;\r\n\t\t}\r\n\t\tdiv.appendChild(el);\r\n\t}\r\n\r\n\tvar direction = lines[lines.length - 1].direction;\r\n\tvar endpoint = _render_link_arrow(dots[dots.length - 1], direction, view);\r\n\tif (link.color) {\r\n\t\tendpoint.style.borderColor = link.color;\r\n\t}\r\n\tdiv.appendChild(endpoint);\r\n\r\n\tgantt._waiAria.linkAttr(link, div);\r\n\r\n\treturn div;\r\n}\r\n\r\nfunction _render_link_arrow(point, direction, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar div = document.createElement(\"div\");\r\n\tvar top = point.y;\r\n\tvar left = point.x;\r\n\r\n\tvar size = config.link_arrow_size;\r\n\tvar line_width = config.row_height;\r\n\tvar className = \"gantt_link_arrow gantt_link_arrow_\" + direction;\r\n\tswitch (direction) {\r\n\t\tcase drawer.dirs.right:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.left:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.up:\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.down:\r\n\t\t\ttop += size * 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\tdiv.style.cssText = [\r\n\t\t\"top:\" + top + \"px\",\r\n\t\t\"left:\" + left + 'px'].join(';');\r\n\tdiv.className = className;\r\n\r\n\treturn div;\r\n}\r\n\r\n\r\nvar drawer = {\r\n\tcurrent_pos: null,\r\n\tdirs: {\"left\": 'left', \"right\": 'right', \"up\": 'up', \"down\": 'down'},\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.current_pos = null;\r\n\t\tthis.path = [];\r\n\t},\r\n\tpoint: function (pos) {\r\n\t\tthis.current_pos = gantt.copy(pos);\r\n\t},\r\n\tget_lines: function (dots) {\r\n\t\tthis.clear();\r\n\t\tthis.point(dots[0]);\r\n\t\tfor (var i = 1; i < dots.length; i++) {\r\n\t\t\tthis.line_to(dots[i]);\r\n\t\t}\r\n\t\treturn this.get_path();\r\n\t},\r\n\tline_to: function (pos) {\r\n\t\tvar next = gantt.copy(pos);\r\n\t\tvar prev = this.current_pos;\r\n\r\n\t\tvar line = this._get_line(prev, next);\r\n\t\tthis.path.push(line);\r\n\t\tthis.current_pos = next;\r\n\t},\r\n\tget_path: function () {\r\n\t\treturn this.path;\r\n\t},\r\n\tget_wrapper_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\ty = v.y + (config.row_height - wrapper_size) / 2;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - v.size - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y - v.size,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y /*- wrapper_size/2*/,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t},\r\n\tget_line_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tsize = v.size + line_size;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: line_size,\r\n\t\t\t\t\twidth: size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: size,\r\n\t\t\t\t\twidth: line_size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t},\r\n\trender_line: function (v, end, view) {\r\n\t\tvar pos = this.get_wrapper_sizes(v, view);\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.style.cssText = [\r\n\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"height:\" + pos.height + \"px\",\r\n\t\t\t\"width:\" + pos.width + \"px\"\r\n\t\t].join(';');\r\n\t\twrapper.className = \"gantt_line_wrapper\";\r\n\r\n\t\tvar innerPos = this.get_line_sizes(v, view);\r\n\t\tvar inner = document.createElement(\"div\");\r\n\t\tinner.style.cssText = [\r\n\t\t\t\"height:\" + innerPos.height + \"px\",\r\n\t\t\t\"width:\" + innerPos.width + \"px\",\r\n\t\t\t\"margin-top:\" + innerPos.marginTop + \"px\",\r\n\t\t\t\"margin-left:\" + innerPos.marginLeft + \"px\"\r\n\t\t].join(\";\");\r\n\r\n\t\tinner.className = \"gantt_link_line_\" + v.direction;\r\n\t\twrapper.appendChild(inner);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\t_get_line: function (from, to) {\r\n\t\tvar direction = this.get_direction(from, to);\r\n\t\tvar vect = {\r\n\t\t\tx: from.x,\r\n\t\t\ty: from.y,\r\n\t\t\tdirection: this.get_direction(from, to)\r\n\t\t};\r\n\t\tif (direction == this.dirs.left || direction == this.dirs.right) {\r\n\t\t\tvect.size = Math.abs(from.x - to.x);\r\n\t\t} else {\r\n\t\t\tvect.size = Math.abs(from.y - to.y);\r\n\t\t}\r\n\t\treturn vect;\r\n\t},\r\n\tget_direction: function (from, to) {\r\n\t\tvar direction = 0;\r\n\t\tif (to.x < from.x) {\r\n\t\t\tdirection = this.dirs.left;\r\n\t\t} else if (to.x > from.x) {\r\n\t\t\tdirection = this.dirs.right;\r\n\t\t} else if (to.y > from.y) {\r\n\t\t\tdirection = this.dirs.down;\r\n\t\t} else {\r\n\t\t\tdirection = this.dirs.up;\r\n\t\t}\r\n\t\treturn direction;\r\n\t}\r\n\r\n};\r\n\r\nvar path_builder = {\r\n\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.path = [];\r\n\t},\r\n\tcurrent: function () {\r\n\t\treturn this.path[this.path.length - 1];\r\n\t},\r\n\tpoint: function (next) {\r\n\t\tif (!next)\r\n\t\t\treturn this.current();\r\n\r\n\t\tthis.path.push(gantt.copy(next));\r\n\t\treturn next;\r\n\t},\r\n\tpoint_to: function (direction, diff, point) {\r\n\t\tif (!point)\r\n\t\t\tpoint = gantt.copy(this.point());\r\n\t\telse\r\n\t\t\tpoint = {x: point.x, y: point.y};\r\n\t\tvar dir = drawer.dirs;\r\n\t\tswitch (direction) {\r\n\t\t\tcase (dir.left):\r\n\t\t\t\tpoint.x -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.right):\r\n\t\t\t\tpoint.x += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.up):\r\n\t\t\t\tpoint.y -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.down):\r\n\t\t\t\tpoint.y += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this.point(point);\r\n\t},\r\n\tget_points: function (link, view) {\r\n\t\tvar pt = this.get_endpoint(link, view);\r\n\t\tvar xy = gantt.config;\r\n\r\n\t\tvar dy = pt.e_y - pt.y;\r\n\t\tvar dx = pt.e_x - pt.x;\r\n\r\n\t\tvar dir = drawer.dirs;\r\n\r\n\t\tthis.clear();\r\n\t\tthis.point({x: pt.x, y: pt.y});\r\n\r\n\t\tvar shiftX = 2 * xy.link_arrow_size;//just random size for first line\r\n\t\tvar lineType = this.get_line_type(link, view.$getConfig());\r\n\r\n\t\tvar forward = (pt.e_x > pt.x);\r\n\t\tif (lineType.from_start && lineType.to_start) {\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\r\n\t\t} else if (!lineType.from_start && lineType.to_start) {\r\n\t\t\tforward = (pt.e_x > (pt.x + 2 * shiftX));\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tdx -= shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx -= 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\t}\r\n\r\n\t\t} else if (!lineType.from_start && !lineType.to_start) {\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t} else if (lineType.from_start && !lineType.to_start) {\r\n\r\n\t\t\tforward = (pt.e_x > (pt.x - 2 * shiftX));\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\r\n\t\t\tif (!forward) {\r\n\t\t\t\tdx += shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx += 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.path;\r\n\t},\r\n\tget_line_type: function(link, config){\r\n\t\tvar types = config.links;\r\n\t\tvar from_start = false, to_start = false;\r\n\t\tif (link.type == types.start_to_start) {\r\n\t\t\tfrom_start = to_start = true;\r\n\t\t} else if (link.type == types.finish_to_finish) {\r\n\t\t\tfrom_start = to_start = false;\r\n\t\t} else if (link.type == types.finish_to_start) {\r\n\t\t\tfrom_start = false;\r\n\t\t\tto_start = true;\r\n\t\t} else if (link.type == types.start_to_finish) {\r\n\t\t\tfrom_start = true;\r\n\t\t\tto_start = false;\r\n\t\t} else {\r\n\t\t\tgantt.assert(false, \"Invalid link type\");\r\n\t\t}\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tfrom_start = !from_start;\r\n\t\t\tto_start = !to_start;\r\n\t\t}\r\n\r\n\t\treturn {from_start: from_start, to_start: to_start};\r\n\t},\r\n\r\n\tget_endpoint: function (link, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar types = config.links;\r\n\r\n\t\tvar lineType = this.get_line_type(link, config);\r\n\t\tvar from_start = lineType.from_start,\r\n\t\t\tto_start = lineType.to_start;\r\n\r\n\t\tvar source = gantt.getTask(link.source);\r\n\t\tvar target = gantt.getTask(link.target);\r\n\r\n\t\tvar from = getMilestonePosition(source, view),\r\n\t\t\tto = getMilestonePosition(target, view);\r\n\r\n\t\treturn {\r\n\t\t\tx: from_start ? from.left : (from.left + from.width),\r\n\t\t\te_x: to_start ? to.left : (to.left + to.width),\r\n\t\t\ty: from.top,\r\n\t\t\te_y: to.top\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction getMilestonePosition(task, view){\r\n\tvar config = view.$getConfig();\r\n\tvar pos = view.getItemPosition(task);\r\n\tif(gantt.getTaskType(task.type) == config.types.milestone){\r\n\t\tvar milestoneHeight = gantt.getTaskHeight();\r\n\t\tvar milestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\tpos.left -= milestoneWidth / 2;\r\n\t\tpos.width = milestoneWidth;\r\n\t}\r\n\treturn pos;\r\n}\r\n\r\nreturn _render_link_element;\r\n\r\n}\r\n\r\nmodule.exports = createLinkRender;\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dateHelper = __webpack_require__(4);\r\n\r\nfunction createGridLineRender(gantt){\r\n\tfunction _render_grid_item(item, view) {\r\n\t\t//if (!_is_grid_visible.call(this))\r\n\t\t//\treturn null;\r\n\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\r\n\t\tvar cells = [];\r\n\t\tvar width = 0;\r\n\t\tvar has_child;\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar cell;\r\n\r\n\t\t\tvar value;\r\n\t\t\tvar textValue;\r\n\t\t\tif (col.name == \"add\") {\r\n\t\t\t\tvar aria = gantt._waiAria.gridAddButtonAttrString(col);\r\n\r\n\t\t\t\tvalue = \"<div \" + aria + \" class='gantt_add'></div>\";\r\n\t\t\t\ttextValue = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tif (col.template)\r\n\t\t\t\t\tvalue = col.template(item);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalue = item[col.name];\r\n\r\n\t\t\t\tif (dateHelper.isDate(value))\r\n\t\t\t\t\tvalue = templates.date_grid(value, item);\r\n\t\t\t\ttextValue = value;\r\n\t\t\t\tvalue = \"<div class='gantt_tree_content'>\" + value + \"</div>\";\r\n\t\t\t}\r\n\t\t\tvar css = \"gantt_cell\" + (last ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\tvar tree = [];\r\n\t\t\tif (col.tree) {\r\n\t\t\t\tfor (var j = 0; j < item.$level; j++)\r\n\t\t\t\t\ttree.push(templates.grid_indent(item));\r\n\r\n\t\t\t\thas_child = store.hasChild(item.id);\r\n\t\t\t\tif (has_child) {\r\n\t\t\t\t\ttree.push(templates.grid_open(item));\r\n\t\t\t\t\ttree.push(templates.grid_folder(item));\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree.push(templates.grid_blank(item));\r\n\t\t\t\t\ttree.push(templates.grid_file(item));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar style = \"width:\" + (col.width - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tif (this.defined(col.align))\r\n\t\t\t\tstyle += \"text-align:\" + col.align + \";\";\r\n\r\n\t\t\tvar aria = gantt._waiAria.gridCellAttrString(col, textValue);\r\n\r\n\t\t\ttree.push(value);\r\n\t\t\tif(config.rtl){\r\n\t\t\t\ttree = tree.reverse();\r\n\t\t\t}\r\n\t\t\tcell = \"<div class='\" + css + \"' style='\" + style + \"' \" + aria + \">\" + tree.join(\"\") + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tvar css = gantt.getGlobalTaskIndex(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\tcss += (item.$transparent) ? \" gantt_transparent\" : \"\";\r\n\r\n\t\tcss += (item.$dataprocessor_class ? \" \" + item.$dataprocessor_class : \"\");\r\n\r\n\t\tif (templates.grid_row_class) {\r\n\t\t\tvar css_template = templates.grid_row_class.call(gantt, item.start_date, item.end_date, item);\r\n\t\t\tif (css_template)\r\n\t\t\t\tcss += \" \" + css_template;\r\n\t\t}\r\n\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.className = \"gantt_row\" + css;\r\n\t\tel.style.height = config.row_height + \"px\";\r\n\t\tel.style.lineHeight = (config.row_height) + \"px\";\r\n\r\n\t\tif(config.smart_rendering){\r\n\t\t\tel.style.position = \"absolute\";\r\n\t\t\tel.style.left = \"0px\";\r\n\t\t\tel.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t}\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tel.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\tgantt._waiAria.taskRowAttr(item, el);\r\n\r\n\t\tel.innerHTML = cells.join(\"\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\treturn _render_grid_item;\r\n}\r\n\r\nmodule.exports = createGridLineRender;\r\n\r\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar rowDnd = __webpack_require__(56);\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\treturn {\r\n\t\t\tonCreated: function (grid) {\r\n\t\t\t\tgrid.$config = utils.mixin(grid.$config, {\r\n\t\t\t\t\tbind: \"task\"\r\n\t\t\t\t});\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendGantt(grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates = __webpack_require__(9)(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (grid) {\r\n\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\tif (config.order_branch) {\r\n\t\t\t\t\trowDnd.init(grid.$gantt, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initEvents(grid, gantt);\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendDom(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (grid) {\r\n\t\t\t\tthis.clearEvents(grid, gantt);\r\n\t\t\t},\r\n\r\n\t\t\tinitEvents: function (grid, gantt) {\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (id !== null) {\r\n\t\t\t\t\t\tvar task = this.getTask(id);\r\n\t\t\t\t\t\tif (config.scroll_on_click && !gantt._is_icon_open_click(e))\r\n\t\t\t\t\t\t\tthis.showDate(task.start_date);\r\n\t\t\t\t\t\tgantt.callEvent(\"onTaskRowClick\", [id, trg]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_grid_head_cell\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar column = trg.getAttribute(\"column_id\");\r\n\r\n\t\t\t\t\tif (!gantt.callEvent(\"onGridHeaderClick\", [column, e]))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\t\t\tif (column == \"add\") {\r\n\t\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\t\tmouseEvents.callHandler(\"click\", \"gantt_add\", grid.$grid, [e, config.root_id]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\tvar sorting_method = column,\r\n\t\t\t\t\t\t\tconf;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < config.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (config.columns[i].name == column) {\r\n\t\t\t\t\t\t\t\tconf = config.columns[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (conf && conf.sort !== undefined && conf.sort !== true) {\r\n\t\t\t\t\t\t\tsorting_method = conf.sort;\r\n\r\n\t\t\t\t\t\t\tif (!sorting_method) { // column sort property 'false', no sorting\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar sort = (this._sort && this._sort.direction && this._sort.name == column) ? this._sort.direction : \"desc\";\r\n\t\t\t\t\t\t// invert sort direction\r\n\t\t\t\t\t\tsort = (sort == \"desc\") ? \"asc\" : \"desc\";\r\n\t\t\t\t\t\tthis._sort = {\r\n\t\t\t\t\t\t\tname: column,\r\n\t\t\t\t\t\t\tdirection: sort\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.sort(sorting_method, sort == \"desc\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_add\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (config.readonly) return;\r\n\r\n\t\t\t\t\tvar item = {};\r\n\t\t\t\t\tthis.createTask(item, id ? id : gantt.config.root_id);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclearEvents: function(grid, gantt){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\textendDom: function(grid){\r\n\t\t\t\tgantt.$grid = grid.$grid;\r\n\t\t\t\tgantt.$grid_scale = grid.$grid_scale;\r\n\t\t\t\tgantt.$grid_data = grid.$grid_data;\r\n\t\t\t},\r\n\t\t\textendGantt: function(grid){\r\n\r\n\t\t\t\tgantt.getGridColumns = gantt.bind(grid.getGridColumns, grid);\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeStart\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeStart\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeComplete\", function(columns, totalWidth){\r\n\t\t\t\t\tgantt.config.grid_width = totalWidth;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt._hideQuickInfo();\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar datastore = getStore();\r\n\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\telement.style.position = \"static\";\r\n\t\t}\r\n\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.index = store.getBranchIndex(dnd.config.id);\r\n\t\tdnd.config.parent = task.parent;\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tdnd.lastTaskOfLevel = function (level) {\r\n\t\tvar last_item = null;\r\n\t\tvar store = getStore();\r\n\t\tvar tasks = store.getItems();\r\n\t\tfor (var i = 0, len = tasks.length; i < len; i++) {\r\n\t\t\tif (tasks[i].$level == level) {\r\n\t\t\t\tlast_item = tasks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn last_item ? last_item.id : null;\r\n\t};\r\n\tdnd._getGridPos = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tvar store = getStore();\r\n\t\t// row offset\r\n\t\tvar x = pos.x;\r\n\t\tvar y = e.pos.y - 10;\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\t\t// prevent moving row out of grid_data container\r\n\t\tif (y < pos.y) y = pos.y;\r\n\t\tvar gridHeight = store.countVisible() * config.row_height;\r\n\t\tif (y > pos.y + gridHeight - config.row_height) y = pos.y + gridHeight - config.row_height;\r\n\r\n\t\tpos.x = x;\r\n\t\tpos.y = y;\r\n\t\treturn pos;\r\n\t}, gantt);\r\n\tdnd._getTargetY = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\r\n\t\tvar y = e.pageY - pos.y + (grid.$state.scrollTop || 0);\r\n\t\tif (y < 0)\r\n\t\t\ty = 0;\r\n\t\treturn y;\r\n\t}, gantt);\r\n\tdnd._getTaskByY = gantt.bind(function (y, dropIndex) {\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\ty = y || 0;\r\n\r\n\t\tvar index = Math.floor(y / config.row_height);\r\n\t\tindex = dropIndex < index ? index - 1 : index;\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn null;\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}, gantt);\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd._getGridPos(e);\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\t// setting position of row\r\n\t\tdd.marker.style.left = pos.x + 10 + \"px\";\r\n\t\tdd.marker.style.top = pos.y + \"px\";\r\n\r\n\t\t// highlight row when mouseover\r\n\t\tvar item = store.getItem(dnd.config.id);\r\n\t\tvar targetY = dnd._getTargetY(e);\r\n\t\tvar el = dnd._getTaskByY(targetY, store.getIndexById(item.id));\r\n\r\n\t\tif (!store.exists(el)) {\r\n\t\t\tel = dnd.lastTaskOfLevel(config.order_branch_free ? item.$level : 0);\r\n\t\t\tif (el == dnd.config.id) {\r\n\t\t\t\tel = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction allowedLevel(next, item) {\r\n\t\t\treturn (!(store.isChildOf(over.id, item.id)) && (next.$level == item.$level || config.order_branch_free));\r\n\t\t}\r\n\r\n\t\tif (store.exists(el)) {\r\n\t\t\tvar over = store.getItem(el);\r\n\r\n\t\t\tif (store.getIndexById(over.id) * config.row_height + config.row_height / 2 < targetY) {\r\n\t\t\t\t//hovering over bottom part of item, check can be drop to bottom\r\n\t\t\t\tvar index = store.getIndexById(over.id);\r\n\t\t\t\tvar nextId = store.getNext(over.id);//adds +1 when hovering over placeholder\r\n\t\t\t\tvar next = store.getItem(nextId);\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tif (next.id != item.id) {\r\n\t\t\t\t\t\tover = next; //there is a valid target\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (config.order_branch_free) {\r\n\t\t\t\t\t\t\tif (!(store.isChildOf(item.id, over.id) && store.getChildren(over.id).length == 1))\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstore.move(item.id, store.getBranchIndex(over.id) + 1, store.getParent(over.id));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//we at end of the list, check and drop at the end of list\r\n\t\t\t\t\tnextId = store.getIdByIndex(index);\r\n\t\t\t\t\tnext = store.getItem(nextId);\r\n\r\n\t\t\t\t\tif (allowedLevel(next, item) && next.id != item.id) {\r\n\t\t\t\t\t\tstore.move(item.id, -1, store.getParent(next.id));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (config.order_branch_free) {\r\n\t\t\t\tif (over.id != item.id && allowedLevel(over, item)) {\r\n\t\t\t\t\tif (!store.hasChild(over.id)) {\r\n\t\t\t\t\t\tover.$open = true;\r\n\t\t\t\t\t\tstore.move(item.id, -1, over.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (store.getIndexById(over.id) || config.row_height / 3 < targetY) return;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//if item is on different level, check the one before it\r\n\t\t\tvar index = store.getIndexById(over.id),\r\n\t\t\t\tprevId = store.getIdByIndex(index - 1);\r\n\r\n\t\t\tvar prev = store.getItem(prevId);\r\n\r\n\t\t\tvar shift = 1;\r\n\t\t\twhile ((!prev || prev.id == over.id) && index - shift >= 0) {\r\n\r\n\t\t\t\tprevId = store.getIdByIndex(index - shift);\r\n\t\t\t\tprev = store.getItem(prevId);\r\n\t\t\t\tshift++;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.id == over.id) return;\r\n\t\t\t//replacing item under cursor\r\n\t\t\tif (allowedLevel(over, item) && item.id != over.id) {\r\n\t\t\t\tstore.move(item.id, 0, 0, over.id);\r\n\r\n\t\t\t} else if (over.$level == item.$level - 1 && !store.getChildren(over.id).length) {\r\n\t\t\t\tstore.move(item.id, 0, over.id);\r\n\r\n\t\t\t} else if (prev && (allowedLevel(prev, item)) && (item.id != prev.id)) {\r\n\t\t\t\tstore.move(item.id, -1, store.getParent(prev.id));\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = getStore();\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, dnd.config.parent, dnd.config.index]) === false) {\r\n\t\t\tstore.move(dnd.config.id, dnd.config.index, dnd.config.parent);\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, task.$drop_target]);\r\n\t\t}\r\n\r\n\t\tstore.refresh(task.id);\r\n\t\t//this.refreshData();\r\n\t}, gantt));\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: _init_dnd\r\n};\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0),\r\n\ttaskDnD = __webpack_require__(58),\r\n\tlinkDnD = __webpack_require__(59),\r\n\tdomHelpers = __webpack_require__(1);\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\tvar services = gantt.$services;\r\n\t\treturn {\r\n\t\t\tonCreated: function (timeline) {\r\n\t\t\t\tvar config = timeline.$config;\r\n\t\t\t\tconfig.bind = utils.defined(config.bind) ? config.bind : \"task\";\r\n\t\t\t\tconfig.bindLinks = utils.defined(config.bindLinks) ? config.bindLinks : \"link\";\r\n\r\n\t\t\t\ttimeline._linksDnD = linkDnD.createLinkDND();\r\n\t\t\t\ttimeline._tasksDnD = taskDnD.createTaskDND();\r\n\t\t\t\ttimeline._tasksDnD.extend(timeline);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\") {\r\n\t\t\t\t\tthis.extendGantt(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates = __webpack_require__(9)(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (timeline) {\r\n\t\t\t\tthis._attachDomEvents(gantt);\r\n\r\n\t\t\t\tthis._attachStateProvider(gantt, timeline);\r\n\r\n\t\t\t\ttimeline._tasksDnD.init(timeline, gantt);\r\n\t\t\t\ttimeline._linksDnD.init(timeline, gantt);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\"){\r\n\t\t\t\t\tthis.extendDom(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\t\t\t\tthis._clearDomEvents(gantt);\r\n\t\t\t\tthis._clearStateProvider(gantt);\r\n\t\t\t},\r\n\t\t\textendDom: function(timeline){\r\n\t\t\t\tgantt.$task = timeline.$task;\r\n\t\t\t\tgantt.$task_scale = timeline.$task_scale;\r\n\t\t\t\tgantt.$task_data = timeline.$task_data;\r\n\t\t\t\tgantt.$task_bg = timeline.$task_bg;\r\n\t\t\t\tgantt.$task_links = timeline.$task_links;\r\n\t\t\t\tgantt.$task_bars = timeline.$task_bars;\r\n\t\t\t},\r\n\r\n\t\t\textendGantt: function(timeline){\r\n\t\t\t\tgantt.dateFromPos = gantt.bind(timeline.dateFromPos, timeline);\r\n\t\t\t\tgantt.posFromDate = gantt.bind(timeline.posFromDate, timeline);\r\n\t\t\t\tgantt.getRowTop = gantt.bind(timeline.getRowTop, timeline);\r\n\t\t\t\tgantt.getTaskTop = gantt.bind(timeline.getItemTop, timeline);\r\n\t\t\t\tgantt.getTaskPosition = gantt.bind(timeline.getItemPosition, timeline);\r\n\t\t\t\tgantt.getTaskHeight = gantt.bind(timeline.getItemHeight, timeline);\r\n\t\t\t\tgantt.columnIndexByDate = gantt.bind(timeline.columnIndexByDate, timeline);\r\n\t\t\t\tgantt.roundTaskDates = gantt.bind(timeline.roundTaskDates, timeline);\r\n\t\t\t\tgantt.getScale = gantt.bind(timeline.getScale, timeline);\r\n\t\t\t\tgantt.getTaskNode = function (id) {\r\n\t\t\t\t\treturn timeline._taskRenderer.rendered[id];\r\n\t\t\t\t};\r\n\t\t\t\tgantt.getLinkNode = function (id) {\r\n\t\t\t\t\treturn timeline._linkRenderer.rendered[id];\r\n\t\t\t\t};\r\n\r\n\t\t\t},\r\n\r\n\t\t\t_clearDomEvents: function(){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvents: function(gantt){\r\n\t\t\t\tfunction _delete_link_handler(id, e) {\r\n\t\t\t\t\tif (id && this.callEvent(\"onLinkDblClick\", [id, e])) {\r\n\r\n\t\t\t\t\t\tvar link = this.getLink(id);\r\n\t\t\t\t\t\tif (this.isReadonly(link)) return;\r\n\r\n\t\t\t\t\t\tvar title = \"\";\r\n\t\t\t\t\t\tvar question = this.locale.labels.link + \" \" + this.templates.link_description(this.getLink(id)) + \" \" + this.locale.labels.confirm_link_deleting;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\t\t\tgantt._dhtmlx_confirm(question, title, function () {\r\n\t\t\t\t\t\t\t\tgantt.deleteLink(id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (this.config.touch ? 300 : 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_task_link\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, this.config.link_attribute);\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tthis.callEvent(\"onLinkClick\", [id, e]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_scale_cell\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\t\tvar date = gantt.dateFromPos(pos.x);\r\n\t\t\t\t\tvar coll = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\t\t\tvar coll_date = gantt.getScale().trace_x[coll];\r\n\r\n\t\t\t\t\tgantt.callEvent(\"onScaleClick\", [e, coll_date]);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_task_link\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, gantt.config.link_attribute);\r\n\t\t\t\t\t_delete_link_handler.call(this, id, e);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_link_point\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e),\r\n\t\t\t\t\t\ttask = this.getTask(id);\r\n\r\n\t\t\t\t\tvar link = null;\r\n\t\t\t\t\tif (trg.parentNode && domHelpers.getClassName(trg.parentNode)) {\r\n\t\t\t\t\t\tif (domHelpers.getClassName(trg.parentNode).indexOf(\"_left\") > -1) {\r\n\t\t\t\t\t\t\tlink = task.$target[0];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlink = task.$source[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link)\r\n\t\t\t\t\t\t_delete_link_handler.call(this, link, e);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), this.$task);\r\n\t\t\t},\r\n\r\n\t\t\t_attachStateProvider: function(gantt, timeline){\r\n\t\t\t\tvar self = timeline;\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.registerProvider(\"tasksTimeline\", function(){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tscale_unit: self._tasks ? self._tasks.unit : undefined,\r\n\t\t\t\t\t\tscale_step:  self._tasks ? self._tasks.step  : undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearStateProvider: function(){\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.unregisterProvider(\"tasksTimeline\");\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n})();\r\n\r\nmodule.exports = initializer;\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0);\r\nvar timeout = __webpack_require__(10);\r\n\r\nfunction createTaskDND(timeline, gantt){\r\n\tvar services = gantt.$services;\r\n\treturn {\r\n\t\tdrag: null,\r\n\t\tdragMultiple: {},\r\n\t\t_events: {\r\n\t\t\tbefore_start: {},\r\n\t\t\tbefore_finish: {},\r\n\t\t\tafter_finish: {}\r\n\t\t},\r\n\t\t_handlers: {},\r\n\t\tinit: function () {\r\n\t\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\t\tthis.clear_drag_state();\r\n\t\t\tvar drag = gantt.config.drag_mode;\r\n\t\t\tthis.set_actions();\r\n\r\n\t\t\tvar stateService = services.getService(\"state\");\r\n\t\t\tstateService.registerProvider(\"tasksDnd\", utils.bind(function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdrag_id : this.drag ? this.drag.id : undefined,\r\n\t\t\t\t\tdrag_mode : this.drag ? this.drag.mode : undefined,\r\n\t\t\t\t\tdrag_from_start : this.drag ? this.drag.left : undefined\r\n\t\t\t\t};\r\n\t\t\t}, this));\r\n\r\n\t\t\tvar evs = {\r\n\t\t\t\t\"before_start\": \"onBeforeTaskDrag\",\r\n\t\t\t\t\"before_finish\": \"onBeforeTaskChanged\",\r\n\t\t\t\t\"after_finish\": \"onAfterTaskDrag\"\r\n\t\t\t};\r\n\t\t\t//for now, all drag operations will trigger the same events\r\n\t\t\tfor (var stage in this._events) {\r\n\t\t\t\tfor (var mode in drag) {\r\n\t\t\t\t\tthis._events[stage][mode] = evs[stage];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._handlers[drag.move] = this._move;\r\n\t\t\tthis._handlers[drag.resize] = this._resize;\r\n\t\t\tthis._handlers[drag.progress] = this._resize_progress;\r\n\t\t},\r\n\t\tset_actions: function () {\r\n\t\t\tvar data = timeline.$task_data;\r\n\t\t\tthis._domEvents.attach(data, \"mousemove\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_move(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mousedown\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_down(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mouseup\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_up(e || event);\r\n\t\t\t}, this));\r\n\t\t},\r\n\r\n\t\tclear_drag_state: function () {\r\n\t\t\tthis.drag = {\r\n\t\t\t\tid: null,\r\n\t\t\t\tmode: null,\r\n\t\t\t\tpos: null,\r\n\t\t\t\tstart_x: null,\r\n\t\t\t\tstart_y: null,\r\n\t\t\t\tobj: null,\r\n\t\t\t\tleft: null\r\n\t\t\t};\r\n\t\t\tthis.dragMultiple = {};\r\n\t\t},\r\n\t\t_resize: function (ev, shift, drag) {\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tif (drag.left) {\r\n\t\t\t\tev.start_date = gantt.dateFromPos(coords_x.start + shift);\r\n\t\t\t\tif (!ev.start_date) {\r\n\t\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tev.end_date = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\t\tif (!ev.end_date) {\r\n\t\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (ev.end_date - ev.start_date < cfg.min_duration) {\r\n\t\t\t\tif (drag.left)\r\n\t\t\t\t\tev.start_date = gantt.calculateEndDate({start_date: ev.end_date, duration: -1, task: ev});\r\n\t\t\t\telse\r\n\t\t\t\t\tev.end_date = gantt.calculateEndDate({start_date: ev.start_date, duration: 1, task: ev});\r\n\t\t\t}\r\n\t\t\tgantt._init_task_timing(ev);\r\n\t\t},\r\n\t\t_resize_progress: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar diffValue = !config.rtl ? (drag.pos.x - coords_x.start) : (coords_x.start - drag.pos.x);\r\n\r\n\t\t\tvar diff = Math.max(0, diffValue);\r\n\t\t\tev.progress = Math.min(1, diff / Math.abs(coords_x.end - coords_x.start));\r\n\t\t},\r\n\r\n\t\t_find_max_shift: function(dragItems, shift){\r\n\t\t\tvar correctShift;\r\n\t\t\tfor(var i in dragItems){\r\n\t\t\t\tvar drag = dragItems[i];\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\t\tvar minX = gantt.posFromDate( new Date(gantt.getState().min_date)),\r\n\t\t\t\t\tmaxX = gantt.posFromDate( new Date(gantt.getState().max_date));\r\n\r\n\t\t\t\tif(coords_x.end + shift > maxX){\r\n\t\t\t\t\tvar maxShift = maxX - coords_x.end;\r\n\t\t\t\t\tif(maxShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = maxShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(coords_x.start + shift < minX){\r\n\t\t\t\t\tvar minShift = minX - coords_x.start;\r\n\t\t\t\t\tif(minShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = minShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn correctShift;\r\n\t\t},\r\n\t\t_move: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tvar new_start = gantt.dateFromPos(coords_x.start + shift),\r\n\t\t\t\tnew_end = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\tif (!new_start) {\r\n\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\tev.end_date = gantt.dateFromPos(gantt.posFromDate(ev.start_date) + (coords_x.end - coords_x.start));\r\n\t\t\t} else if (!new_end) {\r\n\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\tev.start_date = gantt.dateFromPos(gantt.posFromDate(ev.end_date) - (coords_x.end - coords_x.start));\r\n\t\t\t} else {\r\n\t\t\t\tev.start_date = new_start;\r\n\t\t\t\tev.end_date = new_end;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_drag_task_coords: function (t, drag) {\r\n\t\t\tvar start = drag.obj_s_x = drag.obj_s_x || gantt.posFromDate(t.start_date);\r\n\t\t\tvar end = drag.obj_e_x = drag.obj_e_x || gantt.posFromDate(t.end_date);\r\n\t\t\treturn {\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: end\r\n\t\t\t};\r\n\t\t},\r\n\t\t_mouse_position_change: function (oldPos, newPos) {\r\n\t\t\tvar dx = oldPos.x - newPos.x,\r\n\t\t\t\tdy = oldPos.y - newPos.y;\r\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t\t},\r\n\t\t_is_number: function (n) {\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\r\n\t\ton_mouse_move: function (e) {\r\n\t\t\tif (this.drag.start_drag) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\tvar sX = this.drag.start_drag.start_x,\r\n\t\t\t\t\tsY = this.drag.start_drag.start_y;\r\n\r\n\t\t\t\tif ((Date.now() - this.drag.timestamp > 50) ||\r\n\t\t\t\t\t(this._is_number(sX) && this._is_number(sY) && this._mouse_position_change({\r\n\t\t\t\t\t\tx: sX,\r\n\t\t\t\t\t\ty: sY\r\n\t\t\t\t\t}, pos) > 20)) {\r\n\t\t\t\t\tthis._start_dnd(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tif (!timeout(this, 40))//limit update frequency\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._update_on_move(e);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_update_item_on_move: function(shift, id, mode, drag, e){\r\n\t\t\tvar ev = gantt.getTask(id);\r\n\t\t\tvar original = gantt.mixin({}, ev);\r\n\t\t\tvar copy = gantt.mixin({}, ev);\r\n\t\t\tthis._handlers[mode].apply(this, [copy, shift, drag]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\t//gantt._update_parents(drag.id, true);\r\n\t\t\tgantt.callEvent(\"onTaskDrag\", [ev.id, mode, copy, original, e]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t},\r\n\r\n\t\t_update_on_move: function (e) {\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t\t\tif (drag.pos && drag.pos.x == pos.x)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tdrag.pos = pos;\r\n\r\n\t\t\t\tvar curr_date = gantt.dateFromPos(pos.x);\r\n\t\t\t\tif (!curr_date || isNaN(curr_date.getTime()))\r\n\t\t\t\t\treturn;\r\n\r\n\r\n\t\t\t\tvar shift = pos.x - drag.start_x;\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tif (this._handlers[drag.mode]) {\r\n\r\n\t\t\t\t\tif(gantt.isSummaryTask(ev) && gantt.config.drag_project && drag.mode == config.drag_mode.move){\r\n\r\n\t\t\t\t\t\tvar initialDrag = {};\r\n\t\t\t\t\t\tinitialDrag[drag.id] = utils.copy(drag);\r\n\t\t\t\t\t\tvar maxShift = this._find_max_shift(utils.mixin(initialDrag, this.dragMultiple), shift);\r\n\t\t\t\t\t\tif(maxShift !== undefined){\r\n\t\t\t\t\t\t\tshift = maxShift;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t\tfor(var i in this.dragMultiple){\r\n\t\t\t\t\t\t\tvar childDrag =  this.dragMultiple[i];\r\n\t\t\t\t\t\t\tthis._update_item_on_move(shift, childDrag.id, childDrag.mode, childDrag, e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt._update_parents(drag.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ton_mouse_down: function (e, src) {\r\n\t\t\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t\t\t// let's ignore right mouse button then\r\n\t\t\tif (e.button == 2 && e.button !== undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar task = null;\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\ttask = gantt.getTask(id);\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.isReadonly(task) || this.drag.mode) return;\r\n\r\n\t\t\tthis.clear_drag_state();\r\n\r\n\t\t\tsrc = src || (e.target || e.srcElement);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tvar drag = this._get_drag_mode(className, src);\r\n\r\n\t\t\tif (!className || !drag) {\r\n\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!drag) {\r\n\t\t\t\tif (gantt.checkEvent(\"onMouseDown\") && gantt.callEvent(\"onMouseDown\", [className.split(\" \")[0]])) {\r\n\t\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (drag.mode && drag.mode != config.drag_mode.ignore && config[\"drag_\" + drag.mode]) {\r\n\t\t\t\t\tid = gantt.locate(src);\r\n\t\t\t\t\ttask = gantt.copy(gantt.getTask(id) || {});\r\n\r\n\t\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((gantt.isSummaryTask(task) && !config.drag_project) && drag.mode != config.drag_mode.progress) {//only progress drag is allowed for tasks with flexible duration\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdrag.id = id;\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\t\tdrag.start_x = pos.x;\r\n\t\t\t\t\tdrag.start_y = pos.y;\r\n\t\t\t\t\tdrag.obj = task;\r\n\t\t\t\t\tthis.drag.start_drag = drag;\r\n\t\t\t\t\tthis.drag.timestamp = Date.now();\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_dnd_scale_time: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar unit = gantt.getScale().unit,\r\n\t\t\t\tstep = gantt.getScale().step;\r\n\t\t\tif (!config.round_dnd_dates) {\r\n\t\t\t\tunit = 'minute';\r\n\t\t\t\tstep = config.time_step;\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixStart(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(task.start_date, undefined, task))\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\tduration: -1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixEnd(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(new Date(task.end_date - 1), undefined, task))\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\t\tfixStart(task);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.roundDate({date: task.end_date, unit: unit, step: step});\r\n\t\t\t\t\tfixEnd(task);\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\tfixStart(task);\r\n\t\t\t\ttask.end_date = gantt.calculateEndDate(task);\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_working_times: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar drag = drag || {mode: config.drag_mode.move};\r\n\t\t\t\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.getClosestWorkTime({date: task.end_date, dir: 'past', task: task});\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\tgantt.correctTaskWorkTime(task);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_finalize_mouse_up: function(taskId, config, drag, e){\r\n\t\t\tvar ev = gantt.getTask(taskId);\r\n\r\n\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\tthis._fix_working_times(ev, drag);\r\n\t\t\t}\r\n\r\n\t\t\tthis._fix_dnd_scale_time(ev, drag);\r\n\r\n\t\t\tif (!this._fireEvent(\"before_finish\", drag.mode, [taskId, drag.mode, gantt.copy(drag.obj), e])) {\r\n\t\t\t\t//drag.obj._dhx_changed = false;\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tif(taskId == drag.id){\r\n\t\t\t\t\tdrag.obj._dhx_changed = false;\r\n\t\t\t\t\tgantt.mixin(ev, drag.obj, true);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tgantt.refreshTask(ev.id);\r\n\t\t\t} else {\r\n\t\t\t\tvar drag_id = taskId;\r\n\r\n\t\t\t\tgantt._init_task_timing(ev);\r\n\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tgantt.updateTask(ev.id);\r\n\t\t\t\tthis._fireEvent(\"after_finish\", drag.mode, [drag_id, drag.mode, e]);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ton_mouse_up: function (e) {\r\n\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tif (drag.mode && drag.id) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\t//drop\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar dragMultiple = this.dragMultiple;\r\n\t\t\t\tthis._finalize_mouse_up(drag.id, config, drag, e);\r\n\t\t\t\tif(gantt.isSummaryTask(ev) && config.drag_project && drag.mode == config.drag_mode.move){\r\n\t\t\t\t\tfor(var i in dragMultiple){\r\n\t\t\t\t\t\tthis._finalize_mouse_up(dragMultiple[i].id, config, dragMultiple[i], e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.clear_drag_state();\r\n\t\t},\r\n\t\t_get_drag_mode: function (className, el) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar modes = config.drag_mode;\r\n\t\t\tvar classes = (className || \"\").split(\" \");\r\n\t\t\tvar classname = classes[0];\r\n\t\t\tvar drag = {mode: null, left: null};\r\n\t\t\tswitch (classname) {\r\n\t\t\t\tcase \"gantt_task_line\":\r\n\t\t\t\tcase \"gantt_task_content\":\r\n\t\t\t\t\tdrag.mode = modes.move;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_drag\":\r\n\t\t\t\t\tdrag.mode = modes.resize;\r\n\r\n\t\t\t\t\tvar dragProperty = el.getAttribute(\"data-bind-property\");\r\n\r\n\t\t\t\t\tif (dragProperty == \"start_date\") {\r\n\t\t\t\t\t\tdrag.left = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrag.left = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_progress_drag\":\r\n\t\t\t\t\tdrag.mode = modes.progress;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_link_control\":\r\n\t\t\t\tcase \"gantt_link_point\":\r\n\t\t\t\t\tdrag.mode = modes.ignore;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdrag = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn drag;\r\n\r\n\t\t},\r\n\r\n\t\t_start_dnd: function (e) {\r\n\t\t\tvar drag = this.drag = this.drag.start_drag;\r\n\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar id = drag.id;\r\n\t\t\tif (!cfg[\"drag_\" + drag.mode] || !gantt.callEvent(\"onBeforeDrag\", [id, drag.mode, e]) || !this._fireEvent(\"before_start\", drag.mode, [id, drag.mode, e])) {\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t} else {\r\n\t\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\tif(gantt.isSummaryTask(task) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move){\r\n\t\t\t\t\tgantt.eachTask(function(child){\r\n\t\t\t\t\t\tthis.dragMultiple[child.id] = gantt.mixin({\r\n\t\t\t\t\t\t\tid: child.id,\r\n\t\t\t\t\t\t\tobj: child\r\n\t\t\t\t\t\t}, this.drag);\r\n\t\t\t\t\t}, task.id, this);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.callEvent(\"onTaskDragStart\", []);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_fireEvent: function (stage, mode, params) {\r\n\t\t\tgantt.assert(this._events[stage], \"Invalid stage:{\" + stage + \"}\");\r\n\r\n\t\t\tvar trigger = this._events[stage][mode];\r\n\r\n\t\t\tgantt.assert(trigger, \"Unknown after drop mode:{\" + mode + \"}\");\r\n\t\t\tgantt.assert(params, \"Invalid event arguments\");\r\n\r\n\r\n\t\t\tif (!gantt.checkEvent(trigger))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\treturn gantt.callEvent(trigger, params);\r\n\t\t},\r\n\r\n\t\tround_task_dates: function(task){\r\n\t\t\tvar drag_state = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (!drag_state) {\r\n\t\t\t\tdrag_state = {mode: config.drag_mode.move};\r\n\t\t\t}\r\n\t\t\tthis._fix_dnd_scale_time(task, drag_state);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tthis._domEvents.detachAll();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction initTaskDND() {\r\n\tvar _tasks_dnd;\r\n\treturn {\r\n\t\textend: function(timeline){\r\n\t\t\ttimeline.roundTaskDates = function (task) {\r\n\t\t\t\t_tasks_dnd.round_task_dates(task);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tinit: function(timeline, gantt){\r\n\t\t\t_tasks_dnd = createTaskDND(timeline, gantt);\r\n\t\t\t// TODO: entry point for touch handlers, move touch to timeline\r\n\t\t\ttimeline._tasks_dnd = _tasks_dnd;\r\n\t\t\treturn _tasks_dnd.init(gantt);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\t_tasks_dnd.destructor();\r\n\t\t\t_tasks_dnd = null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateTaskDND: initTaskDND\r\n};\r\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nvar initLinksDND = function(timeline, gantt) {\r\n\tvar _link_landing,\r\n\t\t_link_target_task,\r\n\t\t_link_target_task_start,\r\n\t\t_link_source_task,\r\n\t\t_link_source_task_start;\r\n\r\n\r\n\tfunction getVisibleMilestoneWidth() {\r\n\t\tvar origWidth = timeline.getItemHeight();//m-s have square shape\r\n\t\treturn Math.round(Math.sqrt(2 * origWidth * origWidth)) - 2;\r\n\t}\r\n\r\n\tfunction isMilestone(task) {\r\n\t\treturn gantt.getTaskType(task.type) == gantt.config.types.milestone;\r\n\t}\r\n\r\n\tfunction getDndState(){\r\n\t\treturn {\r\n\t\t\tlink_source_id : _link_source_task,\r\n\t\t\tlink_target_id : _link_target_task,\r\n\t\t\tlink_from_start : _link_source_task_start,\r\n\t\t\tlink_to_start : _link_target_task_start,\r\n\t\t\tlink_landing_area : _link_landing\r\n\t\t};\r\n\t}\r\n\r\n\tvar services = gantt.$services;\r\n\r\n\tvar state = services.getService(\"state\");\r\n\tvar DnD = services.getService(\"dnd\");\r\n\r\n\tstate.registerProvider(\"linksDnD\", getDndState);\r\n\r\n\tvar dnd = new DnD(timeline.$task_bars, { sensitivity : 0, updates_per_second : 60 }),\r\n\t\tstart_marker = \"task_start_date\",\r\n\t\tend_marker = \"task_end_date\",\r\n\t\tlink_edge_marker = \"gantt_link_point\",\r\n\t\tlink_landing_hover_area = \"gantt_link_control\";\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function(obj,e) {\r\n\t\tvar target = (e.target||e.srcElement);\r\n\t\tresetDndState();\r\n\t\tif(gantt.getState().drag_id)\r\n\t\t\treturn false;\r\n\r\n\t\tif(domHelpers.locateClassName(target, link_edge_marker)){\r\n\t\t\tif(domHelpers.locateClassName(target, start_marker))\r\n\t\t\t\t_link_source_task_start = true;\r\n\r\n\t\t\tvar sid = gantt.locate(e);\r\n\t\t\t_link_source_task = sid;\r\n\r\n\t\t\tvar t = gantt.getTask(sid);\r\n\t\t\tif(gantt.isReadonly(t)){\r\n\t\t\t\tresetDndState();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar shift = 0;\r\n\r\n\t\t\tthis._dir_start = getLinePos(t, !!_link_source_task_start, shift, timeline.$getConfig(), true);\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, this));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function(obj,e) {\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tupdateMarkedHtml(dnd.config.marker);\r\n\t}, this));\r\n\r\n\tfunction getLinePos(task, to_start, shift, cfg, isStart){\r\n\t\tvar taskPos = getMilestonePosition(task, function(task){ return gantt.getTaskPosition(task);}, cfg);\r\n\r\n\t\tvar pos = {x: taskPos.x, y: taskPos.y};\r\n\t\tif(!to_start){\r\n\t\t\tpos.x = taskPos.xEnd;\r\n\t\t}\r\n\r\n\t\t//var pos = gantt._get_task_pos(task, !!to_start);\r\n\t\tpos.y += gantt.config.row_height/2;\r\n\r\n\t\tvar offset = isMilestone(task) && isStart ? 2 : 0;\r\n\r\n\t\tshift = shift || 0;\r\n\t\tif(cfg.rtl)\r\n\t\t\tshift = shift * -1;\r\n\r\n\t\tpos.x += (to_start ? -1 : 1)*shift  - offset;\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tfunction getMilestonePosition(task, getTaskPosition, cfg){\r\n\t\tvar pos = getTaskPosition(task);\r\n\r\n\t\tvar res = {\r\n\t\t\tx: pos.left,\r\n\t\t\ty: pos.top,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height\r\n\t\t};\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tres.xEnd = res.x;\r\n\t\t\tres.x = res.xEnd + res.width;\r\n\t\t}else{\r\n\t\t\tres.xEnd = res.x + res.width;\r\n\t\t}\r\n\t\tres.yEnd = res.y + res.height;\r\n\r\n\t\tif(gantt.getTaskType(task.type) == gantt.config.types.milestone){\r\n\t\t\tvar milestoneWidth = getVisibleMilestoneWidth();\r\n\r\n\t\t\tres.x += (!cfg.rtl ? -1 : 1)*(milestoneWidth / 2);\r\n\t\t\tres.xEnd += (!cfg.rtl ? 1 : -1)*(milestoneWidth / 2);\r\n\r\n\t\t\t//pos.x -= milestoneWidth / 2;\r\n\t\t\t//pos.xEnd += milestoneWidth / 2;\r\n\t\t\tres.width = pos.xEnd - pos.x;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function(obj,e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd.getPosition(e);\r\n\t\tadvanceMarker(dd.marker, pos);\r\n\t\tvar landing = !!domHelpers.locateClassName(e, link_landing_hover_area);\r\n\r\n\t\tvar prevTarget = _link_target_task;\r\n\t\tvar prevLanding = _link_landing;\r\n\t\tvar prevToStart = _link_target_task_start;\r\n\r\n\t\tvar targ = gantt.locate(e),\r\n\t\t\tto_start = true;\r\n\t\tif(landing){\r\n\t\t\t//refreshTask\r\n\t\t\tto_start = !domHelpers.locateClassName(e, end_marker);\r\n\t\t\tlanding = !!targ;\r\n\t\t}\r\n\r\n\t\t_link_target_task = targ;\r\n\t\t_link_landing = landing;\r\n\t\t_link_target_task_start = to_start;\r\n\r\n\t\tif(landing){\r\n\t\t\tvar t = gantt.getTask(targ);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar node = domHelpers.locateClassName(e, link_landing_hover_area);\r\n\t\t\tvar shift = 0;\r\n\t\t\tif(node){\r\n\t\t\t\tshift = Math.floor(node.offsetWidth  / 2);\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_end = getLinePos(t, !!_link_target_task_start,shift, config);\r\n\t\t}else{\r\n\t\t\tthis._dir_end = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t}\r\n\r\n\t\tvar targetChanged = !(prevLanding == landing && prevTarget == targ && prevToStart == to_start);\r\n\t\tif(targetChanged){\r\n\t\t\tif(prevTarget)\r\n\t\t\t\tgantt.refreshTask(prevTarget, false);\r\n\t\t\tif(targ)\r\n\t\t\t\tgantt.refreshTask(targ, false);\r\n\t\t}\r\n\r\n\t\tif(targetChanged){\r\n\t\t\tupdateMarkedHtml(dd.marker);\r\n\t\t}\r\n\r\n\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\r\n\t\treturn true;\r\n\t}, this));\r\n\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function() {\r\n\t\tvar drag = getDndState();\r\n\r\n\t\tif(drag.link_source_id && drag.link_target_id && drag.link_source_id != drag.link_target_id){\r\n\t\t\tvar type = gantt._get_link_type(drag.link_from_start, drag.link_to_start);\r\n\r\n\t\t\tvar link = {source : drag.link_source_id, target: drag.link_target_id, type:type};\r\n\t\t\tif(link.type && gantt.isLinkAllowed(link))\r\n\t\t\t\tgantt.addLink(link);\r\n\t\t}\r\n\r\n\t\tresetDndState();\r\n\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (drag.link_source_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_source_id, false);\r\n\t\t\tif (drag.link_target_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_target_id, false);\r\n\t\t}\r\n\t\tremoveDirectionLine();\r\n\t}, this));\r\n\r\n\tfunction updateMarkedHtml(marker){\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_tooltip\"];\r\n\t\tif(link.link_source_id && link.link_target_id){\r\n\t\t\tif(gantt.isLinkAllowed(link.link_source_id, link.link_target_id, link.link_from_start, link.link_to_start)){\r\n\t\t\t\tcss.push(\"gantt_allowed_link\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_invalid_link\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar className = gantt.templates.drag_link_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start);\r\n\t\tif(className)\r\n\t\t\tcss.push(className);\r\n\r\n\t\tvar html = \"<div class='\"+className+ \"'>\" +\r\n\t\t\tgantt.templates.drag_link(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start) +\r\n\t\t\t\"</div>\";\r\n\t\tmarker.innerHTML = html;\r\n\t}\r\n\r\n\tfunction advanceMarker(marker, pos){\r\n\t\tmarker.style.left = pos.x + 5 + \"px\";\r\n\t\tmarker.style.top = pos.y + 5 + \"px\";\r\n\t}\r\n\r\n\tfunction resetDndState(){\r\n\t\t_link_source_task =\r\n\t\t\t_link_source_task_start =\r\n\t\t\t\t_link_target_task = null;\r\n\t\t_link_target_task_start = true;\r\n\t}\r\n\tfunction showDirectingLine(s_x, s_y, e_x, e_y){\r\n\t\tvar div = getDirectionLine();\r\n\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_direction\"];\r\n\t\tif(gantt.templates.link_direction_class){\r\n\t\t\tcss.push(gantt.templates.link_direction_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start));\r\n\t\t}\r\n\r\n\t\tvar dist =Math.sqrt( (Math.pow(e_x - s_x, 2)) + (Math.pow(e_y - s_y, 2)) );\r\n\t\tdist = Math.max(0, dist - 3);\r\n\t\tif(!dist)\r\n\t\t\treturn;\r\n\r\n\t\tdiv.className = css.join(\" \");\r\n\t\tvar tan = (e_y - s_y)/(e_x - s_x),\r\n\t\t\tangle = Math.atan(tan);\r\n\r\n\t\tif(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 2){\r\n\t\t\tangle += Math.PI;\r\n\t\t}else if(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 3){\r\n\t\t\tangle -= Math.PI;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar sin = Math.sin(angle),\r\n\t\t\tcos = Math.cos(angle),\r\n\t\t\ttop = Math.round(s_y),\r\n\t\t\tleft = Math.round(s_x);\r\n\r\n\r\n\t\tvar style = [\r\n\t\t\t\"-webkit-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-moz-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-ms-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-o-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"width:\" + Math.round(dist) + \"px\"\r\n\t\t];\r\n\r\n\t\tif(window.navigator.userAgent.indexOf(\"MSIE 8.0\") != -1){\r\n\t\t\t//ms-filter breaks styles in ie9, so add it only for 8th\r\n\t\t\tstyle.push(\"-ms-filter: \\\"\" + ieTransform(sin, cos) + \"\\\"\");\r\n\r\n\t\t\tvar shiftLeft = Math.abs(Math.round(s_x - e_x)),\r\n\t\t\t\tshiftTop = Math.abs(Math.round(e_y - s_y));\r\n\t\t\t//fix rotation axis\r\n\t\t\tswitch(coordinateCircleQuarter(s_x, e_x, s_y, e_y)){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstyle.push(\"top:\" +  top + \"px\");\r\n\t\tstyle.push(\"left:\" +  left + \"px\");\r\n\r\n\t\tdiv.style.cssText = style.join(\";\");\r\n\t}\r\n\r\n\tfunction ieTransform(sin, cos){\r\n\t\treturn \"progid:DXImageTransform.Microsoft.Matrix(\"+\r\n\t\t\t\"M11 = \"+cos+\",\"+\r\n\t\t\t\"M12 = -\"+sin+\",\"+\r\n\t\t\t\"M21 = \"+sin+\",\"+\r\n\t\t\t\"M22 = \"+cos+\",\"+\r\n\t\t\t\"SizingMethod = 'auto expand'\"+\r\n\t\t\")\";\r\n\t}\r\n\tfunction coordinateCircleQuarter(sX, eX, sY, eY){\r\n\t\tif(eX >= sX){\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tfunction getDirectionLine(){\r\n\t\tif(!dnd._direction){\r\n\t\t\tdnd._direction = document.createElement(\"div\");\r\n\t\t\ttimeline.$task_links.appendChild(dnd._direction);\r\n\t\t}\r\n\t\treturn dnd._direction;\r\n\t}\r\n\tfunction removeDirectionLine(){\r\n\t\tif(dnd._direction){\r\n\t\t\tif (dnd._direction.parentNode)\t//the event line can be detached because of data refresh\r\n\t\t\t\tdnd._direction.parentNode.removeChild(dnd._direction);\r\n\r\n\t\t\tdnd._direction = null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateLinkDND: function(){\r\n\t\treturn {\r\n\t\t\tinit: initLinksDND\r\n\t\t};\r\n\t}\r\n};\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports) {\n\nvar initializer = (function() {\r\n\treturn function (gantt) {\r\n\t\treturn {\r\n\r\n\t\t\tgetVerticalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t\t\t},\r\n\t\t\tgetHorizontalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t\t\t},\r\n\r\n\t\t\t_legacyGridResizerClass: function(layout){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar r = resizers[i];\r\n\t\t\t\t\tvar gridResizer = false;\r\n\r\n\t\t\t\t\tvar prev = r.$parent.getPrevSibling(r.$id);\r\n\t\t\t\t\tif(prev && prev.$config && prev.$config.id === \"grid\"){\r\n\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar next = r.$parent.getNextSibling(r.$id);\r\n\t\t\t\t\t\tif(next && next.$config && next.$config.id === \"grid\"){\r\n\t\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(gridResizer){\r\n\t\t\t\t\t\tr.$config.css = (r.$config.css ? r.$config.css + \" \" : \"\") + \"gantt_grid_resize_wrap\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonCreated: function (layout) {\r\n\t\t\t\tvar first = true;\r\n\r\n\t\t\t\tthis._legacyGridResizerClass(layout);\r\n\r\n\t\t\t\tlayout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\t\t\tvar mainTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\tif(mainTimeline)\r\n\t\t\t\t\t\tmainTimeline.$config.hidden = mainTimeline.$parent.$config.hidden = !gantt.config.show_chart;\r\n\r\n\t\t\t\t\tvar mainGrid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\tif(!mainGrid)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar showGrid = gantt.config.show_grid;\r\n\t\t\t\t\tif(first) {\r\n\t\t\t\t\t\tvar colsWidth = mainGrid._getColsTotalWidth();\r\n\t\t\t\t\t\tif(colsWidth !== false){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = colsWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tshowGrid = showGrid && !!gantt.config.grid_width;\r\n\t\t\t\t\t\tgantt.config.show_grid = showGrid;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmainGrid.$config.hidden = mainGrid.$parent.$config.hidden = !showGrid;\r\n\r\n\t\t\t\t\tif(!mainGrid.$config.hidden){\r\n\t\t\t\t\t\t/* restrict grid width due to min_width, max_width, min_grid_column_width */\r\n\t\t\t\t\t\tvar grid_limits = mainGrid._getGridWidthLimits();\r\n\t\t\t\t\t\tif (grid_limits[0] && gantt.config.grid_width < grid_limits[0])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[0];\r\n\t\t\t\t\t\tif (grid_limits[1] && gantt.config.grid_width > grid_limits[1])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[1];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmainGrid.$config.width = gantt.config.grid_width - 1;\r\n\t\t\t\t\t\tif(!first){\r\n\t\t\t\t\t\t\tmainGrid.$parent._setContentSize(mainGrid.$config.width, mainGrid.$config.height);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\r\n\t\t\t\t\t\t\tif(mainGrid.$parent.$config.group){\r\n\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, mainGrid.$parent.$config.width);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfirst = false;\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt._getVerticalScrollbar = this.getVerticalScrollbar;\r\n\t\t\t\tgantt._getHorizontalScrollbar = this.getHorizontalScrollbar;\r\n\r\n\t\t\t\tvar vertical = this.getVerticalScrollbar();\r\n\t\t\t\tvar horizontal = this.getHorizontalScrollbar();\r\n\t\t\t\tif(vertical){\r\n\t\t\t\t\tvertical.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [scrollState.x, oldPos, scrollState.x, newPos]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif(horizontal){\r\n\t\t\t\t\thorizontal.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [oldPos, scrollState.y, newPos, scrollState.y]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayout.attachEvent(\"onResize\", function(){\r\n\t\t\t\t\tif(vertical && !gantt.$scroll_ver){\r\n\t\t\t\t\t\tgantt.$scroll_ver = vertical.$scroll_ver;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(horizontal && !gantt.$scroll_hor){\r\n\t\t\t\t\t\tgantt.$scroll_hor = horizontal.$scroll_hor;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\tonInitialized: function (layout) {\r\n\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\tif(!(grid && grid.$parent && grid.$parent.$parent && grid.$parent.$parent._xLayout)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar parent = grid.$parent.$parent;\r\n\r\n\t\t\t\t//TODO: can't bind resizer to a grid in complex layouts\r\n\t\t\t\tvar next = parent.getNextSibling(grid.$parent.$id);\r\n\t\t\t\tvar gridFirst = true;\r\n\t\t\t\tif(!(next && next.$name == \"resizer\")){\r\n\t\t\t\t\tnext = parent.getPrevSibling(grid.$parent.$id);\r\n\t\t\t\t\tgridFirst = false;\r\n\t\t\t\t}\r\n\t\t\t\t// expose grid resize events\r\n\t\t\t\tif(next && next.$name == \"resizer\"){\r\n\t\t\t\t\tvar initialWidth;\r\n\t\t\t\t\tnext.attachEvent(\"onResizeStart\", function(prevCellWidth, nextCellWidth){\r\n\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tvar limits = grid._getGridWidthLimits();\r\n\r\n\t\t\t\t\t\t\t// min grid width is defined by min widths of its columns, unless grid has horizontal scroll\r\n\t\t\t\t\t\t\tif(!grid.$config.scrollable)\r\n\t\t\t\t\t\t\t\tviewCell.$config.minWidth = limits[0];\r\n\r\n\t\t\t\t\t\t\tviewCell.$config.maxWidth = limits[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinitialWidth = gridFirst ? prevCellWidth : nextCellWidth;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResizeStart\", [initialWidth]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResize\", function(newBehindSize, newFrontSize){\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBehindSize : newFrontSize;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResize\", [initialWidth, newSize]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResizeEnd\", function(oldBackSize, oldFrontSize, newBackSize, newFrontSize){\r\n\r\n\t\t\t\t\t\tvar oldSize = gridFirst ? oldBackSize : oldFrontSize;\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBackSize : newFrontSize;\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tviewCell.$config.minWidth = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar res = gantt.callEvent(\"onGridResizeEnd\", [oldSize, newSize]);\r\n\t\t\t\t\t\tif(res){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = newSize;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\r\n};\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar facadeFactory = __webpack_require__(63);\r\nvar calculateScaleRange = __webpack_require__(19);\r\nfunction initDataStores(gantt){\r\n\r\n\tvar facade = facadeFactory.create();\r\n\tutils.mixin(gantt, facade);\r\n\tvar tasksStore = gantt.createDatastore({\r\n\t\tname: \"task\",\r\n\t\ttype: \"treeDatastore\",\r\n\t\trootId: function(){return gantt.config.root_id;},\r\n\t\tinitItem: utils.bind(_init_task, gantt)\r\n\t});\r\n\r\n\tvar linksStore = gantt.createDatastore({\r\n\t\tname: \"link\",\r\n\t\tinitItem: utils.bind(_init_link, gantt)\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onBeforeRefreshAll\", function(){\r\n\r\n\t\tvar order = tasksStore.getVisibleItems();\r\n\r\n\t\tfor(var i=0; i < order.length; i++){\r\n\t\t\tvar item = order[i];\r\n\t\t\titem.$index = i;\r\n\t\t\tgantt.resetProjectDates(item);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onFilterItem\", function(id, task){\r\n\t\tvar min = null, max = null;\r\n\t\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) return true;\r\n\t\t\tmin = gantt.config.start_date.valueOf();\r\n\t\t\tmax = gantt.config.end_date.valueOf();\r\n\r\n\t\t\tif (+task.start_date > max || +task.end_date < +min)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tgantt._update_flags(oldId, newId);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterUpdate\", function(id){\r\n\t\tgantt._update_parents(id);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterItemMove\", function(sid, parent, tindex){\r\n\t\tvar source = gantt.getTask(sid);\r\n\r\n\t\tif(this.getNextSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = this.getNextSibling(sid);\r\n\t\t} else if(this.getPrevSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = \"next:\" + this.getPrevSibling(sid);\r\n\t\t}else{\r\n\t\t\tsource.$drop_target = \"next:null\";\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(action == \"delete\"){\r\n\t\t\tgantt._update_flags(id, null);\r\n\t\t}\r\n\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.fit_tasks && action !== \"paint\"){\r\n\t\t\tvar oldState = gantt.getState();\r\n\t\t\tcalculateScaleRange(gantt);\r\n\t\t\tvar newState = gantt.getState();\r\n\r\n\t\t\t//this._init_tasks_range();\r\n\t\t\tif (+oldState.min_date != +newState.min_date || +oldState.max_date != +newState.max_date) {\r\n\t\t\t\tgantt.render();\r\n\r\n\t\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(action == \"add\" || action == \"move\" || action == \"delete\"){\r\n\t\t\tgantt.$layout.resize();\r\n\t\t}else if(!id){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onAfterAdd\", function(id, link){\r\n\t\tsync_link(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterUpdate\", function(id, link){\r\n\t\tsync_links();\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tsync_link_delete(gantt.mixin({id:oldId}, gantt.$data.linksStore.getItem(newId)));\r\n\t\tsync_link(gantt.$data.linksStore.getItem(newId));\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onFilterItem\", function(id, link){\r\n\t\tif (!gantt.config.show_links) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (!(gantt.isTaskVisible(link.source) && gantt.isTaskVisible(link.target)) ||\r\n\t\t\tgantt._isAllowedUnscheduledTask(gantt.getTask(link.source)) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.target)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn gantt.callEvent(\"onBeforeLinkDisplay\", [id, link]);\r\n\t});\r\n\r\n\r\n\t(function(){\r\n\t\t// delete all connected links after task is deleted\r\n\t\tvar treeHelper = __webpack_require__(20);\r\n\t\tvar deletedLinks = {};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n \t\t\tdeletedLinks[id] = treeHelper.getSubtreeLinks(gantt, id);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tif(deletedLinks[id]){\r\n\t\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\t\tfor(var i in deletedLinks[id]){\r\n\t\t\t\t\t\tgantt.$data.linksStore.removeItem(i);\r\n\t\t\t\t\t\tsync_link_delete(deletedLinks[id][i]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeletedLinks[id] = null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t})();\r\n\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, link) {\r\n\t\tgantt.refreshTask(link.source);\r\n\t\tgantt.refreshTask(link.target);\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onParse\", sync_links);\r\n\r\n\tmapEvents({\r\n\t\tsource: linksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onLinkLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeLinkAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterLinkAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeLinkUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterLinkUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeLinkDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterLinkDelete\",\r\n\t\t\t\"onIdChange\":\"onLinkIdChange\"\r\n\t\t}\r\n\t});\r\n\r\n\tmapEvents({\r\n\t\tsource: tasksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onTaskLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeTaskAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterTaskAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeTaskUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterTaskUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeTaskDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterTaskDelete\",\r\n\t\t\t\"onIdChange\":\"onTaskIdChange\",\r\n\t\t\t\"onBeforeItemMove\":\"onBeforeTaskMove\",\r\n\t\t\t\"onAfterItemMove\":\"onAfterTaskMove\",\r\n\t\t\t\"onFilterItem\":\"onBeforeTaskDisplay\",\r\n\t\t\t\"onItemOpen\":\"onTaskOpened\",\r\n\t\t\t\"onItemClose\":\"onTaskClosed\",\r\n\t\t\t\"onBeforeSelect\":\"onBeforeTaskSelected\",\r\n\t\t\t\"onAfterSelect\":\"onTaskSelected\",\r\n\t\t\t\"onAfterUnselect\":\"onTaskUnselected\"\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.$data = {\r\n\t\ttasksStore: tasksStore,\r\n\t\tlinksStore: linksStore\r\n\t};\r\n\r\n\tfunction sync_link(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tsourceTask.$source = sourceTask.$source || [];\r\n\t\t\tsourceTask.$source.push(link.id);\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\ttargetTask.$target = targetTask.$target || [];\r\n\t\t\ttargetTask.$target.push(link.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_link_delete(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tfor(var i = 0; i < sourceTask.$source.length; i++){\r\n\t\t\t\tif(sourceTask.$source[i] == link.id){\r\n\t\t\t\t\tsourceTask.$source.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\tfor(var i = 0; i < targetTask.$target.length; i++){\r\n\t\t\t\tif(targetTask.$target[i] == link.id){\r\n\t\t\t\t\ttargetTask.$target.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_links() {\r\n\t\tvar task = null;\r\n\t\tvar tasks = gantt.$data.tasksStore.getItems();\r\n\r\n\t\tfor(var i = 0, len = tasks.length; i < len; i++){\r\n\t\t\ttask = tasks[i];\r\n\t\t\ttask.$source = [];\r\n\t\t\ttask.$target = [];\r\n\t\t}\r\n\r\n\t\tvar links = gantt.$data.linksStore.getItems();\r\n\t\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\r\n\t\t\tvar link = links[i];\r\n\t\t\tsync_link(link);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapEvents(conf){\r\n\t\tvar mapFrom = conf.source;\r\n\t\tvar mapTo = conf.target;\r\n\t\tfor(var i in conf.events){\r\n\t\t\t(function(sourceEvent, targetEvent){\r\n\t\t\t\tmapFrom.attachEvent(sourceEvent, function(){\r\n\t\t\t\t\treturn mapTo.callEvent(targetEvent, Array.prototype.slice.call(arguments));\r\n\t\t\t\t}, targetEvent);\r\n\t\t\t})(i, conf.events[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _init_task(task) {\r\n\t\tif (!this.defined(task.id))\r\n\t\t\ttask.id = this.uid();\r\n\r\n\t\tif (task.start_date)\r\n\t\t\ttask.start_date = gantt.date.parseDate(task.start_date, \"xml_date\");\r\n\t\tif (task.end_date)\r\n\t\t\ttask.end_date = gantt.date.parseDate(task.end_date, \"xml_date\");\r\n\r\n\r\n\t\tvar duration = null;\r\n\t\tif (task.duration || task.duration === 0) {\r\n\t\t\ttask.duration = duration = task.duration * 1;\r\n\t\t}\r\n\r\n\t\tif (duration) {\r\n\t\t\tif (task.start_date && !task.end_date) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!task.start_date && task.end_date) {\r\n\t\t\t\ttask.start_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\tduration: -task.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\tthis._set_default_task_timing(task);\r\n\t\t}\r\n\t\tthis._init_task_timing(task);\r\n\t\tif (task.start_date && task.end_date)\r\n\t\t\tthis.correctTaskWorkTime(task);\r\n\r\n\t\ttask.$source = [];\r\n\t\ttask.$target = [];\r\n\t\tif (task.parent === undefined) {\r\n\t\t\tthis.setParent(task, this.config.root_id);\r\n\t\t}\r\n\r\n\t\treturn task;\r\n\t}\r\n\r\n\tfunction _init_link(link) {\r\n\t\tif (!this.defined(link.id))\r\n\t\t\tlink.id = this.uid();\r\n\t\treturn link;\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = initDataStores;\r\n\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar createTasksFacade = __webpack_require__(64),\r\n\tcreateLinksFacade = __webpack_require__(65),\r\n\tDataStore = __webpack_require__(16),\r\n\tTreeDataStore = __webpack_require__(18),\r\n\tcreateDatastoreSelect = __webpack_require__(66);\r\nvar datastoreRender = __webpack_require__(67);\r\n\r\nfunction getDatastores(){\r\n\tvar storeNames = this.$services.getService(\"datastores\");\r\n\tvar res = [];\r\n\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\tres.push(this.getDatastore(storeNames[i]));\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nvar createDatastoreFacade = function(){\r\n\treturn {\r\n\tcreateDatastore: function(config){\r\n\r\n\t\tvar $StoreType = (config.type || \"\").toLowerCase() == \"treedatastore\" ? TreeDataStore : DataStore;\r\n\r\n\t\tif(config){\r\n\t\t\tvar self = this;\r\n\t\t\tconfig.openInitially = function(){ return self.config.open_tree_initially; };\r\n\t\t}\r\n\r\n\t\tvar store = new $StoreType(config);\r\n\t\tthis.mixin(store, createDatastoreSelect());\r\n\r\n\t\tif(config.name){\r\n\r\n\t\t\tthis.$services.setService(\"datastore:\" + config.name, function(){return store;});\r\n\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\tif(!storeList){\r\n\t\t\t\tstoreList = [];\r\n\t\t\t\tthis.$services.setService(\"datastores\", function(){return storeList;});\r\n\t\t\t}\r\n\t\t\tstoreList.push(config.name);\r\n\r\n\t\t\tdatastoreRender.bindDataStore(config.name, this);\r\n\t\t}\r\n\r\n\t\treturn store;\r\n\t},\r\n\tgetDatastore: function(name){\r\n\t\treturn this.$services.getService(\"datastore:\" + name);\r\n\t},\r\n\r\n\trefreshData: function () {\r\n\t\tvar scrollState = this.getScrollState();\r\n\t\tthis.callEvent(\"onBeforeDataRender\", []);\r\n\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].refresh();\r\n\t\t}\r\n\r\n\t\tif(scrollState.x || scrollState.y){\r\n\t\t\tthis.scrollTo(scrollState.x, scrollState.y);\r\n\t\t}\r\n\t\tthis.callEvent(\"onDataRender\", []);\r\n\t},\r\n\r\n\tisChildOf: function(childId, parentId){\r\n\t\treturn this.$data.tasksStore.isChildOf(childId, parentId);\r\n\t},\r\n\r\n\trefreshTask: function (taskId, refresh_links) {\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tif (task && this.isTaskVisible(taskId)) {\r\n\r\n\t\t\tthis.$data.tasksStore.refresh(taskId, !!this.getState().drag_id);// do quick refresh during drag and drop\r\n\r\n\t\t\tif (refresh_links !== undefined && !refresh_links)\r\n\t\t\t\treturn;\r\n\t\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$source[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$target[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\trefreshLink: function (linkId) {\r\n\t\tthis.$data.linksStore.refresh(linkId);\r\n\t},\r\n\r\n\tsilent: function(code){\r\n\t\tvar gantt = this;\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\tcode();\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\r\n\tclearAll: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].clearAll();\r\n\t\t}\r\n\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t\tthis.callEvent(\"onClear\", []);\r\n\t\tthis.render();\r\n\t},\r\n\t_clear_data: function () {\r\n\t\tthis.$data.tasksStore.clearAll();\r\n\t\tthis.$data.linksStore.clearAll();\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t},\r\n\r\n\tselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tif(!this.config.select_task)\r\n\t\t\treturn false;\r\n\t\tif (id){\r\n\r\n\t\t\tstore.select(id);\r\n\t\t}\r\n\t\treturn store.getSelectedId();\r\n\t},\r\n\tunselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tstore.unselect(id);\r\n\t},\r\n\tgetSelectedId: function() {\r\n\t\treturn this.$data.tasksStore.getSelectedId();\r\n\t}\r\n};\r\n};\r\n\r\nfunction createFacade(){\r\n\tvar res = utils.mixin({}, createDatastoreFacade());\r\n\tutils.mixin(res, createTasksFacade());\r\n\tutils.mixin(res, createLinksFacade());\r\n\treturn res;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = {create: createFacade};\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nvar createTasksDatastoreFacade = function(){\r\n\treturn {\r\n\tgetTask: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument for gantt.getTask\");\r\n\t\tvar task = this.$data.tasksStore.getItem(id);\r\n\t\tthis.assert(task, \"Task not found id=\" + id);\r\n\t\treturn task;\r\n\t},\r\n\tgetTaskByTime: function (from, to) {\r\n\t\tvar p = this.$data.tasksStore.getItems();\r\n\r\n\t\tvar res = [];\r\n\r\n\t\tif (!(from || to)) {\r\n\t\t\tres = p;\r\n\t\t} else {\r\n\t\t\tfrom = +from || -Infinity;\r\n\t\t\tto = +to || Infinity;\r\n\t\t\tfor (var t = 0; t < p.length; t++){\r\n\t\t\t\tvar task = p[t];\r\n\t\t\t\tif (+task.start_date < to && +task.end_date > from)\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tisTaskExists: function (id) {\r\n\t\treturn this.$data.tasksStore.exists(id);\r\n\t},\r\n\tupdateTask: function (id, item) {\r\n\t\tif (!utils.defined(item)) item = this.getTask(id);\r\n\t\tthis.$data.tasksStore.updateItem(id, item);\r\n\t\tthis.refreshTask(id);\r\n\t},\r\n\taddTask: function (item, parent, index) {\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif (!utils.defined(parent)) parent = this.getParent(item) || 0;\r\n\t\tif (!this.isTaskExists(parent)) parent = 0;\r\n\t\tthis.setParent(item, parent);\r\n\r\n\t\treturn this.$data.tasksStore.addItem(item, index, parent);\r\n\t},\r\n\tdeleteTask: function (id) {\r\n\t\treturn this.$data.tasksStore.removeItem(id);\r\n\t},\r\n\tgetTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.count();\r\n\t},\r\n\tgetVisibleTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.countVisible();\r\n\t},\r\n\tgetTaskIndex: function (id) {\r\n\t\treturn this.$data.tasksStore.getBranchIndex(id);\r\n\t},\r\n\tgetGlobalTaskIndex: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument\");\r\n\t\treturn this.$data.tasksStore.getIndexById(id);\r\n\t},\r\n\teachTask: function (code, parent, master) {\r\n\t\treturn this.$data.tasksStore.eachItem(utils.bind(code, master||this), parent);\r\n\t},\r\n\teachParent: function (callback, startTask, master) {\r\n\t\treturn this.$data.tasksStore.eachParent(utils.bind(callback, master || this), startTask);\r\n\t},\r\n\tchangeTaskId: function (oldid, newid) {\r\n\t\tthis.$data.tasksStore.changeId(oldid, newid);\r\n\t\tvar task = this.$data.tasksStore.getItem(newid);\r\n\r\n\t\tvar links = [];\r\n\r\n\t\tif (task.$source) {\r\n\t\t\tlinks = links.concat(task.$source);\r\n\t\t}\r\n\t\tif (task.$target) {\r\n\t\t\tlinks = links.concat(task.$target);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = this.getLink(links[i]);\r\n\t\t\tif (link.source == oldid) {\r\n\t\t\t\tlink.source = newid;\r\n\t\t\t}\r\n\t\t\tif (link.target == oldid) {\r\n\t\t\t\tlink.target = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcalculateTaskLevel: function (item) {\r\n\t\treturn this.$data.tasksStore.calculateItemLevel(item);\r\n\t},\r\n\tgetNext: function (id) {\r\n\t\treturn this.$data.tasksStore.getNext(id);\r\n\t},\r\n\tgetPrev: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrev(id);\r\n\t},\r\n\tgetParent: function (id) {\r\n\t\treturn this.$data.tasksStore.getParent(id);\r\n\t},\r\n\tsetParent: function (task, new_pid, silent) {\r\n\t\treturn this.$data.tasksStore.setParent(task, new_pid, silent);\r\n\t},\r\n\tgetSiblings: function (id) {\r\n\t\treturn this.$data.tasksStore.getSiblings(id).slice();\r\n\t},\r\n\tgetNextSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getNextSibling(id);\r\n\t},\r\n\tgetPrevSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrevSibling(id);\r\n\t},\r\n\tgetTaskByIndex: function(index){\r\n\t\tvar id = this.$data.tasksStore.getIdByIndex(index);\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\treturn this.getTask(id);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetChildren: function (id) {\r\n\t\treturn this.$data.tasksStore.getChildren(id).slice();\r\n\t},\r\n\thasChild: function (id) {\r\n\t\treturn this.$data.tasksStore.hasChild(id);\r\n\t},\r\n\topen: function (id) {\r\n\t\tthis.$data.tasksStore.open(id);\r\n\t},\r\n\tclose: function (id) {\r\n\t\tthis.$data.tasksStore.close(id);\r\n\t},\r\n\tmoveTask: function (sid, tindex, parent) {\r\n\t\tthis.$data.tasksStore.move.apply(this.$data.tasksStore, arguments);\r\n\t},\r\n\tsort: function(field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\t\tthis.$data.tasksStore.sort(field, desc, parent);\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createTasksDatastoreFacade;\r\n\r\n\r\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\n\r\nvar createLinksStoreFacade = function(){\r\n\treturn {\r\n\tgetLinkCount: function () {\r\n\t\treturn this.$data.linksStore.count();\r\n\t},\r\n\r\n\tgetLink : function (id) {\r\n\t\treturn this.$data.linksStore.getItem(id);\r\n\t},\r\n\r\n\tgetLinks : function () {\r\n\t\treturn this.$data.linksStore.getItems();\r\n\t},\r\n\r\n\tisLinkExists : function (id) {\r\n\t\treturn this.$data.linksStore.exists(id);\r\n\t},\r\n\r\n\taddLink : function (link) {\r\n\t\treturn this.$data.linksStore.addItem(link);\r\n\t},\r\n\r\n\tupdateLink : function (id, data) {\r\n\t\tif (!utils.defined(data))\r\n\t\t\tdata = this.getLink(id);\r\n\t\tthis.$data.linksStore.updateItem(id, data);\r\n\t},\r\n\r\n\tdeleteLink : function (id) {\r\n\t\treturn this.$data.linksStore.removeItem(id);\r\n\t},\r\n\r\n\tchangeLinkId : function (oldid, newid) {\r\n\t\treturn this.$data.linksStore.changeId(oldid, newid);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createLinksStoreFacade;\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports) {\n\n\r\nfunction createDataStoreSelectMixin(){\r\n\tvar selectedId = null;\r\n\treturn {\r\n\t\tselect: function(id){\r\n\t\t\tif (id){\r\n\r\n\t\t\t\tif(selectedId == id)\r\n\t\t\t\t\treturn selectedId;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tif (!this.callEvent(\"onBeforeSelect\", [id])) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.unselect();\r\n\r\n\t\t\t\tselectedId = id;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tthis.refresh(id);\r\n\t\t\t\t\tthis.callEvent(\"onAfterSelect\", [id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tgetSelectedId: function(){\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tunselect: function(id){\r\n\t\t\tvar id = id || selectedId;\r\n\t\t\tif(!id)\r\n\t\t\t\treturn;\r\n\t\t\tselectedId = null;\r\n\t\t\tif(!this._skip_refresh){\r\n\t\t\t\tthis.refresh(id);\r\n\t\t\t\tthis.callEvent(\"onAfterUnselect\", [id]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createDataStoreSelectMixin;\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports) {\n\nvar storeRenderCreator = function(name, gantt){\r\n\tvar store = gantt.getDatastore(name);\r\n\r\n\tvar itemRepainter = {\r\n\t\trenderItem: function(id, renderer){\r\n\r\n\t\t\tvar renders = renderer.getLayers();\r\n\r\n\t\t\tvar item = store.getItem(id);\r\n\t\t\tif(item && store.isVisible(id)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++)\r\n\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderItems: function(renderer){\r\n\t\t\tvar renderers = renderer.getLayers();\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].clear();\r\n\t\t\t}\r\n\r\n\t\t\tvar data = store.getVisibleItems();\r\n\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].render_items(data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction skipRepaint(gantt){\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\r\n\t\tif(renderer){\r\n\t\t\tif(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshAll\", []);\r\n\t\t\t\titemRepainter.renderItems(renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshAll\", []);\r\n\t\t\t}else{\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshItem\", [item.id]);\r\n\t\t\t\titemRepainter.renderItem(item.id, renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshItem\", [item.id]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tstore.attachEvent(\"onItemOpen\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tstore.attachEvent(\"onItemClose\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tfunction refreshId(renders, oldId, newId, item) {\r\n\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\trenders[i].change_id(oldId, newId);\r\n\t\t}\r\n\t}\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\trefreshId(renderer.getLayers(), oldId, newId, store.getItem(newId));\r\n\t});\r\n\r\n};\r\n\r\nmodule.exports = {\r\n\tbindDataStore: storeRenderCreator\r\n};\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar liveUpdateHooks = __webpack_require__(69);\r\nvar dateHelper = __webpack_require__(4);\r\nvar helpers = __webpack_require__(7);\r\n\r\nfunction addDataProcessorHooks(gantt) {\r\n\r\n\tgantt.dataProcessor = __webpack_require__(70);\r\n\r\n\tfunction detachDataProcessor(gantt, dp){\r\n\t\tdelete dp.$gantt;\r\n\t\tdelete dp.setGanttMode;\r\n\t\tdelete dp._getRowData;\r\n\t\tdp.afterUpdate = oldAfterUpdate;\r\n\r\n\t\tdelete gantt._dp;\r\n\t\tdelete gantt._change_id;\r\n\t\tdelete gantt._row_style;\r\n\t\tdelete gantt._delete_task;\r\n\t\tdelete gantt._sendTaskOrder;\r\n\r\n\t\thelpers.forEach(dataProcessorHandlers, function(e){\r\n\t\t\tgantt.detachEvent(e);\r\n\t\t});\r\n\t\tdataProcessorHandlers = [];\r\n\t}\r\n\r\n\tvar oldAfterUpdate;\r\n\tfunction extendDataProcessor(gantt, dp){\r\n\t\tdp.setGanttMode = function(mode){\r\n\t\t\tvar modes = dp.modes || {};\r\n\t\t\tif(dp._ganttMode){\r\n\t\t\t\tmodes[dp._ganttMode] = {\r\n\t\t\t\t\t_in_progress : dp._in_progress,\r\n\t\t\t\t\t_invalid : dp._invalid,\r\n\t\t\t\t\tupdatedRows : dp.updatedRows\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar newState = modes[mode];\r\n\t\t\tif(!newState){\r\n\t\t\t\tnewState = modes[mode] = {\r\n\t\t\t\t\t_in_progress : {},\r\n\t\t\t\t\t_invalid : {},\r\n\t\t\t\t\tupdatedRows : []\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdp._in_progress = newState._in_progress;\r\n\t\t\tdp._invalid = newState._invalid;\r\n\t\t\tdp.updatedRows = newState.updatedRows;\r\n\t\t\tdp.modes = modes;\r\n\t\t\tdp._ganttMode = mode;\r\n\t\t};\r\n\r\n\t\toldAfterUpdate = dp.afterUpdate;\r\n\t\tdp.afterUpdate = function(){\r\n\t\t\tvar xml;\r\n\t\t\tif(arguments.length == 3){\r\n\t\t\t\txml = arguments[1];\r\n\t\t\t}else{\r\n\t\t\t\t// old dataprocessor\r\n\t\t\t\txml = arguments[4];\r\n\t\t\t}\r\n\t\t\tvar mode = dp._ganttMode;\r\n\t\t\tvar reqUrl = xml.filePath;\r\n\r\n\t\t\tif(this._tMode != \"REST\"){\r\n\t\t\t\tif (reqUrl.indexOf(\"gantt_mode=links\") != -1) {\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(reqUrl.indexOf(\"/link\") > reqUrl.indexOf(\"/task\")){\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdp.setGanttMode(mode);\r\n\r\n\t\t\tvar res = oldAfterUpdate.apply(dp, arguments);\r\n\t\t\tdp.setGanttMode(mode);\r\n\t\t\treturn res;\r\n\t\t};\r\n\r\n\t\tdp._getRowData=gantt.bind(function(id, pref) {\r\n\t\t\tvar task;\r\n\t\t\tif (dp._ganttMode == \"tasks\")\r\n\t\t\t\ttask = this.isTaskExists(id) ? this.getTask(id) : { id: id };\r\n\t\t\telse\r\n\t\t\t\ttask = this.isLinkExists(id) ? this.getLink(id) : { id: id };\r\n\r\n\t\t\ttask = gantt.copy(task);\r\n\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in task) {\r\n\t\t\t\tif (key.substr(0, 1) == \"$\") continue;\r\n\t\t\t\tvar value = task[key];\r\n\t\t\t\tif (dateHelper.isDate(value))\r\n\t\t\t\t\tdata[key] = this.templates.xml_format(value);\r\n\t\t\t\telse if(value === null)\r\n\t\t\t\t\tdata[key] = \"\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdata[key] = value;\r\n\t\t\t}\r\n\r\n\t\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\t\tif(taskTiming.$no_start){\r\n\t\t\t\ttask.start_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tif(taskTiming.$no_end){\r\n\t\t\t\ttask.end_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tdata[dp.action_param] = this.getUserData(id, dp.action_param);\r\n\t\t\treturn data;\r\n\t\t}, gantt);\r\n\t}\r\n\r\n\tfunction extendGantt(gantt, dp){\r\n\t\tgantt._change_id = gantt.bind(function(oldid, newid) {\r\n\t\t\tif (dp._ganttMode != \"tasks\")\r\n\t\t\t\tthis.changeLinkId(oldid, newid);\r\n\t\t\telse\r\n\t\t\t\tthis.changeTaskId(oldid, newid);\r\n\t\t}, this);\r\n\r\n\t\tgantt._row_style = function(row_id, classname){\r\n\t\t\tif (dp._ganttMode != \"tasks\") return;\r\n\t\t\tif(!gantt.isTaskExists(row_id))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar task = gantt.getTask(row_id);\r\n\t\t\ttask.$dataprocessor_class = classname;\r\n\t\t\tgantt.refreshTask(row_id);\r\n\t\t};\r\n\r\n\t\t// fake method for dataprocessor\r\n\t\tgantt._delete_task = function(row_id, node){};\r\n\r\n\t\tgantt._sendTaskOrder = function(id, item){\r\n\t\t\tif(item.$drop_target){\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tthis.getTask(id).target = item.$drop_target;\r\n\t\t\t\tdp.setUpdated(id, true,\"order\");\r\n\t\t\t\tdelete this.getTask(id).$drop_target;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis._dp = dp;\r\n\t}\r\n\r\n\tfunction attachDataProcessorEvents(gantt, dp){\r\n\t\tfunction clientSideDelete(id){\r\n\t\t\tvar updated = dp.updatedRows.slice();\r\n\t\t\tvar clientOnly = false;\r\n\r\n\t\t\tfor(var i = 0; i < updated.length && !dp._in_progress[id]; i++){\r\n\t\t\t\tif(updated[i] == id ){\r\n\t\t\t\t\tif(gantt.getUserData(id, \"!nativeeditor_status\") == \"inserted\"){\r\n\t\t\t\t\t\tclientOnly = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdp.setUpdated(id,false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn clientOnly;\r\n\t\t}\r\n\r\n\t\tfunction getTaskLinks(task){\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tif (task.$source) {\r\n\t\t\t\tlinks = links.concat(task.$source);\r\n\t\t\t}\r\n\t\t\tif (task.$target) {\r\n\t\t\t\tlinks = links.concat(task.$target);\r\n\t\t\t}\r\n\r\n\t\t\treturn links;\r\n\t\t}\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true,\"inserted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true);\r\n\r\n\t\t\tgantt._sendTaskOrder(id, item);\r\n\t\t}));\r\n\r\n\t\tvar treeHelper = __webpack_require__(20);\r\n\t\tvar cascadeDelete = {};\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n\t\t\tif(!gantt.config.cascade_delete){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tcascadeDelete[id] = {\r\n\t\t\t\ttasks: treeHelper.getSubtreeTasks(gantt, id),\r\n\t\t\t\tlinks: treeHelper.getSubtreeLinks(gantt, id)\r\n\t\t\t};\r\n\t\t\treturn true;\r\n\t\t}));\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t// not send delete request if item is not inserted into the db - just remove it from the client\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tif(gantt.config.cascade_delete && cascadeDelete[id]){\r\n\t\t\t\tvar dpMode = dp.updateMode;\r\n\t\t\t\tdp.setUpdateMode(\"off\");\r\n\r\n\t\t\t\tvar cascade = cascadeDelete[id];\r\n\t\t\t\tfor(var i in cascade.tasks){\r\n\t\t\t\t\tif(!clientSideDelete(i)){\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tfor(var i in cascade.links){\r\n\t\t\t\t\tif(!clientSideDelete(i)){\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcascadeDelete[id] = null;\r\n\r\n\t\t\t\tif(dpMode != \"off\"){\r\n\t\t\t\t\tdp.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t\tdp.setUpdateMode(dpMode);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdp.setUpdated(id,true,\"deleted\");\r\n\r\n\t\t\tif(dp.updateMode != 'off' && !dp._tSend){\r\n\t\t\t\tdp.sendAllData();\r\n\t\t\t}\r\n\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true);\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onRowDragEnd\", function(id, target) {\r\n\t\t\tgantt._sendTaskOrder(id, gantt.getTask(id));\r\n\t\t}));\r\n\r\n\t\tvar tasks = null,\r\n\t\t\tlinks = null;\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onTaskIdChange\",function(oldId, newId){\r\n\t\t\tif(!dp._waitMode) return;\r\n\r\n\t\t\tvar children = gantt.getChildren(newId);\r\n\t\t\tif(children.length) {\r\n\t\t\t\ttasks = tasks || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\tvar ch = this.getTask(children[i]);\r\n\t\t\t\t\ttasks[ch.id] = ch;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar item = this.getTask(newId),\r\n\t\t\t\titemLinks = getTaskLinks(item);\r\n\r\n\t\t\tif(itemLinks.length) {\r\n\t\t\t\tlinks = links || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < itemLinks.length; i++) {\r\n\t\t\t\t\tvar link = this.getLink(itemLinks[i]);\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tdp.attachEvent(\"onAfterUpdateFinish\", function(){\r\n\t\t\tif(tasks || links){\r\n\t\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\t\tfor(var id in tasks){\r\n\t\t\t\t\t\tgantt.updateTask(tasks[id].id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor(var id in links){\r\n\t\t\t\t\t\tgantt.updateLink(links[id].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = null;\r\n\t\t\t\t\tlinks = null;\r\n\t\t\t\t});\r\n\t\t\t\tif(tasks) {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"tasks\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"links\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onBeforeDataSending\", function() {\r\n\t\t\tvar url = this._serverProcessor;\r\n\t\t\tif(this._tMode == \"REST\"){\r\n\t\t\t\tvar mode = this._ganttMode.substr(0, this._ganttMode.length - 1);// links, tasks -> /link/id, /task/id\r\n\r\n\t\t\t\turl = url.substring(0, url.indexOf(\"?\") > -1 ? url.indexOf(\"?\") : url.length);\r\n\t\t\t\t//editing=true&\r\n\t\t\t\tthis.serverProcessor = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + mode;\r\n\t\t\t}else{\r\n\t\t\t\tthis.serverProcessor = url + gantt.ajax.urlSeparator(url) + \"gantt_mode=\" + this._ganttMode;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\t}\r\n\r\n\tvar dataProcessorHandlers = [];\r\n\r\n\tgantt._dp_init = function(dp) {\r\n\t\tgantt.assert(!this._dp, \"The dataProcessor is already attached to this gantt instance\");\r\n\r\n\t\tdp.setTransactionMode(\"POST\", true);\r\n\t\tdp.serverProcessor += (dp.serverProcessor.indexOf(\"?\") != -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\tdp._serverProcessor = dp.serverProcessor;\r\n\t\tdp.$gantt = this;\r\n\t\tdp.styles = {\r\n\t\t\tupdated:\"gantt_updated\",\r\n\t\t\torder:\"gantt_updated\",\r\n\t\t\tinserted:\"gantt_inserted\",\r\n\t\t\tdeleted:\"gantt_deleted\",\r\n\t\t\tinvalid:\"gantt_invalid\",\r\n\t\t\terror:\"gantt_error\",\r\n\t\t\tclear:\"\"\r\n\t\t};\r\n\r\n\t\tdp._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"];\r\n\r\n\t\textendDataProcessor.call(this, gantt, dp);\r\n\t\textendGantt.call(this, gantt, dp);\r\n\t\tattachDataProcessorEvents.call(this, gantt, dp);\r\n\r\n\t\tdp.attachEvent(\"onDestroy\", function(){\r\n\t\t\tdetachDataProcessor(gantt, dp);\r\n\t\t});\r\n\t\tliveUpdateHooks(gantt, dp);\r\n\t};\r\n\r\n\tgantt.getUserData = function(id, name) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (this.userdata[id] && this.userdata[id][name]) return this.userdata[id][name];\r\n\t\treturn \"\";\r\n\t};\r\n\tgantt.setUserData = function(id, name, value) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (!this.userdata[id]) this.userdata[id] = {};\r\n\t\tthis.userdata[id][name] = value;\r\n\t};\r\n}\r\n\r\nmodule.exports = addDataProcessorHooks;\r\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__ (0);\r\n\r\nfunction updateCallback(upd, id) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild);\r\n\tif(!this.isTaskExists(id))\r\n\t\treturn;\r\n\tvar objData = this.getTask(id);\r\n\tfor(var key in data) {\r\n\t\tvar property = data[key];\r\n\t\tswitch(key) {\r\n\t\t\tcase \"id\":\r\n\t\t\t\tcontinue;\r\n\t\t\tcase \"start_date\":\r\n\t\t\tcase \"end_date\":\r\n\t\t\t\tproperty = this.templates.xml_date(property);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"duration\":\r\n\t\t\t\tobjData.end_date = this.calculateEndDate({start_date: objData.start_date, duration: property, task:objData});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tobjData[key] = property;\r\n\t}\r\n\tthis.updateTask(id);\r\n\tthis.refreshData();\r\n}\r\n\r\nfunction insertCallback(upd, id, parent, mode) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild),\r\n\t\tmethods = {\r\n\t\t\tadd: this.addTask,\r\n\t\t\tisExist: this.isTaskExists\r\n\t\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods.add = this.addLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\treturn;\r\n\tdata.id = id;\r\n\tmethods.add.call(this, data);\r\n}\r\n\r\nfunction deleteCallback(upd, id, parent, mode) {\r\n\tvar methods = {\r\n\t\t\"delete\": this.deleteTask,\r\n\t\t\"isExist\": this.isTaskExists\r\n\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods[\"delete\"] = this.deleteLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\tmethods[\"delete\"].call(this, id);\r\n}\r\n\r\nfunction patchDataProcessor(gantt, dataprocessor){\r\n\tdataprocessor.attachEvent(\"insertCallback\", utils.bind(insertCallback, gantt));\r\n\tdataprocessor.attachEvent(\"updateCallback\",  utils.bind(deleteCallback, gantt));\r\n\tdataprocessor.attachEvent(\"deleteCallback\",  utils.bind(deleteCallback, gantt));\r\n}\r\n\r\nmodule.exports = patchDataProcessor;\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar eventable = __webpack_require__(2);\r\n\r\n/**\r\n\t* \t@desc: constructor, data processor object \r\n\t*\t@param: serverProcessorURL - url used for update\r\n\t*\t@type: public\r\n\t*/\r\nvar dataProcessor = function(serverProcessorURL){\r\n    this.serverProcessor = serverProcessorURL;\r\n    this.action_param=\"!nativeeditor_status\";\r\n    \r\n\tthis.object = null;\r\n\tthis.updatedRows = []; //ids of updated rows\r\n\t\r\n\tthis.autoUpdate = true;\r\n\tthis.updateMode = \"cell\";\r\n\tthis._tMode=\"GET\"; \r\n\tthis._headers = null;\r\n\tthis._payload = null;\r\n\tthis.post_delim = \"_\";\r\n\t\r\n    this._waitMode=0;\r\n    this._in_progress={};//?\r\n    this._invalid={};\r\n    this.mandatoryFields=[];\r\n    this.messages=[];\r\n    \r\n    this.styles={\r\n    \tupdated:\"font-weight:bold;\",\r\n    \tinserted:\"font-weight:bold;\",\r\n    \tdeleted:\"text-decoration : line-through;\",\r\n    \tinvalid:\"background-color:FFE0E0;\",\r\n    \tinvalid_cell:\"border-bottom:2px solid red;\",\r\n    \terror:\"color:red;\",\r\n    \tclear:\"font-weight:normal;text-decoration:none;\"\r\n    };\r\n    \r\n    this.enableUTFencoding(true);\r\n\teventable(this);\r\n\r\n    return this;\r\n};\r\n\r\ndataProcessor.prototype={\r\n\tsetTransactionMode:function(mode,total){\r\n\t\tif (typeof mode == \"object\"){\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif(utils.defined(mode.headers)){\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif(utils.defined(mode.payload)){\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\r\n     \t    this._tMode=mode;\r\n\t\t\tthis._tSend=total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"REST\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"JSON\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-type\"] = \"application/json\";\r\n\t\t}\r\n    },\r\n    escape:function(data){\r\n    \tif (this._utf)\r\n    \t\treturn encodeURIComponent(data);\r\n    \telse\r\n        \treturn escape(data);\r\n\t},\r\n    /**\r\n\t* \t@desc: allows to set escaping mode\r\n\t*\t@param: true - utf based escaping, simple - use current page encoding\r\n\t*\t@type: public\r\n\t*/\t\r\n\tenableUTFencoding:function(mode){\r\n        this._utf=!!mode;\r\n    },\r\n    /**\r\n\t* \t@desc: allows to define, which column may trigger update\r\n\t*\t@param: val - array or list of true/false values\r\n\t*\t@type: public\r\n\t*/\r\n\tsetDataColumns:function(val){\r\n\t\tthis._columns=(typeof val == \"string\")?val.split(\",\"):val;\r\n    },\r\n    /**\r\n\t* \t@desc: get state of updating\r\n\t*\t@returns:   true - all in sync with server, false - some items not updated yet.\r\n\t*\t@type: public\r\n\t*/\r\n\tgetSyncState:function(){\r\n\t\treturn !this.updatedRows.length;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable named field for data syncing, will use column ids for grid\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenableDataNames:function(mode){\r\n\t\tthis._endnm= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable mode , when only changed fields and row id send to the server side, instead of all fields in default mode\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenablePartialDataSend:function(mode){\r\n\t\tthis._changed= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: set if rows should be send to server automaticaly\r\n\t*\t@param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdateMode:function(mode,dnd){\r\n\t\tthis.autoUpdate = (mode==\"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd=dnd;\r\n\t},\r\n\tignore:function(code,master){\r\n\t\tthis._silent_mode=true;\r\n\t\tcode.call(master||window);\r\n\t\tthis._silent_mode=false;\r\n\t},\r\n\t/**\r\n\t* \t@desc: mark row as updated/normal. check mandatory fields,initiate autoupdate (if turned on)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@param: state - true for \"updated\", false for \"not updated\"\r\n\t*\t@param: mode - update mode name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdated:function(rowId,state,mode){\r\n\t\tif (this._silent_mode) return;\r\n\t\tvar ind=this.findRow(rowId);\r\n\t\t\r\n\t\tmode=mode||\"updated\";\r\n\t\tvar existing = this.obj.getUserData(rowId,this.action_param);\r\n\t\tif (existing && mode == \"updated\") mode=existing;\r\n\t\tif (state){\r\n\t\t\tthis.set_invalid(rowId,false); //clear previous error flag\r\n\t\t\tthis.updatedRows[ind]=rowId;\r\n\t\t\tthis.obj.setUserData(rowId,this.action_param,mode);\r\n\t\t\tif (this._in_progress[rowId]) \r\n\t\t\t\tthis._in_progress[rowId]=\"wait\";\r\n\t\t} else{\r\n\t\t\tif (!this.is_invalid(rowId)){\r\n\t\t\t\tthis.updatedRows.splice(ind,1);\r\n\t\t\t\tthis.obj.setUserData(rowId,this.action_param,\"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//clear changed flag\r\n\t\tif (!state)\r\n\t\t\tthis._clearUpdateFlag(rowId);\r\n     \t\t\t\r\n\t\tthis.markRow(rowId,state,mode);\r\n\t\tif (state && this.autoUpdate) this.sendData(rowId);\r\n\t},\r\n\t_clearUpdateFlag:function(id){},\r\n\tmarkRow:function(id,state,mode){ \r\n\t\tvar str=\"\";\r\n\t\tvar invalid=this.is_invalid(id);\r\n\t\tif (invalid){\r\n        \tstr=this.styles[invalid];\r\n        \tstate=true;\r\n    \t}\r\n\t\tif (this.callEvent(\"onRowMark\",[id,state,mode,invalid])){\r\n\t\t\t//default logic\r\n\t\t\tstr=this.styles[state?mode:\"clear\"]+str;\r\n\t\t\t\r\n        \tthis.obj[this._methods[0]](id,str);\r\n\r\n\t\t\tif (invalid && invalid.details){\r\n\t\t\t\tstr+=this.styles[invalid+\"_cell\"];\r\n\t\t\t\tfor (var i=0; i < invalid.details.length; i++)\r\n\t\t\t\t\tif (invalid.details[i])\r\n        \t\t\t\tthis.obj[this._methods[1]](id,i,str);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetState:function(id){\r\n\t\treturn this.obj.getUserData(id,this.action_param);\r\n\t},\r\n\tis_invalid:function(id){\r\n\t\treturn this._invalid[id];\r\n\t},\r\n\tset_invalid:function(id,mode,details){ \r\n\t\tif (details) mode={value:mode, details:details, toString:function(){ return this.value.toString(); }};\r\n\t\tthis._invalid[id]=mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: check mandatory fields and varify values of cells, initiate update (if specified)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@type: public\r\n\t*/\r\n\tcheckBeforeUpdate:function(rowId){ \r\n\t\treturn true;\r\n\t},\r\n\t/**\r\n\t* \t@desc: send row(s) values to server\r\n\t*\t@param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t*\t@type: public\r\n\t*/\r\n\tsendData:function(rowId){\r\n\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return;\r\n\t\tif (this.obj.editStop) this.obj.editStop();\r\n\t\r\n\t\t\r\n\t\tif(typeof rowId == \"undefined\" || this._tSend) return this.sendAllData();\r\n\t\tif (this._in_progress[rowId]) return false;\r\n\t\t\r\n\t\tthis.messages=[];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\",[rowId,this.messages])) return false;\r\n\t\tthis._beforeSendData(this._getRowData(rowId),rowId);\r\n    },\r\n    _beforeSendData:function(data,rowId){\r\n    \tif (!this.callEvent(\"onBeforeUpdate\",[rowId,this.getState(rowId),data])) return false;\t\r\n\t\tthis._sendData(data,rowId);\r\n    },\r\n    serialize:function(data, id){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tif (typeof id != \"undefined\")\r\n    \t\treturn this.serialize_one(data,\"\");\r\n    \telse{\r\n    \t\tvar stack = [];\r\n    \t\tvar keys = [];\r\n    \t\tfor (var key in data)\r\n    \t\t\tif (data.hasOwnProperty(key)){\r\n    \t\t\t\tstack.push(this.serialize_one(data[key],key+this.post_delim));\r\n    \t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n    \t\tstack.push(\"ids=\"+this.escape(keys.join(\",\")));\r\n    \t\tif (this.$gantt.security_key)\r\n\t\t\t\tstack.push(\"dhx_security=\"+this.$gantt.security_key);\r\n    \t\treturn stack.join(\"&\");\r\n    \t}\r\n    },\r\n    serialize_one:function(data, pref){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tvar stack = [];\r\n    \tfor (var key in data)\r\n    \t\tif (data.hasOwnProperty(key)){\r\n    \t\t\tif ((key == \"id\" || key == this.action_param) && this._tMode == \"REST\") continue;\r\n    \t\t\tstack.push(this.escape((pref||\"\")+key)+\"=\"+this.escape(data[key]));\r\n    \t\t}\r\n\t\treturn stack.join(\"&\");\r\n    },\r\n\t_applyPayload:function(url){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._payload)\r\n\t\t\tfor (var key in this._payload)\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\treturn url;\r\n\t},\r\n    _sendData:function(a1,rowId){\r\n    \tif (!a1) return; //nothing to send\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\",rowId?[rowId,this.getState(rowId),a1]:[null, null, a1])) return false;\t\t\t\t\r\n\t\t\r\n    \tif (rowId)\r\n\t\t\tthis._in_progress[rowId]=(new Date()).valueOf();\r\n\r\n\t\tvar that = this;\r\n\t\tvar back = function(xml){\r\n\t\t\tvar ids = [];\r\n\t\t\tif (rowId)\r\n\t\t\t\tids.push(rowId);\r\n\t\t\telse if (a1)\r\n\t\t\t\tfor (var key in a1)\r\n\t\t\t\t\tids.push(key);\r\n\r\n\t\t\treturn that.afterUpdate(that,xml,ids);\r\n\t\t};\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\r\n\t\tvar a3 = this.serverProcessor+(this._user?(ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+this.obj.getUserData(0,\"version\")].join(\"&\")):\"\");\r\n\t\tvar a4 = this._applyPayload(a3);\r\n\r\n\t\tif (this._tMode==\"GET\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4 + ajax.urlSeparator(a4) + this.serialize(a1, rowId),\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tcallback: back,\r\n\t\t\t\theaders: this._headers\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"POST\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: this._headers,\r\n\t\t\t\tdata: this.serialize(a1, rowId),\r\n\t\t\t\tcallback: back\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"JSON\"){\r\n\t\t\tvar action = a1[this.action_param];\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in a1) data[key] = a1[key];\r\n\t\t\tdelete data[this.action_param];\r\n\t\t\tdelete data.id;\r\n\t\t\tdelete data.gr_id;\r\n\r\n\t\t\tajax.query({\r\n\t\t\t\turl:a4,\r\n\t\t\t\tmethod:\"POST\",\r\n\t\t\t\theaders:this._headers,\r\n\t\t\t\tcallback:back,\r\n\t\t\t\tdata:JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: action,\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n        else if (this._tMode == \"REST\"){\r\n        \tvar state = this.getState(rowId);\r\n        \tvar url = a3.replace(/(\\&|\\?)editing\\=true/,\"\");\r\n        \tvar data = \"\";\r\n        \tvar method = \"post\";\r\n\r\n        \tif (state == \"inserted\"){\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t} else if (state == \"deleted\"){\r\n        \t\tmethod = \"DELETE\";\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t} else {\r\n        \t\tmethod = \"PUT\";\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t}\r\n\r\n\r\n        \turl = this._applyPayload(url);\r\n        \tajax.query({\r\n        \t\turl:url,\r\n        \t\tmethod:method,\r\n        \t\theaders:this._headers,\r\n        \t\tdata:data,\r\n        \t\tcallback:back\r\n        \t});\r\n        }\r\n\r\n\t\tthis._waitMode++;\r\n    },\r\n\tsendAllData:function(){\r\n\t\tif (!this.updatedRows.length) return;\t\t\t\r\n\r\n\t\tthis.messages=[]; var valid=true;\r\n\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\tvalid&=this.checkBeforeUpdate(this.updatedRows[i]);\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\",[\"\",this.messages])) return false;\r\n\t\r\n\t\tif (this._tSend) \r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\telse\r\n\t\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\t\tif (!this._in_progress[this.updatedRows[i]]){\r\n\t\t\t\t\tif (this.is_invalid(this.updatedRows[i])) continue;\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(this.updatedRows[i]),this.updatedRows[i]);\r\n\t\t\t\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return; //block send all for tree\r\n\t\t\t\t}\r\n\t},\r\n\r\n\t_getAllData:function(rowId){\r\n\t\tvar out={};\r\n\t\tvar has_one = false;\r\n\t\tfor(var i=0;i<this.updatedRows.length;i++){\r\n\t\t\tvar id=this.updatedRows[i];\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)) continue;\r\n\t\t\tvar row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\",[id,this.getState(id), row])) continue;\r\n\t\t\tout[id]=row;\r\n\t\t\thas_one = true;\r\n\t\t\tthis._in_progress[id]=(new Date()).valueOf();\r\n\t\t}\r\n\t\treturn has_one?out:null;\r\n\t},\r\n\t\r\n\t\r\n\t/**\r\n\t* \t@desc: specify column which value should be varified before sending to server\r\n\t*\t@param: ind - column index (0 based)\r\n\t*\t@param: verifFunction - function (object) which should verify cell value (if not specified, then value will be compared to empty string). Two arguments will be passed into it: value and column name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetVerificator:function(ind,verifFunction){\r\n\t\tthis.mandatoryFields[ind] = verifFunction||(function(value){return (value!==\"\");});\r\n\t},\r\n\t/**\r\n\t* \t@desc: remove column from list of those which should be verified\r\n\t*\t@param: ind - column Index (0 based)\r\n\t*\t@type: public\r\n\t*/\r\n\tclearVerificator:function(ind){\r\n\t\tthis.mandatoryFields[ind] = false;\r\n\t},\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tfindRow:function(pattern){\r\n\t\tvar i=0;\r\n    \tfor(i=0;i<this.updatedRows.length;i++)\r\n\t\t    if(pattern==this.updatedRows[i]) break;\r\n\t    return i;\r\n    },\r\n\r\n   \r\n\t\r\n\r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n\t/**\r\n\t* \t@desc: define custom actions\r\n\t*\t@param: name - name of action, same as value of action attribute\r\n\t*\t@param: handler - custom function, which receives a XMl response content for action\r\n\t*\t@type: private\r\n\t*/\r\n\tdefineAction:function(name,handler){\r\n        if (!this._uActions) this._uActions=[];\r\n            this._uActions[name]=handler;\r\n\t},\r\n\r\n\r\n\r\n\r\n\t/**\r\n*     @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n*     @param: sid - id of item before update\r\n*     @param: tid - id of item after up0ate\r\n*     @param: action - action name\r\n*     @type: public\r\n*     @topic: 0\r\n*/\r\n\tafterUpdateCallback:function(sid, tid, action, btag) {\r\n\t\tvar marker = sid;\r\n\t\tvar correct=(action!=\"error\" && action!=\"invalid\");\r\n\t\tif (!correct) this.set_invalid(sid,action);\r\n\t\tif ((this._uActions)&&(this._uActions[action])&&(!this._uActions[action](btag)))\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\")\r\n\t\t\tthis.setUpdated(sid, false);\r\n\r\n\t\tvar soid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) {\r\n\t\t\t\t\tthis.setUpdated(sid,false);\r\n\t\t\t\t\tthis.obj[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tthis.obj.setUserData(sid, this.action_param, \"true_deleted\");\r\n\t\t\t\tthis.obj[this._methods[3]](sid);\r\n\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\"){\r\n\t\t\tif (correct) this.obj.setUserData(sid, this.action_param,'');\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid,true,this.obj.getUserData(sid,this.action_param));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [soid, action, tid, btag]);\r\n\t},\r\n\r\n\t/**\r\n\t* \t@desc: response from server\r\n\t*\t@param: xml - XMLLoader object with response XML\r\n\t*\t@type: private\r\n\t*/\r\n\tafterUpdate:function(that,xml,id){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\t//try to use json first\r\n\t\tif (window.JSON){\r\n\t\t\tvar tag;\r\n\r\n\t\t\ttry{\r\n\t\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t\t} catch(e){\r\n\r\n\t\t\t\t// empty response also can be processed by json handler\r\n\t\t\t\tif(!xml.xmlDoc.responseText.length){\r\n\t\t\t\t\ttag = {};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(tag){\r\n\t\t\t\tvar action = tag.action || this.getState(id) || \"updated\";\r\n\t\t\t\tvar sid = tag.sid || id[0];\r\n\t\t\t\tvar tid = tag.tid || id[0];\r\n\t\t\t\tthat.afterUpdateCallback(sid, tid, action, tag);\r\n\t\t\t\tthat.finalizeUpdate();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//xml response\r\n\t\tvar top = ajax.xmltop(\"data\", xml.xmlDoc); //fix incorrect content type in IE\r\n\t\tif (!top) return this.cleanUpdate(id);\r\n\t\tvar atag=ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) return this.cleanUpdate(id);\r\n\r\n\t\tfor (var i=0; i<atag.length; i++){\r\n        \tvar btag=atag[i];\r\n\t\t\tvar action = btag.getAttribute(\"type\");\r\n\t\t\tvar sid = btag.getAttribute(\"sid\");\r\n\t\t\tvar tid = btag.getAttribute(\"tid\");\r\n\t\t\t\r\n\t\t\tthat.afterUpdateCallback(sid,tid,action,btag);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t},\r\n\tcleanUpdate:function(id){\r\n\t\tif (id)\r\n\t\t\tfor (var i = 0; i < id.length; i++)\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t},\r\n\tfinalizeUpdate:function(){\r\n\t\tif (this._waitMode) this._waitMode--;\r\n\t\t\r\n\t\tif ((this.obj.mytype==\"tree\" || this.obj._h2) && this.updatedRows.length) \r\n\t\t\tthis.sendData();\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\",[]);\r\n\t\tif (!this.updatedRows.length)\r\n\t\t\tthis.callEvent(\"onFullSync\",[]);\r\n\t},\r\n\r\n\r\n\r\n\r\n\t\r\n\t/**\r\n\t* \t@desc: initializes data-processor\r\n\t*\t@param: anObj - dhtmlxGrid object to attach this data-processor to\r\n\t*\t@type: public\r\n\t*/\r\n\tinit:function(anObj){\r\n\t\tthis.obj = anObj;\r\n\t\tif (this.obj._dp_init) \r\n\t\t\tthis.obj._dp_init(this);\r\n\t},\r\n\t\r\n\t\r\n\tsetOnAfterUpdate:function(ev){\r\n\t\tthis.attachEvent(\"onAfterUpdate\",ev);\r\n\t},\r\n\tenableDebug:function(mode){\r\n\t},\r\n\tsetOnBeforeUpdateHandler:function(func){  \r\n\t\tthis.attachEvent(\"onBeforeDataSending\",func);\r\n\t},\r\n\r\n\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval\r\n\t\t\ttime interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate: function(interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\t\t\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._need_update = false;\r\n\t\t//this._loader = null;\r\n\t\tthis._update_busy = false;\r\n\t\t\r\n\t\tthis.attachEvent(\"onAfterUpdate\",function(sid,action,tid,xml_node){\r\n\t\t\tthis.afterAutoUpdate(sid, action, tid, xml_node);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onFullSync\",function(){\r\n\t\t\tthis.fullSync();\r\n\t\t});\r\n\t\t\r\n\t\tvar self = this;\r\n\t\twindow.setInterval(function(){\r\n\t\t\tself.loadUpdate();\r\n\t\t}, interval);\r\n\t},\r\n\r\n\r\n\t/* process updating request answer\r\n\t\tif status == collision version is depricated\r\n\t\tset flag for autoupdating immidiatly\r\n\t*/\r\n\tafterAutoUpdate: function(sid, action, tid, xml_node) {\r\n\t\tif (action == 'collision') {\r\n\t\t\tthis._need_update = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync: function() {\r\n\t\tif (this._need_update) {\r\n\t\t\tthis._need_update = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates: function(url,callback){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._update_busy) \r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\tthis._update_busy = true;\r\n\t\t\r\n\t\t//this._loader = this._loader || new dtmlXMLLoaderObject(true);\r\n\t\t\r\n\t\t//this._loader.async=true;\r\n\t\t//this._loader.waitCall=callback;\r\n\t\t//this._loader.loadXML(url);\r\n\t\tajax.get(url, callback);\r\n\r\n\t},\r\n\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\t_v: function(node) {\r\n\t\tif (node.firstChild) return node.firstChild.nodeValue;\r\n\t\treturn \"\";\r\n\t},\r\n\r\n\r\n\t/* returns values array of xml nodes array\r\n\t\t@param arr\r\n\t\t\tarray of xml nodes\r\n\t*/\r\n\t_a: function(arr) {\r\n\t\tvar res = [];\r\n\t\tfor (var i=0; i < arr.length; i++) {\r\n\t\t\tres[i]=this._v(arr[i]);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate: function(){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tvar self = this;\r\n\t\tvar version = this.obj.getUserData(0,\"version\");\r\n\t\tvar url = this.serverProcessor+ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\",\"\");\r\n\t\tthis.getUpdates(url, function(xml){\r\n\t\t\tvar vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tself.obj.setUserData(0,\"version\",self._v(vers[0]));\r\n\t\t\t\r\n\t\t\tvar upds = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (upds.length){\r\n\t\t\t\tself._silent_mode = true;\r\n\t\t\t\t\r\n\t\t\t\tfor (var i=0; i<upds.length; i++) {\r\n\t\t\t\t\tvar status = upds[i].getAttribute('status');\r\n\t\t\t\t\tvar id = upds[i].getAttribute('id');\r\n\t\t\t\t\tvar parent = upds[i].getAttribute('parent');\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase 'inserted':\r\n\t\t\t\t\t\t\tself.callEvent(\"insertCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'updated':\r\n\t\t\t\t\t\t\tself.callEvent(\"updateCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'deleted':\r\n\t\t\t\t\t\t\tself.callEvent(\"deleteCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tself._silent_mode = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself._update_busy = false;\r\n\t\t\tself = null;\r\n\t\t});\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tthis.updatedRows = [];\r\n\t\tthis._in_progress={};//?\r\n\t\tthis._invalid={};\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tthis.obj = null;\r\n\t}\r\n\r\n\r\n\r\n};\r\n\r\nmodule.exports = dataProcessor;\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = function(gantt){\r\n\tvar modules = [\r\n\t\t__webpack_require__(72),\r\n\t\t__webpack_require__(73),\r\n\t\t__webpack_require__(74),\r\n\t\t__webpack_require__(75),\r\n\t\t__webpack_require__(76),\r\n\t\t__webpack_require__(77)\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n};\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tvar scrollRange = 50,\r\n\t\tscrollStep = 30,\r\n\t\tscrollDelay = 10,\r\n\t\tscrollSpeed = 50;\r\n\r\n\tvar interval = null,\r\n\t\tisMove = false,\r\n\t\tdelayTimeout = null,\r\n\t\tbox = {},\r\n\t\tstartPos = {\r\n\t\t\tstarted: false\r\n\t\t},\r\n\t\teventPos = {};\r\n\r\n\tfunction isScrollState() {\r\n\t\tvar dragMarker = !!document.querySelector(\".gantt_drag_marker\");\r\n\t\tvar isResize = !!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\");\r\n\t\tvar isLink = !!document.querySelector(\".gantt_link_direction\");\r\n\t\tisMove = dragMarker && !isResize && !isLink;\r\n\t\treturn !((!gantt.getState().drag_mode && !dragMarker) || isResize);\r\n\t}\r\n\r\n\tfunction defineDelayTimeout(state) {\r\n\t\tif (delayTimeout) {\r\n\t\t\tclearTimeout(delayTimeout);\r\n\t\t\tdelayTimeout = null;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tvar speed = gantt.config.autoscroll_speed;\r\n\t\t\tif (speed && speed < 10) // limit speed value to 10 \r\n\t\t\t\tspeed = 10;\r\n\r\n\t\t\tdelayTimeout = setTimeout(function() {\r\n\t\t\t\tinterval = setInterval(tick, speed || scrollSpeed);\r\n\t\t\t\tbox = domHelpers.getNodePosition(gantt.$task);\r\n\t\t\t}, gantt.config.autoscroll_delay || scrollDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction defineScrollInterval(state) {\r\n\t\tif (state) {\r\n\t\t\tdefineDelayTimeout(true);\r\n\t\t\tif (!startPos.started) {\r\n\t\t\t\tstartPos.x = eventPos.x;\r\n\t\t\t\tstartPos.y = eventPos.y;\r\n\t\t\t\tstartPos.started = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (interval) {\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t\tinterval = null;\r\n\t\t\t}\r\n\t\t\tdefineDelayTimeout(false);\r\n\t\t\tstartPos.started = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autoscrollInterval(event) {\r\n\r\n\t\tvar isScroll = isScrollState();\r\n\r\n\t\tif ((interval || delayTimeout) && !isScroll) { \r\n\t\t\tdefineScrollInterval(false);\r\n\t\t}\r\n\r\n\t\tif (!gantt.config.autoscroll || !isScroll) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\teventPos = {\r\n\t\t\tx: event.clientX,\r\n\t\t\ty: event.clientY\r\n\t\t};\r\n\r\n\t\tif (!interval && isScroll) {\r\n\t\t\tdefineScrollInterval(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tick() {\r\n\r\n\t\tif (!isScrollState()) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar box = domHelpers.getNodePosition(gantt.$task);\r\n\t\tvar posX = eventPos.x - box.x; \r\n\t\tvar posY = eventPos.y - box.y;\r\n\r\n\t\tvar scrollLeft = isMove ? 0 : need_scroll(posX, box.width, startPos.x - box.x);\r\n\t\tvar scrollTop = need_scroll(posY, box.height, startPos.y - box.y);\r\n\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar currentScrollTop = scrollState.y,\r\n\t\t\tscrollOuterHeight = scrollState.inner_height,\r\n\t\t\tscrollInnerHeight = scrollState.height,\r\n\t\t\tcurrentScrollLeft = scrollState.x,\r\n\t\t\tscrollOuterWidth = scrollState.inner_width,\r\n\t\t\tscrollInnerWidth = scrollState.width;\r\n\r\n\t\t// do scrolling only if we have scrollable area to do so\r\n\t\tif (scrollTop && !scrollOuterHeight) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop < 0 && !currentScrollTop) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop > 0 && currentScrollTop + scrollOuterHeight >= scrollInnerHeight + 2) {\r\n\t\t\tscrollTop = 0;\r\n\t\t}\r\n\r\n\t\tif (scrollLeft && !scrollOuterWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft < 0 && !currentScrollLeft) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft > 0 && currentScrollLeft + scrollOuterWidth >= scrollInnerWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t}\r\n\r\n\t\tvar step = gantt.config.autoscroll_step;\r\n\r\n\t\tif (step && step < 2) // limit step value to 2\r\n\t\t\tstep = 2;\r\n\r\n\t\tscrollLeft = scrollLeft * (step || scrollStep);\r\n\t\tscrollTop = scrollTop * (step || scrollStep);\r\n\r\n\t\tif (scrollLeft || scrollTop) {\r\n\t\t\tscroll(scrollLeft, scrollTop);\r\n\t\t} \r\n\r\n\t}\r\n\r\n\tfunction need_scroll(pos, boxSize, startCoord) {\r\n\t\tif ((pos - scrollRange < 0) && (pos < startCoord))\r\n\t\t\treturn -1;\r\n\t\telse if ((pos > boxSize - scrollRange) && (pos > startCoord))\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfunction scroll(left, top) {\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar scrollLeft = null,\r\n\t\t\tscrollTop = null;\r\n\r\n\t\tif (left) {\r\n\t\t\tscrollLeft = scrollState.x + left;\r\n\t\t\tscrollLeft = Math.min(scrollState.width, scrollLeft);\r\n\t\t\tscrollLeft = Math.max(0, scrollLeft);\r\n\t\t}\r\n\r\n\t\tif (top) {\r\n\t\t\tscrollTop = scrollState.y + top;\r\n\t\t\tscrollTop = Math.min(scrollState.height, scrollTop);\r\n\t\t\tscrollTop = Math.max(0, scrollTop);\r\n\t\t}\r\n\r\n\t\tgantt.scrollTo(scrollLeft, scrollTop);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function() {\r\n\t\tgantt.eventRemove(document.body, \"mousemove\", autoscrollInterval);\r\n\t\tgantt.event(document.body, \"mousemove\", autoscrollInterval);\r\n\t});\r\n\r\n};\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports) {\n\nfunction createMethod(gantt){\r\n\tvar methods = {};\r\n\tvar isActive = false;\r\n\tfunction disableMethod(methodName, dummyMethod){\r\n\t\tdummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function(){};\r\n\r\n\t\tif(!methods[methodName]){\r\n\t\t\tmethods[methodName] = this[methodName];\r\n\t\t\tthis[methodName] = dummyMethod;\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethod(methodName){\r\n\t\tif(methods[methodName]){\r\n\t\t\tthis[methodName] = methods[methodName];\r\n\t\t\tmethods[methodName] = null;\r\n\t\t}\r\n\t}\r\n\tfunction disableMethods(methodsHash){\r\n\t\tfor(var i in methodsHash){\r\n\t\t\tdisableMethod.call(this, i, methodsHash[i]);\r\n\t\t}\r\n\t}\r\n\t function restoreMethods(){\r\n\t\tfor(var i in methods){\r\n\t\t\trestoreMethod.call(this, i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction batchUpdatePayload(callback){\r\n\t\ttry{\r\n\t\t\tcallback();\r\n\t\t}catch(e){\r\n\t\t\twindow.console.error(e);\r\n\t\t}\r\n\t}\r\n\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"batchUpdate\", function(){\r\n\t\treturn {\r\n\t\t\tbatch_update: isActive\r\n\t\t};\r\n\t}, true);\r\n\r\n\treturn function batchUpdate(callback, noRedraw) {\r\n\t\tif(isActive){\r\n\t\t\t// batch mode is already active\r\n\t\t\tbatchUpdatePayload(callback);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar call_dp = (this._dp && this._dp.updateMode != \"off\");\r\n\t\tvar dp_mode;\r\n\t\tif (call_dp){\r\n\t\t\tdp_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\r\n\t\t// temporary disable some methods while updating multiple tasks\r\n\t\tvar resetProjects = {};\r\n\t\tvar methods = {\r\n\t\t\t\"render\":true,\r\n\t\t\t\"refreshData\":true,\r\n\t\t\t\"refreshTask\":true,\r\n\t\t\t\"refreshLink\":true,\r\n\t\t\t\"resetProjectDates\":function(task){\r\n\t\t\t\tresetProjects[task.id] = task;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdisableMethods.call(this, methods);\r\n\r\n\t\tisActive = true;\r\n\t\tthis.callEvent(\"onBeforeBatchUpdate\", []);\r\n\r\n\t\tbatchUpdatePayload(callback);\r\n\r\n\t\tthis.callEvent(\"onAfterBatchUpdate\", []);\r\n\r\n\t\trestoreMethods.call(this);\r\n\r\n\t\t// do required updates after changes applied\r\n\t\tfor(var i in resetProjects){\r\n\t\t\tthis.resetProjectDates(resetProjects[i]);\r\n\t\t}\r\n\r\n\t\tisActive = false;\r\n\r\n\t\tif(!noRedraw){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tif (call_dp) {\r\n\t\t\tthis._dp.setUpdateMode(dp_mode);\r\n\t\t\tthis._dp.setGanttMode(\"tasks\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t\tthis._dp.setGanttMode(\"links\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tgantt.batchUpdate = createMethod(gantt);\r\n};\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports) {\n\nvar createWbs = (function(gantt){\r\n\treturn {\r\n\t_needRecalc: true,\r\n\treset: function(){\r\n\t\tthis._needRecalc = true;\r\n\t},\r\n\t_isRecalcNeeded: function(){\r\n\t\treturn (!this._isGroupSort() && this._needRecalc);\r\n\t},\r\n\t_isGroupSort: function() {\r\n\t\treturn !!(gantt._groups && gantt._groups.is_active());\r\n\t},\r\n\t_getWBSCode: function(task) {\r\n\t\tif(!task) return \"\";\r\n\r\n\t\tif(this._isRecalcNeeded()){\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\r\n\t\tif(task.$virtual) return \"\";\r\n\t\tif(this._isGroupSort()) return task.$wbs || \"\";\r\n\r\n\t\tif(!task.$wbs) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\t\treturn task.$wbs;\r\n\t},\r\n\t_setWBSCode: function(task, value) {\r\n\t\ttask.$wbs = value;\r\n\t},\r\n\tgetWBSCode: function(task) {\r\n\t\treturn this._getWBSCode(task);\r\n\t},\r\n\t_calcWBS: function() {\r\n\t\tif(!this._isRecalcNeeded()) return;\r\n\r\n\t\tvar _isFirst = true;\r\n\t\tgantt.eachTask(function(ch) {\r\n\t\t\tif(_isFirst) {\r\n\t\t\t\t_isFirst = false;\r\n\t\t\t\tthis._setWBSCode(ch, \"1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar _prevSibling = gantt.getPrevSibling(ch.id);\r\n\t\t\tif (_prevSibling !== null) {\r\n\t\t\t\tvar _wbs = gantt.getTask(_prevSibling).$wbs;\r\n\t\t\t\tif(_wbs) {\r\n\t\t\t\t\t_wbs = _wbs.split(\".\");\r\n\t\t\t\t\t_wbs[_wbs.length-1]++;\r\n\t\t\t\t\tthis._setWBSCode(ch, _wbs.join(\".\"));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar _parent = gantt.getParent(ch.id);\r\n\t\t\t\tthis._setWBSCode(ch, gantt.getTask(_parent).$wbs + \".1\");\r\n\t\t\t}\r\n\t\t}, gantt.config.root_id, this);\r\n\r\n\t\tthis._needRecalc = false;\r\n\t}\r\n};\r\n});\r\n\r\nmodule.exports = function(gantt){\r\n\tvar wbs = createWbs(gantt);\r\n\tgantt.getWBSCode = function getWBSCode(task) {\r\n\t\treturn wbs.getWBSCode(task);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeParse\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n};\r\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports) {\n\nif (window.jQuery){\r\n\r\n\t(function( $ ){\r\n\r\n\t\tvar methods = [];\r\n\t\t$.fn.dhx_gantt = function(config){\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (typeof(config) === 'string') {\r\n\t\t\t\tif (methods[config] ) {\r\n\t\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_gantt');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar views = [];\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\t\tif (!this.gantt && !(window.gantt.$root == this)){\r\n\r\n\t\t\t\t\t\t\tvar newgantt = (window.gantt.$container && window.Gantt) ? window.Gantt.getGanttInstance():window.gantt;\r\n\t\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\t\tnewgantt.config[key] = config[key];\r\n\r\n\t\t\t\t\t\t\tnewgantt.init(this);\r\n\t\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\t\tnewgantt.parse(config.data);\r\n\r\n\t\t\t\t\t\t\tviews.push(newgantt);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tviews.push(typeof this.gantt == \"object\" ? this.gantt : window.gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tif (views.length === 1) return views[0];\r\n\t\t\t\treturn views;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t})(jQuery);\r\n\r\n}\r\n\r\n\r\nmodule.exports = null;\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports) {\n\nif (window.dhtmlx){\r\n\r\n\tif (!dhtmlx.attaches)\r\n\t\tdhtmlx.attaches = {};\r\n\r\n\tdhtmlx.attaches.attachGantt=function(start, end, gantt){\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tobj.id = \"gantt_\"+ gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tvar that = this.vs[this.av];\r\n\t\tthat.grid = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tthat.gridId = obj.id;\r\n\t\tthat.gridObj = obj;\r\n\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\treturn this.vs[this[method_name]()].grid;\r\n\t};\r\n\r\n}\r\nif (typeof(window.dhtmlXCellObject) != \"undefined\") {\r\n\r\n\tdhtmlXCellObject.prototype.attachGantt=function(start, end, gantt){\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"gantt_\"+gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\tobj = null;\r\n\t\tthis.callEvent(\"_onContentAttach\",[]);\r\n\r\n\t\treturn this.dataObj;\r\n\t};\r\n}\r\n\r\nmodule.exports = null;\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports) {\n\nfunction createResourceMethods(gantt){\r\n\r\n\tvar resourceTaskCache = {},\r\n\t\tresourceLoadCache = {};\r\n\r\n\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t\tresourceLoadCache = {};\r\n\t});\r\n\r\n\tfunction getTaskBy(propertyName, propertyValue){\r\n\t\tif(typeof propertyName == \"function\"){\r\n\t\t\treturn filterResourceTasks(propertyName);\r\n\t\t}else{\r\n\t\t\tif(propertyValue instanceof Array){\r\n\t\t\t\treturn getResourceTasks(propertyName, propertyValue);\r\n\t\t\t}else{\r\n\t\t\t\treturn getResourceTasks(propertyName, [propertyValue]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterResourceTasks(filter){\r\n\t\tvar res = [];\r\n\t\tgantt.eachTask(function (task) {\r\n\t\t\tif (filter(task)) {\r\n\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceTasks(property, resourceIds) {\r\n\t\tvar res;\r\n\r\n\t\tvar cacheKey = resourceIds.join(\"_\") + \"_\" + property;\r\n\r\n\t\tvar resourceHash = {};\r\n\t\tfor(var i = 0; i < resourceIds.length; i++){\r\n\t\t\tresourceHash[resourceIds[i]] = true;\r\n\t\t}\r\n\r\n\t\tif(!resourceTaskCache[cacheKey]){\r\n\t\t\tres = resourceTaskCache[cacheKey] = [];\r\n\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\tif (resourceHash[task[property]] && task.type != gantt.config.types.project) {\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceLoad(resourceId, resourceProperty, scale){\r\n\t\tvar cacheKey = [resourceId, resourceProperty, scale.unit, scale.step].join(\"_\");\r\n\t\tvar res;\r\n\t\tif(!resourceTaskCache[cacheKey]){\r\n\t\t\tres = resourceTaskCache[cacheKey] = calculateResourceLoad(resourceId, resourceProperty, scale);\r\n\r\n\t\t}else{\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction calculateResourceLoad(resourceProperty, resourceId, scale) {\r\n\r\n\t\tvar tasks = getTaskBy(resourceProperty, resourceId);\r\n\t\tvar step = scale.unit;\r\n\t\tvar timegrid = {};\r\n\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar task = tasks[i];\r\n\r\n\t\t\tvar currDate = gantt.date[step + \"_start\"](new Date(task.start_date));\r\n\r\n\t\t\twhile (currDate < task.end_date) {\r\n\r\n\t\t\t\tvar date = currDate;\r\n\t\t\t\tcurrDate = gantt.date.add(currDate, 1, step);\r\n\r\n\t\t\t\tif (!gantt.isWorkTime({date: date, task: task})) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar timestamp = date.valueOf();\r\n\t\t\t\tif (!timegrid[timestamp]){\r\n\t\t\t\t\ttimegrid[timestamp] = {\r\n\t\t\t\t\t\ttasks: []\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttimegrid[timestamp].tasks.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar timetable = [];\r\n\t\tvar start, end;\r\n\t\tfor (var i in timegrid) {\r\n\t\t\tstart = new Date(i * 1);\r\n\t\t\tend = gantt.date.add(start, 1, step);\r\n\t\t\ttimetable.push({\r\n\t\t\t\tstart_date: start,\r\n\t\t\t\tend_date: end,\r\n\t\t\t\ttasks: timegrid[i].tasks\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn timetable;\r\n\t}\r\n\r\n\tfunction renderResourceLine(resource, timeline) {\r\n\t\tvar config = timeline.$getConfig(),\r\n\t\t\ttemplates = timeline.$getTemplates();\r\n\t\tvar timetable = getResourceLoad(config.resource_property, resource.id, timeline.getScale());\r\n\r\n\t\tvar cells = [];\r\n\t\tfor (var i = 0; i < timetable.length; i++) {\r\n\r\n\t\t\tvar day = timetable[i];\r\n\r\n\t\t\tvar css = templates.resource_cell_class(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tvar content = templates.resource_cell_value(day.start_date, day.end_date, resource, day.tasks);\r\n\r\n\t\t\tif(css || content){\r\n\t\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\t\t\t\tvar el = document.createElement('div');\r\n\t\t\t\tel.className = [\"gantt_resource_marker\", css].join(\" \");\r\n\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t'left:' + sizes.left + 'px',\r\n\t\t\t\t\t'width:' + sizes.width + 'px',\r\n\t\t\t\t\t'height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'line-height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'top:' + sizes.top + 'px'\r\n\t\t\t\t].join(\";\");\r\n\r\n\t\t\t\tif(content)\r\n\t\t\t\t\tel.innerHTML = content;\r\n\r\n\t\t\t\tcells.push(el);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar row = null;\r\n\t\tif(cells.length){\r\n\t\t\trow = document.createElement(\"div\");\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\trow.appendChild(cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\treturn {\r\n\t\trenderLine: renderResourceLine,\r\n\t\tfilterTasks: getTaskBy\r\n\t};\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tvar methods = createResourceMethods(gantt);\r\n\r\n\tgantt.getTaskBy = methods.filterTasks;\r\n\tgantt.$ui.layers.resourceRow = methods.renderLine;\r\n\tgantt.config.resource_property = \"owner_id\";\r\n\tgantt.config.resource_store = \"resource\";\r\n\r\n\tgantt.templates.resource_cell_class = function(start, end, resource, tasks){\r\n\t\tvar css = \"\";\r\n\t\tif (tasks.length <= 1) {\r\n\t\t\tcss = \"gantt_resource_marker_ok\";\r\n\t\t} else {\r\n\t\t\tcss = \"gantt_resource_marker_overtime\";\r\n\t\t}\r\n\t\treturn css;\r\n\t};\r\n\r\n\tgantt.templates.resource_cell_value = function(start, end, resource, tasks){\r\n\t\treturn tasks.length * 8;\r\n\t};\r\n};\r\n\r\n\r\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = function(gantt) {\r\n\tvar TreeDataStore = __webpack_require__(18);\r\n\r\n\tvar old_has_children = TreeDataStore.prototype.hasChild;\r\n\tgantt.$data.tasksStore.hasChild = function (id) {\r\n\t\tif (old_has_children.apply(this, arguments))\r\n\t\t\treturn true;\r\n\t\tif (this.exists(id)) {\r\n\t\t\treturn this.getItem(id)[gantt.config.branch_loading_property];\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tfunction needLoading(id) {\r\n\t\tif (gantt.config.branch_loading && gantt._load_url) {\r\n\t\t\tvar was_rendered = gantt.getUserData(id, \"was_rendered\");\r\n\t\t\t// call ajax only if branch has children\r\n\t\t\tif (!was_rendered && (!gantt.getChildren(id).length && gantt.hasChild(id))) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onTaskOpened\", function (id) {\r\n\t\tif (gantt.config.branch_loading && gantt._load_url) {\r\n\t\t\t// call ajax only if branch has children\r\n\t\t\tif (needLoading(id)) {\r\n\t\t\t\tvar url = gantt._load_url;\r\n\t\t\t\turl = url.replace(/(\\?|&)?parent_id=.+&?/, \"\");\r\n\t\t\t\tvar param = url.indexOf(\"?\") >= 0 ? \"&\" : \"?\";\r\n\t\t\t\tvar y = gantt.getScrollState().y || 0;\r\n\r\n\t\t\t\tgantt.load(url + param + \"parent_id=\" + encodeURIComponent(id), this._load_type, function () {\r\n\t\t\t\t\tif (y) {\r\n\t\t\t\t\t\tgantt.scrollTo(null, y);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.setUserData(id, \"was_rendered\", true);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n};\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Grid = __webpack_require__(8);\r\n\r\nmodule.exports = function(gantt) {\r\n\t__webpack_require__(80)(gantt);\r\n\tGrid.prototype.getGridColumns = function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = config.columns,\r\n\t\t\tvisibleColumns = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (!columns[i].hide)\r\n\t\t\t\tvisibleColumns.push(columns[i]);\r\n\t\t}\r\n\r\n\t\treturn visibleColumns;\r\n\t};\r\n};\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tgantt.getGridColumn = function (name) {\r\n\t\tvar columns = gantt.config.columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name)\r\n\t\t\t\treturn columns[i];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n};\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt){\r\n\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tgantt._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\r\n\t\t},\r\n\r\n\t\tgetTimelineCellAttr:function(dateString){\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\r\n\t\t_taskCommonAttr: function(task, div){\r\n\r\n\t\t\tif(!(task.start_date && task.end_date))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(gantt.templates.tooltip_text(task.start_date, task.end_date, task)));\r\n\r\n\t\t\tif(gantt.isReadonly(task)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(task.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tdiv.setAttribute(\"aria-selected\",\r\n\t\t\t\t(gantt.getState().selected_task == task.id || (gantt.isSelectedTask && gantt.isSelectedTask(task.id))) ? \"true\" : \"false\");\r\n\t\t},\r\n\r\n\t\tsetTaskBarAttr: function(task, div){\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.drag_move){\r\n\t\t\t\tif(task.id != gantt.getState().drag_id){\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskRowAttr: function(task, div){\r\n\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.order_branch){\r\n\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\r\n\t\t\tdiv.setAttribute(\"aria-level\", task.$level);\r\n\r\n\t\t\tif(gantt.hasChild(task.id)){\r\n\t\t\t\tdiv.setAttribute(\"aria-expanded\", task.$open ? \"true\" : \"false\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tlinkAttr: function(link, div){\r\n\r\n\t\t\tvar linkTypes = gantt.config.links;\r\n\r\n\t\t\tvar toStart = link.type == linkTypes.finish_to_start || link.type == linkTypes.start_to_start;\r\n\t\t\tvar fromStart = link.type == linkTypes.start_to_start || link.type == linkTypes.start_to_finish;\r\n\r\n\t\t\tvar content = gantt.locale.labels.link + \" \" +  gantt.templates.drag_link(link.source, fromStart, link.target, toStart);\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(content));\r\n\t\t\tif(gantt.isReadonly(link)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgridSeparatorAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"separator\");\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":gantt.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.years;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.months;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.days;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.hours + gantt.locale.labels.minutes;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\tlightboxDurationInputAttrString: function(section){\r\n\t\t\treturn this.getAttributeString({\"aria-label\": gantt.locale.labels.column_duration, \"aria-valuemin\": \"0\"});\r\n\t\t},\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn [\" role='treegrid'\", gantt.config.multiselect ? \"aria-multiselectable='true'\" : \"aria-multiselectable='false'\", \" \"].join(\" \");\r\n\t\t},\r\n\r\n\r\n\t\tgridScaleRowAttrString: function(){\r\n\t\t\treturn \"role='row'\";\r\n\t\t},\r\n\r\n\t\tgridScaleCellAttrString: function(column, label){\r\n\t\t\tvar attrs = \"\";\r\n\t\t\tif(column.name == \"add\"){\r\n\t\t\t\tattrs = this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar attributes = {\r\n\t\t\t\t\t\"role\":\"columnheader\",\r\n\t\t\t\t\t\"aria-label\": label\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(gantt._sort && gantt._sort.name == column.name){\r\n\t\t\t\t\tif(gantt._sort.direction == \"asc\"){\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"ascending\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"descending\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattrs = this.getAttributeString(attributes);\r\n\t\t\t}\r\n\t\t\treturn attrs;\r\n\t\t},\r\n\r\n\t\tgridDataAttrString: function(){\r\n\t\t\treturn \"role='rowgroup'\";\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(column, textValue){\r\n\t\t\treturn this.getAttributeString({\"role\":\"gridcell\", \"aria-label\": textValue});\r\n\t\t},\r\n\r\n\t\tgridAddButtonAttrString: function(column){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t},\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !gantt.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in gantt._waiAria){\r\n\t\tgantt._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(gantt._waiAria[i]);\r\n\t}\r\n\r\n\r\n};\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tgantt.isReadonly = function (item) {\r\n\t\tif (item && item[this.config.editable_property]) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn (item && item[this.config.readonly_property]) || this.config.readonly;\r\n\t\t}\r\n\t};\r\n};\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar dateHelper = __webpack_require__(4);\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.load = function (url, type, callback) {\r\n\t\tthis._load_url = url;\r\n\t\tthis.assert(arguments.length, \"Invalid load arguments\");\r\n\r\n\t\tvar tp = 'json', cl = null;\r\n\t\tif (arguments.length >= 3) {\r\n\t\t\ttp = type;\r\n\t\t\tcl = callback;\r\n\t\t} else {\r\n\t\t\tif (typeof arguments[1] == \"string\")\r\n\t\t\t\ttp = arguments[1];\r\n\t\t\telse if (typeof arguments[1] == \"function\")\r\n\t\t\t\tcl = arguments[1];\r\n\t\t}\r\n\r\n\t\tthis._load_type = tp;\r\n\r\n\t\tthis.callEvent(\"onLoadStart\", [url, tp]);\r\n\r\n\t\tthis.ajax.get(url, gantt.bind(function (l) {\r\n\t\t\tthis.on_load(l, tp);\r\n\t\t\tthis.callEvent(\"onLoadEnd\", [url, tp]);\r\n\t\t\tif (typeof cl == \"function\")\r\n\t\t\t\tcl.call(this);\r\n\t\t}, this));\r\n\t};\r\n\tgantt.parse = function (data, type) {\r\n\t\tthis.on_load({xmlDoc: {responseText: data}}, type);\r\n\t};\r\n\r\n\tgantt.serialize = function (type) {\r\n\t\ttype = type || \"json\";\r\n\t\treturn this[type].serialize();\r\n\t};\r\n\r\n\t/*\r\n\ttasks and relations\r\n\t{\r\n\tdata:[\r\n\t\t{\r\n\t\t\t\"id\":\"string\",\r\n\t\t\t\"text\":\"...\",\r\n\t\t\t\"start_date\":\"Date or string\",\r\n\t\t\t\"end_date\":\"Date or string\",\r\n\t\t\t\"duration\":\"number\",\r\n\t\t\t\"progress\":\"0..1\",\r\n\t\t\t\"parent_id\":\"string\",\r\n\t\t\t\"order\":\"number\"\r\n\t\t},...],\r\n\tlinks:[\r\n\t\t{\r\n\t\t\tid:\"string\",\r\n\t\t\tsource:\"string\",\r\n\t\t\ttarget:\"string\",\r\n\t\t\ttype:\"string\"\r\n\t\t},...],\r\n\tcollections:{\r\n\t\t\tcollectionName:[\r\n\t\t\t\t{key:, label:, optional:...},...\r\n\t\t\t],...\r\n\t\t}\r\n\t}\r\n\r\n\t* */\r\n\r\n\tgantt.on_load = function (resp, type) {\r\n\t\tthis.callEvent(\"onBeforeParse\", []);\r\n\t\tif (!type)\r\n\t\t\ttype = \"json\";\r\n\t\tthis.assert(this[type], \"Invalid data type:'\" + type + \"'\");\r\n\r\n\t\tvar raw = resp.xmlDoc.responseText;\r\n\r\n\t\tvar data = this[type].parse(raw, resp);\r\n\t\tthis._process_loading(data);\r\n\t};\r\n\r\n\tgantt._process_loading = function (data) {\r\n\t\tif(data.collections)\r\n\t\t\tthis._load_collections(data.collections);\r\n\r\n\t\tthis.$data.tasksStore.parse(data.data);\r\n\t\tvar links = data.links || (data.collections ? data.collections.links : []);\r\n\t\tthis.$data.linksStore.parse(links);\r\n\r\n\t\t//this._sync_links();\r\n\t\tthis.callEvent(\"onParse\", []);\r\n\t\tthis.render();\r\n\t\tif(this.config.initial_scroll){\r\n\t\t\tvar firstTask = this.getTaskByIndex(0);\r\n\t\t\tvar id = firstTask ? firstTask.id : this.config.root_id;\r\n\t\t\tif(this.isTaskExists(id))\r\n\t\t\t\tthis.showTask(id);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._load_collections = function (collections) {\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\tvar arr = this.serverList[key];\r\n\t\t\t\tif (!arr) continue;\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = this.copy(option);\r\n\t\t\t\t\tobj.key = obj.value;// resulting option object\r\n\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tthis.callEvent(\"onOptionsLoad\", []);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDisplay\", function (id, task) {\r\n\t\treturn !task.$ignore;\r\n\t});\r\n\r\n\tgantt.json = {\r\n\t\tparse: function (data) {\r\n\t\t\tgantt.assert(data, \"Invalid data\");\r\n\r\n\t\t\tif (typeof data == \"string\") {\r\n\t\t\t\tif (window.JSON)\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\telse {\r\n\t\t\t\t\tgantt.assert(false, \"JSON is not supported\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.dhx_security)\r\n\t\t\t\tgantt.security_key = data.dhx_security;\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserializeTask: function (task) {\r\n\t\t\treturn this._copyObject(task);\r\n\t\t},\r\n\t\tserializeLink: function (link) {\r\n\t\t\treturn this._copyLink(link);\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj)\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj) {\r\n\t\t\t\tif (key.charAt(0) == \"$\")\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcopy[key] = obj[key];\r\n\r\n\t\t\t\tif (dateHelper.isDate(copy[key])) {\r\n\t\t\t\t\tcopy[key] = gantt.templates.xml_format(copy[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tgantt.eachTask(function (obj) {\r\n\t\t\t\tgantt.resetProjectDates(obj);\r\n\t\t\t\ttasks.push(this.serializeTask(obj));\r\n\t\t\t}, gantt.config.root_id, this);\r\n\r\n\t\t\tvar rawLinks = gantt.getLinks();\r\n\t\t\tfor (var i = 0; i < rawLinks.length; i++) {\r\n\t\t\t\tlinks.push(this.serializeLink(rawLinks[i]));\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata: tasks,\r\n\t\t\t\tlinks: links\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t<data>\r\n\t\t<task id:\"some\" parent_id=\"0\" progress=\"0.5\">\r\n\t\t\t<text>My task 1</text>\r\n\t\t\t<start_date>16.08.2013</start_date>\r\n\t\t\t<end_date>22.08.2013</end_date>\r\n\t\t</task>\r\n\t\t<coll_options>\r\n\t\t\t<links>\r\n\t\t\t\t<link source='a1' target='b2' type='c3' />\r\n\t\t\t</links>\r\n\t\t</coll_options>\r\n\t</data>\r\n\t*/\r\n\r\n\tgantt.xml = {\r\n\t\t_xmlNodeToJSON: function (node, attrs_only) {\r\n\t\t\tvar t = {};\r\n\t\t\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\t\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\t\t\tif (!attrs_only) {\r\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\t\t\t\tvar child = node.childNodes[i];\r\n\t\t\t\t\tif (child.nodeType == 1)\r\n\t\t\t\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\t\t},\r\n\t\t_getCollections: function (loader) {\r\n\t\t\tvar collection = {};\r\n\t\t\tvar opts = gantt.ajax.xpath(\"//coll_options\", loader);\r\n\t\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\t\tvar arr = collection[bind] = [];\r\n\t\t\t\tvar itms = gantt.ajax.xpath(\".//item\", opts[i]);\r\n\t\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\t\tvar itm = itms[j];\r\n\t\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\t\tvar obj = {key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn collection;\r\n\t\t},\r\n\t\t_getXML: function (text, loader, toptag) {\r\n\t\t\ttoptag = toptag || \"data\";\r\n\t\t\tif (!loader.getXMLTopNode) {\r\n\t\t\t\tloader = gantt.ajax.parse(loader);\r\n\t\t\t}\r\n\r\n\t\t\tvar xml = gantt.ajax.xmltop(toptag, loader.xmlDoc);\r\n\t\t\tif (!xml || xml.tagName != toptag) throw \"Invalid XML data\";\r\n\r\n\t\t\tvar skey = xml.getAttribute(\"dhx_security\");\r\n\t\t\tif (skey)\r\n\t\t\t\tgantt.security_key = skey;\r\n\r\n\t\t\treturn xml;\r\n\t\t},\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = this._getXML(text, loader);\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++)\r\n\t\t\t\tevs[i] = this._xmlNodeToJSON(xml[i]);\r\n\r\n\t\t\tdata.collections = this._getCollections(loader);\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\treturn \"<item id='\" + obj.id + \"' source='\" + obj.source + \"' target='\" + obj.target + \"' type='\" + obj.type + \"' />\";\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\treturn \"<task id='\" + obj.id + \"' parent='\" + (obj.parent || \"\") + \"' start_date='\" + obj.start_date + \"' duration='\" + obj.duration + \"' open='\" + (!!obj.open) + \"' progress='\" + obj.progress + \"' end_date='\" + obj.end_date + \"'><![CDATA[\" + obj.text + \"]]></task>\";\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tvar json = gantt.json.serialize();\r\n\t\t\tfor (var i = 0, len = json.data.length; i < len; i++) {\r\n\t\t\t\ttasks.push(this._copyObject(json.data[i]));\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, len = json.links.length; i < len; i++) {\r\n\t\t\t\tlinks.push(this._copyLink(json.links[i]));\r\n\t\t\t}\r\n\t\t\treturn \"<data>\" + tasks.join(\"\") + \"<coll_options for='links'>\" + links.join(\"\") + \"</coll_options></data>\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.oldxml = {\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = gantt.xml._getXML(text, loader, \"projects\");\r\n\t\t\tvar data = {collections: {links: []}};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tevs[i] = gantt.xml._xmlNodeToJSON(xml[i]);\r\n\t\t\t\tvar parent = xml[i].parentNode;\r\n\r\n\t\t\t\tif (parent.tagName == \"project\")\r\n\t\t\t\t\tevs[i].parent = \"project-\" + parent.getAttribute(\"id\");\r\n\t\t\t\telse\r\n\t\t\t\t\tevs[i].parent = parent.parentNode.getAttribute(\"id\");\r\n\t\t\t}\r\n\r\n\t\t\txml = gantt.ajax.xpath(\"//project\", loader);\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tvar ev = gantt.xml._xmlNodeToJSON(xml[i], true);\r\n\t\t\t\tev.id = \"project-\" + ev.id;\r\n\t\t\t\tevs.push(ev);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar ev = evs[i];\r\n\t\t\t\tev.start_date = ev.startdate || ev.est;\r\n\t\t\t\tev.end_date = ev.enddate;\r\n\t\t\t\tev.text = ev.name;\r\n\t\t\t\tev.duration = ev.duration / 8;\r\n\t\t\t\tev.open = 1;\r\n\t\t\t\tif (!ev.duration && !ev.end_date) ev.duration = 1;\r\n\t\t\t\tif (ev.predecessortasks)\r\n\t\t\t\t\tdata.collections.links.push({\r\n\t\t\t\t\t\ttarget: ev.id,\r\n\t\t\t\t\t\tsource: ev.predecessortasks,\r\n\t\t\t\t\t\ttype: gantt.config.links.finish_to_start\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tgantt.message(\"Serialization to 'old XML' is not implemented\");\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.serverList = function (name, array) {\r\n\t\tif (array) {\r\n\t\t\tthis.serverList[name] = array.slice(0);\r\n\t\t} else if (!this.serverList[name]) {\r\n\t\t\tthis.serverList[name] = [];\r\n\t\t}\r\n\t\treturn this.serverList[name];\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar CalendarManager = __webpack_require__(85),\r\n\tTimeCalculator = __webpack_require__(88),\r\n\tworktimeFacadeFactory = __webpack_require__(90),\r\n\tutils = __webpack_require__(0);\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar manager = new CalendarManager(gantt),\r\n\ttimeCalculator = new TimeCalculator(manager);\r\n\tvar facade = worktimeFacadeFactory.create(manager, timeCalculator);\r\n\tutils.mixin(gantt, facade);\r\n};\r\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar createArgumentsHelper = __webpack_require__(21);\r\nvar CalendarWorktimeStrategy = __webpack_require__(86);\r\n\r\nfunction CalendarManager (gantt){\r\n\tthis.$gantt = gantt;\r\n\tthis._calendars = {};\r\n}\r\n\r\nCalendarManager.prototype = {\r\n\t_calendars: {},\r\n\t_getDayHoursForMultiple: function (calendars, date) {\r\n\t\tvar units = [],\r\n\t\t\ttick = true,\r\n\t\t\tcurrPos = 0,\r\n\t\t\tis_work_hour = false,\r\n\t\t\tstart = this.$gantt.date.day_start(new Date(date));\r\n\t\tfor (var hour = 0; hour < 24; hour++) {\r\n\t\t\tis_work_hour = calendars.reduce(function (acc, calendar) {\r\n\t\t\t\treturn acc && calendar._is_work_hour(start);\r\n\t\t\t}, true);\r\n\t\t\tif (is_work_hour) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tunits[currPos] = hour;\r\n\t\t\t\t\tunits[currPos + 1] = (hour + 1);\r\n\t\t\t\t\tcurrPos += 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits[currPos - 1] += 1;\r\n\t\t\t\t}\r\n\t\t\t\ttick = false;\r\n\t\t\t} else if (!tick) {\r\n\t\t\t\ttick = true;\r\n\t\t\t}\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"hour\");\r\n\t\t}\r\n\t\tif (!units.length)\r\n\t\t\tunits = false;\r\n\t\treturn units;\r\n\t},\r\n\tmergeCalendars: function () {\r\n\t\tvar newCalendar = this.createCalendar(),\r\n\t\t\tday,\r\n\t\t\tunits = [];\r\n\t\tvar calendars = Array.prototype.slice.call(arguments, 0);\r\n\t\tnewCalendar.worktime.hours = [0, 24];\r\n\t\tnewCalendar.worktime.dates = {};\r\n\t\tvar start = this.$gantt.date.day_start(new Date(259200000)); // 1970 day=0\r\n\t\tfor (day = 0; day < 7; day++) {\r\n\t\t\tunits = this._getDayHoursForMultiple(calendars, start);\r\n\t\t\tnewCalendar.worktime.dates[day] = units;\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\t\tfor (var i = 0; i < calendars.length; i++) {\r\n\t\t\tfor (var value in calendars[i].worktime.dates) if (+value > 10000) {\r\n\t\t\t\tunits = this._getDayHoursForMultiple(calendars, new Date(+value));\r\n\t\t\t\tnewCalendar.worktime.dates[value] = units;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newCalendar;\r\n\t},\r\n\r\n\t_convertWorktimeSettings: function (settings) {\r\n\t\tvar days = settings.days;\r\n\t\tif (days) {\r\n\t\t\tsettings.dates = settings.dates || {};\r\n\t\t\tfor (var i = 0; i < days.length; i++) {\r\n\t\t\t\tsettings.dates[i] = days[i];\r\n\t\t\t\tif (!(days[i] instanceof Array)) {\r\n\t\t\t\t\tsettings.dates[i] = !!days[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete settings.days;\r\n\t\t}\r\n\t\treturn settings;\r\n\t},\r\n\r\n\tcreateCalendar: function (parentCalendar) {\r\n\t\tvar settings;\r\n\r\n\t\tif (!parentCalendar) {\r\n\t\t\tparentCalendar = {};\r\n\t\t}\r\n\r\n\t\tif (parentCalendar.worktime) {\r\n\t\t\tsettings = utils.copy(parentCalendar.worktime);\r\n\t\t} else {\r\n\t\t\tsettings = utils.copy(parentCalendar);\r\n\t\t}\r\n\r\n\t\tvar defaults = utils.copy(this.defaults.fulltime.worktime);\r\n\t\tutils.mixin(settings, defaults);\r\n\r\n\t\tvar id = utils.uid();\r\n\t\tvar calendar = {\r\n\t\t\tid: id + \"\",\r\n\t\t\tworktime: this._convertWorktimeSettings(settings)\r\n\t\t};\r\n\r\n\t\tvar apiCore = new CalendarWorktimeStrategy(this.$gantt, createArgumentsHelper(this.$gantt));\r\n\t\tutils.mixin(apiCore, calendar);\r\n\r\n\t\t// validate/check if empty calendar\r\n\t\tif (!apiCore._tryChangeCalendarSettings(function () {\r\n\t\t\t})) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\treturn apiCore;\r\n\t\t}\r\n\t},\r\n\r\n\tgetCalendar: function (id) {\r\n\t\tid = id || \"global\";\r\n\t\tthis.createDefaultCalendars();\r\n\t\treturn this._calendars[id];\r\n\t},\r\n\r\n\tgetCalendars: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._calendars) {\r\n\t\t\tres.push(this.getCalendar(i));\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetTaskCalendar: function (task) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!task) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t} else if (task[config.calendar_property]) {\r\n\t\t\treturn this.getCalendar(task[config.calendar_property]);\r\n\t\t} else if (config.resource_calendars) {\r\n\r\n\t\t\tfor (var field in config.resource_calendars) {\r\n\t\t\t\tvar resource = config.resource_calendars[field];\r\n\t\t\t\tif (task[field]) {\r\n\t\t\t\t\tvar calendarId = resource[task[field]];\r\n\t\t\t\t\tif (calendarId) {\r\n\t\t\t\t\t\treturn this.getCalendar(calendarId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.getCalendar();\r\n\t},\r\n\r\n\taddCalendar: function (calendar) { // puts new calendar to Global Storage - gantt.calendarManager._calendars {}\r\n\t\tif (!(calendar instanceof CalendarWorktimeStrategy)) {\r\n\t\t\tvar id = calendar.id;\r\n\t\t\tcalendar = this.createCalendar(calendar);\r\n\t\t\tcalendar.id = id;\r\n\t\t}\r\n\t\tvar config = this.$gantt.$services.config();\r\n\r\n\t\tcalendar.id = calendar.id || utils.uid();\r\n\t\tthis._calendars[calendar.id] = calendar;\r\n\t\tif (!config.worktimes)\r\n\t\t\tconfig.worktimes = {};\r\n\t\tconfig.worktimes[calendar.id] = calendar.worktime;\r\n\t\treturn calendar.id;\r\n\t},\r\n\r\n\tdeleteCalendar: function (calendar) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!calendar) return false;\r\n\t\tif (this._calendars[calendar]) {\r\n\t\t\tdelete this._calendars[calendar];\r\n\t\t\tif (config.worktimes && config.worktimes[calendar])\r\n\t\t\t\tdelete config.worktimes[calendar];\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\t},\r\n\r\n\trestoreConfigCalendars: function (configs) {\r\n\t\tfor (var i in configs) {\r\n\t\t\tif (this._calendars[i])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar settings = configs[i];\r\n\t\t\tvar calendar = this.createCalendar(settings);\r\n\t\t\tcalendar.id = i;\r\n\t\t\tthis.addCalendar(calendar);\r\n\t\t}\r\n\t},\r\n\r\n\tdefaults: {\r\n\t\tglobal: {\r\n\t\t\tid: \"global\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [8, 17],\r\n\t\t\t\tdays: [0, 1, 1, 1, 1, 1, 0]\r\n\t\t\t}\r\n\t\t},\r\n\t\tfulltime: {\r\n\t\t\tid: \"fulltime\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tdays: [1, 1, 1, 1, 1, 1, 1]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateDefaultCalendars: function () {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tthis.restoreConfigCalendars(this.defaults);\r\n\t\tthis.restoreConfigCalendars(config.worktimes);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarManager;\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Cache = __webpack_require__(87),\r\n\tutils = __webpack_require__(0);\r\n\r\nfunction CalendarWorkTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n\tthis._workingUnitsCache = new Cache();\r\n}\r\n\r\nCalendarWorkTimeStrategy.prototype = {\r\n\tunits: [\r\n\t\t\"year\",\r\n\t\t\"month\",\r\n\t\t\"week\",\r\n\t\t\"day\",\r\n\t\t\"hour\",\r\n\t\t\"minute\"\r\n\t],\r\n\t// cache previously calculated worktime\r\n\t_getUnitOrder: function (unit) {\r\n\t\tfor (var i = 0, len = this.units.length; i < len; i++) {\r\n\t\t\tif (this.units[i] == unit)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t},\r\n\t_timestamp: function (settings) {\r\n\r\n\t\tvar timestamp = null;\r\n\t\tif ((settings.day || settings.day === 0)) {\r\n\t\t\ttimestamp = settings.day;\r\n\t\t} else if (settings.date) {\r\n\t\t\t// store worktime datestamp in utc so it could be recognized in different timezones (e.g. opened locally and sent to the export service in different timezone)\r\n\t\t\ttimestamp = Date.UTC(settings.date.getFullYear(), settings.date.getMonth(), settings.date.getDate());\r\n\t\t}\r\n\t\treturn timestamp;\r\n\t},\r\n\t_checkIfWorkingUnit: function (date, unit, order) {\r\n\t\tif (order === undefined) {\r\n\t\t\torder = this._getUnitOrder(unit);\r\n\t\t}\r\n\r\n\t\t// disable worktime check for custom time units\r\n\t\tif (order === undefined) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (order) {\r\n\t\t\t//check if bigger time unit is a work time (hour < day < month...)\r\n\t\t\t//i.e. don't check particular hour if the whole day is marked as not working\r\n\t\t\tif (!this._isWorkTime(date, this.units[order - 1], order - 1))\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this[\"_is_work_\" + unit])\r\n\t\t\treturn true;\r\n\t\treturn this[\"_is_work_\" + unit](date);\r\n\t},\r\n\t//checkings for particular time units\r\n\t//methods for month-year-week can be defined, otherwise always return 'true'\r\n\t_is_work_day: function (date) {\r\n\t\tvar val = this._getWorkHours(date);\r\n\r\n\t\tif (val instanceof Array) {\r\n\t\t\treturn val.length > 0;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_is_work_hour: function (date) {\r\n\t\tvar hours = this._getWorkHours(date); // [7,12] or []\r\n\t\tvar hour = date.getHours();\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tif (hours[i + 1] === undefined) {\r\n\t\t\t\treturn hours[i] == hour;\r\n\t\t\t} else {\r\n\t\t\t\tif (hour >= hours[i] && hour < hours[i + 1])\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_internDatesPull: {},\r\n\t_nextDate: function (start, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\treturn dateHelper.add(start, step, unit);\r\n\r\n\t\t/*var start_value = +start,\r\n\t\t\tkey = unit + \"_\" + step;\r\n\t\tvar interned = this._internDatesPull[key];\r\n\t\tif(!interned){\r\n\t\t\tinterned = this._internDatesPull[key] = {};\r\n\t\t}\r\n\t\tvar calculated;\r\n\t\tif(!interned[start_value]){\r\n\t\t\tinterned[start_value] = calculated = dateHelper.add(start, step, unit);\r\n\t\t\t//interned[start_value] = dateHelper.add(start, step, unit);\r\n\t\t}\r\n\t\treturn calculated || interned[start_value];*/\r\n\t},\r\n\t_getWorkUnitsBetweenGeneric: function (from, to, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\t\tvar units = 0;\r\n\r\n\r\n\t\tvar next = null;\r\n\t\tvar stepStart,\r\n\t\t\tstepEnd;\r\n\r\n\t\t// calculating decimal durations, i.e. 2016-09-20 00:05:00 - 2016-09-20 01:00:00 ~ 0.95 instead of 1\r\n\t\t// and also  2016-09-20 00:00:00 - 2016-09-20 00:05:00 ~ 0.05 instead of 1\r\n\t\t// durations must be rounded later\r\n\t\tvar checkFirst = false;\r\n\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\tif (stepStart.valueOf() != start.valueOf()) {\r\n\t\t\tcheckFirst = true;\r\n\t\t}\r\n\t\tvar checkLast = false;\r\n\t\tstepEnd = dateHelper[unit + \"_start\"](new Date(to));\r\n\t\tif (stepEnd.valueOf() != to.valueOf()) {\r\n\t\t\tcheckLast = true;\r\n\t\t}\r\n\r\n\t\tvar isLastStep = false;\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tnext = this._nextDate(start, unit, step);\r\n\t\t\tisLastStep = (next.valueOf() > end.valueOf());\r\n\r\n\t\t\tif (this._isWorkTime(start, unit)) {\r\n\t\t\t\tif (checkFirst || (checkLast && isLastStep)) {\r\n\t\t\t\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\t\t\t\tstepEnd = dateHelper.add(stepStart, step, unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkFirst) {\r\n\t\t\t\t\tcheckFirst = false;\r\n\t\t\t\t\tnext = this._nextDate(stepStart, unit, step);\r\n\t\t\t\t\tunits += ((stepEnd.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\t\t\t\t} else if (checkLast && isLastStep) {\r\n\t\t\t\t\tcheckLast = false;\r\n\t\t\t\t\tunits += ((end.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn units;\r\n\t},\r\n\t_getHoursPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tres += ((hours[i + 1] - hours[i]) || 0);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getWorkHoursForRange: function (from, to) {\r\n\t\tvar hours = 0;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, \"day\"))\r\n\t\t\t\thours += this._getHoursPerDay(start);\r\n\t\t\tstart = this._nextDate(start, \"day\", 1);\r\n\t\t}\r\n\t\treturn hours;\r\n\t},\r\n\t_getWorkUnitsBetweenHours: function (from, to, unit, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn this._getWorkUnitsBetweenGeneric(from, to, unit, step);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getWorkUnitsBetweenGeneric(firstDayStart, firstDayEnd, unit, step);\r\n\t\t\tvar endPart = this._getWorkUnitsBetweenGeneric(lastDayStart, lastDayEnd, unit, step);\r\n\r\n\t\t\tvar hourRange = this._getWorkHoursForRange(firstDayEnd, lastDayStart);\r\n\t\t\thourRange = ((hourRange / step) + startPart + endPart);\r\n\r\n\t\t\treturn hourRange;\r\n\t\t}\r\n\t},\r\n\r\n\t_getCalendar: function () {\r\n\t\treturn this.worktime;\r\n\t},\r\n\t_setCalendar: function (settings) {\r\n\t\tthis.worktime = settings;\r\n\t},\r\n\r\n\t_tryChangeCalendarSettings: function (payload) {\r\n\t\tvar backup = JSON.stringify(this._getCalendar());\r\n\t\tpayload();\r\n\t\tif (this._isEmptyCalendar(this._getCalendar())) {\r\n\t\t\tthis.$gantt.assert(false, \"Invalid calendar settings, no worktime available\");\r\n\t\t\tthis._setCalendar(JSON.parse(backup));\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_isEmptyCalendar: function (settings) {\r\n\t\tvar result = false,\r\n\t\t\tdatesArray = [],\r\n\t\t\tisFullWeekSet = true;\r\n\t\tfor (var i in settings.dates) {\r\n\t\t\tresult |= !!settings.dates[i];\r\n\t\t\tdatesArray.push(i);\r\n\t\t}\r\n\r\n\t\tvar checkFullArray = [];\r\n\t\tfor (var i = 0; i < datesArray.length; i++) {\r\n\t\t\tif (datesArray[i] < 10) {\r\n\t\t\t\tcheckFullArray.push(datesArray[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckFullArray.sort();\r\n\r\n\t\tfor (var i = 0; i < 7; i++) {\r\n\t\t\tif (checkFullArray[i] != i)\r\n\t\t\t\tisFullWeekSet = false;\r\n\t\t}\r\n\t\tif (isFullWeekSet)\r\n\t\t\treturn !result;\r\n\t\treturn !(result || !!settings.hours); // can still return false if separated dates are set to true\r\n\t},\r\n\r\n\tgetWorkHours: function () {\r\n\t\tvar config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn this._getWorkHours(config.date);\r\n\t},\r\n\t_getWorkHours: function (date) {\r\n\t\tvar t = this._timestamp({date: date});\r\n\t\tvar hours = true;\r\n\t\tvar calendar = this._getCalendar();\r\n\t\tif (calendar.dates[t] !== undefined) {\r\n\t\t\thours = calendar.dates[t];//custom day\r\n\t\t} else if (calendar.dates[date.getDay()] !== undefined) {\r\n\t\t\thours = calendar.dates[date.getDay()];//week day\r\n\t\t}\r\n\t\tif (hours === true) {\r\n\t\t\treturn calendar.hours;\r\n\t\t} else if (hours) {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t\treturn [];\r\n\t},\r\n\r\n\tsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tvar hours = settings.hours !== undefined ? settings.hours : true;\r\n\t\t\tvar timestamp = this._timestamp(settings);\r\n\t\t\tif (timestamp !== null) {\r\n\t\t\t\tthis._getCalendar().dates[timestamp] = hours;\r\n\t\t\t} else {\r\n\t\t\t\tthis._getCalendar().hours = hours;\r\n\t\t\t}\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\tunsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tif (!settings) {\r\n\t\t\t\tthis.reset_calendar();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar timestamp = this._timestamp(settings);\r\n\r\n\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\tdelete this._getCalendar().dates[timestamp];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Clear work units cache\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\t_isWorkTime: function (date, unit, order) {\r\n\t\t//Check if this item has in the cache\r\n\t\tvar is_work_unit = this._workingUnitsCache.get(unit, date);\r\n\r\n\t\tif (is_work_unit == -1) {\r\n\t\t\t// calculate if not cached\r\n\t\t\tis_work_unit = this._checkIfWorkingUnit(date, unit, order);\r\n\t\t\tthis._workingUnitsCache.put(unit, date, is_work_unit);\r\n\t\t}\r\n\r\n\t\treturn is_work_unit;\r\n\t},\r\n\r\n\tisWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.isWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._isWorkTime(config.date, config.unit);\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tif (!config.unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar res = 0;\r\n\t\tif (config.unit == \"hour\") {\r\n\t\t\tres = this._getWorkUnitsBetweenHours(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t} else {\r\n\t\t\tres = this._getWorkUnitsBetweenGeneric(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t}\r\n\r\n\t\t// getDuration.. returns decimal durations\r\n\t\treturn Math.round(res);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, unit))\r\n\t\t\t\treturn true;\r\n\t\t\tstart = this._nextDate(start, unit, step);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config =  this.argumentsHelper.calculateEndDateArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tvar mult = (config.duration >= 0) ? 1 : -1;\r\n\t\treturn this._calculateEndDate(from, duration, unit, step * mult);\r\n\t},\r\n\t_calculateEndDate: function (from, duration, unit, step) {\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tvar start = new Date(from),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar next = this._nextDate(start, unit, step);\r\n\t\t\t//if(this.isWorkTime(step > 0 ? start : next, unit))\r\n\t\t\tif (this._isWorkTime(step > 0 ? new Date(next.valueOf() - 1) : new Date(next.valueOf() + 1), unit))\r\n\t\t\t\tadded++;\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn start;\r\n\t},\r\n\r\n\tgetClosestWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.getClosestWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._getClosestWorkTime(config);\r\n\t},\r\n\r\n\t_getClosestWorkTime: function (settings) {\r\n\t\tif (this._isWorkTime(settings.date, settings.unit))\r\n\t\t\treturn settings.date;\r\n\r\n\t\tvar unit = settings.unit;\r\n\r\n\t\tvar curr = this.$gantt.date[unit + '_start'](settings.date);\r\n\r\n\t\tvar future_target = new Date(curr),\r\n\t\t\tprev_target = new Date(curr),\r\n\t\t\ttick = true,\r\n\t\t\tmaximum_loop = 3000,//be extra sure we won't fall into infinite loop, 3k seems big enough\r\n\t\t\tcount = 0,\r\n\t\t\tboth_directins = (settings.dir == 'any' || !settings.dir);\r\n\r\n\t\tvar inc = 1;\r\n\t\tif (settings.dir == 'past')\r\n\t\t\tinc = -1;\r\n\r\n\t\t//will seek closest working hour in future or in past, one step in one direction per iteration\r\n\t\twhile (!this._isWorkTime(curr, unit)) {\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tcurr = tick ? future_target : prev_target;\r\n\t\t\t\tinc = inc * (-1);\r\n\t\t\t}\r\n\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\tcurr = this.$gantt.date.add(curr, inc, unit);\r\n\r\n\t\t\tcurr = this.$gantt._correct_dst_change(curr, tzOffset, inc, unit);\r\n\t\t\tif (this.$gantt.date[unit + '_start'])\r\n\t\t\t\tcurr = this.$gantt.date[unit + '_start'](curr);\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tfuture_target = curr;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprev_target = curr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttick = !tick;\r\n\t\t\tcount++;\r\n\t\t\tif (count > maximum_loop) {\r\n\t\t\t\tthis.$gantt.assert(false, \"Invalid working time check\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (curr == prev_target || settings.dir == 'past') {\r\n\t\t\tcurr = this.$gantt.date.add(curr, 1, unit);\r\n\t\t}\r\n\r\n\t\treturn curr;\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarWorkTimeStrategy;\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports) {\n\nfunction WorkUnitsCache() {\r\n\tthis._cache = {};\r\n}\r\n\r\nWorkUnitsCache.prototype = {\r\n\t// cache previously calculated worktime\r\n\tget: function (unit, date) {\r\n\t\tvar result = -1;// default value (if not existed in the cache)\r\n\r\n\t\tvar cache = this._cache;\r\n\t\tif (cache && cache[unit]) {\r\n\t\t\tvar units = cache[unit];\r\n\t\t\tvar time = date.getTime();\r\n\t\t\tif (units[time] !== undefined)\r\n\t\t\t\tresult = units[time];\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\tput: function (unit, date, value) {\r\n\t\tif (!unit || !date) return false;\r\n\r\n\t\tvar cache = this._cache;\r\n\r\n\t\tvar time = date.getTime();\r\n\r\n\t\tvalue = !!value;\r\n\r\n\t\tif (!cache) return false;\r\n\t\tif (!cache[unit]) cache[unit] = {};\r\n\t\tcache[unit][time] = value;\r\n\t\treturn true;\r\n\t},\r\n\r\n\tclear: function () {\r\n\t\tthis._cache = {};\r\n\t}\r\n};\r\n\r\nmodule.exports = WorkUnitsCache;\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar createArgumentsHelper = __webpack_require__(21),\r\n\tNoWorkTimeCalendar = __webpack_require__(89);\r\n\r\nfunction TimeCalculator(calendarManager){\r\n\r\n\tthis.$gantt = calendarManager.$gantt;\r\n\tthis.argumentsHelper = createArgumentsHelper(this.$gantt);\r\n\tthis.calendarManager = calendarManager;\r\n\tthis.$disabledCalendar = new NoWorkTimeCalendar(this.$gantt, this.argumentsHelper);\r\n}\r\n\r\nTimeCalculator.prototype = {\r\n\t_getCalendar: function (config) {\r\n\t\tvar calendar;\r\n\t\tif (!this.$gantt.$services.config().work_time) {\r\n\t\t\tcalendar = this.$disabledCalendar;\r\n\t\t} else {\r\n\t\t\tvar manager = this.calendarManager;\r\n\t\t\tif (config.task) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config.task);\r\n\t\t\t} else if (config.id) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config);\r\n\t\t\t} else if (config.calendar) {\r\n\t\t\t\tcalendar = config.calendar;\r\n\t\t\t}\r\n\t\t\tif (!calendar) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetWorkHours: function (config) {\r\n\t\tconfig = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getWorkHours(config.date);\r\n\t},\r\n\r\n\tsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.setWorkTime(config);\r\n\t},\r\n\r\n\tunsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.unsetWorkTime(config);\r\n\t},\r\n\tisWorkTime: function (date, unit, task, calendar) {\r\n\t\tvar config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tcalendar = this._getCalendar(config);\r\n\t\treturn calendar.isWorkTime(config);\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tconfig = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getClosestWorkTime(config);\r\n\t},\r\n\r\n\tcalculateDuration: function () { // start_date_date, end_date, task\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateDuration(config);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.hasDuration(config);\r\n\t},\r\n\tcalculateEndDate: function (config) { // start_date, duration, unit, task\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateEndDate(config);\r\n\t}\r\n};\r\n\r\nmodule.exports = TimeCalculator;\r\n\r\n\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports) {\n\nfunction CalendarDisabledTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n}\r\n\r\nCalendarDisabledTimeStrategy.prototype = {\r\n\tgetWorkHours: function () {\r\n\t\treturn [0, 24];\r\n\t},\r\n\tsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tunsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tisWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tvar config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn config.date;\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this._calculateDuration(from, to, unit, step);\r\n\t},\r\n\t_calculateDuration: function (start, end, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar fixedUnits = {\r\n\t\t\t\"week\": 1000 * 60 * 60 * 24 * 7,\r\n\t\t\t\"day\": 1000 * 60 * 60 * 24,\r\n\t\t\t\"hour\": 1000 * 60 * 60,\r\n\t\t\t\"minute\": 1000 * 60\r\n\t\t};\r\n\r\n\t\tvar res = 0;\r\n\t\tif (fixedUnits[unit]) {\r\n\t\t\tres = Math.round((end - start) / (step * fixedUnits[unit]));\r\n\t\t} else {\r\n\t\t\tvar from = new Date(start),\r\n\t\t\t\tto = new Date(end);\r\n\t\t\twhile (from.valueOf() < to.valueOf()) {\r\n\t\t\t\tres += 1;\r\n\t\t\t\tfrom = dateHelper.add(from, step, unit);\r\n\t\t\t}\r\n\r\n\t\t\tif (from.valueOf() != end.valueOf()) {\r\n\t\t\t\tres += (to - from) / (dateHelper.add(from, step, unit) - from);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.round(res);\r\n\t},\r\n\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfrom = new Date(from);\r\n\t\tto = new Date(to);\r\n\r\n\t\treturn (from.valueOf() < to.valueOf());\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar start = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this.$gantt.date.add(start, step * duration, unit);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarDisabledTimeStrategy;\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// TODO: rework public api for date methods\r\nvar utils = __webpack_require__(0);\r\n\r\nvar createWorktimeFacade = function(calendarManager, timeCalculator){\r\n\treturn {\r\n\t\tgetWorkHours: function (date) {\r\n\t\t\treturn timeCalculator.getWorkHours(date);\r\n\t\t},\r\n\r\n\t\tsetWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.setWorkTime(config);\r\n\t\t},\r\n\r\n\t\tunsetWorkTime: function (config) {\r\n\t\t\ttimeCalculator.unsetWorkTime(config);\r\n\t\t},\r\n\r\n\t\tisWorkTime: function (date, unit, task) {\r\n\t\t\treturn timeCalculator.isWorkTime(date, unit, task);\r\n\t\t},\r\n\r\n\t\tgetClosestWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.getClosestWorkTime(config);\r\n\t\t},\r\n\r\n\t\tcalculateDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.calculateDuration(start_date, end_date, task);\r\n\t\t},\r\n\t\t_hasDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.hasDuration(start_date, end_date, task);\r\n\t\t},\r\n\r\n\t\tcalculateEndDate: function (start, duration, unit, task) {\r\n\t\t\treturn timeCalculator.calculateEndDate(start, duration, unit, task);\r\n\t\t},\r\n\r\n\t\tcreateCalendar: utils.bind(calendarManager.createCalendar, calendarManager),\r\n\t\taddCalendar: utils.bind(calendarManager.addCalendar, calendarManager),\r\n\t\tgetCalendar: utils.bind(calendarManager.getCalendar, calendarManager),\r\n\t\tgetCalendars: utils.bind(calendarManager.getCalendars, calendarManager),\r\n\t\tgetTaskCalendar: utils.bind(calendarManager.getTaskCalendar, calendarManager),\r\n\t\tdeleteCalendar: utils.bind(calendarManager.deleteCalendar, calendarManager)\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = { create: createWorktimeFacade };\r\n\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dateHelper = __webpack_require__(4),\r\n\thelpers = __webpack_require__(7);\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.isUnscheduledTask = function (task) {\r\n\t\treturn (!!task.unscheduled || !task.start_date);\r\n\t};\r\n\r\n\tgantt._isAllowedUnscheduledTask = function (task) {\r\n\t\treturn !!(task.unscheduled && gantt.config.show_unscheduled);\r\n\t};\r\n\r\n\tgantt.isTaskVisible = function (id) {\r\n\t\tif (!this.isTaskExists(id))\r\n\t\t\treturn false;\r\n\r\n\t\tvar task = this.getTask(id),\r\n\t\t\ttype = this.getTaskType(task.type);\r\n\r\n\t\tif (!((+task.start_date <= +this._max_date && +task.end_date >= +this._min_date) || gantt._isAllowedUnscheduledTask(task))){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn !!(gantt.getGlobalTaskIndex(id) >= 0);\r\n\t};\r\n\r\n\tgantt._defaultTaskDate = function (item, parent_id) {\r\n\t\tvar parent = (parent_id && parent_id != this.config.root_id) ? this.getTask(parent_id) : false,\r\n\t\t\tstartDate = '';\r\n\t\tif (parent) {\r\n\t\t\tstartDate = parent.start_date;\r\n\t\t} else {\r\n\t\t\tvar first = this.getTaskByIndex(0);\r\n\t\t\tstartDate = first ? (first.start_date ? first.start_date : (first.end_date ? this.calculateEndDate({\r\n\t\t\t\tstart_date: first.end_date,\r\n\t\t\t\tduration: -this.config.duration_step\r\n\t\t\t}) : '')) : this.config.start_date || this.getState().min_date;\r\n\t\t}\r\n\t\tgantt.assert(startDate, \"Invalid dates\");\r\n\t\treturn new Date(startDate);\r\n\t};\r\n\r\n\tgantt._set_default_task_timing = function (task) {\r\n\t\ttask.start_date = task.start_date || gantt._defaultTaskDate(task, this.getParent(task));\r\n\t\ttask.duration = task.duration || this.config.duration_step;\r\n\t\ttask.end_date = task.end_date || this.calculateEndDate(task);\r\n\t};\r\n\r\n\tgantt.createTask = function (item, parent, index) {\r\n\t\titem = item || {};\r\n\t\tif (!gantt.defined(item.id))\r\n\t\t\titem.id = gantt.uid();\r\n\r\n\t\tif (!item.start_date) {\r\n\t\t\titem.start_date = gantt._defaultTaskDate(item, parent);\r\n\t\t}\r\n\t\tif (item.text === undefined) {\r\n\t\t\titem.text = gantt.locale.labels.new_task;\r\n\t\t}\r\n\t\tif (item.duration === undefined) {\r\n\t\t\titem.duration = 1;\r\n\t\t}\r\n\r\n\t\tif (parent) {\r\n\t\t\tthis.setParent(item, parent, true);\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tparentObj.$open = true;\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onTaskCreated\", [item])) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.config.details_on_create) {\r\n\t\t\titem.$new = true;\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.addItem(item, index);\r\n\t\t\t});\r\n\t\t\tthis.selectTask(item.id);\r\n\t\t\tthis.refreshData();\r\n\t\t\tthis.showLightbox(item.id);\r\n\t\t} else {\r\n\t\t\tif (this.addTask(item, parent, index)) {\r\n\t\t\t\tthis.showTask(item.id);\r\n\t\t\t\tthis.selectTask(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn item.id;\r\n\t};\r\n\r\n\tgantt._update_flags = function (oldid, newid) {\r\n\t\t//  TODO: need a proper way to update all possible flags\r\n\t\tvar store = gantt.$data.tasksStore;\r\n\t\tif (oldid === undefined) {\r\n\t\t\tthis._lightbox_id = null;\r\n\r\n\t\t\tstore.silent(function(){\r\n\t\t\t\tstore.unselect();\r\n\t\t\t});\r\n\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._lightbox_id == oldid)\r\n\t\t\t\tthis._lightbox_id = newid;\r\n\r\n\t\t\tif (store.getSelectedId() == oldid) {\r\n\t\t\t\tstore.silent(function(){\r\n\t\t\t\t\tstore.unselect(oldid);\r\n\t\t\t\t\tstore.select(newid);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag && this._tasks_dnd.drag.id == oldid) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._get_task_timing_mode = function (task, force) {\r\n\t\tvar task_type = this.getTaskType(task.type);\r\n\r\n\t\tvar state = {\r\n\t\t\ttype: task_type,\r\n\t\t\t$no_start: false,\r\n\t\t\t$no_end: false\r\n\t\t};\r\n\r\n\t\tif (!force && task_type == task.$rendered_type) {\r\n\t\t\tstate.$no_start = task.$no_start;\r\n\t\t\tstate.$no_end = task.$no_end;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.project) {\r\n\t\t\t//project duration is always defined by children duration\r\n\t\t\tstate.$no_end = state.$no_start = true;\r\n\t\t} else if (task_type != this.config.types.milestone) {\r\n\t\t\t//tasks can have fixed duration, children duration(as projects), or one date fixed, and other defined by nested items\r\n\t\t\tstate.$no_end = !(task.end_date || task.duration);\r\n\t\t\tstate.$no_start = !task.start_date;\r\n\r\n\t\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\t\tstate.$no_end = state.$no_start = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t};\r\n\r\n\tgantt._init_task_timing = function (task) {\r\n\t\tvar task_mode = gantt._get_task_timing_mode(task, true);\r\n\r\n\t\tvar dirty = task.$rendered_type != task_mode.type;\r\n\r\n\t\tvar task_type = task_mode.type;\r\n\r\n\t\tif (dirty) {\r\n\t\t\ttask.$no_start = task_mode.$no_start;\r\n\t\t\ttask.$no_end = task_mode.$no_end;\r\n\t\t\ttask.$rendered_type = task_mode.type;\r\n\t\t}\r\n\r\n\t\tif (dirty && task_type != this.config.types.milestone) {\r\n\t\t\tif (task_type == this.config.types.project) {\r\n\t\t\t\t//project duration is always defined by children duration\r\n\t\t\t\tthis._set_default_task_timing(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.milestone) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\t\tif (task.start_date && task.end_date) {\r\n\t\t\ttask.duration = this.calculateDuration(task);\r\n\t\t}\r\n\t\ttask.duration = task.duration || 0;\r\n\t};\r\n\r\n\tgantt.isSummaryTask = function (task) {\r\n\t\tvar mode = gantt._get_task_timing_mode(task);\r\n\r\n\t\treturn !!(mode.$no_end || mode.$no_start);\r\n\t};\r\n\r\n// downward calculation of project duration\r\n\tgantt.resetProjectDates = function (task) {\r\n\t\tvar taskMode = this._get_task_timing_mode(task);\r\n\t\tif (taskMode.$no_end || taskMode.$no_start) {\r\n\t\t\tvar dates = this.getSubtaskDates(task.id);\r\n\t\t\tthis._assign_project_dates(task, dates.start_date, dates.end_date);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.getSubtaskDuration = function (task_id) {\r\n\t\tvar res = 0,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tres += child.duration;\r\n\t\t}, root);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\tgantt.getSubtaskDates = function (task_id) {\r\n\t\tvar min = null,\r\n\t\t\tmax = null,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif ((child.start_date && !child.$no_start) && (!min || min > child.start_date.valueOf()))\r\n\t\t\t\tmin = child.start_date.valueOf();\r\n\t\t\tif ((child.end_date && !child.$no_end) && (!max || max < child.end_date.valueOf()))\r\n\t\t\t\tmax = child.end_date.valueOf();\r\n\t\t}, root);\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: min ? new Date(min) : null,\r\n\t\t\tend_date: max ? new Date(max) : null\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._assign_project_dates = function (task, from, to) {\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\tif (taskTiming.$no_start) {\r\n\t\t\tif (from && from != Infinity) {\r\n\t\t\t\ttask.start_date = new Date(from);\r\n\t\t\t} else {\r\n\t\t\t\ttask.start_date = this._defaultTaskDate(task, this.getParent(task));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_end) {\r\n\t\t\tif (to && to != -Infinity) {\r\n\t\t\t\ttask.end_date = new Date(to);\r\n\t\t\t} else {\r\n\t\t\t\ttask.end_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\tduration: this.config.duration_step,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tthis._init_task_timing(task);\r\n\t\t}\r\n\t};\r\n\r\n// upward calculation of project duration\r\n\tgantt._update_parents = function (taskId, silent) {\r\n\t\tif (!taskId) return;\r\n\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tvar pid = this.getParent(task);\r\n\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\r\n\t\tvar has_changed = true;\r\n\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tvar oldStart = task.start_date.valueOf(),\r\n\t\t\t\toldEnd = task.end_date.valueOf();\r\n\r\n\t\t\tgantt.resetProjectDates(task);\r\n\r\n\t\t\t// not refresh parent projects if dates hasn't changed\r\n\t\t\tif (oldStart == task.start_date.valueOf() && oldEnd == task.end_date.valueOf()) {\r\n\t\t\t\thas_changed = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (has_changed && !silent) {\r\n\t\t\t\tthis.refreshTask(task.id, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (has_changed && pid && this.isTaskExists(pid)) {\r\n\t\t\tthis._update_parents(pid, silent);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.roundDate = function (config) {\r\n\t\tif (dateHelper.isDate(config)) {\r\n\t\t\tconfig = {\r\n\t\t\t\tdate: config,\r\n\t\t\t\tunit: gantt.getScale().unit,\r\n\t\t\t\tstep: gantt.getScale().step\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar date = config.date,\r\n\t\t\tsteps = config.step,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tvar scale = gantt.getScale();\r\n\t\tvar upper, lower, colIndex;\r\n\t\tif (unit == scale.unit && steps == scale.step &&\r\n\t\t\t+date >= +gantt._min_date && +date <= +gantt._max_date) {\r\n\t\t\t//find date in time scale config\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tif (!gantt.getScale().trace_x[colIndex]) {\r\n\t\t\t\tcolIndex -= 1;// end of time scale\r\n\t\t\t\tif(scale.rtl){\r\n\t\t\t\t\tcolIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlower = new Date(gantt.getScale().trace_x[colIndex]);\r\n\t\t\tupper = gantt.date.add(lower, steps, unit);\r\n\t\t} else {\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tupper = gantt.date[unit + \"_start\"](new Date(this._min_date));\r\n\t\t\tif (scale.trace_x[colIndex]) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](scale.trace_x[colIndex]);// end of time scale\r\n\t\t\t}\r\n\r\n\t\t\twhile (+upper < +date) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.date.add(upper, steps, unit));\r\n\r\n\t\t\t\tvar tzOffset = upper.getTimezoneOffset();\r\n\r\n\t\t\t\tupper = gantt._correct_dst_change(upper, tzOffset, upper, unit);\r\n\t\t\t\tif (gantt.date[unit + '_start'])\r\n\t\t\t\t\tupper = gantt.date[unit + '_start'](upper);\r\n\t\t\t}\r\n\r\n\t\t\tlower = gantt.date.add(upper, -1 * steps, unit);\r\n\r\n\t\t}\r\n\t\tif (config.dir && config.dir == 'future')\r\n\t\t\treturn upper;\r\n\t\tif (config.dir && config.dir == 'past')\r\n\t\t\treturn lower;\r\n\r\n\t\tif (Math.abs(date - lower) < Math.abs(upper - date)) {\r\n\t\t\treturn lower;\r\n\t\t} else {\r\n\t\t\treturn upper;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tgantt.correctTaskWorkTime = function (task) {\r\n\t\tif (gantt.config.work_time && gantt.config.correct_work_time) {\r\n\t\t\tif (!this.isWorkTime(task.start_date, undefined, task)) {\r\n\t\t\t\ttask.start_date = this.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!this.isWorkTime(new Date(+task.end_date - 1), undefined, task)) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeTaskAdd\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\r\n};\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = function(gantt) {\r\n\tvar domHelpers = __webpack_require__(1),\r\n\t\thelpers = __webpack_require__(7);\r\n\r\n\tgantt._lightbox_methods = {};\r\n\tgantt._lightbox_template = \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\";\r\n\r\n\r\n\t//TODO: gantt._lightbox_id is changed from data.js and accessed from autoscheduling, check if it can be removed from gantt object\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"lightbox\", function(){\r\n\t\treturn {\r\n\t\t\tlightbox: gantt._lightbox_id\r\n\t\t};\r\n\t});\r\n\r\n\tgantt.showLightbox = function (id) {\r\n\t\tif (!id || gantt.isReadonly(this.getTask(id))) return;\r\n\t\tif (!this.callEvent(\"onBeforeLightbox\", [id])) return;\r\n\r\n\t\tvar task = this.getTask(id);\r\n\r\n\t\tvar box = this.getLightbox(this.getTaskType(task.type));\r\n\t\tthis._center_lightbox(box);\r\n\t\tthis.showCover();\r\n\t\tthis._fill_lightbox(id, box);\r\n\r\n\t\tthis._waiAria.lightboxVisibleAttr(box);\r\n\r\n\t\tthis.callEvent(\"onLightbox\", [id]);\r\n\t};\r\n\r\n\tfunction _is_chart_visible(gantt) {\r\n\t\tvar timeline = gantt.$ui.getView(\"timeline\");\r\n\t\tif(timeline && timeline.isVisible()){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt._get_timepicker_step = function () {\r\n\t\tif (this.config.round_dnd_dates) {\r\n\t\t\tvar scale = gantt.getScale(),\r\n\t\t\t\tstep = (helpers.getSecondsInUnit(scale.unit) * scale.step) / 60;//timepicker step is measured in minutes\r\n\t\t\tif (step >= 60 * 24 || !_is_chart_visible(this)) {\r\n\t\t\t\tstep = this.config.time_step;\r\n\t\t\t}\r\n\t\t\treturn step;\r\n\t\t}\r\n\t\treturn this.config.time_step;\r\n\t};\r\n\tgantt.getLabel = function (property, key) {\r\n\t\tvar sections = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sections.length; i++) {\r\n\t\t\tif (sections[i].map_to == property) {\r\n\t\t\t\tvar options = sections[i].options;\r\n\t\t\t\tfor (var j = 0; j < options.length; j++) {\r\n\t\t\t\t\tif (options[j].key == key) {\r\n\t\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\r\n\tgantt.updateCollection = function (list_name, collection) {\r\n\t\tcollection = collection.slice(0);\r\n\t\tvar list = gantt.serverList(list_name);\r\n\t\tif (!list) return false;\r\n\t\tlist.splice(0, list.length);\r\n\t\tlist.push.apply(list, collection || []);\r\n\t\tgantt.resetLightbox();\r\n\t};\r\n\tgantt.getLightboxType = function () {\r\n\t\treturn this.getTaskType(this._lightbox_type);\r\n\t};\r\n\tgantt.getLightbox = function (type) {\r\n\t\tif (type === undefined)\r\n\t\t\ttype = this.getLightboxType();\r\n\r\n\t\tif (!this._lightbox || this.getLightboxType() != this.getTaskType(type)) {\r\n\t\t\tthis._lightbox_type = this.getTaskType(type);\r\n\t\t\tvar d = document.createElement(\"DIV\");\r\n\t\t\td.className = \"gantt_cal_light\";\r\n\r\n\t\t\tvar full_width = this._is_lightbox_timepicker();\r\n\t\t\tif (gantt.config.wide_form || full_width)\r\n\t\t\t\td.className += \" gantt_cal_light_wide\";\r\n\r\n\t\t\tif (full_width) {\r\n\t\t\t\tgantt.config.wide_form = true;\r\n\t\t\t\td.className += \" gantt_cal_light_full\";\r\n\t\t\t}\r\n\r\n\r\n\t\t\td.style.visibility = \"hidden\";\r\n\r\n\t\t\tvar html = this._lightbox_template;\r\n\r\n\t\t\tvar ariaAttr;\r\n\t\t\tvar buttons = this.config.buttons_left;\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\t// needed to migrate from 'dhx_something' to 'gantt_something' naming in a lightbox\r\n\t\t\t\tvar button = this.config._migrate_buttons[buttons[i]] ? this.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\r\n\t\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(button);\r\n\t\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_left_btn_set \" + button + \"_set'><div dhx_button='1' class='\" + button + \"'></div><div>\" + this.locale.labels[button] + \"</div></div>\";\r\n\r\n\t\t\t}\r\n\t\t\tbuttons = this.config.buttons_right;\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\tvar button = this.config._migrate_buttons[buttons[i]] ? this.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\t\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(button);\r\n\r\n\t\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_right_btn_set \" + button + \"_set' style='float:right;'><div dhx_button='1' class='\" + button + \"'></div><div>\" + this.locale.labels[button] + \"</div></div>\";\r\n\r\n\t\t\t}\r\n\t\t\thtml += \"</div>\";\r\n\t\t\td.innerHTML = html;\r\n\r\n\t\t\tgantt._waiAria.lightboxAttr(d);\r\n\r\n\t\t\tif (gantt.config.drag_lightbox) {\r\n\t\t\t\td.firstChild.onmousedown = gantt._ready_to_dnd;\r\n\t\t\t\td.firstChild.onselectstart = function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t\td.firstChild.style.cursor = \"pointer\";\r\n\t\t\t\tgantt._init_dnd_events();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.insertBefore(d, document.body.firstChild);\r\n\t\t\tthis._lightbox = d;\r\n\r\n\t\t\tvar sns = this._get_typed_lightbox_config(type);\r\n\t\t\thtml = this._render_sections(sns);\r\n\r\n\t\t\tvar ds = d.getElementsByTagName(\"div\");\r\n\t\t\tfor (var i = 0; i < ds.length; i++) {\r\n\t\t\t\tvar t_ds = ds[i];\r\n\t\t\t\tif (t_ds.className == \"gantt_cal_larea\") {\r\n\t\t\t\t\tt_ds.innerHTML = html;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// bind labels to lightbox inputs\r\n\t\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\t\tvar section = sns[i];\r\n\t\t\t\tif (!section.id || !document.getElementById(section.id))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar labelBlock = document.getElementById(section.id);\r\n\t\t\t\tvar label = labelBlock.querySelector(\"label\");\r\n\t\t\t\tvar inputBlock = labelBlock.nextSibling;\r\n\t\t\t\tif (!inputBlock)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar input = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\t\tif (input) {\r\n\t\t\t\t\tsection.inputId = input.id || \"input_\" + gantt.uid();\r\n\t\t\t\t\tif (!input.id)\r\n\t\t\t\t\t\tinput.id = section.inputId;\r\n\r\n\t\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//sizes\r\n\t\t\tthis.resizeLightbox();\r\n\r\n\t\t\tthis._init_lightbox_events(this);\r\n\t\t\td.style.display = \"none\";\r\n\t\t\td.style.visibility = \"visible\";\r\n\t\t}\r\n\t\treturn this._lightbox;\r\n\t};\r\n\r\n\tgantt._render_sections = function (sns) {\r\n\t\tvar html = \"\";\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id = \"area_\" + this.uid();\r\n\r\n\t\t\tvar display = sns[i].hidden ? \" style='display:none'\" : \"\";\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button) {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button' index='\" + i + \"'><div class='gantt_custom_button_\" + sns[i].button + \"'></div><div class='gantt_custom_button_label'>\" + this.locale.labels[\"button_\" + sns[i].button] + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (this.config.wide_form) {\r\n\t\t\t\thtml += \"<div class='gantt_wrap_section' \" + display + \">\";\r\n\t\t\t}\r\n\t\t\thtml += \"<div id='\" + sns[i].id + \"' class='gantt_cal_lsection'><label>\" + button + this.locale.labels[\"section_\" + sns[i].name] + \"</label></div>\" + block.render.call(this, sns[i]);\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t};\r\n\r\n\r\n\tgantt.resizeLightbox = function () {\r\n\t\tvar d = this._lightbox;\r\n\t\tif (!d) return;\r\n\r\n\t\tvar con = d.childNodes[1];\r\n\t\tcon.style.height = \"0px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\";\r\n\t\td.style.height = con.scrollHeight + this.config.lightbox_additional_height + \"px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\"; //it is incredible , how ugly IE can be\r\n\r\n\r\n\t};\r\n\r\n\tgantt._center_lightbox = function (box) {\r\n\t\tif (box) {\r\n\t\t\tbox.style.display = \"block\";\r\n\r\n\t\t\tvar scroll_top = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\r\n\t\t\tvar scroll_left = window.pageXOffset || document.body.scrollLeft || document.documentElement.scrollLeft;\r\n\r\n\t\t\tvar view_height = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n\t\t\tif (scroll_top) // if vertical scroll on window\r\n\t\t\t\tbox.style.top = Math.round(scroll_top + Math.max((view_height - box.offsetHeight) / 2, 0)) + \"px\";\r\n\t\t\telse // vertical scroll on body\r\n\t\t\t\tbox.style.top = Math.round(Math.max(((view_height - box.offsetHeight) / 2), 0) + 9) + \"px\"; // +9 for compatibility with auto tests\r\n\r\n\t\t\t// not quite accurate but used for compatibility reasons\r\n\t\t\tif (document.documentElement.scrollWidth > document.body.offsetWidth) // if horizontal scroll on the window\r\n\t\t\t\tbox.style.left = Math.round(scroll_left + (document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t\telse // horizontal scroll on the body\r\n\t\t\t\tbox.style.left = Math.round((document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt.showCover = function () {\r\n\t\tif (this._cover) return;\r\n\r\n\t\tthis._cover = document.createElement(\"DIV\");\r\n\t\tthis._cover.className = \"gantt_cal_cover\";\r\n\t\tvar _document_height = ((document.height !== undefined) ? document.height : document.body.offsetHeight);\r\n\t\tvar _scroll_height = ((document.documentElement) ? document.documentElement.scrollHeight : 0);\r\n\t\tthis._cover.style.height = Math.max(_document_height, _scroll_height) + 'px';\r\n\t\tdocument.body.appendChild(this._cover);\r\n\t};\r\n\r\n\r\n\tgantt._init_lightbox_events = function () {\r\n\t\tgantt.lightbox_events = {};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_save_btn\"] = function (e) {\r\n\t\t\tgantt._save_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_delete_btn\"] = function (e) {\r\n\t\t\tif (!gantt.callEvent(\"onLightboxDelete\", [gantt._lightbox_id]))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (gantt.isTaskExists(gantt._lightbox_id)) {\r\n\t\t\t\tgantt.$click.buttons[\"delete\"](gantt._lightbox_id);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.hideLightbox();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_cancel_btn\"] = function (e) {\r\n\t\t\tgantt._cancel_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"default\"] = function (e, src) {\r\n\t\t\tif (src.getAttribute(\"dhx_button\")) {\r\n\t\t\t\tgantt.callEvent(\"onLightboxButton\", [src.className, src, e]);\r\n\t\t\t} else {\r\n\t\t\t\tvar index, block, sec;\r\n\r\n\t\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\t\tif (className.indexOf(\"gantt_custom_button\") != -1) {\r\n\t\t\t\t\tif (className.indexOf(\"gantt_custom_button_\") != -1) {\r\n\t\t\t\t\t\tindex = src.parentNode.getAttribute(\"index\");\r\n\t\t\t\t\t\tsec = src;\r\n\t\t\t\t\t\twhile (sec && domHelpers.getClassName(sec).indexOf(\"gantt_cal_lsection\") == -1) {\r\n\t\t\t\t\t\t\tsec = sec.parentNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = src.getAttribute(\"index\");\r\n\t\t\t\t\t\tsec = src.parentNode;\r\n\t\t\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar sections = gantt._get_typed_lightbox_config();\r\n\r\n\t\t\t\tif (index) {\r\n\t\t\t\t\tindex = index * 1;\r\n\t\t\t\t\tblock = gantt.form_blocks[sections[index * 1].type];\r\n\t\t\t\t\tblock.button_click(index, src, sec, sec.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.event(gantt.getLightbox(), \"click\", function (e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target ? e.target : e.srcElement;\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className) {\r\n\t\t\t\tsrc = src.previousSibling;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className && className.indexOf(\"gantt_btn_set\") === 0) {\r\n\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className) {\r\n\t\t\t\tvar func = gantt.defined(gantt.lightbox_events[src.className]) ? gantt.lightbox_events[src.className] : gantt.lightbox_events[\"default\"];\r\n\t\t\t\treturn func(e, src);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tgantt.getLightbox().onkeydown = function (e) {\r\n\t\t\tvar event = e || window.event;\r\n\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\tvar buttonTarget = !!(domHelpers.getClassName(target).indexOf(\"gantt_btn_set\") > -1);\r\n\r\n\t\t\tswitch ((e || event).keyCode) {\r\n\t\t\t\tcase 32: {//space\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgantt._save_lightbox();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._cancel_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tthis.callEvent(\"onLightboxCancel\", [this._lightbox_id, task.$new]);\r\n\t\tif (gantt.isTaskExists(task.id) && task.$new) {\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.removeItem(task.id);\r\n\t\t\t\tgantt._update_flags(task.id, null);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.refreshData();\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._save_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tif (!this.callEvent(\"onLightboxSave\", [this._lightbox_id, task, !!task.$new]))\r\n\t\t\treturn;\r\n\r\n\t\tif (task.$new) {\r\n\t\t\tdelete task.$new;\r\n\t\t\tthis.addTask(task);\r\n\t\t}else if(this.isTaskExists(task.id)){\r\n\t\t\tthis.mixin(this.getTask(task.id), task, true);\r\n\t\t\tthis.refreshTask(task.id);\r\n\t\t\tthis.updateTask(task.id);\r\n\t\t}\r\n\t\tthis.refreshData();\r\n\r\n\t\t// TODO: do we need any blockable events here to prevent closing lightbox?\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._resolve_default_mapping = function (section) {\r\n\t\tvar mapping = section.map_to;\r\n\t\tvar time_controls = {\"time\": true, \"time_optional\": true, \"duration\": true, \"duration_optional\": true};\r\n\t\tif (time_controls[section.type]) {\r\n\t\t\tif (section.map_to == 'auto') {\r\n\t\t\t\tmapping = {start_date: \"start_date\", end_date: \"end_date\", duration: \"duration\"};\r\n\t\t\t} else if (typeof(section.map_to) === \"string\") {\r\n\t\t\t\tmapping = {start_date: section.map_to};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mapping;\r\n\t};\r\n\r\n\tgantt.getLightboxValues = function () {\r\n\t\tvar task = {};\r\n\r\n\t\tif (gantt.isTaskExists(this._lightbox_id)) {\r\n\t\t\ttask = this.mixin({}, this.getTask(this._lightbox_id));\r\n\t\t}\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar node = document.getElementById(sns[i].id);\r\n\t\t\tnode = (node ? node.nextSibling : node);\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue;\r\n\t\t\tvar res = block.get_value.call(this, node, task, sns[i]);\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tif (typeof map_to == \"string\" && map_to != \"auto\") {\r\n\t\t\t\ttask[map_to] = res;\r\n\t\t\t} else if (typeof map_to == \"object\") {\r\n\t\t\t\tfor (var property in map_to) {\r\n\t\t\t\t\tif (map_to[property])\r\n\t\t\t\t\t\ttask[map_to[property]] = res[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn task;\r\n\t};\r\n\r\n\r\n\tgantt.hideLightbox = function () {\r\n\t\tvar box = this.getLightbox();\r\n\t\tif (box) box.style.display = \"none\";\r\n\r\n\t\tthis._waiAria.lightboxHiddenAttr(box);\r\n\t\tthis._lightbox_id = null;\r\n\r\n\t\tthis.hideCover();\r\n\t\tthis.callEvent(\"onAfterLightbox\", []);\r\n\t};\r\n\tgantt.hideCover = function () {\r\n\t\tif (this._cover)\r\n\t\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\t\tthis._cover = null;\r\n\t};\r\n\r\n\tgantt.resetLightbox = function () {\r\n\t\tif (gantt._lightbox && !gantt._custom_lightbox)\r\n\t\t\tgantt._lightbox.parentNode.removeChild(gantt._lightbox);\r\n\t\tgantt._lightbox = null;\r\n\t};\r\n\tgantt._set_lightbox_values = function (data, box) {\r\n\t\tvar task = data;\r\n\t\tvar s = box.getElementsByTagName(\"span\");\r\n\t\tvar lightboxHeader = [];\r\n\t\tif (gantt.templates.lightbox_header) {\r\n\t\t\tlightboxHeader.push(\"\");\r\n\t\t\tlightboxHeader.push(gantt.templates.lightbox_header(task.start_date, task.end_date, task));\r\n\t\t\ts[1].innerHTML = \"\";\r\n\t\t\ts[2].innerHTML = gantt.templates.lightbox_header(task.start_date, task.end_date, task);\r\n\t\t} else {\r\n\t\t\tlightboxHeader.push(this.templates.task_time(task.start_date, task.end_date, task));\r\n\t\t\tlightboxHeader.push((this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70)); //IE6 fix\r\n\t\t\ts[1].innerHTML = this.templates.task_time(task.start_date, task.end_date, task);\r\n\t\t\ts[2].innerHTML = (this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70); //IE6 fix\r\n\t\t}\r\n\t\ts[1].innerHTML = lightboxHeader[0];\r\n\t\ts[2].innerHTML = lightboxHeader[1];\r\n\r\n\t\tgantt._waiAria.lightboxHeader(box, lightboxHeader.join(\" \"));\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config(this.getLightboxType());\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar section = sns[i];\r\n\r\n\t\t\tif (!this.form_blocks[section.type]) {\r\n\t\t\t\tcontinue;//skip incorrect sections, same check is done during rendering\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar node = document.getElementById(section.id).nextSibling;\r\n\t\t\tvar block = this.form_blocks[section.type];\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tvar value = this.defined(task[map_to]) ? task[map_to] : section.default_value;\r\n\t\t\tblock.set_value.call(gantt, node, value, task, section);\r\n\r\n\t\t\tif (section.focus)\r\n\t\t\t\tblock.focus.call(gantt, node);\r\n\t\t}\r\n\t\tif (data.id)\r\n\t\t\tgantt._lightbox_id = data.id;\r\n\t};\r\n\tgantt._fill_lightbox = function (id, box) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tthis._set_lightbox_values(task, box);\r\n\t};\r\n\r\n\r\n\tgantt.getLightboxSection = function (name) {\r\n\t\tvar config = this._get_typed_lightbox_config();\r\n\t\tvar i = 0;\r\n\t\tfor (i; i < config.length; i++)\r\n\t\t\tif (config[i].name == name)\r\n\t\t\t\tbreak;\r\n\t\tvar section = config[i];\r\n\t\tif (!section)\r\n\t\t\treturn null;\r\n\r\n\t\tif (!this._lightbox)\r\n\t\t\tthis.getLightbox();\r\n\t\tvar header = document.getElementById(section.id);\r\n\t\tvar node = header.nextSibling;\r\n\r\n\t\tvar result = {\r\n\t\t\tsection: section,\r\n\t\t\theader: header,\r\n\t\t\tnode: node,\r\n\t\t\tgetValue: function (ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].get_value.call(gantt, node, (ev || {}), section);\r\n\t\t\t},\r\n\t\t\tsetValue: function (value, ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].set_value.call(gantt, node, value, (ev || {}), section);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar handler = this._lightbox_methods[\"get_\" + section.type + \"_control\"];\r\n\t\treturn handler ? handler(result) : result;\r\n\t};\r\n\r\n\tgantt._lightbox_methods.get_template_control = function (result) {\r\n\t\tresult.control = result.node;\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_select_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('select')[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_textarea_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('textarea')[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_time_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('select'); // array\r\n\t\treturn result;\r\n\t};\r\n\r\n\r\n\tgantt._init_dnd_events = function () {\r\n\t\tthis.event(document.body, \"mousemove\", gantt._move_while_dnd);\r\n\t\tthis.event(document.body, \"mouseup\", gantt._finish_dnd);\r\n\t\tgantt._init_dnd_events = function () {\r\n\t\t};\r\n\t};\r\n\tgantt._move_while_dnd = function (e) {\r\n\t\tif (gantt._dnd_start_lb) {\r\n\t\t\tif (!document.gantt_unselectable) {\r\n\t\t\t\tdocument.body.className += \" gantt_unselectable\";\r\n\t\t\t\tdocument.gantt_unselectable = true;\r\n\t\t\t}\r\n\t\t\tvar lb = gantt.getLightbox();\r\n\t\t\tvar now = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t\t\tlb.style.top = gantt._lb_start[1] + now[1] - gantt._dnd_start_lb[1] + \"px\";\r\n\t\t\tlb.style.left = gantt._lb_start[0] + now[0] - gantt._dnd_start_lb[0] + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt._ready_to_dnd = function (e) {\r\n\t\tvar lb = gantt.getLightbox();\r\n\t\tgantt._lb_start = [parseInt(lb.style.left, 10), parseInt(lb.style.top, 10)];\r\n\t\tgantt._dnd_start_lb = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t};\r\n\tgantt._finish_dnd = function () {\r\n\t\tif (gantt._lb_start) {\r\n\t\t\tgantt._lb_start = gantt._dnd_start_lb = false;\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_unselectable\", \"\");\r\n\t\t\tdocument.gantt_unselectable = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._focus = function (node, select) {\r\n\t\tif (node && node.focus) {\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t//do not focus editor, to prevent auto-zoom\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (select && node.select) node.select();\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.form_blocks = {\r\n\t\tgetTimePicker: function (sns, hidden) {\r\n\t\t\tvar time_format = sns.time_format;\r\n\t\t\tif (!time_format) {\r\n\t\t\t\t// default order\r\n\t\t\t\tvar time_format = [\"%d\", \"%m\", \"%Y\"];\r\n\t\t\t\tif (helpers.getSecondsInUnit(gantt.getScale().unit) < helpers.getSecondsInUnit(\"day\")) {\r\n\t\t\t\t\ttime_format.push(\"%H:%i\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = {size: 0};\r\n\r\n\r\n\t\t\tvar cfg = this.config;\r\n\t\t\tvar dt = this.date.date_part(new Date(gantt._min_date.valueOf()));\r\n\t\t\tvar last = 24 * 60, first = 0;\r\n\t\t\tif (gantt.config.limit_time_select) {\r\n\t\t\t\tlast = 60 * cfg.last_hour + 1;\r\n\t\t\t\tfirst = 60 * cfg.first_hour;\r\n\t\t\t\tdt.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\t\t\tvar html = \"\";\r\n\r\n\t\t\tfor (var p = 0; p < time_format.length; p++) {\r\n\t\t\t\tvar time_option = time_format[p];\r\n\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (p > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar options = '';\r\n\t\t\t\tswitch (time_option) {\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsns._time_format_order[2] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//year\r\n\r\n\t\t\t\t\t\tvar range, offset, start_year, end_year;\r\n\r\n\t\t\t\t\t\tif (sns.year_range) {\r\n\t\t\t\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t\t\t\t// if\r\n\t\t\t\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trange = range || 10;\r\n\t\t\t\t\t\toffset = offset || Math.floor(range / 2);\r\n\t\t\t\t\t\tstart_year = start_year || dt.getFullYear() - offset;\r\n\t\t\t\t\t\tend_year = end_year || start_year + range;\r\n\r\n\r\n\t\t\t\t\t\tfor (var i = start_year; i < end_year; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsns._time_format_order[1] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//month\r\n\t\t\t\t\t\tfor (var i = 0; i < 12; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + this.locale.date.month_full[i] + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsns._time_format_order[0] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//days\r\n\t\t\t\t\t\tfor (var i = 1; i < 32; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + i + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\t\t//  var last = 24*60, first = 0;\r\n\t\t\t\t\t\tsns._time_format_order[3] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//hours\r\n\t\t\t\t\t\tvar i = first;\r\n\t\t\t\t\t\tvar tdate = dt.getDate();\r\n\t\t\t\t\t\tsns._time_values = [];\r\n\r\n\t\t\t\t\t\twhile (i < last) {\r\n\t\t\t\t\t\t\tvar time = this.templates.time_picker(dt);\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + time + \"</option>\";\r\n\t\t\t\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\t\t\t\tdt.setTime(dt.valueOf() + this._get_timepicker_step() * 60 * 1000);\r\n\t\t\t\t\t\t\tvar diff = (dt.getDate() != tdate) ? 1 : 0; // moved or not to the next day\r\n\t\t\t\t\t\t\ti = diff * 24 * 60 + dt.getHours() * 60 + dt.getMinutes();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options) {\r\n\r\n\t\t\t\t\tvar ariaAttrs = gantt._waiAria.lightboxSelectAttrString(time_option);\r\n\r\n\t\t\t\t\tvar readonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\tvar display = hidden ? \" style='display:none' \" : \"\";\r\n\t\t\t\t\thtml += \"<select \" + readonly + display + ariaAttrs + \">\" + options + \"</select>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t_fill_lightbox_select: function (s, i, d, map, cfg) {\r\n\t\t\ts[i + map[0]].value = d.getDate();\r\n\t\t\ts[i + map[1]].value = d.getMonth();\r\n\t\t\ts[i + map[2]].value = d.getFullYear();\r\n\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\tvar v = d.getHours() * 60 + d.getMinutes();\r\n\t\t\t\tv = Math.round(v / gantt._get_timepicker_step()) * gantt._get_timepicker_step();\r\n\t\t\t\tvar input = s[i + map[3]];\r\n\t\t\t\tinput.value = v;\r\n\t\t\t\t//in case option not shown\r\n\t\t\t\tinput.setAttribute('data-value', v);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"30\") + \"px\";\r\n\t\t\t\treturn \"<div class='gantt_cal_ltext gantt_cal_template' style='height:\" + height + \";'></div>\";\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tnode.innerHTML = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\treturn node.innerHTML || \"\";\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t}\r\n\t\t},\r\n\t\ttextarea: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"130\") + \"px\";\r\n\t\t\t\treturn \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><textarea></textarea></div>\";\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev) {\r\n\t\t\t\tthis.form_blocks.textarea._get_input(node).value = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev) {\r\n\t\t\t\treturn this.form_blocks.textarea._get_input(node).value;\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tvar a = this.form_blocks.textarea._get_input(node);\r\n\t\t\t\tgantt._focus(a, true);\r\n\t\t\t},\r\n\t\t\t_get_input: function (node) {\r\n\t\t\t\treturn node.querySelector(\"textarea\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tselect: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\t\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><select style='width:100%;'>\";\r\n\t\t\t\tfor (var i = 0; i < sns.options.length; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + sns.options[i].key + \"'>\" + sns.options[i].label + \"</option>\";\r\n\t\t\t\thtml += \"</select></div>\";\r\n\t\t\t\treturn html;\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, sns) {\r\n\t\t\t\tvar select = node.firstChild;\r\n\t\t\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\t\t\tselect.onchange = sns.onchange;\r\n\t\t\t\t\tselect._dhx_onchange = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof value == \"undefined\")\r\n\t\t\t\t\tvalue = (select.options[0] || {}).value;\r\n\t\t\t\tselect.value = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev) {\r\n\t\t\t\treturn node.firstChild.value;\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tvar a = node.firstChild;\r\n\t\t\t\tgantt._focus(a, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttime: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar time = this.form_blocks.getTimePicker.call(this, sns);\r\n\t\t\t\tvar parts = [\"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>\"];\r\n\t\t\t\tparts.push(time);\r\n\r\n\t\t\t\tif (sns.single_date) {\r\n\t\t\t\t\ttime = this.form_blocks.getTimePicker.call(this, sns, true);\r\n\t\t\t\t\tparts.push(\"<span></span>\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tparts.push(\"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparts.push(time);\r\n\t\t\t\tparts.push(\"</div>\");\r\n\t\t\t\treturn parts.join('');\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar cfg = config;\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\r\n\t\t\t\tvar map = config._time_format_order;\r\n\t\t\t\tvar map_size = config._time_format_size;\r\n\r\n\t\t\t\tif (cfg.auto_end_date) {\r\n\t\t\t\t\tvar _update_lightbox_select = function () {\r\n\t\t\t\t\t\tstart_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, 0, 0);\r\n\t\t\t\t\t\tend_date = gantt.calculateEndDate({start_date: start_date, duration: 1, task: ev});\r\n\t\t\t\t\t\tthis.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\t\t\ts[i].onchange = _update_lightbox_select;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\t\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\t\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\t\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tduration: 1,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\t\t\tthis.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t},\r\n\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\t\tvar hours = 0, minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar time = parseInt(s[map[3]].value, 10);\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\tvar start_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\r\n\t\t\t\thours = minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar time = parseInt(s[map.size + map[3]].value, 10);\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\tvar end_date = new Date(s[map[2] + map.size].value, s[map[1] + map.size].value, s[map[0] + map.size].value, hours, minutes);\r\n\r\n\t\t\t\tif (end_date <= start_date)\r\n\t\t\t\t\tend_date = gantt.date.add(start_date, gantt._get_timepicker_step(), \"minute\");\r\n\r\n\t\t\t\tvar mapped_fields = gantt._resolve_default_mapping(config);\r\n\r\n\t\t\t\tvar res = {\r\n\t\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\t\tend_date: new Date(end_date)\r\n\t\t\t\t};\r\n\t\t\t\tif (typeof mapped_fields == \"string\") {\r\n\t\t\t\t\treturn res.start_date;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tduration: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar time = this.form_blocks.getTimePicker.call(this, sns);\r\n\t\t\t\ttime = \"<div class='gantt_time_selects'>\" + time + \"</div>\";\r\n\t\t\t\tvar label = this.locale.labels[this.config.duration_unit + \"s\"];\r\n\r\n\t\t\t\tvar singleDate = sns.single_date ? ' style=\"display:none\"' : \"\";\r\n\t\t\t\tvar readonly = sns.readonly ? \" disabled='disabled'\" : \"\";\r\n\r\n\t\t\t\tvar ariaAttr = this._waiAria.lightboxDurationInputAttrString(sns);\r\n\r\n\t\t\t\tvar duration = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\t\t\t\"<input type='button' class='gantt_duration_dec' value=''\" + readonly + \">\" +\r\n\t\t\t\t\t\"<input type='text' value='5' class='gantt_duration_value'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \"> \" + label + \" <span></span>\" +\r\n\t\t\t\t\t\"</div>\";\r\n\t\t\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>\" + time + \" \" + duration + \"</div>\";\r\n\t\t\t\treturn html;\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar cfg = config;\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar inps = node.getElementsByTagName(\"input\");\r\n\r\n\t\t\t\tvar duration = inps[1];\r\n\t\t\t\tvar btns = [inps[0], inps[2]];\r\n\t\t\t\tvar endspan = node.getElementsByTagName(\"span\")[0];\r\n\r\n\t\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\t\tfunction _calc_date() {\r\n\t\t\t\t\tvar start_date = gantt.form_blocks.duration._get_start_date.call(gantt, node, config);\r\n\t\t\t\t\tvar duration = gantt.form_blocks.duration._get_duration.call(gantt, node, config);\r\n\t\t\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\r\n\t\t\t\t\tendspan.innerHTML = gantt.templates.task_date(end_date);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction _change_duration(step) {\r\n\t\t\t\t\tvar value = duration.value;\r\n\t\t\t\t\tvalue = parseInt(value, 10);\r\n\t\t\t\t\tif (window.isNaN(value))\r\n\t\t\t\t\t\tvalue = 0;\r\n\t\t\t\t\tvalue += step;\r\n\t\t\t\t\tif (value < 1) value = 1;\r\n\t\t\t\t\tduration.value = value;\r\n\t\t\t\t\t_calc_date();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbtns[0].onclick = gantt.bind(function () {\r\n\t\t\t\t\t_change_duration(-1 * this.config.duration_step);\r\n\t\t\t\t}, this);\r\n\t\t\t\tbtns[1].onclick = gantt.bind(function () {\r\n\t\t\t\t\t_change_duration(1 * this.config.duration_step);\r\n\t\t\t\t}, this);\r\n\t\t\t\ts[0].onchange = _calc_date;\r\n\t\t\t\ts[1].onchange = _calc_date;\r\n\t\t\t\ts[2].onchange = _calc_date;\r\n\t\t\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\t\t\t\tduration.onkeydown = gantt.bind(function (e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\t// up\r\n\t\t\t\t\tvar code = (e.charCode || e.keyCode || e.which);\r\n\r\n\t\t\t\t\tif (code == 40) {\r\n\t\t\t\t\t\t_change_duration(-1 * this.config.duration_step);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// down\r\n\t\t\t\t\tif (code == 38) {\r\n\t\t\t\t\t\t_change_duration(1 * this.config.duration_step);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twindow.setTimeout(function (e) {\r\n\t\t\t\t\t\t_calc_date();\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tduration.onchange = gantt.bind(function (e) {\r\n\t\t\t\t\t_calc_date();\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\t\t\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\t\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\t\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tduration: 1,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\t\t\t\tvar duration_val = Math.round(ev[mapping.duration]) || gantt.calculateDuration({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tend_date: end_date,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\t\t\tduration.value = duration_val;\r\n\t\t\t\t_calc_date();\r\n\t\t\t},\r\n\r\n\t\t\t_get_start_date: function (node, config) {\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar map = config._time_format_order;\r\n\t\t\t\tvar hours = 0;\r\n\t\t\t\tvar minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar input = s[map[3]];\r\n\t\t\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t\t\t},\r\n\t\t\t_get_duration: function (node, config) {\r\n\t\t\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\t\t\t\tduration = parseInt(duration.value, 10);\r\n\t\t\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\t\t\tif (duration < 0) duration *= -1;\r\n\t\t\t\treturn duration;\r\n\t\t\t},\r\n\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\tvar start_date = gantt.form_blocks.duration._get_start_date(node, config);\r\n\t\t\t\tvar duration = gantt.form_blocks.duration._get_duration(node, config);\r\n\r\n\t\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\t\t\t\tvar mapped_fields = gantt._resolve_default_mapping(config);\r\n\t\t\t\tvar res = {\r\n\t\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\t\tend_date: new Date(end_date),\r\n\t\t\t\t\tduration: duration\r\n\t\t\t\t};\r\n\t\t\t\tif (typeof mapped_fields == \"string\") {\r\n\t\t\t\t\treturn res.start_date;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tparent: {\r\n\t\t\t_filter: function (options, config, item_id) {\r\n\t\t\t\tvar filter = config.filter || function () {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\r\n\t\t\t\toptions = options.slice(0);\r\n\r\n\t\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\t\tvar task = options[i];\r\n\t\t\t\t\tif (task.id == item_id || gantt.isChildOf(task.id, item_id) || filter(task.id, task) === false) {\r\n\t\t\t\t\t\toptions.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn options;\r\n\t\t\t},\r\n\r\n\t\t\t_display: function (config, item_id) {\r\n\t\t\t\tvar tasks = [],\r\n\t\t\t\t\toptions = [];\r\n\t\t\t\tif (item_id) {\r\n\t\t\t\t\ttasks = gantt.getTaskByTime();\r\n\t\t\t\t\tif (config.allow_root) {\r\n\t\t\t\t\t\ttasks.unshift({id: gantt.config.root_id, text: config.root_label || \"\"});\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = this._filter(tasks, config, item_id);\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\ttasks.sort(config.sort);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar text = config.template || gantt.templates.task_text;\r\n\t\t\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\t\t\tvar label = text.apply(gantt, [tasks[i].start_date, tasks[i].end_date, tasks[i]]);\r\n\t\t\t\t\tif (label === undefined) {\r\n\t\t\t\t\t\tlabel = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptions.push({\r\n\t\t\t\t\t\tkey: tasks[i].id,\r\n\t\t\t\t\t\tlabel: label\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tconfig.options = options;\r\n\t\t\t\tconfig.map_to = config.map_to || \"parent\";\r\n\t\t\t\treturn gantt.form_blocks.select.render.apply(this, arguments);\r\n\t\t\t},\r\n\t\t\trender: function (sns) {\r\n\t\t\t\treturn gantt.form_blocks.parent._display(sns, false);\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar tmpDom = document.createElement(\"div\");\r\n\t\t\t\ttmpDom.innerHTML = gantt.form_blocks.parent._display(config, ev.id);\r\n\t\t\t\tvar newOptions = tmpDom.removeChild(tmpDom.firstChild);\r\n\t\t\t\tnode.onselect = null;\r\n\t\t\t\tnode.parentNode.replaceChild(newOptions, node);\r\n\r\n\t\t\t\treturn gantt.form_blocks.select.set_value.apply(gantt, [newOptions, value, ev, config]);\r\n\t\t\t},\r\n\t\t\tget_value: function () {\r\n\t\t\t\treturn gantt.form_blocks.select.get_value.apply(gantt, arguments);\r\n\t\t\t},\r\n\t\t\tfocus: function () {\r\n\t\t\t\treturn gantt.form_blocks.select.focus.apply(gantt, arguments);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._is_lightbox_timepicker = function () {\r\n\t\tvar s = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tif (s[i].name == \"time\" && s[i].type == \"time\")\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tgantt._dhtmlx_confirm = function (message, title, callback, ok) {\r\n\t\tif (!message)\r\n\t\t\treturn callback();\r\n\t\tvar opts = {text: message};\r\n\t\tif (title)\r\n\t\t\topts.title = title;\r\n\t\tif (ok) {\r\n\t\t\topts.ok = ok;\r\n\t\t}\r\n\t\tif (callback) {\r\n\t\t\topts.callback = function (result) {\r\n\t\t\t\tif (result)\r\n\t\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\tgantt.confirm(opts);\r\n\t};\r\n\r\n\tfunction _get_type_name(type_value) {\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == type_value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"task\";\r\n\t}\r\n\r\n\tgantt._get_typed_lightbox_config = function (type) {\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = this.getLightboxType();\r\n\t\t}\r\n\r\n\t\tvar field = _get_type_name.call(this, type);\r\n\r\n\t\tif (gantt.config.lightbox[field + \"_sections\"]) {\r\n\t\t\treturn gantt.config.lightbox[field + \"_sections\"];\r\n\t\t} else {\r\n\t\t\treturn gantt.config.lightbox.sections;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._silent_redraw_lightbox = function (type) {\r\n\t\tvar oldType = this.getLightboxType();\r\n\r\n\t\tif (this.getState().lightbox) {\r\n\t\t\tvar taskId = this.getState().lightbox;\r\n\t\t\tvar formData = this.getLightboxValues(),\r\n\t\t\t\ttask = this.copy(this.getTask(taskId));\r\n\r\n\t\t\tthis.resetLightbox();\r\n\r\n\t\t\tvar updTask = this.mixin(task, formData, true);\r\n\t\t\tvar box = this.getLightbox(type ? type : undefined);\r\n\t\t\tthis._center_lightbox(this.getLightbox());\r\n\t\t\tthis._set_lightbox_values(updTask, box);\r\n\t\t} else {\r\n\t\t\tthis.resetLightbox();\r\n\t\t\tthis.getLightbox(type ? type : undefined);\r\n\t\t}\r\n\t\tthis.callEvent(\"onLightboxChange\", [oldType, this.getLightboxType()]);\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\r\n\tgantt._extend_to_optional = function (lightbox_block) {\r\n\r\n\t\tvar duration = lightbox_block;\r\n\t\tvar optional_time = {\r\n\t\t\trender: duration.render,\r\n\t\t\tfocus: duration.focus,\r\n\t\t\tset_value: function (node, value, task, section) {\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(section);\r\n\t\t\t\tif (!task[mapping.start_date] || (mapping.start_date == \"start_date\" && this._isAllowedUnscheduledTask(task))) {\r\n\t\t\t\t\toptional_time.disable(node, section);\r\n\t\t\t\t\tvar val = {};\r\n\r\n\t\t\t\t\tfor (var i in mapping) {\r\n\t\t\t\t\t\t//take default values from the time control from task start/end dates\r\n\t\t\t\t\t\tval[mapping[i]] = task[i];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, val, section);//set default value\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.enable(node, section);\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_value: function (node, task, section) {\r\n\t\t\t\tif (section.disabled) {\r\n\t\t\t\t\treturn {start_date: null};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn duration.get_value.call(gantt, node, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_block: function (node, section) {\r\n\t\t\t\tgantt.callEvent(\"onSectionToggle\", [gantt._lightbox_id, section]);\r\n\t\t\t\tnode.style.display = section.disabled ? \"none\" : \"block\";\r\n\r\n\t\t\t\tif (section.button) {\r\n\t\t\t\t\tvar button = node.previousSibling.querySelector(\".gantt_custom_button_label\"),\r\n\t\t\t\t\t\tlabels = gantt.locale.labels;\r\n\r\n\t\t\t\t\tvar button_text = section.disabled ? labels[section.name + \"_enable_button\"] : labels[section.name + \"_disable_button\"];\r\n\r\n\t\t\t\t\tbutton.innerHTML = button_text;\r\n\t\t\t\t}\r\n\t\t\t\tgantt.resizeLightbox();\r\n\t\t\t},\r\n\t\t\tdisable: function (node, section) {\r\n\t\t\t\tsection.disabled = true;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\r\n\t\t\t},\r\n\t\t\tenable: function (node, section) {\r\n\t\t\t\tsection.disabled = false;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\t\t\t},\r\n\t\t\tbutton_click: function (index, el, section, container) {\r\n\t\t\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t\tif (config.disabled) {\r\n\t\t\t\t\toptional_time.enable(container, config);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.disable(container, config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn optional_time;\r\n\t};\r\n\r\n\tgantt.form_blocks.duration_optional = gantt._extend_to_optional(gantt.form_blocks.duration);\r\n\tgantt.form_blocks.time_optional = gantt._extend_to_optional(gantt.form_blocks.time);\r\n\r\n};\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.getTaskType = function (type) {\r\n\t\tvar checkType = type;\r\n\t\tif(type && typeof type == \"object\"){\r\n\t\t\tcheckType = type.type;\r\n\t\t}\r\n\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == checkType) {\r\n\t\t\t\treturn checkType;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn gantt.config.types.task;\r\n\t};\r\n\r\n\tgantt.form_blocks.typeselect = {\r\n\t\trender: function (sns) {\r\n\t\t\tvar types = gantt.config.types,\r\n\t\t\t\tlocale = gantt.locale.labels,\r\n\t\t\t\toptions = [];\r\n\r\n\t\t\tvar filter = sns.filter || function () {\r\n\t\t\t\treturn true;\r\n\t\t\t};\r\n\t\t\tfor (var i in types) {\r\n\t\t\t\tif (!filter(i, types[i]) === false) {\r\n\t\t\t\t\toptions.push({key: types[i], label: locale[\"type_\" + i]});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsns.options = options;\r\n\r\n\t\t\tvar oldOnChange = sns.onchange;\r\n\t\t\tsns.onchange = function () {\r\n\t\t\t\tvar tId = gantt.getState().lightbox;\r\n\r\n\t\t\t\tgantt.changeLightboxType(this.value);\r\n\t\t\t\tif (typeof oldOnChange == 'function') {\r\n\t\t\t\t\toldOnChange.apply(this, arguments);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\treturn gantt.form_blocks.select.render.apply(gantt, arguments);\r\n\t\t},\r\n\t\tset_value: function () {\r\n\t\t\treturn gantt.form_blocks.select.set_value.apply(gantt, arguments);\r\n\t\t},\r\n\t\tget_value: function () {\r\n\t\t\treturn gantt.form_blocks.select.get_value.apply(gantt, arguments);\r\n\t\t},\r\n\t\tfocus: function () {\r\n\t\t\treturn gantt.form_blocks.select.focus.apply(this, arguments);\r\n\t\t}\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports) {\n\n/*\r\n reuse results of functions that can be recalculated during rendering\r\n greatly increases the rendering speed when critical path enabled\r\n Sample - 94_dev/critical_path.html\r\n\r\n */\r\nmodule.exports = function(gantt){\r\n\r\ngantt._cached_functions = {\r\n\tcache: {},\r\n\tmode: false,\r\n\tcritical_path_mode: false,\r\n\twrap_methods : function(methods, object){\r\n\t\tif(object._prefetch_originals){\r\n\t\t\tfor(var i in object._prefetch_originals){\r\n\t\t\t\tobject[i] = object._prefetch_originals[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tobject._prefetch_originals = {};\r\n\t\tfor(var i = 0; i < methods.length; i++)\r\n\t\t\tthis.prefetch(methods[i], object);\r\n\r\n\t},\r\n\tprefetch : function(methodname, host){\r\n\t\tvar original = host[methodname];\r\n\t\tif(original){\r\n\t\t\tvar optimizer = this;\r\n\r\n\t\t\thost._prefetch_originals[methodname] = original;\r\n\t\t\thost[methodname] = function get_prefetched_value(){\r\n\r\n\t\t\t\tvar argumentsArray = new Array(arguments.length);\r\n\t\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\r\n\t\t\t\t\targumentsArray[i] = arguments[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(optimizer.active){\r\n\t\t\t\t\tvar args = optimizer.get_arguments_hash(Array.prototype.slice.call(argumentsArray));\r\n\t\t\t\t\tif(!optimizer.cache[methodname]){\r\n\t\t\t\t\t\toptimizer.cache[methodname] = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cached_values = optimizer.cache[methodname];\r\n\r\n\t\t\t\t\tif(optimizer.has_cached_value(cached_values, args)){\r\n\t\t\t\t\t\treturn optimizer.get_cached_value(cached_values, args);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar value = original.apply(this, argumentsArray);\r\n\t\t\t\t\t\toptimizer.cache_value(cached_values, args, value);\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn original.apply(this, argumentsArray);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\tcache_value: function(cache, arguments_hash, value){\r\n\t\tif(this.is_date(value))\r\n\t\t\tvalue = new Date(value);\r\n\t\tcache[arguments_hash] = value;\r\n\t},\r\n\thas_cached_value: function(cache, arguments_hash){\r\n\t\treturn cache.hasOwnProperty(arguments_hash);\r\n\t},\r\n\tget_cached_value: function(cache, arguments_hash){\r\n\t\tvar data = cache[arguments_hash];\r\n\r\n\t\t//for cached dates - return copy\r\n\t\tif(this.is_date(data)){\r\n\t\t\tdata = new Date(data);\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tis_date: function(value){\r\n\t\treturn (value && value.getUTCDate);\r\n\t},\r\n\tget_arguments_hash:function(args){\r\n\t\tvar values = [];\r\n\t\tfor(var i = 0; i < args.length; i++){\r\n\t\t\tvalues.push(this.stringify_argument(args[i]));\r\n\t\t}\r\n\t\treturn \"(\" + values.join(\";\") + \")\";\r\n\t},\r\n\tstringify_argument: function(value){\r\n\t\t//expecting task or link, or any other data entries, dates and primitive values\r\n\t\tvar ret = \"\";\r\n\t\tif(value.id){\r\n\t\t\tret = value.id;\r\n\t\t}else if(this.is_date(value)){\r\n\t\t\tret = value.valueOf();\r\n\t\t}else{\r\n\t\t\tret = value;\r\n\t\t}\r\n\t\treturn ret + \"\";\r\n\t},\r\n\tactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = true;\r\n\t},\r\n\tdeactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = false;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis.cache = {};\r\n\t},\r\n\r\n\tsetup: function(gantt){\r\n\t\tvar override_gantt = [];\r\n\r\n\t\tvar gantt_methods  = [\r\n\t\t\t'_isCriticalTask',\r\n\t\t\t'isCriticalLink',\r\n\t\t\t'_isProjectEnd',\r\n\t\t\t'_getProjectEnd',\r\n\t\t\t'_getSlack'\r\n\t\t];\r\n\r\n\r\n\r\n\t\tif(this.mode == 'auto'){\r\n\t\t\tif(gantt.config.highlight_critical_path){\r\n\t\t\t\toverride_gantt = gantt_methods;\r\n\t\t\t}\r\n\t\t}else if(this.mode === true){\r\n\t\t\toverride_gantt = gantt_methods;\r\n\t\t}\r\n\r\n\t\tthis.wrap_methods(override_gantt, gantt);\r\n\r\n\t},\r\n\tupdate_if_changed: function(gantt){\r\n\t\tvar changed = (this.critical_path_mode != gantt.config.highlight_critical_path ||\r\n\t\t\t\t\t\tthis.mode !== gantt.config.optimize_render);\r\n\t\tif(changed){\r\n\t\t\tthis.critical_path_mode = gantt.config.highlight_critical_path;\r\n\t\t\tthis.mode = gantt.config.optimize_render;\r\n\t\t\tthis.setup(gantt);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction activate(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\tif(!gantt._cached_functions.active){\r\n\t\tgantt._cached_functions.activate();\r\n\t}\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onBeforeGanttRender\", activate);\r\ngantt.attachEvent(\"onBeforeDataRender\", activate);\r\ngantt.attachEvent(\"onBeforeSmartRender\",  function(){\r\n\tactivate();\r\n});\r\ngantt.attachEvent(\"onBeforeParse\", activate);\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tgantt._cached_functions.deactivate();\r\n});\r\nvar deactivTimeout = null;\r\ngantt.attachEvent(\"onSmartRender\", function(){\r\n\tif(deactivTimeout)\r\n\t\tclearTimeout(deactivTimeout);\r\n\tdeactivTimeout = setTimeout(function(){\r\n\t\tgantt._cached_functions.deactivate();\r\n\t}, 1000);\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\treturn true;\r\n});\r\n\r\n};\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports) {\n\nfunction _configure(col, data, force) {\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\" || force)\r\n\t\t\tcol[key] = data[key];\r\n}\r\n\r\nfunction _get_skin(force, gantt) {\r\n\tvar skin = gantt.skin;\r\n\tif (!skin || force) {\r\n\t\tvar links = document.getElementsByTagName(\"link\");\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar res = links[i].href.match(\"dhtmlxgantt_([a-z\\_]+).css\");\r\n\t\t\tif (res) {\r\n\t\t\t\tif (gantt.skins[res[1]] || !skin) {\r\n\t\t\t\t\tskin = res[1];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.skin = skin || \"terrace\";\r\n\tvar skinset = gantt.skins[gantt.skin] || gantt.skins[\"terrace\"];\r\n\r\n\t//apply skin related settings\r\n\t_configure(gantt.config, skinset.config, force);\r\n\r\n\tvar config = gantt.getGridColumns();\r\n\tif (config[1] && !gantt.defined(config[1].width))\r\n\t\tconfig[1].width = skinset._second_column_width;\r\n\tif (config[2] && !gantt.defined(config[2].width))\r\n\t\tconfig[2].width = skinset._third_column_width;\r\n\t\r\n\tfor (var i=0; i<config.length; i++) {\r\n\t\tvar column = config[i];\r\n\t\tif (column.name == \"add\") {\r\n\t\t\tif(!column.width){\r\n\t\t\t\tcolumn.width = 44;\r\n\t\t\t}\r\n\t\t\tif (!(gantt.defined(column.min_width) && gantt.defined(column.max_width))) {\r\n\t\t\t\tcolumn.min_width = column.min_width || column.width;\r\n\t\t\t\tcolumn.max_width = column.max_width || column.width;\r\n\t\t\t}\r\n\t\t\tif (column.min_width)\r\n\t\t\t\tcolumn.min_width = +column.min_width;\r\n\t\t\tif (column.max_width)\r\n\t\t\t\tcolumn.max_width = +column.max_width;\r\n\t\t\tif (column.width) {\r\n\t\t\t\tcolumn.width = +column.width;\r\n\t\t\t\tcolumn.width = (column.min_width && column.min_width > column.width) ? column.min_width : column.width;\r\n\t\t\t\tcolumn.width = (column.max_width && column.max_width < column.width) ? column.max_width : column.width;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (skinset.config.task_height)\r\n\t\tgantt.config.task_height = skinset.config.task_height || \"full\"; \r\n\r\n\tif (skinset._lightbox_template)\r\n\t\tgantt._lightbox_template = skinset._lightbox_template;\r\n\r\n\tif (skinset._redefine_lightbox_buttons) {\r\n\t\tgantt.config.buttons_right = skinset._redefine_lightbox_buttons[\"buttons_right\"];\r\n\t\tgantt.config.buttons_left = skinset._redefine_lightbox_buttons[\"buttons_left\"];\r\n\t}\r\n\r\n\r\n\tgantt.resetLightbox();\r\n}\r\n\r\nmodule.exports = function(gantt) {\r\n\tif(!gantt.resetSkin){\r\n\t\tgantt.resetSkin = function () {\r\n\t\t\tthis.skin = \"\";\r\n\t\t\t_get_skin(true, this);\r\n\t\t};\r\n\t\tgantt.skins = {};\r\n\r\n\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t_get_skin(false, this);\r\n\t\t});\r\n\t}\r\n};\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins.skyblue = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 27,\r\n\t\tlink_line_width:1,\r\n\t\tlink_arrow_size:8,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins.meadow = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 30,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:72\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins.terrace = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:90,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports) {\n\n\r\n\r\nmodule.exports = function(gantt) {\r\n\tgantt.skins.broadway = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 360,\r\n\t\t\trow_height: 35,\r\n\t\t\tscale_height: 35,\r\n\t\t\tlink_line_width: 1,\r\n\t\t\tlink_arrow_size: 7,\r\n\t\t\tlightbox_additional_height: 86\r\n\t\t},\r\n\t\t_second_column_width: 90,\r\n\t\t_third_column_width: 80,\r\n\r\n\t\t_lightbox_template: \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",\r\n\t\t_config_buttons_left: {},\r\n\t\t_config_buttons_right: {\r\n\t\t\t\"gantt_delete_btn\": \"icon_delete\",\r\n\t\t\t\"gantt_save_btn\": \"icon_save\"\r\n\t\t}\r\n\t};\r\n};\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tgantt.skins.material = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 411,\r\n\t\t\trow_height: 34,\r\n\t\t\ttask_height_offset: 6,\r\n\t\t\tscale_height: 36,\r\n\t\t\tlink_line_width: 2,\r\n\t\t\tlink_arrow_size: 6,\r\n\t\t\tlightbox_additional_height: 80\r\n\t\t},\r\n\t\t_second_column_width: 110,\r\n\t\t_third_column_width: 75,\r\n\t\t_redefine_lightbox_buttons: {\r\n\t\t\t\"buttons_left\": [\"dhx_delete_btn\"],\r\n\t\t\t\"buttons_right\": [\"dhx_save_btn\", \"dhx_cancel_btn\"]\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDrag\", function (id) {\r\n\t\tvar t = gantt.getTaskNode(id);\r\n\t\tif (t) {\r\n\t\t\tt.className += \" gantt_drag_animation\";\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar indx = t.className.indexOf(\" gantt_drag_animation\");\r\n\t\t\t\tif (indx > -1) {\r\n\t\t\t\t\tt.className = t.className.slice(0, indx);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t});\r\n\r\n};\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins[\"contrast_black\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins[\"contrast_white\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.config.touch_drag = 500; //nearly immediate dnd\r\n\tgantt.config.touch = true;\r\n\tgantt.config.touch_feedback = true;\r\n\tgantt.config.touch_feedback_duration = 1;\r\n\tgantt._prevent_touch_scroll = false;\r\n\r\n\r\n\tgantt._touch_feedback = function () {\r\n\t\tif (gantt.config.touch_feedback) {\r\n\t\t\tif (navigator.vibrate)\r\n\t\t\t\tnavigator.vibrate(gantt.config.touch_feedback_duration);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", gantt.bind(function(){\r\n\t\tif (this.config.touch != \"force\")\r\n\t\t\tthis.config.touch = this.config.touch &&\r\n\t\t\t\t((navigator.userAgent.indexOf(\"Mobile\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"iPad\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Android\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Touch\") != -1));\r\n\r\n\t\tif (this.config.touch) {\r\n\r\n\t\t\tvar touchEventsSupported = true;\r\n\t\t\ttry {\r\n\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (touchEventsSupported) {\r\n\t\t\t\tthis._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.pointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.msPointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}, gantt));\r\n\r\n\r\n\tfunction getTaskDND(){\r\n\t\tvar _tasks_dnd;\r\n\t\tif(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t_tasks_dnd = gantt.$ui.getView(\"timeline\")._tasks_dnd;\r\n\t\t}\r\n\t\treturn _tasks_dnd;\r\n\t}\r\n\r\n\tvar touchHandlers = [];\r\n\r\n//we can't use native scrolling, as we need to sync momentum between different parts\r\n//so we will block native scroll and use the custom one\r\n//in future we can add custom momentum\r\n\tgantt._touch_events = function (names, accessor, ignore) {\r\n\t\t//webkit on android need to be handled separately\r\n\t\tvar dblclicktime = 0;\r\n\t\tvar action_mode = false;\r\n\t\tvar scroll_mode = false;\r\n\t\tvar dblclick_timer = 0;\r\n\t\tvar action_start = null;\r\n\t\tvar scroll_state;\r\n\t\tvar long_tap_timer = null;\r\n\t\tvar current_target = null;\r\n\r\n\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.eventRemove(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\t\ttouchHandlers = [];\r\n\r\n\t\t//touch move\r\n\t\ttouchHandlers.push([gantt.$container, names[0], function (e) {\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t\tif (ignore(e)) return;\r\n\r\n\t\t\t\t//ignore common and scrolling moves\r\n\t\t\t\tif (!action_mode) return;\r\n\r\n\t\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\r\n\t\t\t\tvar source = accessor(e);\r\n\t\t\t\tif (_tasks_dnd && (_tasks_dnd.drag.id || _tasks_dnd.drag.start_drag)) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_move(source);\r\n\t\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.cancelBubble = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!gantt._prevent_touch_scroll) {\r\n\t\t\t\t\tif (source && action_start) {\r\n\t\t\t\t\t\tvar dx = action_start.pageX - source.pageX;\r\n\t\t\t\t\t\tvar dy = action_start.pageY - source.pageY;\r\n\t\t\t\t\t\tif (!scroll_mode && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\r\n\t\t\t\t\t\t\tgantt._touch_scroll_active = scroll_mode = true;\r\n\t\t\t\t\t\t\tdblclicktime = 0;\r\n\t\t\t\t\t\t\tscroll_state = gantt.getScrollState();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scroll_mode) {\r\n\t\t\t\t\t\t\tgantt.scrollTo(scroll_state.x + dx, scroll_state.y + dy);\r\n\t\t\t\t\t\t\tvar new_scroll_state = gantt.getScrollState();\r\n\r\n\t\t\t\t\t\t\tif ((scroll_state.x != new_scroll_state.x && dy > 2 * dx) ||\r\n\t\t\t\t\t\t\t\t(scroll_state.y != new_scroll_state.y && dx > 2 * dy )) {\r\n\t\t\t\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}]);\r\n\r\n\r\n\t\t//block touch context menu in IE10\r\n\t\ttouchHandlers.push([this.$container, \"contextmenu\", function (e) {\r\n\t\t\tif (action_mode)\r\n\t\t\t\treturn block_action(e);\r\n\t\t}]);\r\n\r\n\t\t//touch start\r\n\t\ttouchHandlers.push([this.$container, names[1], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\t\taction_mode = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\taction_start = accessor(e);\r\n\t\t\tif (!gantt._locate_css(action_start, \"gantt_hor_scroll\") && !gantt._locate_css(action_start, \"gantt_ver_scroll\")) {\r\n\t\t\t\taction_mode = true;\r\n\t\t\t}\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t//long tap\r\n\t\t\tlong_tap_timer = setTimeout(function () {\r\n\t\t\t\tvar taskId = gantt.locate(action_start);\r\n\t\t\t\tif (_tasks_dnd && (taskId && !gantt._locate_css(action_start, \"gantt_link_control\") && !gantt._locate_css(action_start, \"gantt_grid_data\"))) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_down(action_start);\r\n\r\n\t\t\t\t\tif (_tasks_dnd.drag && _tasks_dnd.drag.start_drag) {\r\n\t\t\t\t\t\tcloneTaskRendered(taskId);\r\n\t\t\t\t\t\t_tasks_dnd._start_dnd(action_start);\r\n\t\t\t\t\t\tgantt._touch_drag = true;\r\n\r\n\t\t\t\t\t\tgantt.refreshTask(taskId);\r\n\r\n\t\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlong_tap_timer = null;\r\n\t\t\t}, gantt.config.touch_drag);\r\n\t\t}]);\r\n\r\n\t\t//touch end\r\n\t\ttouchHandlers.push([this.$container, names[2], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\taction_mode = false;\r\n\t\t\tvar source = accessor(e);\r\n\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\tif(_tasks_dnd)\r\n\t\t\t\t_tasks_dnd.on_mouse_up(source);\r\n\r\n\t\t\tif (current_target) {\r\n\t\t\t\tgantt.refreshTask(gantt.locate(current_target));\r\n\t\t\t\tif (current_target.parentNode) {\r\n\t\t\t\t\tcurrent_target.parentNode.removeChild(current_target);\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt._touch_scroll_active = action_mode = scroll_mode = false;\r\n\t\t\tcurrent_target = null;\r\n\r\n\t\t\t//dbl-tap handling\r\n\t\t\tif (action_start && dblclicktime) {\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\tif ((now - dblclicktime) < 500) {\r\n\r\n\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\tmouseEvents.onDoubleClick(action_start);\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t} else\r\n\t\t\t\t\tdblclicktime = now;\r\n\t\t\t} else {\r\n\t\t\t\tdblclicktime = new Date();\r\n\t\t\t}\r\n\t\t}]);\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.event(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\r\n\t\t//common helper, prevents event\r\n\t\tfunction block_action(e) {\r\n\t\t\tif (e && e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t(e || event).cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction cloneTaskRendered(taskId) {\r\n\t\t\tvar renders = gantt._getTaskLayers();\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\tif (task && gantt.isTaskVisible(taskId)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\t\t\ttask = renders[i].rendered[taskId];\r\n\t\t\t\t\tif (task && task.getAttribute(\"task_id\") && task.getAttribute(\"task_id\") == taskId) {\r\n\t\t\t\t\t\tvar copy = task.cloneNode(true);\r\n\t\t\t\t\t\tcurrent_target = task;\r\n\t\t\t\t\t\trenders[i].rendered[taskId] = copy;\r\n\t\t\t\t\t\ttask.style.display = \"none\";\r\n\t\t\t\t\t\tcopy.className += \" gantt_drag_move \";\r\n\t\t\t\t\t\ttask.parentNode.appendChild(copy);\r\n\t\t\t\t\t\t//return copy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tgantt.locale = {\r\n\t\tdate: {\r\n\t\t\tmonth_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t\tday_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\t\tday_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t\t},\r\n\t\tlabels: {\r\n\t\t\tnew_task: \"New task\",\r\n\t\t\ticon_save: \"Save\",\r\n\t\t\ticon_cancel: \"Cancel\",\r\n\t\t\ticon_details: \"Details\",\r\n\t\t\ticon_edit: \"Edit\",\r\n\t\t\ticon_delete: \"Delete\",\r\n\t\t\tconfirm_closing: \"\",//Your changes will be lost, are you sure?\r\n\t\t\tconfirm_deleting: \"Task will be deleted permanently, are you sure?\",\r\n\t\t\tsection_description: \"Description\",\r\n\t\t\tsection_time: \"Time period\",\r\n\t\t\tsection_type: \"Type\",\r\n\r\n\t\t\t/* grid columns */\r\n\t\t\tcolumn_wbs: \"WBS\",\r\n\t\t\tcolumn_text: \"Task name\",\r\n\t\t\tcolumn_start_date: \"Start time\",\r\n\t\t\tcolumn_duration: \"Duration\",\r\n\t\t\tcolumn_add: \"\",\r\n\r\n\t\t\t/* link confirmation */\r\n\t\t\tlink: \"Link\",\r\n\t\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\t\tlink_start: \" (start)\",\r\n\t\t\tlink_end: \" (end)\",\r\n\r\n\t\t\ttype_task: \"Task\",\r\n\t\t\ttype_project: \"Project\",\r\n\t\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\t\tminutes: \"Minutes\",\r\n\t\t\thours: \"Hours\",\r\n\t\t\tdays: \"Days\",\r\n\t\t\tweeks: \"Week\",\r\n\t\t\tmonths: \"Months\",\r\n\t\t\tyears: \"Years\",\r\n\r\n\t\t\t/* message popup */\r\n\t\t\tmessage_ok: \"OK\",\r\n\t\t\tmessage_cancel: \"Cancel\"\r\n\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1),\r\n\thelpers = __webpack_require__(7);\r\n\r\nmodule.exports = function(gantt){\r\n\tvar calculateScaleRange = __webpack_require__(19);\r\n\r\n\tgantt.assert = __webpack_require__(107)(gantt);\r\n\r\n//initial initialization\r\n\tgantt.init = function(node, from, to){\r\n\t\tif(from && to){\r\n\t\t\tthis.config.start_date = this._min_date = new Date(from);\r\n\t\t\tthis.config.end_date = this._max_date = new Date(to);\r\n\t\t}\r\n\t\tthis.date.init();\r\n\r\n\t\tif (!this.config.scroll_size)\r\n\t\t\tthis.config.scroll_size = domHelpers.getScrollSize() || 1;\r\n\r\n\t\tvar resizeDelay;\r\n\t\tgantt.event(window, \"resize\", function(){\r\n\t\t\tclearTimeout(resizeDelay);\r\n\t\t\tresizeDelay = setTimeout(function(){\r\n\t\t\t\tgantt.render();\r\n\t\t\t}, 300);\r\n\t\t});\r\n\r\n\t\t//can be called only once\r\n\t\tthis.init = function(node){\r\n\t\t\tif (this.$container && this.$container.parentNode){\r\n\t\t\t\tthis.$container.parentNode.removeChild(this.$container);\r\n\t\t\t\tthis.$container = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$layout){\r\n\t\t\t\tthis.$layout.clear();\r\n\t\t\t}\r\n\t\t\tthis._reinit(node);\r\n\t\t};\r\n\r\n\t\tthis._reinit(node);\r\n\t};\r\n\r\n\tgantt._reinit = function(node){\r\n\t\tthis.callEvent(\"onBeforeGanttReady\", []);\r\n\t\t//this._init_tasks_range();\r\n\t\tthis.resetLightbox();\r\n\t\tthis._update_flags();\r\n\r\n\r\n\t\tvar config = this.$services.getService(\"templateLoader\");\r\n\t\tconfig.initTemplates(this);\r\n\r\n\t\tthis._clearTaskLayers();\r\n\t\tthis._clearLinkLayers();\r\n\r\n\t\t//this.clear\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t\tthis.$ui.reset();\r\n\t\t}\r\n\r\n\t\tthis.$root = domHelpers.toNode(node);\r\n\t\tif(this.$root){\r\n\t\t\tthis.$root.innerHTML = \"\";\r\n\t\t}\r\n\t\tthis.$root.gantt = this;\r\n\t\tcalculateScaleRange(this);\r\n\t\tthis.config.layout.id = \"main\";\r\n\t\tthis.$layout = this.$ui.createView(\"layout\", node, this.config.layout);\r\n\r\n\t\tthis.$layout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\tvar storeNames = gantt.$services.getService(\"datastores\");\r\n\t\t\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\t\t\tgantt.getDatastore(storeNames[i]).filter();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.$layout.attachEvent(\"onResize\", function(){\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onGanttLayoutReady\", []);\r\n\t\tthis.$layout.render();\r\n\r\n\t\tgantt.$container = this.$layout.$container.firstChild;\r\n\t\tthis.callEvent(\"onTemplatesReady\",[]);\r\n\t\tthis.$mouseEvents.reset(this.$root);\r\n\t\tthis.callEvent(\"onGanttReady\", []);\r\n\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt.$click={\r\n\t\tbuttons:{\r\n\t\t\t\"edit\":function(id){\r\n\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t},\r\n\t\t\t\"delete\":function(id){\r\n\t\t\t\tvar question = gantt.locale.labels.confirm_deleting;\r\n\t\t\t\tvar title = gantt.locale.labels.confirm_deleting_title;\r\n\r\n\t\t\t\tgantt._dhtmlx_confirm(question, title, function(){\r\n\t\t\t\t\tif(!gantt.isTaskExists(id)){\r\n\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\t\tif(task.$new){\r\n\t\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\t\tgantt.deleteTask(id, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tgantt.deleteTask(id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.getScrollState = function(){\r\n\t\tvar state = this._scroll_state();\r\n\t\treturn { x:state.x_pos, y:state.y_pos, inner_width:state.x, inner_height:state.y, width: state.x_inner, height: state.y_inner };\r\n\t};\r\n\r\n\tgantt.scrollTo = function(left, top){\r\n\t\tvar vertical = this._getVerticalScrollbar();\r\n\t\tvar horizontal = this._getHorizontalScrollbar();\r\n\r\n\t\tvar oldV = vertical.getScrollState(),\r\n\t\t\toldH = horizontal.getScrollState();\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\thorizontal.scroll(left);\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tvertical.scroll(top);\r\n\t\t}\r\n\r\n\t\tvar newV = vertical.getScrollState(),\r\n\t\t\tnewH = horizontal.getScrollState();\r\n\r\n\t\tthis.callEvent(\"onGanttScroll\", [oldH.position, oldV.position, newH.position, newV.position]);\r\n\t};\r\n\r\n\tgantt.showDate = function(date){\r\n\t\tvar date_x = this.posFromDate(date);\r\n\t\tvar scroll_to = Math.max(date_x - this.config.task_scroll_offset, 0);\r\n\t\tthis.scrollTo(scroll_to);\r\n\t};\r\n\tgantt.showTask = function(id) {\r\n\t\tvar pos = this.getTaskPosition(this.getTask(id));\r\n\r\n\t\tvar left = Math.max(pos.left - this.config.task_scroll_offset, 0);\r\n\r\n\t\tvar dataHeight = this._scroll_state().y;\r\n\t\tvar top;\r\n\t\tif(!dataHeight){\r\n\t\t\ttop = pos.top;\r\n\t\t}else{\r\n\t\t\ttop = pos.top - (dataHeight - this.config.row_height)/2;\r\n\t\t}\r\n\r\n\t\tthis.scrollTo(left, top);\r\n\t};\r\n\r\n//renders self\r\n\tgantt.render = function(){\r\n\t\tthis.callEvent(\"onBeforeGanttRender\", []);\r\n\r\n\t\tvar pos = this.getScrollState();\r\n\t\tvar posX = pos ? pos.x : 0;\r\n\t\tif(this._getHorizontalScrollbar()){\r\n\t\t\tvar scrollbar = this._getHorizontalScrollbar();\r\n\t\t\tposX = scrollbar.$config.codeScrollLeft || posX || 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar visible_date = null;\r\n\t\tif(posX){\r\n\t\t\tvisible_date = gantt.dateFromPos(posX + this.config.task_scroll_offset);\r\n\t\t}\r\n\t\tcalculateScaleRange(this);\r\n\r\n\t\tthis.$layout.$config.autosize = this.config.autosize;\r\n\t\tthis.$layout.resize();\r\n\r\n\t\tif(this.config.preserve_scroll && pos){\r\n\r\n\t\t\tif(posX){\r\n\t\t\t\tvar new_pos = gantt.getScrollState();\r\n\t\t\t\tvar new_date = gantt.dateFromPos(new_pos.x);\r\n\t\t\t\tif(!(+visible_date == +new_date && new_pos.y == pos.y)){\r\n\t\t\t\t\tif(visible_date){\r\n\t\t\t\t\t\tthis.showDate(visible_date);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pos.y)\r\n\t\t\t\t\t\tgantt.scrollTo(undefined, pos.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onGanttRender\", []);\r\n\t};\r\n\r\n\t//TODO: add layout.resize method that wouldn't trigger data repaint\r\n\tgantt.setSizes = gantt.render;\r\n\r\n\tgantt._scroll_state = function(){\r\n\t\tvar result = {\r\n\t\t\tx: false,\r\n\t\t\ty: false,\r\n\t\t\tx_pos: 0,\r\n\t\t\ty_pos: 0,\r\n\t\t\tscroll_size: this.config.scroll_size + 1,//1px for inner content\r\n\t\t\tx_inner: 0,\r\n\t\t\ty_inner: 0\r\n\t\t};\r\n\r\n\t\tvar scrollVer = gantt._getVerticalScrollbar(),\r\n\t\t\tscrollHor = gantt._getHorizontalScrollbar();\r\n\t\tif(scrollHor){\r\n\t\t\tvar horState = scrollHor.getScrollState();\r\n\t\t\tif(horState.visible){\r\n\t\t\t\tresult.x = horState.size;\r\n\t\t\t\tresult.x_inner = horState.scrollSize;\r\n\t\t\t}\r\n\t\t\tresult.x_pos = horState.position || 0;\r\n\t\t}\r\n\r\n\t\tif(scrollVer){\r\n\t\t\tvar verState = scrollVer.getScrollState();\r\n\t\t\tif(verState.visible){\r\n\t\t\t\tresult.y = verState.size;\r\n\r\n\t\t\t\tresult.y_inner = verState.scrollSize;\r\n\t\t\t}\r\n\t\t\tresult.y_pos = verState.position || 0;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tgantt.locate = function(e) {\r\n\t\tvar trg = domHelpers.getTargetNode(e);\r\n\r\n\t\t//ignore empty cells\r\n\t\tvar className = domHelpers.getClassName(trg);\r\n\t\tif ((className || \"\").indexOf(\"gantt_task_cell\") >= 0) return null;\r\n\r\n\t\tvar targetAttribute = arguments[1] || this.config.task_attribute;\r\n\r\n\t\tvar node = domHelpers.locateAttribute(trg, targetAttribute);\r\n\t\tif(node){\r\n\t\t\treturn node.getAttribute(targetAttribute);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._locate_css = function(e, classname, strict){\r\n\t\treturn domHelpers.locateClassName(e, classname, strict);\r\n\t};\r\n\r\n\tgantt._locateHTML = function(e, attribute) {\r\n\t\treturn domHelpers.locateAttribute(e, attribute || this.config.task_attribute);\r\n\t};\r\n\r\n\tgantt.getTaskRowNode = function(id) {\r\n\t\tvar els = this.$grid_data.childNodes;\r\n\t\tvar attribute = this.config.task_attribute;\r\n\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\tif (els[i].getAttribute) {\r\n\t\t\t\tvar value = els[i].getAttribute(attribute);\r\n\t\t\t\tif (value == id) return els[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.changeLightboxType = function(type){\r\n\t\tif(this.getLightboxType() == type)\r\n\t\t\treturn true;\r\n\t\tgantt._silent_redraw_lightbox(type);\r\n\t};\r\n\r\n\r\n\tgantt._get_link_type = function (from_start, to_start) {\r\n\t\tvar type = null;\r\n\t\tif (from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_start;\r\n\t\t} else if (!from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_start;\r\n\t\t} else if (!from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_finish;\r\n\t\t} else if (from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_finish;\r\n\t\t}\r\n\t\treturn type;\r\n\t};\r\n\r\n\tgantt.isLinkAllowed = function (from, to, from_start, to_start) {\r\n\t\tvar link = null;\r\n\t\tif (typeof(from) == \"object\") {\r\n\t\t\tlink = from;\r\n\t\t} else {\r\n\t\t\tlink = {source: from, target: to, type: this._get_link_type(from_start, to_start)};\r\n\t\t}\r\n\r\n\t\tif (!link) return false;\r\n\t\tif (!(link.source && link.target && link.type)) return false;\r\n\t\tif (link.source == link.target) return false;\r\n\r\n\t\tvar res = true;\r\n\t\t//any custom rules\r\n\t\tif (this.checkEvent(\"onLinkValidation\"))\r\n\t\t\tres = this.callEvent(\"onLinkValidation\", [link]);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tgantt._correct_dst_change = function(date, prevOffset, step, unit){\r\n\t\tvar time_unit = helpers.getSecondsInUnit(unit) * step;\r\n\t\tif(time_unit > 60*60 && time_unit < 60*60*24){\r\n\t\t\t//correct dst change only if current unit is more than one hour and less than day (days have own checking), e.g. 12h\r\n\t\t\tvar offsetChanged = date.getTimezoneOffset() - prevOffset;\r\n\t\t\tif(offsetChanged){\r\n\t\t\t\tdate = gantt.date.add(date, offsetChanged, \"minute\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn date;\r\n\t};\r\n\r\n\tgantt.getGridColumns = function(){\r\n\t\treturn gantt.config.columns.slice();\r\n\t};\r\n\r\n\tgantt._is_icon_open_click = function(e) {\r\n\t\tif (!e)\r\n\t\t\treturn false;\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tif (!(target && target.className))\r\n\t\t\treturn false;\r\n\t\tvar className = domHelpers.getClassName(target);\r\n\t\tif (className.indexOf(\"gantt_tree_icon\") !== -1 && (className.indexOf(\"gantt_close\") !== -1 || className.indexOf(\"gantt_open\") !== -1))\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports) {\n\n/*\r\n \tasserts will be removed in final code, so you can place them anythere\r\n\twithout caring about performance impacts\r\n*/\r\n\r\nmodule.exports = function(gantt){\r\n\treturn function assert(check, message){\r\n\t\t//jshint -W087\r\n\t\tif (!check){\r\n\t\t\tif(gantt.config.show_errors && gantt.callEvent(\"onError\",[message]) !== false) {\r\n\t\t\t\tgantt.message({type: \"error\", text: message, expire: -1});\r\n\t\t\t\tdebugger;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports) {\n\nfunction extend(gantt){\r\n\r\n\tgantt.destructor = function(){\r\n\t\tgantt.callEvent(\"onDestroy\", []);\r\n\r\n\t\tthis.clearAll();\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tif(this.$root){\r\n\t\t\tdelete this.$root.gantt;\r\n\t\t}\r\n\r\n\t\tthis._eventRemoveAll();\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t}\r\n\r\n\t\tthis.resetLightbox();\r\n\r\n\t\tif(this._dp && this._dp.destructor){\r\n\t\t\tthis._dp.destructor();\r\n\t\t}\r\n\r\n\t\tthis.$services.destructor();\r\n\r\n\t\tfor(var i in this){\r\n\t\t\tif(i.indexOf(\"$\") === 0){\r\n\t\t\t\tdelete this[i];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = extend;\r\n\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt){\r\n\r\n\tfunction deprecated(badCode, goodCode) {\r\n\r\n\t\tvar formatting = gantt.env.isIE ? \"\" : \"%c\";\r\n\r\n\r\n\t\tvar message = [\r\n\t\t\tformatting, \"\\\"\", badCode, \"\\\"\",  formatting,\r\n\t\t\t\" has been deprecated in dhtmlxGantt v4.0 and will stop working in v6.0. Use \",\r\n\t\t\tformatting, \"\\\"\", goodCode, \"\\\"\",  formatting,\r\n\t\t\t\" instead. \\nSee more details at http://docs.dhtmlx.com/gantt/migrating.html \"\r\n\t\t].join(\"\");\r\n\r\n\t\tvar log = window.console.warn || window.console.log;\r\n\r\n\t\tvar args = [message];\r\n\t\tif(!gantt.env.isIE){\r\n\t\t\targs = args.concat([\"font-weight:bold\", \"font-weight:normal\", \"font-weight:bold\", \"font-weight:normal\"]);\r\n\t\t}\r\n\r\n\t\tlog.apply(window.console, args);\r\n\t}\r\n\r\n\tfunction wrapDeprecated(method) {\r\n\t\treturn function () {\r\n\t\t\tdeprecated(\"dhtmlx.\" + method, \"gantt.\" + method);\r\n\t\t\treturn gantt[method].apply(gantt, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\t/* dhtmlx */\r\n\r\n\r\n\tif (!window.dhtmlx)\r\n\t\twindow.dhtmlx = {};\r\n\r\n\tvar dhtmlxMethods = [\r\n\t\t\"message\",\r\n\t\t\"alert\",\r\n\t\t\"confirm\",\r\n\t\t\"modalbox\",\r\n\t\t\"uid\",\r\n\t\t\"copy\",\r\n\t\t\"mixin\",\r\n\t\t\"defined\",\r\n\t\t\"bind\",\r\n\t\t\"assert\"\r\n\t];\r\n\r\n\tvar dynMethods = [];\r\n\r\n\tfor(var i = 0; i < dhtmlxMethods.length; i++){\r\n\t\t// wrap dhtmlx methods with 'deprecated' warnings\r\n\t\t// do not wrap if methods are defined by dhtmlxSuite\r\n\t\tif(!window.dhtmlx[dhtmlxMethods[i]]){\r\n\t\t\tdynMethods.push(dhtmlxMethods[i]);\r\n\t\t\tdhtmlx[dhtmlxMethods[i]] = wrapDeprecated(dhtmlxMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tfor(var i = 0; i < dynMethods.length; i++){\r\n\t\t\tdelete window.dhtmlx[dynMethods[i]];\r\n\t\t}\r\n\t\tdynMethods = null;\r\n\r\n\t});\r\n\r\n\t/* global functions */\r\n\r\n\r\n\tif (!window.dataProcessor) {\r\n\t\twindow.dataProcessor = function (url) {\r\n\t\t\tdeprecated(\"new dataProcessor(url)\", \"new gantt.dataProcessor(url)\");\r\n\t\t\treturn new gantt.dataProcessor(url);\r\n\t\t};\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\twindow.dataProcessor = null;\r\n\t\t});\r\n\t}\r\n\r\n};\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dhtmlxgantt.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3101faf845b64e83b979","var dateHelper = require(\"./date_helpers\");\r\n\r\nfunction copy(object) {\r\n\tvar i, t, result; // iterator, types array, result\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\t\tresult = {};\r\n\t\tt = [Array,Number,String,Boolean];\r\n\t\tfor (i=0; i<t.length; i++) {\r\n\t\t\tif (object instanceof t[i])\r\n\t\t\t\tresult = i ? new t[i](object) : new t[i](); // first one is array\r\n\t\t}\r\n\r\n\t\tif (dateHelper.isDate(object)) {\r\n\t\t\tresult = new Date(object);\r\n\t\t}\r\n\r\n\t\tfor (i in object) {\r\n\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n}\r\n\r\nfunction mixin (target, source, force){\r\n\tfor (var f in source)\r\n\t\tif (((target[f] === undefined) || force)) target[f]=source[f];\r\n\treturn target;\r\n}\r\n\r\nfunction defined(obj) {\r\n\treturn typeof(obj) != \"undefined\";\r\n}\r\n\r\nvar seed;\r\nfunction uid() {\r\n\tif (!seed)\r\n\t\tseed = (new Date()).valueOf();\r\n\r\n\tseed++;\r\n\treturn seed;\r\n}\r\n\r\n//creates function with specified \"this\" pointer\r\nfunction bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n}\r\n\r\nfunction event(el, event, handler, capture){\r\n\tif (el.addEventListener)\r\n\t\tel.addEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.attachEvent)\r\n\t\tel.attachEvent(\"on\"+event, handler);\r\n}\r\n\r\nfunction eventRemove(el, event, handler, capture){\r\n\tif (el.removeEventListener)\r\n\t\tel.removeEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.detachEvent)\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\tcopy: copy,\r\n\tdefined: defined,\r\n\tmixin: mixin,\r\n\tuid: uid,\r\n\tbind: bind,\r\n\tevent: event,\r\n\teventRemove: eventRemove\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/utils.js\n// module id = 0\n// module chunks = 0","//returns position of html element on the page\r\nfunction elementPosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = (document.documentElement ||\r\n\t\t\tdocument.body.parentNode ||\r\n\t\t\tdocument.body);\r\n\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\nfunction isVisible(node){\r\n\tvar display = false,\r\n\t\tvisibility = false;\r\n\tif(window.getComputedStyle){\r\n\t\tvar style = window.getComputedStyle(node, null);\r\n\t\tdisplay = style[\"display\"];\r\n\t\tvisibility = style[\"visibility\"];\r\n\t}else if(node.currentStyle){\r\n\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t}\r\n\treturn (display != \"none\" && visibility != \"hidden\");\r\n}\r\n\r\nfunction hasNonNegativeTabIndex(node){\r\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n}\r\n\r\nfunction hasHref(node){\r\n\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\treturn !!node.getAttribute(\"href\");\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction isEnabled(node){\r\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\treturn !node.hasAttribute(\"disabled\");\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction getFocusableNodes(root){\r\n\tvar nodes = root.querySelectorAll([\r\n\t\t\"a[href]\",\r\n\t\t\"area[href]\",\r\n\t\t\"input\",\r\n\t\t\"select\",\r\n\t\t\"textarea\",\r\n\t\t\"button\",\r\n\t\t\"iframe\",\r\n\t\t\"object\",\r\n\t\t\"embed\",\r\n\t\t\"[tabindex]\",\r\n\t\t\"[contenteditable]\"\r\n\t].join(\", \"));\r\n\r\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tvar node = nodesArray[i];\r\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\tif(!isValid){\r\n\t\t\tnodesArray.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn nodesArray;\r\n}\r\n\r\nfunction getScrollSize(){\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar width = div.offsetWidth-div.clientWidth;\r\n\tdocument.body.removeChild(div);\r\n\r\n\treturn width;\r\n}\r\n\r\nfunction getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = '';\r\n\r\n\treturn _trimString(className);\r\n}\r\n\r\nfunction addClassName(node, className){\r\n\tif (className && node.className.indexOf(className) === -1) {\r\n\t\tnode.className += \" \" + className;\r\n\t}\r\n}\r\n\r\nfunction removeClassName(node, name) {\r\n\tname = name.split(\" \");\r\n\tfor (var i = 0; i < name.length; i++) {\r\n\t\tvar regEx = new RegExp('\\\\s?\\\\b' + name[i] + '\\\\b(?![-_\\.])', \"\");\r\n\t\tnode.className = node.className.replace(regEx, \"\");\r\n\t}\r\n}\r\n\r\nfunction toNode(node) {\r\n\tif (typeof node === \"string\") {\r\n\t\treturn (document.getElementById(node) || document.querySelector(node) || document.body);\r\n\t}\r\n\treturn node || document.body;\r\n}\r\n\r\nvar _slave = document.createElement(\"div\");\r\nfunction insert(node, newone) {\r\n\t_slave.innerHTML = newone;\r\n\tvar child = _slave.firstChild;\r\n\tnode.appendChild(child);\r\n\treturn child;\r\n}\r\n\r\nfunction remove(node) {\r\n\tif (node && node.parentNode) {\r\n\t\tnode.parentNode.removeChild(node);\r\n\t}\r\n}\r\n\r\nfunction getChildren(node, css) {\r\n\tvar ch = node.childNodes;\r\n\tvar len = ch.length;\r\n\tvar out = [];\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tvar obj = ch[i];\r\n\t\tif (obj.className && obj.className.indexOf(css) !== -1) {\r\n\t\t\tout.push(obj);\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n}\r\n\r\nfunction getTargetNode(e){\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te=e||window.event;\r\n\t\ttrg=e.target||e.srcElement;\r\n\t}\r\n\treturn trg;\r\n}\r\n\r\nfunction locateAttribute(e, attribute) {\r\n\tif(!attribute) return;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\r\n\twhile (trg){\r\n\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\r\n\t\t\tvar test = trg.getAttribute(attribute);\r\n\t\t\tif (test) return trg;\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction _trimString(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n}\r\n\r\nfunction locateClassName(e, classname, strict){\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\tvar css = '';\r\n\tvar test = false;\r\n\twhile (trg){\r\n\t\tcss = getClassName(trg);\r\n\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!_trimString(css.charAt(ind - 1)));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!_trimString(css.charAt(ind + classname.length)));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/*\r\nevent position relatively to DOM element\r\n */\r\nfunction getRelativeEventPosition(ev, node){\r\n\tif (ev.pageX || ev.pageY)\r\n\t\tvar pos = {x: ev.pageX, y: ev.pageY};\r\n\r\n\tvar d = document.documentElement;\r\n\tvar pos = {\r\n\t\tx: ev.clientX + d.scrollLeft - d.clientLeft,\r\n\t\ty: ev.clientY + d.scrollTop - d.clientTop\r\n\t};\r\n\r\n\tvar box = elementPosition(node);\r\n\tpos.x = pos.x - box.x + node.scrollLeft;\r\n\tpos.y = pos.y - box.y + node.scrollTop;\r\n\treturn pos;\r\n}\r\n\r\n\r\nfunction isChildOf(child, parent){\r\n\twhile(child && child != parent) {\r\n\t\tchild = child.parentNode;\r\n\t}\r\n\treturn child == parent;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetNodePosition: elementPosition,\r\n\tgetFocusableNodes: getFocusableNodes,\r\n\tgetScrollSize: getScrollSize,\r\n\tgetClassName: getClassName,\r\n\taddClassName: addClassName,\r\n\tremoveClassName: removeClassName,\r\n\tinsertNode: insert,\r\n\tremoveNode: remove,\r\n\tgetChildNodes: getChildren,\r\n\ttoNode: toNode,\r\n\tlocateClassName:locateClassName,\r\n\tlocateAttribute: locateAttribute,\r\n\tgetTargetNode: getTargetNode,\r\n\tgetRelativeEventPosition: getRelativeEventPosition,\r\n\tisChildOf: isChildOf,\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/dom_helpers.js\n// module id = 1\n// module chunks = 0","var EventHost = function(){\r\n\tthis._connected = [];\r\n\tthis._silent_mode = false;\r\n};\r\n\r\nEventHost.prototype = {\r\n\t_silentStart: function() {\r\n\t\tthis._silent_mode = true;\r\n\t},\r\n\t_silentEnd: function() {\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n};\r\n\r\nvar\tcreateEventStorage = function(obj) {\r\n\tvar dhx_catch = [];\r\n\tvar z = function(){\r\n\t\tvar res = true;\r\n\t\tfor (var i = 0; i < dhx_catch.length; i++){\r\n\t\t\tif (dhx_catch[i]){\r\n\t\t\t\tvar zr = dhx_catch[i].apply(obj, arguments);\r\n\t\t\t\tres=res&&zr;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\tz.addEvent=function(ev){\r\n\t\tif (typeof (ev) == \"function\")\r\n\t\t\treturn dhx_catch.push(ev)-1;\r\n\t\treturn false;\r\n\t};\r\n\tz.removeEvent=function(id){\r\n\t\tdhx_catch[id]=null;\r\n\t};\r\n\treturn z;\r\n};\r\n\r\nfunction makeEventable(obj){\r\n\r\n\tvar eventHost = new EventHost();\r\n\tobj.attachEvent=function(name, catcher, callObj){\r\n\t\tname='ev_'+name.toLowerCase();\r\n\t\tif (!eventHost[name])\r\n\t\t\teventHost[name] = createEventStorage(callObj||this);\r\n\r\n\t\treturn(name+':'+eventHost[name].addEvent(catcher)); //return ID (event name & event ID)\r\n\t};\r\n\tobj.attachAll = function(callback, callObj){\r\n\t\tthis.attachEvent('listen_all', callback, callObj);\r\n\t};\r\n\r\n\tobj.callEvent=function(name, arg0, callObj){\r\n\t\tif (eventHost._silent_mode) return true;\r\n\r\n\t\tvar handlerName = 'ev_'+name.toLowerCase();\r\n\r\n\t\tif (eventHost['ev_listen_all']){\r\n\t\t\teventHost['ev_listen_all'].apply(callObj || this, [name].concat(arg0));\r\n\t\t}\r\n\r\n\t\tif (eventHost[handlerName])\r\n\t\t\treturn eventHost[handlerName].apply(callObj || this, arg0);\r\n\t\treturn true;\r\n\t};\r\n\tobj.checkEvent=function(name){\r\n\t\treturn (!!eventHost['ev_'+name.toLowerCase()]);\r\n\t};\r\n\tobj.detachEvent=function(id){\r\n\t\tif (id){\r\n\t\t\tvar list = id.split(':');           //get EventName and ID\r\n\t\t\teventHost[list[0]].removeEvent(list[1]); //remove event\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function(){\r\n\t\tfor (var name in eventHost){\r\n\t\t\tif (name.indexOf(\"ev_\") === 0)\r\n\t\t\t\tdelete eventHost[name];\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = makeEventable;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/eventable.js\n// module id = 2\n// module chunks = 0","module.exports = function (d, b) {\r\n\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\tfunction __() { this.constructor = d; }\r\n\td.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/extends.js\n// module id = 3\n// module chunks = 0","function isDate(obj) {\r\n\tvar fields = [\r\n\t\t\"getFullYear\",\r\n\t\t\"getMonth\",\r\n\t\t\"getDate\"\r\n\t];\r\n\t\r\n\tif (obj && typeof obj == \"object\") {\r\n\t\tfor (var i=0; i<fields.length; i++) {\r\n\t\t\tif (!obj[fields[i]])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nmodule.exports = {\r\n\tisDate: isDate\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/date_helpers.js\n// module id = 4\n// module chunks = 0","var utils = require(\"../../../utils/utils\"),\r\n\tdomEventsScope = require(\"../../../utils/dom_event_scope\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar Cell = (function () {\r\n\t\"use strict\";\r\n\r\n\tfunction Cell(parent, config, factory, gantt) {\r\n\t\tif (parent) {\r\n\t\t\tthis.$container = domHelpers.toNode(parent);\r\n\t\t\tthis.$parent = parent;\r\n\t\t}\r\n\t\t// save config\r\n\t\tthis.$config = utils.mixin(config, {\r\n\t\t\theaderHeight: 33\r\n\t\t});\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$domEvents = gantt._createDomEventScope();\r\n\t\t// set id\r\n\t\tthis.$id = config.id || \"c\" + utils.uid();\r\n\r\n\t\tthis.$name = \"cell\";\r\n\t\tthis.$factory = factory;\r\n\r\n\t\teventable(this);\r\n\r\n\t}\r\n\r\n\tCell.prototype.destructor = function () {\r\n\t\tthis.$parent = this.$container = this.$view = null;\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.detach(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\t\tthis.$domEvents.detachAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t};\r\n\tCell.prototype.cell = function (id) {\r\n\t\treturn null;\r\n\t};\r\n\r\n\tCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$view.scrollLeft = left;\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$view.scrollTop = top;\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype.clear = function(){\r\n\t\tthis.getNode().innerHTML = \"\";\r\n\t\tthis.getNode().className = \"gantt_layout_content\";\r\n\t\tthis.getNode().style.padding = \"0\";\r\n\t};\r\n\r\n\tCell.prototype.resize = function (final) {\r\n\t\tif (this.$parent) {\r\n\t\t\treturn this.$parent.resize(final);\r\n\t\t}\r\n\r\n\t\tif(final === false){\r\n\t\t\tthis.$preResize = true;\r\n\t\t}\r\n\r\n\t\tvar topCont = this.$container;\r\n\t\tvar x = topCont.offsetWidth;\r\n\t\tvar y = topCont.offsetHeight;\r\n\t\tvar topSize = this.getSize();\r\n\t\tif (topCont === document.body) {\r\n\t\t\tx = document.body.offsetWidth;\r\n\t\t\ty = document.body.offsetHeight;\r\n\t\t}\r\n\t\tif (x < topSize.minWidth) {\r\n\t\t\tx = topSize.minWidth;\r\n\t\t}\r\n\t\tif (x > topSize.maxWidth) {\r\n\t\t\tx = topSize.maxWidth;\r\n\t\t}\r\n\t\tif (y < topSize.minHeight) {\r\n\t\t\ty = topSize.minHeight;\r\n\t\t}\r\n\t\tif (y > topSize.maxHeight) {\r\n\t\t\ty = topSize.maxHeight;\r\n\t\t}\r\n\t\tthis.setSize(x, y);\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif(!this.$preResize){\r\n\t\t//\tself.callEvent(\"onResize\", [x, y]);\r\n\t\t}\r\n\t\tthis.$preResize = false;\r\n\t};\r\n\r\n\tCell.prototype.hide = function () {\r\n\t\tthis._hide(true);\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.show = function (force) {\r\n\t\tthis._hide(false);\r\n\t\tif (force && this.$parent) {\r\n\t\t\tthis.$parent.show();\r\n\t\t}\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype._hide = function (mode) {\r\n\t\tif (mode === true && this.$view.parentNode) {\r\n\t\t\tthis.$view.parentNode.removeChild(this.$view);\r\n\t\t}\r\n\t\telse if (mode === false && !this.$view.parentNode) {\r\n\t\t\tvar index = this.$parent.cellIndex(this.$id);\r\n\t\t\tthis.$parent.moveView(this, index);\r\n\t\t}\r\n\t\tthis.$config.hidden = mode;\r\n\t};\r\n\tCell.prototype.$toHTML = function (content, css) {\r\n\t\tif (content === void 0) { content = \"\"; }\r\n\t\tcss = [(css || \"\"), (this.$config.css || \"\")].join(\" \");\r\n\t\tvar obj = this.$config;\r\n\t\tvar header = \"\";\r\n\t\tif (obj.raw) {\r\n\t\t\tcontent = typeof obj.raw === \"string\" ? obj.raw : \"\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!content) {\r\n\t\t\t\tcontent = \"<div class='gantt_layout_content' \"+(css ? \" class='\"+css+\"' \" : \"\")+\" >\" + (obj.html || \"\") + \"</div>\";\r\n\t\t\t}\r\n\t\t\tif (obj.header) {\r\n\t\t\t\tvar collapseIcon = obj.canCollapse ? \"<div class='gantt_layout_header_arrow'></div>\" : \"\";\r\n\t\t\t\theader = \"<div class='gantt_layout_header'>\" + collapseIcon + \"<div class='gantt_layout_header_content'>\" + obj.header + \"</div></div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"<div class='gantt_layout_cell \" + css + \"' data-cell-id='\" + this.$id + \"'>\" + header + content + \"</div>\";\r\n\t};\r\n\tCell.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tthis.init();\r\n\t};\r\n\tCell.prototype.getNode = function () {\r\n\t\treturn (this.$view.querySelector(\"gantt_layout_cell\") || this.$view);\r\n\t};\r\n\tCell.prototype.init = function () {\r\n\t\t// [NOT-GOOD] code is executed for each component, while it still has only one handler, it is no good\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tthis._headerClickHandler = function(e){\r\n\t\t\tvar cellId = domHelpers.locateAttribute(e, \"data-cell-id\");\r\n\t\t\tif(cellId == self.$id){\r\n\t\t\t\tself.toggle();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.delegate(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t};\r\n\tCell.prototype.toggle = function () {\r\n\t\tthis.$config.collapsed = !this.$config.collapsed;\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.getSize = function () {\r\n\t\tvar size = {\r\n\t\t\theight: this.$config.height || 0,\r\n\t\t\twidth: this.$config.width || 0,\r\n\t\t\tgravity: this.$config.gravity || 1,\r\n\t\t\tminHeight: this.$config.minHeight || 0,\r\n\t\t\tminWidth: this.$config.minWidth || 0,\r\n\t\t\tmaxHeight: this.$config.maxHeight || 100000,\r\n\t\t\tmaxWidth: this.$config.maxWidth || 100000\r\n\t\t};\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tvar mode = this.$config.mode === \"x\";\r\n\t\t\tsize[mode ? \"width\" : \"height\"] = size[mode ? \"maxWidth\" : \"maxHeight\"] = this.$config.headerHeight;\r\n\t\t}\r\n\t\treturn size;\r\n\t};\r\n\r\n\tCell.prototype.getContentSize = function(){\r\n\r\n\t\tvar width = this.$lastSize.contentX;\r\n\t\tif(width !== width*1){\r\n\t\t\twidth = this.$lastSize.width;\r\n\t\t}\r\n\r\n\t\tvar height = this.$lastSize.contentY;\r\n\t\tif(height !== height*1){\r\n\t\t\theight = this.$lastSize.height;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t};\r\n\r\n\tCell.prototype._getBorderSizes = function(){\r\n\t\tvar borders = {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\thorizontal: 0,\r\n\t\t\tvertical: 0\r\n\t\t};\r\n\t\tif(this._currentBorders){\r\n\t\t\tif(this._currentBorders[this._borders.left]){\r\n\t\t\t\tborders.left = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.right]){\r\n\t\t\t\tborders.right = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.top]){\r\n\t\t\t\tborders.top = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.bottom]){\r\n\t\t\t\tborders.bottom = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn borders;\r\n\r\n\t};\r\n\r\n\tCell.prototype.setSize = function (x, y) {\r\n\t\tthis.$view.style.width = x + \"px\";\r\n\t\tthis.$view.style.height = y + \"px\";\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar contentY = y - borders.vertical;\r\n\t\tvar contentX = x - borders.horizontal;\r\n\r\n\t\tthis.$lastSize = { x: x, y: y, contentX: contentX, contentY: contentY };\r\n\t\tif (this.$config.header) {\r\n\t\t\tthis._sizeHeader();\r\n\t\t}else{\r\n\t\t\tthis._sizeContent();\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._borders = {\r\n\t\t\"left\":\"gantt_layout_cell_border_left\",\r\n\t\t\"right\":\"gantt_layout_cell_border_right\",\r\n\t\t\"top\":\"gantt_layout_cell_border_top\",\r\n\t\t\"bottom\":\"gantt_layout_cell_border_bottom\"\r\n\t};\r\n\r\n\tCell.prototype._setBorders = function(css, view){\r\n\t\tif(!view) {\r\n\t\t\tview = this;\r\n\t\t}\r\n\t\tvar node = view.$view;\r\n\r\n\t\tfor( var i in this._borders){\r\n\t\t\tdomHelpers.removeClassName(node, this._borders[i]);\r\n\t\t}\r\n\r\n\t\tif(typeof css == \"string\"){\r\n\t\t\tcss = [css];\r\n\t\t}\r\n\r\n\t\tvar cssHash = {};\r\n\r\n\t\tfor(var i = 0; i < css.length; i++){\r\n\t\t\tdomHelpers.addClassName(node, css[i]);\r\n\t\t\tcssHash[css[i]] = true;\r\n\t\t}\r\n\r\n\t\tview._currentBorders = cssHash;\r\n\t};\r\n\r\n\r\n\tCell.prototype._sizeContent = function(){\r\n\t\tvar content = this.$view.childNodes[0];\r\n\t\tif(content.className == \"gantt_layout_content\"){\r\n\t\t\tcontent.style.height = this.$lastSize.contentY + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._sizeHeader = function () {\r\n\t\tvar size = this.$lastSize;\r\n\t\tsize.contentY -= this.$config.headerHeight;\r\n\t\tvar header = this.$view.childNodes[0];\r\n\t\tvar content = this.$view.childNodes[1];\r\n\t\tvar xLayout = this.$config.mode === \"x\";\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tcontent.style.display = \"none\";\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_x\";\r\n\t\t\t\theader.style.width = size.y + \"px\";\r\n\t\t\t\tvar d = Math.floor(size.y / 2 - size.x / 2);\r\n\t\t\t\theader.style.transform = \"rotate(90deg) translate(\" + d + \"px, \" + d + \"px)\";\r\n\t\t\t\tcontent.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_y\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header vertical\";\r\n\t\t\t}\r\n\t\t\theader.style.width = 'auto';\r\n\t\t\theader.style.transform = '';\r\n\t\t\tcontent.style.display = \"\";\r\n\t\t\tcontent.style.height = size.contentY + \"px\";\r\n\t\t}\r\n\t\theader.style.height = this.$config.headerHeight + \"px\";\r\n\t};\r\n\treturn Cell;\r\n}());\r\n\r\nmodule.exports = Cell;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/layout/cell.js\n// module id = 5\n// module chunks = 0","var env = {\r\n\tisIE: (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisIE6: (!window.XMLHttpRequest && navigator.userAgent.indexOf(\"MSIE\") >= 0),\r\n\tisIE7: (navigator.userAgent.indexOf(\"MSIE 7.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") < 0),\r\n\tisIE8: (navigator.userAgent.indexOf(\"MSIE 8.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: (navigator.userAgent.indexOf(\"Opera\") >= 0),\r\n\tisChrome: (navigator.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisKHTML: (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: (navigator.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: (navigator.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: (navigator.userAgent.indexOf(\"Edge\")!=-1)\r\n};\r\n\r\nmodule.exports = env;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/env.js\n// module id = 6\n// module chunks = 0","var units = {\r\n\t\"second\": 1,\r\n\t\"minute\": 60,\r\n\t\"hour\": 60 * 60,\r\n\t\"day\": 60 * 60 * 24,\r\n\t\"week\": 60 * 60 * 24 * 7,\r\n\t\"month\": 60 * 60 * 24 * 30,\r\n\t\"quarter\": 60 * 60 * 24 * 30 * 3,\r\n\t\"year\": 60 * 60 * 24 * 365\r\n};\r\nfunction getSecondsInUnit(unit){\r\n\treturn units[unit] || units.hour;\r\n}\r\n\r\nfunction forEach(arr, callback){\r\n\tvar workArray = arr.slice();\r\n\tfor(var i = 0; i < workArray.length; i++){\r\n\t\tcallback(workArray[i], i);\r\n\t}\r\n}\r\n\r\nfunction arrayMap(arr, callback){\r\n\tvar workArray = arr.slice();\r\n\tvar resArray = [];\r\n\r\n\tfor(var i = 0; i < workArray.length; i++){\r\n\t\tresArray.push(callback(workArray[i], i));\r\n\t}\r\n\r\n\treturn resArray;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSecondsInUnit: getSecondsInUnit,\r\n\tforEach: forEach,\r\n\tarrayMap: arrayMap\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/helpers.js\n// module id = 7\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tgridResize = require(\"./grid_resize\");\r\n\r\nvar Grid = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$gantt = gantt;\r\n\tthis.$parent = parent;\r\n\teventable(this);\r\n\tthis.$state = {};\r\n};\r\n\r\nGrid.prototype = {\r\n\tinit: function(container){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar gridAriaAttr = gantt._waiAria.gridAttrString();\r\n\t\tvar gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\r\n\r\n\t\tcontainer.innerHTML = \"<div class='gantt_grid' style='height:inherit;width:inherit;' \"+gridAriaAttr+\"></div>\";\r\n\t\tthis.$grid = container.childNodes[0];\r\n\r\n\t\tthis.$grid.innerHTML = \"<div class='gantt_grid_scale' \"+\r\n\t\t\tgantt._waiAria.gridScaleRowAttrString()+\"></div><div class='gantt_grid_data' \"+gridDataAriaAttr+\"></div>\";\r\n\r\n\t\tthis.$grid_scale = this.$grid.childNodes[0];\r\n\t\tthis.$grid_data = this.$grid.childNodes[1];\r\n\r\n\t\tvar attr = this.$getConfig()[this.$config.bind + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\t\r\n\t\tif(!this.$config.layers){\r\n\t\t\tvar layers = this._createLayerConfig();\r\n\t\t\tthis.$config.layers = layers;\r\n\t\t}\r\n\r\n\t\tvar resizer = gridResize(gantt, this);\r\n\t\tresizer.init();\r\n\t\tthis._renderHeaderResizers = resizer.doOnRender;\r\n\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\r\n\t\tthis._addLayers(this.$gantt);\r\n\t\tthis._initEvents();\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\tsetSize: function(width, height){\r\n\t\tthis.$config.width = this.$state.width = width;\r\n\t\tthis.$state.height = height;\r\n\r\n\t\t// TODO: maybe inherit and override in a subclass instead of extending here\r\n\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tinnerWidth = 0;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tinnerWidth += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tvar outerWidth;\r\n\t\tif(isNaN(innerWidth) || !this.$config.scrollable){\r\n\t\t\touterWidth = this._setColumnsWidth(width + 1);\r\n\t\t\tinnerWidth = outerWidth;\r\n\t\t}\r\n\r\n\t\tif(this.$config.scrollable){\r\n\t\t\tthis.$grid_scale.style.width = innerWidth + \"px\";\r\n\t\t\tthis.$grid_data.style.width = innerWidth + \"px\";\r\n\t\t}else{\r\n\t\t\tthis.$grid_scale.style.width = \"inherit\";\r\n\t\t\tthis.$grid_data.style.width = \"inherit\";\r\n\t\t}\r\n\t\tthis.$config.width -= 1;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif(outerWidth !== width){\r\n\t\t\tconfig.grid_width = outerWidth;\r\n\t\t\tthis.$config.width = outerWidth - 1;\r\n\t\t}\r\n\r\n\t\tvar dataHeight = Math.max(this.$state.height - config.scale_height, 0);\r\n\t\tthis.$grid_data.style.height = dataHeight + \"px\";\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetSize: function(){\r\n\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._getGridWidth();\r\n\r\n\t\tvar size = {\r\n\t\t\tx: this.$state.width,\r\n\t\t\ty: this.$state.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth: 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight: 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\r\n\t\treturn size;\r\n\t},\r\n\trefresh: function(){\r\n\t\tif(this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\r\n\t\tthis._calculateGridWidth();\r\n\t\tthis._renderGridHeader();\r\n\t},\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$state.scrollLeft = this.$grid.scrollLeft = left;\r\n\t\t}\r\n\r\n\t\t// var config = this.$getConfig();\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$state.scrollTop = this.$grid_data.scrollTop = top;\r\n\t\t}\r\n\t},\r\n\tgetGridColumns: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.columns.slice();\r\n\t},\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$grid.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetItemTop: function(id){\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\treturn store.getIndexById(id) * this.$getConfig().row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t},\r\n\r\n\t_createLayerConfig: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar self = this;\r\n\t\tvar layers = [\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridLine,\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tfilter: [function(){\r\n\t\t\t\t\treturn self.isVisible();\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t];\r\n\t\treturn layers;\r\n\t},\r\n\r\n\t_addLayers: function(gantt){\r\n\t\tif(!this.$config.bind)\r\n\t\t\treturn;\r\n\r\n\t\tthis._taskLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif(!taskRenderer){\r\n\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\tname: this.$config.bind,\r\n\t\t\t\tdefaultContainer: function(){ return self.$grid_data;}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar taskLayers = this.$config.layers;\r\n\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\tvar layer = taskLayers[i];\r\n\t\t\tlayer.host = this;\r\n\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t}\r\n\r\n\t\tif(this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\t},\r\n\r\n\t_initSmartRenderingPlaceholder: function(){\r\n\t\tvar self = this;\r\n\t\tvar store = this.$config.rowStore;\r\n\t\tif(!store){\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tthis._initSmartRenderingPlaceholder = function(){};\r\n\t\t}\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.smart_rendering) {\r\n\t\t\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0;\r\n\t\t\t\tif(contentHeight){\r\n\t\t\t\t\tif(self.$rowsPlaceholder && self.$rowsPlaceholder.parentNode){\r\n\t\t\t\t\t\tself.$rowsPlaceholder.parentNode.removeChild(self.$rowsPlaceholder);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar placeholder = self.$rowsPlaceholder = document.createElement(\"div\");\r\n\t\t\t\t\tplaceholder.style.visibility = \"hidden\";\r\n\t\t\t\t\tplaceholder.style.height = contentHeight + \"px\";\r\n\t\t\t\t\tplaceholder.style.width = \"1px\";\r\n\t\t\t\t\tself.$grid_data.appendChild(placeholder);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_initEvents: function(){\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_close\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif(target){\r\n\t\t\t\tstore.close(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_open\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif(target){\r\n\t\t\t\tstore.open(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_getColumnWidth: function(column, config, width) {\r\n\t\tvar min_width = column.min_width || config.min_grid_column_width;\r\n\t\tvar new_width = Math.max(width, min_width || 10);\r\n\t\tif (column.max_width)\r\n\t\t\tnew_width = Math.min(new_width, column.max_width);\r\n\t\treturn new_width;\r\n\t},\r\n\t// return min and max possible grid width according to restricts\r\n\t_getGridWidthLimits: function() {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tcolumns = this.getGridColumns(),\r\n\t\t\tmin_limit = 0,\r\n\t\t\tmax_limit = 0;\r\n\r\n\t\t\tfor (var i=0; i<columns.length; i++) {\r\n\t\t\t\tmin_limit += columns[i].min_width ? columns[i].min_width : config.min_grid_column_width;\r\n\t\t\t\tif (max_limit !== undefined) {\r\n\t\t\t\t\tmax_limit = columns[i].max_width ? (max_limit + columns[i].max_width) : undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn [min_limit, max_limit];\r\n\t},\r\n\t// resize columns to get total newWidth, starting from columns[start_index]  \r\n\t_setColumnsWidth: function(newWidth, start_index) {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tcolumns_width = 0,\r\n\t\t\tfinal_width = newWidth;\r\n\r\n\t\tstart_index = !window.isNaN(start_index) ? start_index : -1;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tif (window.isNaN(columns_width)) {\r\n\t\t\tthis._calculateGridWidth(); \r\n\t\t\tcolumns_width = 0;\r\n\t\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar extra_width = final_width - columns_width;\r\n\r\n\t\tvar start_width = 0;\r\n\t\tfor (var i=0; i<start_index+1; i++) {\r\n\t\t\tstart_width += columns[i].width;\r\n\t\t}\r\n\r\n\t\tcolumns_width -= start_width;\r\n\r\n\t\tfor (var i=start_index+1; i<columns.length; i++) {\r\n\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar\tshare = Math.round(extra_width * (col.width / columns_width));\r\n\r\n\t\t\t// columns have 2 additional restrict fields - min_width & max_width that are set by user\r\n\t\t\tif (extra_width < 0) {\r\n\t\t\t\tif (col.min_width && col.width+share < col.min_width)\r\n\t\t\t\t\tshare = col.min_width - col.width;\r\n\t\t\t\telse if (!col.min_width && config.min_grid_column_width && col.width+share < config.min_grid_column_width)\r\n\t\t\t\t\tshare = config.min_grid_column_width - col.width;\r\n\t\t\t} else if (col.max_width && col.width+share > col.max_width)\r\n\t\t\t\tshare = col.max_width - col.width;\r\n\r\n\t\t\tcolumns_width -= col.width;\r\n\t\t\tcol.width += share;\r\n\t\t\textra_width -= share;\r\n\r\n\t\t}\r\n\r\n\t\tvar iterator = extra_width > 0 ? 1 : -1;\r\n\t\twhile ((extra_width > 0 && iterator === 1) || (extra_width < 0 && iterator === -1)) {\r\n\t\t\tvar curExtra = extra_width;\r\n\t\t\tfor (i = start_index+1; i<columns.length; i++) {\r\n\t\t\t\tvar new_width = columns[i].width + iterator;\r\n\r\n\t\t\t\tif (new_width == this._getColumnWidth(columns[i], config, new_width)) {\r\n\t\t\t\t\textra_width -= iterator;\r\n\t\t\t\t\tcolumns[i].width = new_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!extra_width)\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (curExtra == extra_width)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// if impossible to resize the right-side columns, resize the start column\r\n\t\tif (extra_width && start_index > -1) {\r\n\t\t\tvar new_width = columns[start_index].width + extra_width;\r\n\t\t\tif (new_width == this._getColumnWidth(columns[start_index], config, new_width))\r\n\t\t\t\tcolumns[start_index].width = new_width;\r\n\t\t}\r\n\r\n\t\t//if (this.callEvent(\"onGridResizeEnd\", [config.grid_width, final_width]) === false)\r\n\t\t//\treturn;\r\n\r\n\t\treturn this._getColsTotalWidth();\r\n\t},\r\n\r\n\t_getColsTotalWidth: function(){\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\treturn cols_width;\r\n\t},\r\n\t_calculateGridWidth: function() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\t\tvar unknown = [];\r\n\t\tvar width = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\tv = config.min_grid_column_width || 10;\r\n\t\t\t\tunknown.push(i);\r\n\t\t\t}\r\n\t\t\twidth[i] = v;\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\tvar gridWidth = this._getGridWidth() + 1;\r\n\t\tif (config.autofit || unknown.length) {\r\n\t\t\tvar diff = gridWidth - cols_width;\r\n\t\t\t// TODO: logic may be improved for proportional changing of width\r\n\t\t\tif (config.autofit) {\r\n\t\t\t\t// delta must be added for all columns\r\n\t\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (width.length-i));\r\n\t\t\t\t\twidth[i] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[i], config, width[i]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (new_width != width[i]) {\r\n\t\t\t\t\t\tdelta = new_width - width[i];\r\n\t\t\t\t\t\twidth[i] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t} else if (unknown.length) {\r\n\t\t\t\t// there are several columns with undefined width\r\n\t\t\t\tfor (var i = 0; i < unknown.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (unknown.length-i)); // no float values, just integer\r\n\t\t\t\t\tvar index = unknown[i];\r\n\t\t\t\t\twidth[index] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[index], config, width[index]);\r\n\t\t\t\t\tif (new_width != width[index]) {\r\n\t\t\t\t\t\tdelta = new_width - width[index];\r\n\t\t\t\t\t\twidth[index] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\tcolumns[i].width = width[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar changed = (gridWidth != cols_width);\r\n\t\t\tthis.$config.width = cols_width - 1;\r\n\t\t\tconfig.grid_width = cols_width;\r\n\t\t\tif(changed){\r\n\t\t\t\tthis.$parent._setContentSize(this.$config.width, this.$config.height);\r\n//\t\t\t\tthis.$parent.$config.width = cols_width;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_renderGridHeader: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar locale = this.$gantt.locale;\r\n\t\tvar templates = this.$gantt.templates;\r\n\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tif(config.rtl){\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\t\tvar cells = [];\r\n\t\tvar width = 0,\r\n\t\t\tlabels = locale.labels;\r\n\r\n\t\tvar lineHeigth = config.scale_height - 1;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\t// ensure columns have non-empty names\r\n\t\t\tif (!col.name) {\r\n\t\t\t\tcol.name = gantt.uid() + \"\";\r\n\t\t\t}\r\n\r\n\t\t\tvar colWidth = col.width * 1;\r\n\r\n\t\t\tvar gridWidth = this._getGridWidth();\r\n\t\t\tif (last && gridWidth > width + colWidth)\r\n\t\t\t\tcol.width = colWidth = gridWidth - width;\r\n\t\t\twidth += colWidth;\r\n\t\t\tvar sort = (gantt._sort && col.name == gantt._sort.name) ? (\"<div class='gantt_sort gantt_\" + gantt._sort.direction + \"'></div>\") : \"\";\r\n\t\t\tvar cssClass = [\"gantt_grid_head_cell\",\r\n\t\t\t\t(\"gantt_grid_head_\" + col.name),\r\n\t\t\t\t(last ? \"gantt_last_cell\" : \"\"),\r\n\t\t\t\ttemplates.grid_header_class(col.name, col)].join(\" \");\r\n\r\n\t\t\tvar style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tvar label = (col.label || labels[\"column_\" + col.name]);\r\n\t\t\tlabel = label || \"\";\r\n\r\n\t\t\tvar ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\r\n\r\n\t\t\tvar cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \" column_id='\" + col.name + \"'>\" + label + sort + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tthis.$grid_scale.style.height = (config.scale_height) + \"px\";\r\n\t\tthis.$grid_scale.style.lineHeight = lineHeigth + \"px\";\r\n\t\t//this.$grid_scale.style.width = \"inherit\";\r\n\t\tthis.$grid_scale.innerHTML = cells.join(\"\");\r\n\r\n\t\tif(this._renderHeaderResizers){\r\n\t\t\tthis._renderHeaderResizers();\r\n\t\t}\r\n\t},\r\n\r\n\t_getGridWidth: function(){\r\n\t\t// TODO: refactor/remove/comment some of _getGridWidth/this.$config.width/this.$state.width, it's not clear what they do\r\n\t\treturn this.$config.width;\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tthis._clearLayers(this.$gantt);\r\n\t\tthis._mouseDelegates.destructor();\r\n\t\tthis._mouseDelegates = null;\r\n\t\tthis.$grid = null;\r\n\t\tthis.$grid_scale = null;\r\n\t\tthis.$grid_data = null;\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t}\r\n};\r\n\r\nmodule.exports = Grid;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/grid/grid.js\n// module id = 8\n// module chunks = 0","function create(gantt){\r\n\tvar events = [];\r\n\r\n\treturn {\r\n\t\tdelegate:function(event, className, handler, root) {\r\n\t\t\tevents.push([event, className, handler, root]);\r\n\r\n\t\t\tvar helper = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\thelper.delegate(event, className, handler, root);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\tfor(var i = 0; i < events.length; i++){\r\n\t\t\t\tvar h = events[i];\r\n\t\t\t\tmouseEvents.detach(h[0], h[1], h[2], h[3]);\r\n\t\t\t}\r\n\t\t\tevents = [];\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = create;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/mouse_event_container.js\n// module id = 9\n// module chunks = 0","function checkTimeout(host, updPerSecond){\r\n\tif (!updPerSecond)\r\n\t\treturn true;\r\n\t\r\n\tif (host._on_timeout)\r\n\t\treturn false;\r\n\t\r\n\tvar timeout = Math.ceil(1000/updPerSecond);\r\n\tif (timeout < 2) return true;\r\n\r\n\tsetTimeout(function(){\r\n\t\tdelete host._on_timeout;\r\n\t}, timeout);\r\n\r\n\thost._on_timeout = true;\r\n\treturn true;\r\n}\r\n\r\nmodule.exports = checkTimeout;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/timeout.js\n// module id = 10\n// module chunks = 0","var utils = require(\"./utils\");\r\n\r\nfunction createScope(addEvent, removeEvent){\r\n\taddEvent = addEvent || utils.event;\r\n\tremoveEvent = removeEvent || utils.eventRemove;\r\n\r\n\tvar handlers = [];\r\n\r\n\treturn {\r\n\t\tattach: function(el, event, handler, capture){\r\n\t\t\thandlers.push({element: el, event:event, callback: handler, capture: capture});\r\n\t\t\taddEvent(el, event, handler, capture);\r\n\t\t},\r\n\t\tdetach: function(el, event, handler, capture){\r\n\t\t\tremoveEvent(el, event, handler, capture);\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handler = handlers[i];\r\n\t\t\t\tif(handler.element === el && handler.event === event && handler.callback === handler && handler.capture === capture){\r\n\t\t\t\t\thandlers.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdetachAll: function(){\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, handlers[i].capture);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, undefined);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, false);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, true);\r\n\t\t\t}\r\n\t\t\thandlers = [];\r\n\t\t},\r\n\t\textend: function(){\r\n\t\t\treturn createScope(this.event, this.eventRemove);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createScope;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/dom_event_scope.js\n// module id = 11\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar Layout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(Layout, _super);\r\n\tfunction Layout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(parent)\r\n\t\t\t_this.$root = true;\r\n\r\n\t\t_this._parseConfig(config);\r\n\t\t_this.$name = \"layout\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tLayout.prototype.destructor = function () {\r\n\t\tif (this.$container && this.$view) {\r\n\t\t\tdomHelpers.removeNode(this.$view);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tchild.destructor();\r\n\t\t}\r\n\t\tthis.$cells = [];\r\n\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tLayout.prototype._resizeScrollbars = function(autosize, scrollbars){\r\n\t\tvar scrollChanged = false;\r\n\t\tvar visibleScrollbars = [],\r\n\t\t\thiddenSrollbars = [];\r\n\r\n\t\tfunction showScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.show();\r\n\t\t\tscrollChanged = true;\r\n\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t}\r\n\t\tfunction hideScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.hide();\r\n\t\t\tscrollChanged = true;\r\n\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t}\r\n\r\n\t\tvar scrollbar;\r\n\t\tfor(var i = 0; i < scrollbars.length; i++){\r\n\t\t\tscrollbar = scrollbars[i];\r\n\r\n\t\t\tif(autosize[scrollbar.$config.scroll]) {\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldHide()){\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldShow()){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}else{\r\n\t\t\t\tif(scrollbar.isVisible()){\r\n\t\t\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t\t\t}else{\r\n\t\t\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar visibleGroups = {};\r\n\t\tfor(var i = 0; i < visibleScrollbars.length; i++){\r\n\t\t\tif(visibleScrollbars[i].$config.group){\r\n\t\t\t\tvisibleGroups[visibleScrollbars[i].$config.group] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < hiddenSrollbars.length; i++){\r\n\t\t\tscrollbar = hiddenSrollbars[i];\r\n\r\n\t\t\tif(scrollbar.$config.group && visibleGroups[scrollbar.$config.group]){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn scrollChanged;\r\n\t};\r\n\r\n\tLayout.prototype._syncCellSizes = function(groupName, newSize){\r\n\t\tif(!groupName)\r\n\t\t\treturn;\r\n\r\n\t\tvar groups = {};\r\n\r\n\t\tthis._eachChild(function(cell){\r\n\t\t\tif(cell.$config.group && cell.$name != \"scrollbar\" && cell.$name != \"resizer\"){\r\n\t\t\t\tif(!groups[cell.$config.group]){\r\n\t\t\t\t\tgroups[cell.$config.group] = [];\r\n\t\t\t\t}\r\n\t\t\t\tgroups[cell.$config.group].push(cell);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(groups[groupName]){\r\n\t\t\tthis._syncGroupSize(groups[groupName], newSize);\r\n\t\t}\r\n\t\treturn groups[groupName];\r\n\t};\r\n\r\n\tLayout.prototype._syncGroupSize = function(cells, newSize){\r\n\t\tif(!cells.length) return;\r\n\r\n\t\tvar property = cells[0].$parent._xLayout ? \"width\" : \"height\";\r\n\t\tvar direction = cells[0].$parent.getNextSibling(cells[0].$id) ? 1 : -1;\r\n\r\n\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\tvar ownSize = cells[i].getSize();\r\n\r\n\t\t\tvar resizeSibling = direction > 0 ? cells[i].$parent.getNextSibling(cells[i].$id) : cells[i].$parent.getPrevSibling(cells[i].$id);\r\n\t\t\tif(resizeSibling.$name == \"resizer\"){\r\n\t\t\t\tresizeSibling = direction > 0 ? resizeSibling.$parent.getNextSibling(resizeSibling.$id) : resizeSibling.$parent.getPrevSibling(resizeSibling.$id);\r\n\t\t\t}\r\n\t\t\tvar siblingSize = resizeSibling.getSize();\r\n\r\n\t\t\tif(resizeSibling[property]){\r\n\t\t\t\tvar totalGravity = ownSize.gravity + siblingSize.gravity;\r\n\t\t\t\tvar totalSize = ownSize[property] + siblingSize[property];\r\n\t\t\t\tvar k = totalGravity / totalSize;\r\n\t\t\t\tcells[i].$config.gravity = k * newSize;\r\n\r\n\t\t\t\tresizeSibling.$config[property] = totalSize - newSize;\r\n\t\t\t\tresizeSibling.$config.gravity = totalGravity - k * newSize;\r\n\t\t\t}else{\r\n\r\n\r\n\t\t\t\tcells[i].$config[property] = newSize;\r\n\t\t\t}\r\n\r\n\t\t\tvar mainGrid = this.$gantt.$ui.getView(\"grid\");\r\n\t\t\tif(mainGrid && cells[i].$content === mainGrid && !mainGrid.$config.scrollable){\r\n\t\t\t\tthis.$gantt.config.grid_width = newSize;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.resize = function(startStage){\r\n\t\tvar mainCall = false;\r\n\t\tif(this.$root && !this._resizeInProgress){\r\n\t\t\tthis.callEvent(\"onBeforeResize\", []);\r\n\t\t\tmainCall = true;\r\n\t\t\tthis._resizeInProgress = true;\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, true);\r\n\t\t_super.prototype.resize.call(this, false);\r\n\r\n\t\tif(mainCall){\r\n\r\n\t\t\tvar contentViews = [];\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewCell\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewLayout\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"hostCell\"));\r\n\r\n\t\t\tvar scrollbars = this.getCellsByType(\"scroller\");\r\n\r\n\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t}\r\n\r\n\t\t\tvar autosize = this._getAutosizeMode(this.$config.autosize);\r\n\r\n\t\t\tvar scrollChanged = this._resizeScrollbars(autosize, scrollbars);\r\n\r\n\t\t\tif(this.$config.autosize){\r\n\t\t\t\tthis.autosize(this.$config.autosize);\r\n\t\t\t\tscrollChanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollChanged){\r\n\t\t\t\tthis.resize();\r\n\t\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onResize\", []);\r\n\t\t}\r\n\t\tif(mainCall){\r\n\t\t\tthis._resizeInProgress = false;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._eachChild = function(code, cell){\r\n\t\tcell = cell || this;\r\n\t\tcode(cell);\r\n\t\tif(cell.$cells){\r\n\t\t\tfor(var i = 0; i < cell.$cells.length; i++){\r\n\t\t\t\tthis._eachChild(code, cell.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getCellsByType = function(type){\r\n\t\tvar res = [];\r\n\t\tif(type === this.$name){\r\n\t\t\tres.push(this);\r\n\t\t}\r\n\r\n\t\tif(this.$content && this.$content.$name == type){\r\n\t\t\tres.push(this.$content);\r\n\t\t}\r\n\r\n\t\tif(this.$cells){\r\n\t\t\tfor(var i = 0; i < this.$cells.length; i++){\r\n\t\t\t\tvar children = Layout.prototype.getCellsByType.call(this.$cells[i], type);\r\n\t\t\t\tif(children.length){\r\n\t\t\t\t\tres.push.apply(res, children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getNextSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index + 1]){\r\n\t\t\treturn this.$cells[index + 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getPrevSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index - 1]){\r\n\t\t\treturn this.$cells[index - 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tLayout.prototype.cell = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tif (child.$id === id) {\r\n\t\t\t\treturn child;\r\n\t\t\t}\r\n\t\t\tvar sub = child.cell(id);\r\n\t\t\tif (sub) {\r\n\t\t\t\treturn sub;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.cellIndex = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tif (this.$cells[i].$id === id) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n\tLayout.prototype.moveView = function (view, ind) {\r\n\t\tif (this.$cells[ind] !== view) {\r\n\t\t\treturn window.alert(\"Not implemented\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tind += this.$config.header ? 1 : 0;\r\n\t\t\tvar node = this.$view;\r\n\t\t\tif (ind >= node.childNodes.length) {\r\n\t\t\t\tnode.appendChild(view.$view);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode.insertBefore(view.$view, node.childNodes[ind]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype._parseConfig = function (config) {\r\n\t\tthis.$cells = [];\r\n\t\tthis._xLayout = !config.rows;\r\n\t\tvar cells = config.rows || config.cols || config.views;\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tcell.mode = this._xLayout ? \"x\" : \"y\";\r\n\t\t\tvar $content = this.$factory.initUI(cell, this);\r\n\t\t\tif(!$content){\r\n\t\t\t\tcells.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\t$content.$parent = this;\r\n\t\t\t\tthis.$cells.push($content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.getCells = function () {\r\n\t\treturn this.$cells;\r\n\t};\r\n\tLayout.prototype.render = function () {\r\n\t\tvar view = domHelpers.insertNode(this.$container, this.$toHTML());\r\n\t\tthis.$fill(view, null);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\tthis.resize();\r\n\r\n\t\t// do simple repaint after the first call\r\n\t\tthis.render = this.resize;\r\n\t};\r\n\tLayout.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tvar cells = domHelpers.getChildNodes(node, \"gantt_layout_cell\");\r\n\t\tfor (var i = cells.length - 1; i >= 0; i--) {\r\n\t\t\tvar sub = this.$cells[i];\r\n\t\t\tsub.$fill(cells[i], this);\r\n\t\t\t// initially hidden cell\r\n\t\t\tif (sub.$config.hidden) {\r\n\t\t\t\tsub.$view.parentNode.removeChild(sub.$view);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.$toHTML = function () {\r\n\t\tvar mode = this._xLayout ? \"x\" : \"y\";\r\n\t\tvar html = [];\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\thtml.push(this.$cells[i].$toHTML());\r\n\t\t}\r\n\t\treturn _super.prototype.$toHTML.call(this, html.join(\"\"), (this.$root ? \"gantt_layout_root \" : \"\") + \"gantt_layout gantt_layout_\" + mode);\r\n\t};\r\n\r\n\tLayout.prototype.getContentSize = function(mode){\r\n\t\tvar contentWidth = 0,\r\n\t\t\tcontentHeight = 0;\r\n\r\n\t\tvar cellSize, cell, borders;\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif(cell.$config.hidden)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcellSize = cell.getContentSize(mode);\r\n\r\n\t\t\tif(cell.$config.view === \"scrollbar\" && mode[cell.$config.scroll]){\r\n\t\t\t\tcellSize.height = 0;\r\n\t\t\t\tcellSize.width = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(cell.$config.resizer){\r\n\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\tcellSize.height = 0;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellSize.width = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tborders = cell._getBorderSizes();\r\n\r\n\t\t\tif(this._xLayout){\r\n\t\t\t\tcontentWidth += (cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight = Math.max(contentHeight, (cellSize.height + borders.vertical));\r\n\t\t\t}else{\r\n\t\t\t\tcontentWidth = Math.max(contentWidth, cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight += cellSize.height + borders.vertical;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tborders = this._getBorderSizes();\r\n\t\tcontentWidth += borders.horizontal;\r\n\t\tcontentHeight += borders.vertical;\r\n\r\n\t\tif(this.$root){\r\n\t\t\tcontentWidth += 1;\r\n\t\t\tcontentHeight += 1;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: contentWidth,\r\n\t\t\theight: contentHeight\r\n\t\t};\r\n\t};\r\n\r\n\tLayout.prototype._cleanElSize = function(value){\r\n\t\treturn ((value || \"\").toString().replace(\"px\", \"\") * 1 || 0);\r\n\t};\r\n\tLayout.prototype._getBoxStyles = function(div){\r\n\t\tvar computed = null;\r\n\t\tif(window.getComputedStyle){\r\n\t\t\tcomputed = window.getComputedStyle(div, null);\r\n\t\t}else{\r\n\t\t\t//IE with elem.currentStyle does not calculate sizes from %, so will use the default approach\r\n\t\t\tcomputed = {\r\n\t\t\t\t\"width\":div.clientWidth,\r\n\t\t\t\t\"height\":div.clientHeight\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar properties = [\r\n\t\t\t\"width\",\r\n\t\t\t\"height\",\r\n\r\n\t\t\t\"paddingTop\",\r\n\t\t\t\"paddingBottom\",\r\n\t\t\t\"paddingLeft\",\r\n\t\t\t\"paddingRight\",\r\n\r\n\t\t\t\"borderLeftWidth\",\r\n\t\t\t\"borderRightWidth\",\r\n\t\t\t\"borderTopWidth\",\r\n\t\t\t\"borderBottomWidth\"\r\n\t\t];\r\n\t\tvar styles = {\r\n\t\t\tboxSizing:(computed.boxSizing == \"border-box\")\r\n\t\t};\r\n\r\n\t\tif(computed.MozBoxSizing){\r\n\t\t\tstyles.boxSizing = (computed.MozBoxSizing == \"border-box\");\r\n\t\t}\r\n\t\tfor(var i =0; i < properties.length; i++){\r\n\t\t\tstyles[properties[i]] = computed[properties[i]] ? this._cleanElSize(computed[properties[i]]) : 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar box = {\r\n\t\t\thorPaddings : (styles.paddingLeft + styles.paddingRight + styles.borderLeftWidth + styles.borderRightWidth),\r\n\t\t\tvertPaddings : (styles.paddingTop + styles.paddingBottom + styles.borderTopWidth + styles.borderBottomWidth),\r\n\t\t\tborderBox: styles.boxSizing,\r\n\t\t\tinnerWidth : styles.width,\r\n\t\t\tinnerHeight : styles.height,\r\n\t\t\touterWidth : styles.width,\r\n\t\t\touterHeight : styles.height\r\n\t\t};\r\n\r\n\r\n\t\tif(box.borderBox){\r\n\t\t\tbox.innerWidth -= box.horPaddings;\r\n\t\t\tbox.innerHeight -= box.vertPaddings;\r\n\t\t}else{\r\n\t\t\tbox.outerWidth += box.horPaddings;\r\n\t\t\tbox.outerHeight += box.vertPaddings;\r\n\t\t}\r\n\r\n\t\treturn box;\r\n\t};\r\n\r\n\tLayout.prototype._getAutosizeMode = function(config){\r\n\t\tvar res = {x:false, y:false};\r\n\t\tif(config === \"xy\"){\r\n\t\t\tres.x = res.y = true;\r\n\t\t}else if(config === \"y\" || config === true){\r\n\t\t\tres.y = true;\r\n\t\t}else if(config === \"x\"){\r\n\t\t\tres.x = true;\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.autosize = function(mode) {\r\n\t\tvar res = this._getAutosizeMode(mode);\r\n\t\tvar boxSizes = this._getBoxStyles(this.$container);\r\n\t\tvar contentSizes = this.getContentSize(mode);\r\n\r\n\t\tvar node = this.$container;\r\n\t\tif(res.x){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.width += boxSizes.horPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.width = contentSizes.width + \"px\";\r\n\t\t}\r\n\t\tif(res.y){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.height += boxSizes.vertPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.height = contentSizes.height + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getSize = function () {\r\n\t\tthis._sizes = [];\r\n\t\tvar width = 0;\r\n\t\tvar minWidth = 0;\r\n\t\tvar maxWidth = 100000;\r\n\t\tvar height = 0;\r\n\t\tvar maxHeight = 100000;\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\r\n\t\t\tvar size = this._sizes[i] = this.$cells[i].getSize();\r\n\t\t\tif (this.$cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width && size.minWidth) {\r\n\t\t\t\t\twidth += size.minWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twidth += size.width;\r\n\t\t\t\t}\r\n\t\t\t\tmaxWidth += size.maxWidth;\r\n\t\t\t\tminWidth += size.minWidth;\r\n\t\t\t\theight = Math.max(height, size.height);\r\n\t\t\t\tmaxHeight = Math.min(maxHeight, size.maxHeight); // min of maxHeight\r\n\t\t\t\tminHeight = Math.max(minHeight, size.minHeight); // max of minHeight\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height && size.minHeight) {\r\n\t\t\t\t\theight += size.minHeight;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\theight += size.height;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight += size.maxHeight;\r\n\t\t\t\tminHeight += size.minHeight;\r\n\t\t\t\twidth = Math.max(width, size.width);\r\n\t\t\t\tmaxWidth = Math.min(maxWidth, size.maxWidth); // min of maxWidth\r\n\t\t\t\tminWidth = Math.max(minWidth, size.minWidth); // max of minWidth\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar self = _super.prototype.getSize.call(this);\r\n\t\t// maxWidth\r\n\t\tif (self.maxWidth >= 100000) {\r\n\t\t\tself.maxWidth = maxWidth;\r\n\t\t}\r\n\t\t// maxHeight\r\n\t\tif (self.maxHeight >= 100000) {\r\n\t\t\tself.maxHeight = maxHeight;\r\n\t\t}\r\n\t\t// minWidth\r\n\t\tself.minWidth = self.minWidth !== self.minWidth ? 0 : self.minWidth;// || self.width || Math.max(minWidth, width);\r\n\t\t// minHeight\r\n\t\tself.minHeight = self.minHeight !== self.minHeight ? 0 : self.minHeight;//self.minHeight || self.height || Math.max(minHeight, height);\r\n\t\t// sizes with paddings and margins\r\n\t\tif (this._xLayout) {\r\n\t\t\tself.minWidth += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minWidth += this.$config.padding * 2 || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.minHeight += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\t\r\n\t\treturn self;\r\n\t};\r\n\t// calc total gravity and free space\r\n\tLayout.prototype._calcFreeSpace = function (s, cell, xLayout) {\r\n\t\tvar min = xLayout ? cell.minWidth : cell.minHeight;\r\n\t\tvar max = xLayout ? cell.maxWidth : cell.maxWidth;\r\n\t\tvar side = s;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * cell.gravity);\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t}\r\n\t\t\tthis._free -= side;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\tLayout.prototype._calcSize = function (s, size, xLayout) {\r\n\t\tvar side = s;\r\n\t\tvar min = xLayout ? size.minWidth : size.minHeight;\r\n\t\tvar max = xLayout ? size.maxWidth : size.maxHeight;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * size.gravity);\r\n\t\t}\r\n\t\tif (side > max) {\r\n\t\t\tside = max;\r\n\t\t}\r\n\t\tif (side < min) {\r\n\t\t\tside = min;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\r\n\tLayout.prototype._configureBorders = function(){\r\n\t\tif(this.$root){\r\n\t\t\tthis._setBorders([\r\n\t\t\t\tthis._borders.left,\r\n\t\t\t\tthis._borders.top,\r\n\t\t\t\tthis._borders.right,\r\n\t\t\t\tthis._borders.bottom\r\n\t\t\t],\r\n\t\t\tthis);\r\n\t\t}\r\n\r\n\t\tvar borderClass = this._xLayout ? this._borders.right : this._borders.bottom;\r\n\r\n\t\tvar cells = this.$cells;\r\n\r\n\t\tvar lastVisibleIndex = cells.length - 1;\r\n\t\tfor(var i = lastVisibleIndex; i >= 0; i--){\r\n\t\t\tif (!cells[i].$config.hidden) {\r\n\t\t\t\tlastVisibleIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar lastCell = i >= lastVisibleIndex;\r\n\t\t\tvar borderColorClass = \"\";\r\n\t\t\tif(!lastCell && cells[i + 1]){\r\n\t\t\t\tif(cells[i + 1].$config.view == \"scrollbar\"){\r\n\t\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\t\tlastCell = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tborderColorClass = \"gantt_layout_cell_border_transparent\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._setBorders(lastCell ? [] : [borderClass, borderColorClass], cells[i]);\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._updateCellVisibility = function(){\r\n\t\tvar oldVisibleCells = this._visibleCells || {};\r\n\t\tvar firstCall = !this._visibleCells;\r\n\t\tvar visibleCells = {};\r\n\t\tvar cell;\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (!firstCall && cell.$config.hidden && oldVisibleCells[cell.$id]) {\r\n\t\t\t\tcell._hide(true);\r\n\t\t\t}else if(!cell.$config.hidden && !oldVisibleCells[cell.$id]){\r\n\t\t\t\tcell._hide(false);\r\n\t\t\t}\r\n\r\n\t\t\tif(!cell.$config.hidden){\r\n\t\t\t\tvisibleCells[cell.$id] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._visibleCells = visibleCells;\r\n\t};\r\n\r\n\tLayout.prototype.setSize = function (x, y) {\r\n\t\tthis._configureBorders();\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\t\ty = this.$lastSize.contentY;\r\n\t\tx = this.$lastSize.contentX;\r\n\r\n\t\tvar padding = (this.$config.padding || 0);\r\n\t\tthis.$view.style.padding = padding + \"px\";\r\n\t\tthis._gravity = 0;\r\n\t\tthis._free = this._xLayout ? x : y;\r\n\t\tthis._free -= padding * 2;\r\n\t\t// calc all gravity\r\n\r\n\t\tvar cell,\r\n\t\t\tsize;\r\n\r\n\t\tthis._updateCellVisibility();\r\n\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar margin = (this.$config.margin || 0);\r\n\t\t\tif(cell.$name == \"resizer\" && !margin){\r\n\t\t\t\tmargin = -1;\r\n\t\t\t}\r\n\r\n\t\t\t// set margins to child cell\r\n\t\t\tvar cellView = cell.$view;\r\n\r\n\t\t\tvar marginSide = this._xLayout ? \"marginRight\" : \"marginBottom\";\r\n\t\t\tif (i !== this.$cells.length - 1) {\r\n\t\t\t\tcellView.style[marginSide] = margin + \"px\";\r\n\t\t\t\tthis._free -= margin; // calc free space without margin\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar width = size.width;\r\n\t\t\tvar height = size.height;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tthis._calcFreeSpace(width, size, true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._calcFreeSpace(height, size, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden && cell.$config.view != \"timeline\") {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar dx = void 0;\r\n\t\t\tvar dy = void 0;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tdx = this._calcSize(size.width, size, true);\r\n\t\t\t\tdy = y - padding * 2; // layout height without paddings\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdx = x - padding * 2; // layout width without paddings\r\n\t\t\t\tdy = this._calcSize(size.height, size, false);\r\n\t\t\t}\r\n\t\t\tif (cell.$config.view == \"timeline\" && cell.$config.hidden) {\r\n\t\t\t\tdx = 0;\r\n\t\t\t}\r\n\t\t\tcell.setSize(dx, dy);\r\n\t\t}\r\n\r\n\t\t/*if(this.$root && !this._updatingScrollbars){\r\n\t\t\tthis._updatingScrollbars = true;\r\n\t\t\teachCell(function(cell){\r\n\t\t\t\tif(cell.$content && cell.$content.$name == \"scroller\"){\r\n\t\t\t\t\tcell.$content.toggleVisibility();\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tthis._updatingScrollbars = false;\r\n\t\t}*/\r\n\r\n\t};\r\n\r\n\tfunction eachCell(code, root){\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\tcode(root.$cells[i]);\r\n\t\t\t\teachCell(code, root.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn Layout;\r\n}(Cell));\r\n\r\nmodule.exports = Layout;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/layout/layout.js\n// module id = 12\n// module chunks = 0","var ScaleHelper = require(\"./scales_ignore\");\r\nvar eventable = require(\"../../../utils/eventable\");\r\nvar utils = require(\"../../../utils/utils\");\r\n\r\nvar canvasRender = require(\"./tasks_canvas_render\");\r\n\r\nvar Timeline = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$scaleHelper = new ScaleHelper(gantt);\r\n\tthis.$gantt = gantt;\r\n\teventable(this);\r\n};\r\n\r\nTimeline.prototype = {\r\n\tinit: function(container){\r\n\t\tcontainer.innerHTML += \"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\";\r\n\t\tthis.$task = container.childNodes[0];\r\n\r\n\t\tthis.$task.innerHTML = \"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\";\r\n\t\tthis.$task_scale = this.$task.childNodes[0];\r\n\r\n\t\tthis.$task_data = this.$task.childNodes[1];\r\n\t\tthis.$task_data.innerHTML = \"<div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div>\";\r\n\t\tthis.$task_bg = this.$task_data.childNodes[0];\r\n\t\tthis.$task_links = this.$task_data.childNodes[1];\r\n\t\tthis.$task_bars = this.$task_data.childNodes[2];\r\n\r\n\t\tthis._tasks = {\r\n\t\t\tcol_width: 0,\r\n\t\t\twidth: [], // width of each column\r\n\t\t\tfull_width: 0, // width of all columns\r\n\t\t\ttrace_x: [],\r\n\t\t\trendered: {}\r\n\t\t};\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar attr = config[this.$config.bind + \"_attribute\"];\r\n\t\tvar linksAttr = config[this.$config.bindLinks + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tif(!linksAttr && this.$config.bindLinks){\r\n\t\t\tlinksAttr = this.$config.bindLinks + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tthis.$config.link_attribute = linksAttr || null;\r\n\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers.tasks;\r\n\t\t}\r\n\t\tif(!this.$config.linkLayers){\r\n\t\t\tthis.$config.linkLayers = layers.links;\r\n\t\t}\r\n\r\n\t\tthis._attachLayers(this.$gantt);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\tsetSize: function(width, height){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tif(width*1 === width){\r\n\t\t\tthis.$config.width = width;\r\n\t\t}\r\n\t\tif(height*1 === height){\r\n\r\n\t\t\tthis.$config.height = height;\r\n\t\t\tvar dataHeight = Math.max(this.$config.height - config.scale_height);\r\n\t\t\tthis.$task_data.style.height = dataHeight + 'px';\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t\tthis.$task_bg.style.backgroundImage = \"\";\r\n\r\n\t\tif(config.smart_rendering && this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tthis.$task_bg.style.height = config.row_height * store.countVisible() +\"px\";\r\n\t\t}else{\r\n\t\t\tthis.$task_bg.style.height = \"\";\r\n\t\t}\r\n\r\n\t\tvar scale = this._tasks;\r\n\t\t//timeline area layers\r\n\t\tvar data_els = this.$task_data.childNodes;\r\n\t\tfor(var i= 0, len = data_els.length; i < len; i++){\r\n\t\t\tvar el = data_els[i];\r\n\t\t\tif(el.hasAttribute(\"data-layer\") && el.style)\r\n\t\t\t\tel.style.width = scale.full_width + \"px\";\r\n\t\t}\r\n\t},\r\n\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$task.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetSize: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._tasks.full_width;\r\n\r\n\t\treturn {\r\n\t\t\tx: this.$config.width,\r\n\t\t\ty: this.$config.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif(top*1 === top){\r\n\t\t\tthis.$config.scrollTop = top;\r\n\t\t\tthis.$task_data.scrollTop = this.$config.scrollTop;\r\n\t\t}\r\n\t\tif (left*1 === left){\r\n\t\t\tthis.$task.scrollLeft = left;\r\n\t\t\tthis.$config.scrollLeft = this.$task.scrollLeft;\r\n\t\t\tthis._refreshScales();\r\n\t\t}\r\n\t},\r\n\r\n\t_refreshScales: function _refreshScales() {\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (!config.smart_scales) return;\r\n\r\n\t\tvar x = this.$config.scrollLeft;\r\n\t\tvar width = this.$config.width;\r\n\r\n\t\tvar scales = this._scales;\r\n\t\tthis.$task_scale.innerHTML = this._getScaleChunkHtml(scales, x, x + width);\r\n\t},\r\n\t_createLayerConfig: function(){\r\n\t\tvar self = this;\r\n\t\tvar taskFilter = function(){\r\n\t\t\treturn self.isVisible();\r\n\t\t};\r\n\r\n\t\tvar taskLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBar,\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg,\r\n\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\tfilter: [\r\n\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\treturn !self.$getConfig().static_background;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttaskFilter\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tvar linkLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.link,\r\n\t\t\t\tcontainer: this.$task_links,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn {\r\n\t\t\ttasks: taskLayers,\r\n\t\t\tlinks: linkLayers\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_attachLayers: function(gantt){\r\n\t\tthis._taskLayers = [];\r\n\t\tthis._linkLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\r\n\t\tif(this.$config.bind){\r\n\r\n\t\t\tself.$config.rowStore = self.$gantt.getDatastore(self.$config.bind);\r\n\r\n\t\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\t\tif(!taskRenderer){\r\n\t\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bind,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttaskRenderer.container = function(){ return self.$task_data;};\r\n\r\n\t\t\tvar taskLayers = this.$config.layers;\r\n\t\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\t\tvar layer = taskLayers[i];\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof layer == \"function\"){\r\n\t\t\t\t\tlayer = {renderer: layer};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t\t\tif(layer.expose){\r\n\t\t\t\t\tthis._taskRenderer = taskRenderer.getLayer(bar_layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._initStaticBackgroundRender();\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks){\r\n\t\t\tself.$config.linkStore = self.$gantt.getDatastore(self.$config.bindLinks);\r\n\r\n\t\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\t\tif(!linkRenderer){\r\n\t\t\t\tlinkRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bindLinks,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar linkLayers = this.$config.linkLayers;\r\n\t\t\tfor(var i = 0; linkLayers && i < linkLayers.length; i++){\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar layer = linkLayers[i];\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar linkLayer = linkRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(linkLayer);\r\n\t\t\t\tif(linkLayers[i].expose){\r\n\t\t\t\t\tthis._linkRenderer = linkRenderer.getLayer(linkLayer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_initStaticBackgroundRender: function(){\r\n\t\tvar self = this;\r\n\t\tvar staticRender = canvasRender.create();\r\n\t\tvar store = self.$config.rowStore;\r\n\t\tif(!store) return;\r\n\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.static_background) {\r\n\t\t\t\tvar store = self.$gantt.getDatastore(self.$config.bind);\r\n\t\t\t\tif (store) {\r\n\t\t\t\t\tstaticRender.render(self.$task_bg, config, self.getScale(), config.row_height * store.countVisible());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._initStaticBackgroundRender = function(){};//init once\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\t\tfor(var i = 0; i < this._linkLayers.length; i++){\r\n\t\t\tlinkRenderer.removeLayer(this._linkLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._linkLayers = [];\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_render_tasks_scales: function _render_tasks_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar scales_html = \"\",\r\n\t\t\touter_width = 0,\r\n\t\t\tscale_height = 0;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (this.isVisible()) {\r\n\t\t\tvar helpers = this.$scaleHelper;\r\n\t\t\tvar scales = this._getScales();\r\n\t\t\tscale_height = config.scale_height;\r\n\r\n\t\t\tvar availWidth = this.$config.width;\r\n\t\t\tif(config.autosize == \"x\" || config.autosize == \"xy\"){\r\n\t\t\t\tavailWidth = Math.max(config.autosize_min_width, 0);\r\n\t\t\t}\r\n\r\n\t\t\tvar cfgs = helpers.prepareConfigs(scales, config.min_column_width, availWidth, scale_height - 1, state.min_date, state.max_date, config.rtl);\r\n\t\t\tvar cfg = this._tasks = cfgs[cfgs.length - 1];\r\n\t\t\tthis._scales = cfgs;\r\n\r\n\t\t\tscales_html = this._getScaleChunkHtml(cfgs, 0, this.$config.width);\r\n\r\n\t\t\touter_width = cfg.full_width + \"px\";//cfg.full_width + (this._scroll_sizes().y ? scrollSizes.scroll_size : 0) + \"px\";\r\n\t\t\tscale_height += \"px\";\r\n\t\t}\r\n\r\n\t\tthis.$task_scale.style.height = scale_height;\r\n\r\n\t\tthis.$task_data.style.width =\r\n\t\t\tthis.$task_scale.style.width = outer_width;\r\n\r\n\t\tthis.$task_scale.innerHTML = scales_html;\r\n\r\n\t},\r\n\r\n\t_getScaleChunkHtml: function _get_scale_chunk_html (scales, fromPos, toPos) {\r\n\t\tvar templates = this.$gantt.$services.templates();\r\n\t\tvar html = [];\r\n\r\n\t\tvar css = templates.scale_row_class;\r\n\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\tvar cssClass = \"gantt_scale_line\";\r\n\t\t\tvar tplClass = css(scales[i]);\r\n\t\t\tif (tplClass) {\r\n\t\t\t\tcssClass += \" \" + tplClass;\r\n\t\t\t}\r\n\r\n\t\t\thtml.push(\"<div class=\\\"\" + cssClass + \"\\\" style=\\\"height:\" + (scales[i].height) +\r\n\t\t\t\t\"px;position:relative;line-height:\" + (scales[i].height) + \"px\\\">\" + this._prepareScaleHtml(scales[i], fromPos, toPos) + \"</div>\");\r\n\t\t}\r\n\r\n\t\treturn html.join(\"\");\r\n\t},\r\n\t_prepareScaleHtml: function _prepare_scale_html(config, fromPos, toPos) {\r\n\t\tvar globalConfig = this.$getConfig();\r\n\t\tvar globalTemplates = this.$gantt.$services.templates();\r\n\r\n\t\tvar cells = [];\r\n\t\tvar date = null, content = null, css = null;\r\n\r\n\t\tif (config.template || config.date) {\r\n\t\t\tcontent = config.template || this.$gantt.date.date_to_str(config.date);\r\n\t\t}\r\n\r\n\t\tvar startIndex = 0,\r\n\t\t\tendIndex = config.count;\r\n\r\n\t\tif (globalConfig.smart_scales && (!isNaN(fromPos) && !isNaN(toPos))) {\r\n\t\t\tstartIndex = _findBinary(config.left, fromPos);\r\n\t\t\tendIndex = _findBinary(config.left, toPos) + 1;\r\n\t\t}\r\n\r\n\t\tcss = config.css || function () {\r\n\t\t\t};\r\n\t\tif (!config.css && globalConfig.inherit_scale_class) {\r\n\t\t\tcss = globalTemplates.scale_cell_class;\r\n\t\t}\r\n\r\n\t\tfor (var i = startIndex; i < endIndex; i++) {\r\n\t\t\tif (!config.trace_x[i]) break;\r\n\r\n\t\t\tdate = new Date(config.trace_x[i]);\r\n\t\t\tvar value = content.call(this, date),\r\n\t\t\t\twidth = config.width[i],\r\n\t\t\t\theight = config.height,\r\n\t\t\t\tleft = config.left[i],\r\n\t\t\t\tstyle = \"\",\r\n\t\t\t\ttemplate = \"\",\r\n\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\tif (width) {\r\n\t\t\t\tvar position = globalConfig.smart_scales ? (\"position:absolute;left:\" + left + \"px\") : \"\";\r\n\r\n\t\t\t\tstyle = \"width:\" + (width) + \"px;height:\" + height + \"px;\" + position;\r\n\t\t\t\tcssclass = \"gantt_scale_cell\" + (i == config.count - 1 ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\t\ttemplate = css.call(this, date);\r\n\t\t\t\tif (template) cssclass += \" \" + template;\r\n\r\n\t\t\t\tvar ariaAttr = this.$gantt._waiAria.getTimelineCellAttr(value);\r\n\t\t\t\tvar cell = \"<div class='\" + cssclass + \"'\" + ariaAttr + \" style='\" + style + \"'>\" + value + \"</div>\";\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t} else {\r\n\t\t\t\t//do not render ignored cells\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn cells.join(\"\");\r\n\t},\r\n\tdateFromPos: function dateFromPos(x) {\r\n\t\tvar scale = this._tasks;\r\n\t\tif (x < 0 || x > scale.full_width || !scale.full_width) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar ind = _findBinary(this._tasks.left, x);\r\n\t\tvar summ = this._tasks.left[ind];\r\n\r\n\t\tvar col_width = scale.width[ind] || scale.col_width;\r\n\t\tvar part = 0;\r\n\t\tif (col_width) {\r\n\t\t\tpart = (x - summ) / col_width;\r\n\t\t\tif(scale.rtl){\r\n\t\t\t\tpart = 1 - part;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar unit = 0;\r\n\t\tif (part) {\r\n\t\t\tunit = this._getColumnDuration(scale, scale.trace_x[ind]);\r\n\t\t}\r\n\r\n\t\tvar date = new Date(scale.trace_x[ind].valueOf() + Math.round(part * unit));\r\n\t\treturn date;\r\n\t},\r\n\tposFromDate: function posFromDate(date) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn 0;\r\n\r\n\t\tvar ind = this.columnIndexByDate(date);\r\n\t\tthis.$gantt.assert(ind >= 0, \"Invalid day index\");\r\n\r\n\t\tvar wholeCells = Math.floor(ind);\r\n\t\tvar partCell = ind % 1;\r\n\r\n\t\tvar pos = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\r\n\t\tif (wholeCells == this._tasks.width.length)\r\n\t\t\tpos += this._tasks.width[this._tasks.width.length - 1];\r\n\t\t//for(var i=1; i <= wholeCells; i++)\r\n\t\t//\tpos += gantt._tasks.width[i-1];\r\n\r\n\t\tif (partCell) {\r\n\t\t\tif (wholeCells < this._tasks.width.length) {\r\n\t\t\t\tpos += this._tasks.width[wholeCells] * (partCell % 1);\r\n\t\t\t} else {\r\n\t\t\t\tpos += 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn Math.round(pos);\r\n\t},\r\n\tcolumnIndexByDate: function columnIndexByDate(date) {\r\n\t\tvar pos = new Date(date).valueOf();\r\n\t\tvar days = this._tasks.trace_x_ascending,\r\n\t\t\tignores = this._tasks.ignore_x;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (pos <= state.min_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn days.length;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (pos >= state.max_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn days.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*var day = null;\r\n\t\t for (var xind = 0, length = days.length-1; xind < length; xind++) {\r\n\t\t // | 8:00, 8:30 | 8:15 should be checked against 8:30\r\n\t\t // clicking at the most left part of the cell, say 8:30 should create event in that cell, not previous one\r\n\t\t day = +days[xind+1];\r\n\t\t if (pos < day && !ignores[day])\r\n\t\t break;\r\n\t\t }*/\r\n\r\n\t\tvar day_ind = _findBinary(days, pos);\r\n\t\tvar day = +days[day_ind];\r\n\t\twhile (ignores[day]) {\r\n\t\t\tday = days[++day_ind];\r\n\t\t}\r\n\r\n\t\tvar transition = this._tasks.trace_index_transition;\r\n\t\tvar index = day_ind;\r\n\t\tif(!day){\r\n\t\t\tif(transition){\r\n\t\t\t\treturn transition[0];\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar part = ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t\tif(transition){\r\n\t\t\treturn transition[index] + (1 - part);\r\n\t\t}else{\r\n\t\t\treturn index + part;\r\n\t\t}\r\n\r\n\t\t//return day_ind + ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t},\r\n\tgetItemPosition:function (task, start_date, end_date) {\r\n\t\tvar xLeft, xRight, width;\r\n\t\tif(this._tasks.rtl){\r\n\t\t\txRight = this.posFromDate(start_date || task.start_date);\r\n\t\t\txLeft = this.posFromDate(end_date || task.end_date);\r\n\t\t}else{\r\n\t\t\txLeft = this.posFromDate(start_date || task.start_date);\r\n\t\t\txRight = this.posFromDate(end_date || task.end_date);\r\n\t\t}\r\n\t\twidth =  Math.max((xRight - xLeft), 0);\r\n\r\n\t\tvar y = this.getItemTop(task.id);\r\n\t\tvar height = this.getItemHeight();\r\n\t\treturn {\r\n\t\t\tleft: xLeft,\r\n\t\t\ttop: y,\r\n\t\t\theight: height,\r\n\t\t\twidth: width\r\n\t\t};\r\n\t},\r\n\r\n\tgetItemHeight: function(){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\t// height of the bar item\r\n\t\tvar height = config.task_height;\r\n\r\n\t\tif (height == \"full\") {\r\n\t\t\tvar offset = config.task_height_offset || 5;\r\n\t\t\theight = config.row_height - offset;\r\n\t\t}\r\n\t\t//item height cannot be bigger than row height\r\n\t\theight = Math.min(height, config.row_height);\r\n\t\treturn Math.max(height, 0);\r\n\t},\r\n\r\n\tgetRowTop: function(index){\r\n\t\treturn index * this.$getConfig().row_height;\r\n\t},\r\n\r\n\tgetItemTop: function (task_id) {\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\treturn store.getIndexById(task_id) * this.$getConfig().row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetScale: function(){\r\n\t\treturn this._tasks;\r\n\t},\r\n\r\n\t_getScales: function _get_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar helpers = this.$scaleHelper;\r\n\t\tvar scales = [helpers.primaryScale()].concat(config.subscales);\r\n\r\n\t\thelpers.sortScales(scales);\r\n\t\treturn scales;\r\n\t},\r\n\r\n\t_getColumnDuration: function _get_coll_duration(scale, date) {\r\n\t\treturn this.$gantt.date.add(date, scale.step, scale.unit) - date;\r\n\t},\r\n\r\n\trefresh: function(){\r\n\t\tif(this.$config.bind) {\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks) {\r\n\t\t\tthis.$config.linkStore = this.$gantt.getDatastore(this.$config.bindLinks);\r\n\t\t}\r\n\r\n\t\tthis._initStaticBackgroundRender();\r\n\t\tthis._render_tasks_scales();\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._clearLayers(gantt);\r\n\r\n\t\tthis.$task = null;\r\n\t\tthis.$task_scale = null;\r\n\t\tthis.$task_data = null;\r\n\t\tthis.$task_bg = null;\r\n\t\tthis.$task_links = null;\r\n\t\tthis.$task_bars = null;\r\n\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\t\tif(this.$config.linkStore){\r\n\t\t\tthis.$config.linkStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t}\r\n};\r\n\r\nmodule.exports = Timeline;\r\n\r\nfunction _findBinary(array, target) {\r\n\t// modified binary search, target value not exactly match array elements, looking for closest one\r\n\r\n\tvar low = 0, high = array.length - 1, i, item, prev;\r\n\twhile (low <= high) {\r\n\r\n\t\ti = Math.floor((low + high) / 2);\r\n\t\titem = +array[i];\r\n\t\tprev = +array[i - 1];\r\n\t\tif (item < target) {\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (item > target) {\r\n\t\t\tif (!(!isNaN(prev) && prev < target)) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\t// if target is between 'i' and 'i-1' return 'i - 1'\r\n\t\t\t\treturn i - 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\twhile (+array[i] == +array[i + 1]) i++;\r\n\r\n\t\treturn i;\r\n\t}\r\n\treturn array.length - 1;\r\n}\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/timeline.js\n// module id = 13\n// module chunks = 0","\r\nvar ScaleHelper = require(\"./scales\");\r\n\r\nfunction ScaleIgnoreHelper(gantt){\r\n\tvar helper = new ScaleHelper(gantt);\r\n\r\n\thelper.processIgnores = function (config) {\r\n\t\tvar display_count = config.count;\r\n\t\tconfig.ignore_x = {};\r\n\t\tif (gantt.ignore_time || gantt.config.skip_off_time) {\r\n\t\t\tvar ignore = gantt.ignore_time || function () {\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\t\t\tdisplay_count = 0;\r\n\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\r\n\t\t\t\tif (ignore.call(gantt, config.trace_x[i]) || this._ignore_time_config.call(gantt, config.trace_x[i], config)) {\r\n\t\t\t\t\tconfig.ignore_x[config.trace_x[i].valueOf()] = true;\r\n\t\t\t\t\tconfig.ignored_colls = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdisplay_count++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tconfig.display_count = display_count;\r\n\t};\r\n\r\n\treturn helper;\r\n}\r\n\r\nmodule.exports = ScaleIgnoreHelper;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/scales_ignore.js\n// module id = 14\n// module chunks = 0","function createMixin(_super){\r\n\treturn {\r\n\t\trefresh: function() {\r\n\t\t\tthis._linkToTaskStore();\r\n\t\t\t_super.prototype.refresh.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\t_linkToTaskStore: function () {\r\n\r\n\t\t\tif (this.$config.rowStore && this.$gantt.$data.tasksStore) {\r\n\t\t\t\tvar tasks = this.$gantt.$data.tasksStore;\r\n\t\t\t\tvar ownStore = this.$config.rowStore;\r\n\r\n\t\t\t\tif (!tasks[\"_attached_\" + ownStore.name]) {\r\n\t\t\t\t\ttasks[\"_attached_\" + ownStore.name] = true;\r\n\t\t\t\t\tvar updateDelay;\r\n\t\t\t\t\ttasks.attachEvent(\"onStoreUpdated\", function (id, item, mode) {\r\n\t\t\t\t\t\tif(window.requestAnimationFrame){\r\n\t\t\t\t\t\t\tcancelAnimationFrame(updateDelay);\r\n\t\t\t\t\t\t\tupdateDelay = requestAnimationFrame(function(){\r\n\t\t\t\t\t\t\t\townStore.refresh();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\townStore.refresh();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._linkToTaskStore = function () {\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createMixin;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/resouce_store_mixin.js\n// module id = 15\n// module chunks = 0","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\n\r\nvar DataStore = function(config){\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\tthis._searchVisibleOrder = {};\r\n\teventable(this);\r\n\treturn this;\r\n};\r\nDataStore.prototype = {\r\n\r\n\t_parseInner: function(data){\r\n\t\tvar item = null,\r\n\t\t\tloaded = [];\r\n\t\tfor(var i = 0, len = data.length; i< len; i++){\r\n\t\t\titem = data[i];\r\n\t\t\tif(this.$initItem){\r\n\t\t\t\titem = this.$initItem(item);\r\n\t\t\t}\r\n\t\t\tif(this.callEvent(\"onItemLoading\", [item])){\r\n\t\t\t\tif (!this.pull.hasOwnProperty(item.id)) {\r\n\t\t\t\t\tthis.fullOrder.push(item.id);\r\n\t\t\t\t\tloaded.push(item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.pull[item.id] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn loaded;\r\n\t},\r\n\tparse: function(data){\r\n\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\tvar loaded = this._parseInner(data);\r\n\t\tthis.refresh();\r\n\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t},\r\n\tgetItem: function(id){\r\n\t\treturn this.pull[id];\r\n\t},\r\n\r\n\t_updateOrder: function(code){\r\n\t\tcode.call(this.visibleOrder);\r\n\t\tcode.call(this.fullOrder);\r\n\t},\r\n\tupdateItem: function(id, item){\r\n\t\tif (!utils.defined(item)) item = this.getItem(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeUpdate\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\t\tthis.pull[id]=item;\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.callEvent(\"onAfterUpdate\", [item.id, item]);\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [item.id, item, \"update\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeItemInner: function(id){\r\n\t\t//clear from collections\r\n\t\t//this.visibleOrder.$remove(id);\r\n\t\tthis._updateOrder(function(){ this.$remove(id);});\r\n\t\tdelete this.pull[id];\r\n\t},\r\n\r\n\tremoveItem: function(id){\r\n\t\t//utils.assert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\r\n\t\tvar obj = this.getItem(id);\t//save for later event\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeDelete\", [obj.id, obj]) === false) return false;\r\n\t\t}\r\n\r\n\t\tthis._removeItemInner(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onAfterDelete\", [obj.id, obj]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"delete\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_addItemInner: function(item, index){\r\n\t\t//in case of treetable order is sent as 3rd parameter\r\n\t\t//var order = index;\r\n\r\n\t\tif(this.exists(item.id)){\r\n\t\t\tthis.silent(function(){this.updateItem(item.id, item);});\r\n\t\t}else{\r\n\t\t\tvar order = this.visibleOrder;\r\n\r\n\t\t\t//by default item is added to the end of the list\r\n\t\t\tvar data_size = order.length;\r\n\r\n\t\t\tif (!utils.defined(index) || index < 0)\r\n\t\t\t\tindex = data_size;\r\n\t\t\t//check to prevent too big indexes\r\n\t\t\tif (index > data_size){\r\n\t\t\t\t//dhx.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\r\n\t\t\t\tindex = Math.min(order.length,index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//gantt.assert(!this.exists(id), \"Not unique ID\");\r\n\r\n\t\tthis.pull[item.id]=item;\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis._updateOrder(function(){ this.$insertAt(item.id,index);});\r\n\t\t}\r\n\r\n\t\t//order.$insertAt(item.id,index);\r\n\t},\r\n\r\n\r\n\tisVisible: function(id){\r\n\t\treturn this.visibleOrder.$find(id) > -1;\r\n\t},\r\n\tgetVisibleItems: function(){\r\n\t\treturn this.getIndexRange();\r\n\t},\r\n\r\n\taddItem: function(item, index){\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif(this.$initItem){\r\n\t\t\titem = this.$initItem(item);\r\n\t\t}\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tif (this.callEvent(\"onBeforeAdd\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\r\n\r\n\t\tthis._addItemInner(item, index);\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis.callEvent(\"onAfterAdd\",[item.id, item]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[item.id,item,\"add\"]);\r\n\t\t}\r\n\t\treturn item.id;\r\n\t},\r\n\r\n\t_changeIdInner: function(oldId, newId){\r\n\t\tif(this.pull[oldId])\r\n\t\t\tthis.pull[newId] = this.pull[oldId];\r\n\r\n\t\tthis.pull[newId].id = newId;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis[this.$find(oldId)] = newId;\r\n\t\t});\r\n\t\tthis._searchVisibleOrder[newId] = this._searchVisibleOrder[oldId];\r\n\t\tdelete this._searchVisibleOrder[oldId];\r\n\r\n\t\t//this.visibleOrder[this.visibleOrder.$find(oldId)]=newId;\r\n\t\tdelete this.pull[oldId];\r\n\t},\r\n\tchangeId: function(oldId, newId){\r\n\t\tthis._changeIdInner(oldId, newId);\r\n\r\n\t\tthis.callEvent(\"onIdChange\", [oldId, newId]);\r\n\r\n\t},\r\n\texists: function(id){\r\n\t\treturn !!(this.pull[id]);\r\n\t},\r\n\r\n\t_moveInner: function(sindex, tindex){\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis.$removeAt(sindex);\r\n\t\t\tthis.$insertAt(id,Math.min(this.length, tindex));\r\n\t\t});\r\n\t\t//this.visibleOrder.$removeAt(sindex);\t//remove at old position\r\n\t\t//if (sindex<tindex) tindex--;\t//correct shift, caused by element removing\r\n\t\t//this.visibleOrder.$insertAt(id,Math.min(this.visibleOrder.length, tindex));\t//insert at new position\r\n\t},\r\n\r\n\tmove: function(sindex, tindex){\r\n\t\t//gantt.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\r\n\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\t\tvar obj = this.getItem(id);\r\n\t\tthis._moveInner(sindex, tindex);\r\n\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"move\"]);\r\n\t\t}\r\n\t},\r\n\tclearAll: function(){\r\n\t\tthis.pull = {};\r\n\t\tthis.visibleOrder = powerArray.$create();\r\n\t\tthis.fullOrder = powerArray.$create();\r\n\t\tif (this._skip_refresh) return;\r\n\t\tthis.callEvent(\"onClearAll\",[]);\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\tsilent:function(code, master){\r\n\t\tthis._skip_refresh = true;\r\n\t\tcode.call(master||this);\r\n\t\tthis._skip_refresh = false;\r\n\t},\r\n\r\n\tarraysEqual: function (arr1, arr2) {\r\n\t\tif(arr1.length !== arr2.length)\r\n\t\t\treturn false;\r\n\t\tfor(var i = 0; i < arr1.length; i++) {\r\n\t\t\tif(arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\trefresh: function(id, quick){\r\n\t\tif (this._skip_refresh) return;\r\n\r\n\t\tif(id){\r\n\t\t\t// if item changes visible order (e.g. expand-collapse branch) - do a complete repaint\r\n\t\t\tif(!quick){\r\n\t\t\t\tvar oldOrder = this.visibleOrder;\r\n\t\t\t\tthis.filter();\r\n\t\t\t\tif(!this.arraysEqual(oldOrder, this.visibleOrder)){\r\n\t\t\t\t\tid = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis.filter();\r\n\t\t}\r\n\r\n\t\tif (id)\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[id, this.pull[id], \"paint\"]);\r\n\t\telse\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[null,null,null]);\r\n\t},\r\n\r\n\tcount: function(){\r\n\t\treturn this.fullOrder.length;\r\n\t},\r\n\tcountVisible: function(){\r\n\t\treturn this.visibleOrder.length;\r\n\t},\r\n\r\n\tsort: function(sort){},\r\n\r\n\tserialize: function(){},\r\n\r\n\teachItem: function(code){\r\n\t\tfor (var i=0; i<this.fullOrder.length; i++) {\r\n\t\t\tvar item = this.pull[this.fullOrder[i]];\r\n\t\t\tcode.call(this, item);\r\n\t\t}\r\n\t},\r\n\t\r\n\tfilter: function(rule){\r\n\t\tvar filteredOrder = powerArray.$create();\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tif(this.callEvent(\"onFilterItem\", [item.id, item])){\r\n\t\t\t\tfilteredOrder.push(item.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.visibleOrder = filteredOrder;\r\n\t\tthis._searchVisibleOrder = {};\r\n\t\tfor(var i = 0; i < this.visibleOrder.length; i++){\r\n\t\t\tthis._searchVisibleOrder[this.visibleOrder[i]] = i;\r\n\t\t}\r\n\t},\r\n\r\n\tgetIndexRange: function(from, to){\r\n\t\tto=Math.min((to||Infinity),this.countVisible()-1);\r\n\r\n\t\tvar ret= [];\r\n\t\tfor (var i=(from||0); i <= to; i++)\r\n\t\t\tret.push(this.getItem(this.visibleOrder[i]));\r\n\t\treturn ret;\r\n\t},\r\n\tgetItems: function(){\r\n\t\tvar res = [];\r\n\t\tfor(var i in this.pull){\r\n\t\t\tres.push(this.pull[i]);\r\n\t\t}\r\n\t/*\tfor(var i = 0; i < this.fullOrder.length; i++){\r\n\r\n\t\t}*/\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetIdByIndex: function(index){\r\n\t\treturn this.visibleOrder[index];\r\n\t},\r\n\tgetIndexById: function(id){\r\n\t\tvar res = this._searchVisibleOrder[id];\r\n\t\tif(res === undefined){\r\n\t\t\tres = -1;\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getNullIfUndefined: function(value){\r\n\t\tif(value === undefined){\r\n\t\t\treturn null;\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\tgetFirst: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[0]);\r\n\t},\r\n\tgetLast: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1]);\r\n\t},\r\n\tgetNext: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) + 1]);\r\n\t},\r\n\tgetPrev: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) - 1]);\r\n\t},\r\n\tdestructor: function(){\r\n\t\tthis.detachAllEvents();\r\n\t\tthis.pull = null;\r\n\t\tthis.$initItem = null;\r\n\t\tthis.visibleOrder = null;\r\n\t\tthis.fullOrder = null;\r\n\t\tthis._skip_refresh = null;\r\n\t\tthis._filterRule = null;\r\n\t\tthis._searchVisibleOrder = null;\r\n\t}\r\n};\r\n\r\nmodule.exports = DataStore;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/datastore/datastore.js\n// module id = 16\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nvar $powerArray  = {\r\n\t$create: function(array){\r\n\t\treturn utils.mixin(array || [], this);\r\n\t},\r\n\t//remove element at specified position\r\n\t$removeAt:function(pos,len){\r\n\t\tif (pos>=0) this.splice(pos,(len||1));\r\n\t},\r\n\t//find element in collection and remove it\r\n\t$remove:function(value){\r\n\t\tthis.$removeAt(this.$find(value));\r\n\t},\r\n\t//add element to collection at specific position\r\n\t$insertAt:function(data,pos){\r\n\t\tif (!pos && pos!==0) \t//add to the end by default\r\n\t\t\tthis.push(data);\r\n\t\telse {\r\n\t\t\tvar b = this.splice(pos,(this.length-pos));\r\n\t\t\tthis[pos] = data;\r\n\t\t\tthis.push.apply(this,b); //reconstruct array without loosing this pointer\r\n\t\t}\r\n\t},\r\n\t//return index of element, -1 if it doesn't exists\r\n\t$find:function(data){\r\n\t\tfor (var i=0; i<this.length; i++)\r\n\t\t\tif (data==this[i]) return i;\r\n\t\treturn -1;\r\n\t},\r\n\t//execute some method for each element of array\r\n\t$each:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tfunctor.call((master||this),this[i]);\r\n\t},\r\n\t//create new array from source, by using results of functor\r\n\t$map:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tthis[i]=functor.call((master||this),this[i]);\r\n\t\treturn this;\r\n\t},\r\n\t$filter:function(functor, master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tif (!functor.call((master||this),this[i])){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nmodule.exports = $powerArray;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/datastore/power_array.js\n// module id = 17\n// module chunks = 0","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\nvar DataStore = require(\"./datastore\");\r\n\r\nvar TreeDataStore = function(config){\r\n\tthis._branches = {};\r\n\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.$parentProperty = config.parentProperty || \"parent\";\r\n\r\n\tif(typeof config.rootId !== \"function\"){\r\n\t\tthis.$getRootId = (function(val){\r\n\t\t\treturn function(){return val;};\r\n\t\t})(config.rootId || 0);\r\n\t}else{\r\n\t\tthis.$getRootId = config.rootId;\r\n\t}\r\n\r\n\t// TODO: replace with live reference to gantt config\r\n\tthis.$openInitially = config.openInitially;\r\n\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._skip_refresh = false;\r\n\r\n\teventable(this);\r\n\r\n\tthis.attachEvent(\"onFilterItem\", function(id, item){\r\n\t\tvar open = true;\r\n\t\tthis.eachParent(function(parent){\r\n\t\t\topen = open && parent.$open;\r\n\t\t}, item);\r\n\t\treturn !!open;\r\n\t});\r\n\r\n\treturn this;\r\n};\r\n\r\nTreeDataStore.prototype = utils.mixin({\r\n\r\n\t\t_buildTree: function(data){\r\n\t\t\tvar item = null;\r\n\t\t\tvar rootId = this.$getRootId();\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis.setParent(item, this.getParent(item) || rootId);\r\n\t\t\t}\r\n\r\n\t\t\t// calculating $level for each item\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t\titem.$level = this.calculateItemLevel(item);\r\n\r\n\t\t\t\tif (!utils.defined(item.$open)) {\r\n\t\t\t\t\titem.$open = utils.defined(item.open) ? item.open : this.$openInitially();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis._updateOrder();\r\n\t\t},\r\n\r\n\t\tparse: function(data){\r\n\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t\tvar loaded = this._parseInner(data);\r\n\t\t\tthis._buildTree(loaded);\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t},\r\n\r\n\t\t_addItemInner: function(item, index){\r\n\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\tif(!utils.defined(parent)){\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t\tthis.setParent(item, parent);\r\n\t\t\t}\r\n\r\n\t\t\tvar parentIndex = this.getIndexById(parent);\r\n\t\t\tvar targetIndex = parentIndex + Math.min(Math.max(index, 0), this.visibleOrder.length);\r\n\r\n\t\t\tif(targetIndex*1 !== targetIndex){\r\n\t\t\t\ttargetIndex = undefined;\r\n\t\t\t}\r\n\t\t\tDataStore.prototype._addItemInner.call(this, item, targetIndex);\r\n\t\t\tthis.setParent(item, parent);\r\n\r\n\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\tthis._move_branch(item, item.$rendered_parent);\r\n\t\t\t}\r\n\t\t\tthis._add_branch(item, index);\r\n\t\t},\r\n\t\t_changeIdInner: function(oldId, newId){\r\n\r\n\t\t\tvar children = this.getChildren(newId);\r\n\t\t\tDataStore.prototype._changeIdInner.call(this, oldId, newId);\r\n\r\n\t\t\tvar parent = this.getParent(newId);\r\n\r\n\t\t\tthis._replace_branch_child(parent, oldId, newId);\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tthis.setParent(this.getItem[children[i]], newId);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_traverseBranches: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar branch = this._branches[parent];\r\n\t\t\tif (branch) {\r\n\t\t\t\tfor (var i = 0; i < branch.length; i++) {\r\n\t\t\t\t\tvar itemId = branch[i];\r\n\t\t\t\t\tcode.call(this, itemId);\r\n\t\t\t\t\tif (this._branches[itemId])\r\n\t\t\t\t\t\tthis._traverseBranches(code, itemId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_updateOrder: function(code){\r\n\t\t\tif(code)\r\n\t\t\t\tDataStore.prototype._updateOrder.call(this, code);\r\n\t\t\tthis.fullOrder = powerArray.$create();\r\n\t\t\tthis._traverseBranches(function(taskId){\r\n\t\t\t\tthis.fullOrder.push(taskId);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_removeItemInner: function(id){\r\n\r\n\t\t\tvar items = [];\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\titems.push(child);\r\n\t\t\t}, id);\r\n\r\n\t\t\titems.push(this.getItem(id));\r\n\r\n\t\t\tfor(var i = 0; i < items.length; i++){\r\n\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t\tDataStore.prototype._removeItemInner.call(this, items[i].id);\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i].id), null);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmove: function(sid, tindex, parent){\r\n\t\t\t//target id as 4th parameter\r\n\t\t\tvar id = arguments[3];\r\n\t\t\tif (id) {\r\n\t\t\t\tif (id === sid) return;\r\n\r\n\t\t\t\tparent = this.getParent(id);\r\n\t\t\t\ttindex = this.getBranchIndex(id);\r\n\t\t\t}\r\n\t\t\tif(sid == parent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar source = this.getItem(sid);\r\n\t\t\tvar source_pid = this.getParent(source.id);\r\n\t\t\tvar sbranch = this.getChildren(this.getParent(source.id));\r\n\r\n\t\t\tvar tbranch = this.getChildren(parent);\r\n\t\t\tif (tindex == -1)\r\n\t\t\t\ttindex = tbranch.length + 1;\r\n\t\t\tif (source_pid == parent) {\r\n\t\t\t\tvar sindex = this.getBranchIndex(sid);\r\n\t\t\t\tif (sindex == tindex) return;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.callEvent(\"onBeforeItemMove\", [sid, parent, tindex]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._replace_branch_child(source_pid, sid);\r\n\t\t\ttbranch = this.getChildren(parent);\r\n\r\n\t\t\tvar tid = tbranch[tindex];\r\n\t\t\tif (!tid) //adding as last element\r\n\t\t\t\ttbranch.push(sid);\r\n\t\t\telse\r\n\t\t\t\ttbranch = tbranch.slice(0, tindex).concat([ sid ]).concat(tbranch.slice(tindex));\r\n\r\n\t\t\tthis.setParent(source, parent);\r\n\t\t\tthis._branches[parent] = tbranch;\r\n\r\n\t\t\tvar diff = this.calculateItemLevel(source) - source.$level;\r\n\t\t\tsource.$level += diff;\r\n\t\t\tthis.eachItem(function(item){\r\n\t\t\t\titem.$level += diff;\r\n\t\t\t}, source.id, this);\r\n\r\n\r\n\t\t\tthis._moveInner(this.getIndexById(sid), this.getIndexById(parent) + tindex);\r\n\r\n\t\t\tif(!this.callEvent(\"onAfterItemMove\", [sid, parent, tindex]))\r\n\t\t\t\treturn;\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\r\n\t\tgetBranchIndex: function(id){\r\n\t\t\tvar branch = this.getChildren(this.getParent(id));\r\n\t\t\tfor (var i = 0; i < branch.length; i++)\r\n\t\t\t\tif (branch[i] == id)\r\n\t\t\t\t\treturn i;\r\n\r\n\t\t\treturn -1;\r\n\t\t},\r\n\t\thasChild: function(id){\r\n\t\t\treturn (utils.defined(this._branches[id]) && this._branches[id].length);\r\n\t\t},\r\n\t\tgetChildren: function(id){\r\n\t\t\treturn utils.defined(this._branches[id]) ? this._branches[id] : powerArray.$create();\r\n\t\t},\r\n\r\n\t\tisChildOf: function(childId, parentId){\r\n\t\t\tif (!this.exists(childId))\r\n\t\t\t\treturn false;\r\n\t\t\tif (parentId === this.$getRootId())\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar item = this.getItem(childId);\r\n\t\t\tvar pid = this.getParent(childId);\r\n\r\n\t\t\twhile (item && this.exists(pid)) {\r\n\t\t\t\titem = this.getItem(pid);\r\n\r\n\t\t\t\tif (item && item.id == parentId)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tpid = this.getParent(item);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetSiblings: function(id){\r\n\t\t\tif(!this.exists(id)){\r\n\t\t\t\treturn powerArray.$create();\r\n\t\t\t}\r\n\t\t\tvar parent = this.getParent(id);\r\n\t\t\treturn this.getChildren(parent);\r\n\r\n\t\t},\r\n\t\tgetNextSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i+1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetPrevSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i-1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetParent: function(id){\r\n\t\t\tvar item = null;\r\n\t\t\tif(id.id !== undefined){\r\n\t\t\t\titem = id;\r\n\t\t\t}else{\r\n\t\t\t\titem = this.getItem(id);\r\n\t\t\t}\r\n\r\n\t\t\tvar parent = this.$getRootId();\r\n\t\t\tif(item){\r\n\t\t\t\tparent = item[this.$parentProperty];\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\r\n\t\t},\r\n\r\n\t\tclearAll: function(){\r\n\t\t\tthis._branches = {};\r\n\t\t\tDataStore.prototype.clearAll.call(this);\r\n\t\t},\r\n\r\n\t\tcalculateItemLevel: function(item){\r\n\t\t\tvar level = 0;\r\n\t\t\tthis.eachParent(function(){\r\n\t\t\t\tlevel++;\r\n\t\t\t}, item);\r\n\t\t\treturn level;\r\n\t\t},\r\n\r\n\t\t_setParentInner: function(item, new_pid, silent){\r\n\t\t\tif(!silent){\r\n\t\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\t\tthis._move_branch(item, item.$rendered_parent, new_pid);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._move_branch(item, item[this.$parentProperty], new_pid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetParent: function(item, new_pid, silent){\r\n\t\t\tthis._setParentInner(item, new_pid, silent);\r\n\r\n\t\t\titem[this.$parentProperty] = new_pid;\r\n\t\t},\r\n\t\teachItem: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\r\n\r\n\t\t\tvar branch = this.getChildren(parent);\r\n\t\t\tif (branch)\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tvar item = this.pull[branch[i]];\r\n\t\t\t\t\tcode.call(this, item);\r\n\t\t\t\t\tif (this.hasChild(item.id))\r\n\t\t\t\t\t\tthis.eachItem(code, item.id);\r\n\t\t\t\t}\r\n\t\t},\r\n\t\teachParent: function(code, startItem){\r\n\t\t\tvar item = startItem;\r\n\t\t\twhile (this.getParent(item)) {\r\n\t\t\t\tif (!this.exists(this.getParent(item))) break;\r\n\t\t\t\titem = this.getItem(this.getParent(item));\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_add_branch: function(item, index, parent){\r\n\t\t\tvar pid = parent === undefined ? this.getParent(item) : parent;\r\n\t\t\tif (!this.hasChild(pid))\r\n\t\t\t\tthis._branches[pid] = powerArray.$create();\r\n\t\t\tvar branch = this.getChildren(pid);\r\n\t\t\tvar added_already = false;\r\n\t\t\tfor(var i = 0, length = branch.length; i < length; i++){\r\n\t\t\t\tif(branch[i] == item.id){\r\n\t\t\t\t\tadded_already = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!added_already){\r\n\t\t\t\tif(index*1 == index){\r\n\r\n\t\t\t\t\tbranch.splice(index, 0, item.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbranch.push(item.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.$rendered_parent = pid;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_move_branch: function(item, old_parent, new_parent){\r\n\t\t\t//this.setParent(item, new_parent);\r\n\t\t\t//this._sync_parent(task);\r\n\t\t\tthis._replace_branch_child(old_parent, item.id);\r\n\t\t\tif(this.exists(new_parent) || new_parent == this.$getRootId()){\r\n\r\n\t\t\t\tthis._add_branch(item, undefined, new_parent);\r\n\t\t\t}else{\r\n\t\t\t\tdelete this._branches[item.id];\r\n\t\t\t}\r\n\t\t\titem.$level =  this.calculateItemLevel(item);\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\tchild.$level = this.calculateItemLevel(child);\r\n\t\t\t}, item.id);\r\n\t\t},\r\n\r\n\t\t_replace_branch_child: function(node, old_id, new_id){\r\n\t\t\tvar branch = this.getChildren(node);\r\n\t\t\tif (branch){\r\n\t\t\t\tvar newbranch = powerArray.$create();\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tif (branch[i] != old_id)\r\n\t\t\t\t\t\tnewbranch.push(branch[i]);\r\n\t\t\t\t\telse if (new_id)\r\n\t\t\t\t\t\tnewbranch.push(new_id);\r\n\t\t\t\t}\r\n\t\t\t\tthis._branches[node] = newbranch;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsort: function(field, desc, parent){\r\n\t\t\tif (!this.exists(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\r\n\t\t\tif (!field) field = \"order\";\r\n\t\t\tvar criteria = (typeof(field) == \"string\") ? (function(a, b) {\r\n\t\t\t\tif(a[field] == b[field]){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = a[field] > b[field];\r\n\t\t\t\treturn result ? 1 : -1;\r\n\t\t\t}) : field;\r\n\r\n\t\t\tif (desc) {\r\n\t\t\t\tvar original_criteria = criteria;\r\n\t\t\t\tcriteria = function (a, b) {\r\n\t\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar els = this.getChildren(parent);\r\n\t\t\tif (els){\r\n\t\t\t\tvar temp = [];\r\n\t\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\t\ttemp[i] = this.getItem(els[i]);\r\n\r\n\t\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\t\tthis.sort(field, desc, els[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfilter: function(rule){\r\n\t\t\tfor(var i  in this.pull){\r\n\t\t\t\tif(this.pull[i].$rendered_parent !== this.getParent(this.pull[i])){\r\n\t\t\t\t\tthis._move_branch(this.pull[i], this.pull[i].$rendered_parent, this.getParent(this.pull[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn DataStore.prototype.filter.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\topen: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = true;\r\n\t\t\t\tthis.callEvent(\"onItemOpen\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclose: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = false;\r\n\t\t\t\tthis.callEvent(\"onItemClose\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdestructor: function(){\r\n\t\t\tDataStore.prototype.destructor.call(this);\r\n\t\t\tthis._branches = null;\r\n\t\t}\r\n\t},\r\n\tDataStore.prototype\r\n);\r\n\r\nmodule.exports = TreeDataStore;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/datastore/treedatastore.js\n// module id = 18\n// module chunks = 0","var ScaleHelper = require(\"./ui/timeline/scales_ignore\");\r\n\r\n\r\nfunction dateRangeResolver(gantt){\r\n\t//reset project timing\r\n\t//_get_tasks_data(gantt);\r\n\treturn gantt.getSubtaskDates();\r\n}\r\n\r\nfunction defaultRangeResolver(){\r\n\treturn {\r\n\t\tstart_date: new Date(),\r\n\t\tend_date: new Date()\r\n\t};\r\n}\r\n\r\nfunction resolveConfigRange(unit, gantt){\r\n\tvar range = {\r\n\t\tstart_date:null,\r\n\t\tend_date:null\r\n\t};\r\n\r\n\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](new Date(gantt.config.start_date));\r\n\r\n\t\tvar end = new Date(gantt.config.end_date);\r\n\t\tvar start_interval = gantt.date[unit + \"_start\"](new Date(end));\r\n\t\tif (+end != +start_interval) {\r\n\t\t\tend = gantt.date.add(start_interval, 1, unit);\r\n\t\t} else {\r\n\t\t\tend = start_interval;\r\n\t\t}\r\n\r\n\t\trange.end_date = end;\r\n\t}\r\n\treturn range;\r\n}\r\n\r\nfunction _scale_range_unit(gantt) {\r\n\tvar unit = gantt.config.scale_unit;\r\n\tvar step = gantt.config.step;\r\n\tif (gantt.config.scale_offset_minimal) {\r\n\r\n\t\tvar helper = new ScaleHelper(gantt);\r\n\t\tvar scales = [helper.primaryScale()].concat(gantt.config.subscales);\r\n\r\n\t\thelper.sortScales(scales);\r\n\t\tunit = scales[scales.length - 1].unit;\r\n\t\tstep = scales[scales.length - 1].step || 1;\r\n\t}\r\n\treturn { unit:unit, step:step };\r\n}\r\n\r\nfunction _init_tasks_range(gantt) {\r\n\tvar cfg = _scale_range_unit(gantt);\r\n\tvar unit = cfg.unit,\r\n\t\tstep = cfg.step;\r\n\tvar range = resolveConfigRange(unit, gantt);\r\n\r\n\tif(!(range.start_date && range.end_date)){\r\n\t\trange = dateRangeResolver(gantt);\r\n\t\tif(!range.start_date || !range.end_date){\r\n\t\t\trange = defaultRangeResolver(gantt);\r\n\t\t}\r\n\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](range.start_date);\r\n\t\trange.start_date = gantt.calculateEndDate({\r\n\t\t\tstart_date: gantt.date[unit + \"_start\"](range.start_date),\r\n\t\t\tduration: -1,\r\n\t\t\tunit: unit,\r\n\t\t\tstep:step\r\n\t\t});//one free column before first task\r\n\r\n\t\trange.end_date = gantt.date[unit + \"_start\"](range.end_date);\r\n\t\trange.end_date = gantt.calculateEndDate({start_date: range.end_date, duration: 2, unit: unit, step:step});//one free column after last task\r\n\t}\r\n\r\n\tgantt._min_date = range.start_date;\r\n\tgantt._max_date = range.end_date;\r\n}\r\n\r\nfunction _adjust_scales(gantt) {\r\n\tif (gantt.config.fit_tasks) {\r\n\t\tvar old_min = +gantt._min_date,\r\n\t\t\told_max = +gantt._max_date;\r\n\t\t//this._init_tasks_range();\r\n\t\tif (+gantt._min_date != old_min || +gantt._max_date != old_max) {\r\n\t\t\tgantt.render();\r\n\r\n\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports = function updateTasksRange(gantt){\r\n\t_init_tasks_range(gantt);\r\n\t_adjust_scales(gantt);\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/gantt_data_range.js\n// module id = 19\n// module chunks = 0","function copyLinkIdsArray(gantt, linkIds, targetHash){\r\n\tfor(var i = 0; i < linkIds.length; i++) {\r\n\t\tif(gantt.isLinkExists(linkIds[i])){\r\n\t\t\ttargetHash[linkIds[i]] = gantt.getLink(linkIds[i]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction copyLinkIds(gantt, task, targetHash){\r\n\tcopyLinkIdsArray(gantt, task.$source, targetHash);\r\n\tcopyLinkIdsArray(gantt, task.$target, targetHash);\r\n}\r\n\r\nfunction getSubtreeLinks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tif(gantt.isTaskExists(rootId)){\r\n\t\tcopyLinkIds(gantt, gantt.getTask(rootId), res);\r\n\t}\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tcopyLinkIds(gantt, child, res);\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nfunction getSubtreeTasks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tres[child.id] = child;\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSubtreeLinks: getSubtreeLinks,\r\n\tgetSubtreeTasks: getSubtreeTasks\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/task_tree_helpers.js\n// module id = 20\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar dateHelper = require(\"../../utils/date_helpers\");\r\n\r\nvar calendarArgumentsHelper = function(gantt){\r\n\treturn {\r\n\t\tgetWorkHoursArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tunsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tisWorkTimeArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (!config.date) {\r\n\t\t\t\tconfig = {};\r\n\t\t\t\tconfig.date = arguments[0];\r\n\t\t\t\tconfig.unit = arguments[1];\r\n\t\t\t\tconfig.task = arguments[2];\r\n\t\t\t\tconfig.calendar = arguments[3];\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\t\tconfig.task = config.task || null;\r\n\t\t\t\tconfig.calendar = config.calendar || null;\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tgetClosestWorkTimeArguments: function (config) {\r\n\t\t\tconfig = arguments[0];\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\t\t\tconfig.dir = config.dir || 'any';\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationConfig: function (start, end, task, calendar) {\r\n\t\t\tthis.start_date = start;\r\n\t\t\tthis.end_date = end;\r\n\t\t\tthis.task = task;\r\n\t\t\tthis.calendar = calendar;\r\n\t\t\tthis.unit = null;\r\n\t\t\tthis.step = null;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t_getStartEndConfig: function (param) {\r\n\t\t\tvar argumentType = this.getDurationConfig;\r\n\t\t\tvar config;\r\n\t\t\tif (param instanceof argumentType)\r\n\t\t\t\treturn param;\r\n\r\n\t\t\tif (dateHelper.isDate(param)) {\r\n\t\t\t\tconfig = new argumentType(arguments[0], arguments[1], arguments[2], arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = new argumentType(param.start_date, param.end_date, param.task);\r\n\t\t\t\tif (param.id) {\r\n\t\t\t\t\tconfig.task = param;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\t\t\tconfig.start_date = config.start_date || config.start || config.date;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\thasDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\tcalculateEndDateArguments: function (start, duration, unit, step) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tstart_date: arguments[0],\r\n\t\t\t\t\tduration: arguments[1],\r\n\t\t\t\t\tunit: arguments[2],\r\n\t\t\t\t\ttask: arguments[3],\r\n\t\t\t\t\tcalendar: arguments[4]\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\r\n\t\t\treturn config;\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = calendarArgumentsHelper;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/calendar_arguments_helper.js\n// module id = 21\n// module chunks = 0","window.Gantt = require(\"./core/gantt_factory\");\r\nwindow.gantt = window.Gantt.getGanttInstance();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/dhtmlxgantt.enterprise.js\n// module id = 23\n// module chunks = 0","var Gantt = { _seed: 0 };\r\nGantt.plugin = function(code){\r\n\tthis._ganttPlugin.push(code);\r\n\tcode(window.gantt);\r\n};\r\nGantt._ganttPlugin = [];\r\nGantt.getGanttInstance = function() {\r\n\tvar gantt = require(\"./gantt\")();\r\n\tfor (var i=0; i<Gantt._ganttPlugin.length; i++) {\r\n\t\tGantt._ganttPlugin[i](gantt);\r\n\t}\r\n\tgantt._internal_id = (Gantt._seed++);\r\n\r\n\tif (Gantt.$syncFactory)\r\n\t\tGantt.$syncFactory(gantt);\r\n\r\n\trequire(\"./deprecated_warnings\")(gantt);\r\n\r\n\treturn gantt;\r\n};\r\n\r\nmodule.exports = Gantt;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/gantt_factory.js\n// module id = 24\n// module chunks = 0","function DHXGantt(){\r\n\tthis.version = \"5.1.0\";\r\n\tthis.templates = {};\r\n\tthis.keys = {\r\n\t\tedit_save: 13,\r\n\t\tedit_cancel: 27\r\n\t};\r\n}\r\n\r\nmodule.exports = function() {\r\n\t// use a named constructor to make gantt instance discoverable in heap snapshots\r\n\tvar gantt = new DHXGantt();\r\n\r\n\trequire(\"./common/import\")(gantt);\r\n\r\n\tgantt.$services = gantt.$inject(require(\"./common/services\"));\r\n\tgantt.config = gantt.$inject(require(\"./common/config\"));\r\n\tgantt.ajax =  require(\"./common/ajax\")(gantt);\r\n\tgantt.date = require(\"./common/date\")(gantt);\r\n\tvar dnd = require(\"./common/dnd\")(gantt);\r\n\tgantt.$services.setService(\"dnd\", function(){return dnd;});\r\n\r\n\tgantt.$services.setService(\"config\", function () {\r\n\t\treturn gantt.config;\r\n\t});\r\n\tgantt.$services.setService(\"date\", function () {\r\n\t\treturn gantt.date;\r\n\t});\r\n\tgantt.$services.setService(\"locale\", function () {\r\n\t\treturn gantt.locale;\r\n\t});\r\n\tgantt.$services.setService(\"templates\", function () {\r\n\t\treturn gantt.templates;\r\n\t});\r\n\r\n\tvar templatesLoader = require(\"./common/templates\")(gantt);\r\n\tgantt.$services.setService(\"templateLoader\", function () {\r\n\t\treturn templatesLoader;\r\n\t});\r\n\r\n\tvar eventable = require(\"../utils/eventable\");\r\n\teventable(gantt);\r\n\r\n\tvar StateService = require(\"./common/state\");\r\n\tvar stateService = new StateService();\r\n\r\n\tstateService.registerProvider(\"global\", function () {\r\n\t\treturn {\r\n\t\t\tmin_date: gantt._min_date,\r\n\t\t\tmax_date: gantt._max_date,\r\n\t\t\tselected_task: gantt.$data.tasksStore.getSelectedId()\r\n\t\t};\r\n\t});\r\n\tgantt.getState = stateService.getState;\r\n\tgantt.$services.setService(\"state\", function () {\r\n\t\treturn stateService;\r\n\t});\r\n\r\n\tvar utils = require(\"../utils/utils\");\r\n\tutils.mixin(gantt, utils);\r\n\tgantt.env = require(\"../utils/env\");\r\n\r\n\tvar domEvents = require(\"../utils/dom_event_scope\")();\r\n\tgantt.event = domEvents.attach;\r\n\tgantt.eventRemove = domEvents.detach;\r\n\tgantt._eventRemoveAll = domEvents.detachAll;\r\n\tgantt._createDomEventScope = domEvents.extend;\r\n\r\n\tutils.mixin(gantt, require(\"./message\")(gantt));\r\n\tvar uiApi = require(\"./ui/index\").init(gantt);\r\n\tgantt.$ui = uiApi.factory;\r\n\tgantt.$ui.layers = uiApi.render;\r\n\tgantt.$mouseEvents = uiApi.mouseEvents;\r\n\tgantt.$services.setService(\"mouseEvents\", function () {\r\n\t\treturn gantt.$mouseEvents;\r\n\t});\r\n\tgantt.mixin(gantt, uiApi.layersApi);\r\n\r\n\trequire(\"./data_task_layers\")(gantt);\r\n\r\n\tgantt.$services.setService(\"layers\", function () {\r\n\t\treturn uiApi.layersService;\r\n\t});\r\n\r\n\trequire(\"./datastore/datastore_hooks\")(gantt);\r\n\r\n\trequire(\"./dataprocessor/hooks\")(gantt);\r\n\trequire(\"./plugins\")(gantt);\r\n\r\n\trequire(\"./dynamic_loading\")(gantt);\r\n\trequire(\"./grid_column_api\")(gantt);\r\n\trequire(\"./wai_aria\")(gantt);\r\n\trequire(\"./tasks\")(gantt);\r\n\trequire(\"./load\")(gantt);\r\n\trequire(\"./worktime/work_time\")(gantt);\r\n\trequire(\"./data\")(gantt);\r\n\trequire(\"./lightbox\")(gantt);\r\n\trequire(\"./lightbox_optional_time\")(gantt);\r\n\trequire(\"./data_task_types\")(gantt);\r\n\trequire(\"./cached_functions\")(gantt);\r\n\trequire(\"./skin\")(gantt);\r\n\trequire(\"../css/skins/skyblue\")(gantt);\r\n\trequire(\"../css/skins/meadow\")(gantt);\r\n\trequire(\"../css/skins/terrace\")(gantt);\r\n\trequire(\"../css/skins/broadway\")(gantt);\r\n\trequire(\"../css/skins/material\")(gantt);\r\n\trequire(\"../css/skins/contrast_black\")(gantt);\r\n\trequire(\"../css/skins/contrast_white\")(gantt);\r\n\trequire(\"./touch\")(gantt);\r\n\trequire(\"../locale/locale\")(gantt);\r\n\trequire(\"./gantt_core\")(gantt);\r\n\trequire(\"./destructor\")(gantt);\r\n\r\n\treturn gantt;\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/gantt.js\n// module id = 25\n// module chunks = 0","module.exports = function(gantt){\r\n\tgantt.$inject = function(module){\r\n\t\treturn module(this.$services);\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/import.js\n// module id = 26\n// module chunks = 0","module.exports = function(){\r\n\tvar services = {};\r\n\tfunction register (name, getter){\r\n\t\tservices[name] = getter;\r\n\t}\r\n\r\n\tfunction getService(name){\r\n\t\tif(!services[name]){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn services[name]();\r\n\t}\r\n\r\n\tvar servicesEnum = {\r\n\t\t\"config\": \"config\",\r\n\t\t\"templates\": \"templates\",\r\n\t\t\"locale\": \"locale\"\r\n\t};\r\n\r\n\treturn {\r\n\t\tservices: servicesEnum,\r\n\t\tsetService: register,\r\n\t\tgetService: getService,\r\n\t\tconfig: function(){\r\n\t\t\treturn this.getService(\"config\");\r\n\t\t},\r\n\t\ttemplates: function(){\r\n\t\t\treturn this.getService(\"templates\");\r\n\t\t},\r\n\t\tlocale: function(){\r\n\t\t\treturn this.getService(\"locale\");\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tfor(var i in services){\r\n\t\t\t\tif(services[i]){\r\n\t\t\t\t\tvar service = services[i];\r\n\t\t\t\t\tif(service && service.destructor){\r\n\t\t\t\t\t\tservice.destructor();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tservices = null;\r\n\t\t}\r\n\t};\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/services.js\n// module id = 27\n// module chunks = 0","module.exports = function() {\r\n\treturn {\r\n\t\tlayout: {\r\n\t\t\tcss: \"gantt_container\",\r\n\t\t\trows: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcols: [\r\n\t\t\t\t\t\t{view: \"grid\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{resizer: true, width: 1},\r\n\t\t\t\t\t\t{view: \"timeline\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{view: \"scrollbar\", id: \"scrollVer\"}\r\n\t\t\t\t\t]\r\n\r\n\t\t\t\t},\r\n\t\t\t\t{view: \"scrollbar\", id: \"scrollHor\", height: 20}\r\n\t\t\t]\r\n\t\t},\r\n\t\tlinks: {\r\n\t\t\t\"finish_to_start\": \"0\",\r\n\t\t\t\"start_to_start\": \"1\",\r\n\t\t\t\"finish_to_finish\": \"2\",\r\n\t\t\t\"start_to_finish\": \"3\"\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\t'task': 'task',\r\n\t\t\t'project': 'project',\r\n\t\t\t'milestone': 'milestone'\r\n\t\t},\r\n\t\tduration_unit: \"day\",\r\n\t\twork_time: false,\r\n\t\tcorrect_work_time: false,\r\n\t\tskip_off_time: false,\r\n\r\n\t\tcascade_delete: true,\r\n\r\n\t\tautosize: false,\r\n\t\tautosize_min_width: 0,\r\n\t\tautoscroll: true,\r\n\t\tautoscroll_speed: 30,\r\n\r\n\t\tshow_links: true,\r\n\t\tshow_task_cells: true,\r\n\t\t// replace backgroung of the task area with a canvas img\r\n\t\tstatic_background: false,\r\n\t\tbranch_loading: false,\r\n\t\tbranch_loading_property: \"$has_child\",\r\n\t\tshow_loading: false,\r\n\t\tshow_chart: true,\r\n\t\tshow_grid: true,\r\n\t\tmin_duration: 60 * 60 * 1000,\r\n\t\txml_date: \"%d-%m-%Y %H:%i\",\r\n\t\tapi_date: \"%d-%m-%Y %H:%i\",\r\n\t\tstart_on_monday: true,\r\n\t\tserver_utc: false,\r\n\t\tshow_progress: true,\r\n\t\tfit_tasks: false,\r\n\t\tselect_task: true,\r\n\t\tscroll_on_click: true,\r\n\t\tpreserve_scroll: true,\r\n\t\treadonly: false,\r\n\r\n\t\t/*grid */\r\n\t\tdate_grid: \"%Y-%m-%d\",\r\n\r\n\t\tdrag_links: true,\r\n\t\tdrag_progress: true,\r\n\t\tdrag_resize: true,\r\n\t\tdrag_project: false,\r\n\t\tdrag_move: true,\r\n\t\tdrag_mode: {\r\n\t\t\t\"resize\": \"resize\",\r\n\t\t\t\"progress\": \"progress\",\r\n\t\t\t\"move\": \"move\",\r\n\t\t\t\"ignore\": \"ignore\"\r\n\t\t},\r\n\t\tround_dnd_dates: true,\r\n\t\tlink_wrapper_width: 20,\r\n\t\troot_id: 0,\r\n\r\n\t\tautofit: false, // grid column automatic fit grid_width config\r\n\t\tcolumns: [\r\n\t\t\t{name: \"text\", tree: true, width: '*', resize: true},\r\n\t\t\t{name: \"start_date\", align: \"center\", resize: true},\r\n\t\t\t{name: \"duration\", align: \"center\"},\r\n\t\t\t{name: \"add\", width: 44}\r\n\t\t],\r\n\r\n\t\t/*scale*/\r\n\t\tstep: 1,\r\n\t\tscale_unit: \"day\",\r\n\t\tscale_offset_minimal: true,\r\n\t\tsubscales: [],\r\n\r\n\t\tinherit_scale_class: false,\r\n\r\n\t\ttime_step: 60,\r\n\t\tduration_step: 1,\r\n\t\tdate_scale: \"%d %M\",\r\n\t\ttask_date: \"%d %F %Y\",\r\n\t\ttime_picker: \"%H:%i\",\r\n\t\ttask_attribute: \"task_id\",\r\n\t\tlink_attribute: \"link_id\",\r\n\t\tlayer_attribute: \"data-layer\",\r\n\t\tbuttons_left: [\r\n\t\t\t\"gantt_save_btn\",\r\n\t\t\t\"gantt_cancel_btn\"\r\n\t\t],\r\n\t\t_migrate_buttons: {\r\n\t\t\t\"dhx_save_btn\": \"gantt_save_btn\",\r\n\t\t\t\"dhx_cancel_btn\": \"gantt_cancel_btn\",\r\n\t\t\t\"dhx_delete_btn\": \"gantt_delete_btn\"\r\n\t\t},\r\n\t\tbuttons_right: [\r\n\t\t\t\"gantt_delete_btn\"\r\n\t\t],\r\n\t\tlightbox: {\r\n\t\t\tsections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"time\", type: \"duration\", map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tproject_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", readonly: true, map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tmilestone_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", single_date: true, map_to: \"auto\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\tdrag_lightbox: true,\r\n\t\tsort: false,\r\n\t\tdetails_on_create: true,\r\n\t\tdetails_on_dblclick: true,\r\n\t\tinitial_scroll: true,\r\n\t\ttask_scroll_offset: 100,\r\n\r\n\t\torder_branch: false,\r\n\t\torder_branch_free: false,\r\n\r\n\t\ttask_height: \"full\",//number px of 'full' for row height\r\n\t\tmin_column_width: 70,\r\n\r\n\t\t// min width for grid column (when resizing)\r\n\t\tmin_grid_column_width: 70,\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_column_attribute: \"column_index\",\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_attribute: \"grid_resizer\",\r\n\r\n\t\t// grid width can be increased after the column has been resized\r\n\t\tkeep_grid_width: false,\r\n\r\n\t\t// grid width can be adjusted\r\n\t\tgrid_resize: false,\r\n\r\n\t\tshow_unscheduled: true,\r\n\r\n\t\t//\r\n\t\treadonly_property: \"readonly\",\r\n\t\teditable_property: \"editable\",\r\n\t\tcalendar_property: \"calendar_id\",\r\n\t\tresource_calendars: {},\r\n\r\n\t\ttype_renderers: {},\r\n\r\n\t\topen_tree_initially: false,\r\n\t\toptimize_render: true,\r\n\t\tprevent_default_scroll: false,\r\n\t\tshow_errors: true,\r\n\t\twai_aria_attributes: true,\r\n\t\tsmart_scales: true,\r\n\t\trtl:false\r\n\t};\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/config.js\n// module id = 28\n// module chunks = 0","var env = require(\"../../utils/env\");\r\n\r\nmodule.exports = function(gantt){\r\n\treturn {\r\n\r\n\t\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t\t// if true - do not add extra params\r\n\t\tcache: true,\r\n\r\n\t\t// default method for load/loadStruct, post/get allowed\r\n\t\t// get - since 4.1.1, this should fix 412 error for macos safari\r\n\t\tmethod: \"get\",\r\n\r\n\t\tparse: function(data) {\r\n\t\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\t\tvar obj;\r\n\t\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\t\tif (window.DOMParser && !env.isIE) { // ff,ie9\r\n\t\t\t\tobj = (new window.DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t\t} else if (window.ActiveXObject !== window.undefined) {\r\n\t\t\t\tobj = new window.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\tobj.async = \"false\";\r\n\t\t\t\tobj.loadXML(data);\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t},\r\n\t\txmltop: function(tagname, xhr, obj) {\r\n\t\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (obj !== -1) gantt.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\t\treturn document.createElement(\"DIV\");\r\n\t\t},\r\n\t\txpath: function(xpathExp, docObj) {\r\n\t\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\t\tif (env.isIE) {\r\n\t\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t\t} else {\r\n\t\t\t\tvar rows = [];\r\n\t\t\t\tvar first;\r\n\t\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\t\twhile (true){\r\n\t\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\t\tif(first){\r\n\t\t\t\t\t\trows.push(first);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn rows;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquery: function(config) {\r\n\t\t\tthis._call(\r\n\t\t\t\t(config.method || \"GET\"),\r\n\t\t\t\tconfig.url,\r\n\t\t\t\tconfig.data || \"\",\r\n\t\t\t\t(config.async || true),\r\n\t\t\t\tconfig.callback,\r\n\t\t\t\tnull,\r\n\t\t\t\tconfig.headers\r\n\t\t\t);\r\n\t\t},\r\n\t\tget: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad);\r\n\t\t},\r\n\t\tgetSync: function(url) {\r\n\t\t\treturn this._call(\"GET\", url, null, false);\r\n\t\t},\r\n\t\tput: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"PUT\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tdel: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"DELETE\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpost: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 1) {\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else if (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]) == \"function\")) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tpostData = String(postData);\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpostSync: function(url, postData) {\r\n\t\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\t\t\treturn this._call(\"POST\", url, postData, false);\r\n\t\t},\r\n\t\tgetLong: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad, {url:url});\r\n\t\t},\r\n\t\tpostLong: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]))) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad, {url:url, postData:postData});\r\n\t\t},\r\n\t\t_call: function(method, url, postData, async, onLoad, longParams, headers) {\r\n\r\n\t\t\tvar t = (window.XMLHttpRequest && !env.isIE ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\t\t\tif (!!async) {\r\n\t\t\t\tt.onreadystatechange = function() {\r\n\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\t\tif (t.status != 200 || t.responseText === \"\")\r\n\t\t\t\t\t\t\tif (!gantt.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function(){\r\n\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\tonLoad.apply(window, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (longParams) {\r\n\t\t\t\t\t\t\t\tif (typeof(longParams.postData) != \"undefined\") {\r\n\t\t\t\t\t\t\t\t\tthis.postLong(longParams.url, longParams.postData, onLoad);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.getLong(longParams.url, onLoad);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t\t},1);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (method == \"GET\" && !this.cache) {\r\n\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t\t}\r\n\r\n\t\t\tt.open(method, url, async);\r\n\r\n\t\t\tif (headers){\r\n\t\t\t\tfor (var key in headers)\r\n\t\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t} else if (method == \"GET\") {\r\n\t\t\t\tpostData = null;\r\n\t\t\t}\r\n\r\n\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\t\tt.send(postData);\r\n\r\n\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\r\n\t\t},\r\n\t\turlSeparator: function(str){\r\n\t\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\t\treturn \"&\";\r\n\t\t\telse\r\n\t\t\t\treturn \"?\";\r\n\t\t}\r\n\t};\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/ajax.js\n// module id = 29\n// module chunks = 0","/*\r\n %d - the day as a number with a leading zero ( 01 to 31 );\r\n %j - the day as a number without a leading zero ( 1 to 31 );\r\n %D - the day as an abbreviation ( Sun to Sat );\r\n %l - the day as a full name ( Sunday to Saturday );\r\n %W - the ISO-8601 week number of the year. Weeks start on Monday; 1)\r\n %m - the month as a number without a leading zero ( 1 to 12 );\r\n %n - the month as a number with a leading zero ( 01 to 12);\r\n %M - the month as an abbreviation ( Jan to Dec );\r\n %F - the month as a full name ( January to December );\r\n %y - the year as a two-digit number ( 00 to 99 );\r\n %Y - the year as a four-digit number ( 19009999 );\r\n %h - the hour based on the 12-hour clock ( 00 to 11 );\r\n %H - the hour based on the 24-hour clock ( 00 to 23 );\r\n %i - the minute as a number with a leading zero ( 00 to 59 );\r\n %s - the second as a number without a leading zero ( 00 to 59 ); 2)\r\n %a - displays am (for times from midnight until noon) and pm (for times from noon until midnight);\r\n %A - displays AM (for times from midnight until noon) and PM (for times from noon until midnight).\r\n*/\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar dateHelper = {\r\n\t\tinit: function () {\r\n\t\t\tvar locale = gantt.locale;\r\n\r\n\t\t\tvar s = locale.date.month_short;\r\n\t\t\tvar t = locale.date.month_short_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\r\n\t\t\tvar s = locale.date.month_full;\r\n\t\t\tvar t = locale.date.month_full_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\t\t},\r\n\t\tdate_part: function (date) {\r\n\t\t\tvar old = new Date(date);\r\n\t\t\tdate.setHours(0);\r\n\t\t\tthis.hour_start(date);\r\n\t\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()))\r\n\t\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\ttime_part: function (date) {\r\n\t\t\treturn (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\r\n\t\t},\r\n\t\tweek_start: function (date) {\r\n\t\t\tvar shift = date.getDay();\r\n\t\t\tif (gantt.config.start_on_monday) {\r\n\t\t\t\tif (shift === 0) shift = 6;\r\n\t\t\t\telse shift--;\r\n\t\t\t}\r\n\t\t\treturn this.date_part(this.add(date, -1 * shift, \"day\"));\r\n\t\t},\r\n\t\tmonth_start: function (date) {\r\n\t\t\tdate.setDate(1);\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\tquarter_start: function (date) {\r\n\t\t\tthis.month_start(date);\r\n\t\t\tvar m = date.getMonth(),\r\n\t\t\t\tres_month;\r\n\r\n\t\t\tif (m >= 9) {\r\n\t\t\t\tres_month = 9;\r\n\t\t\t} else if (m >= 6) {\r\n\t\t\t\tres_month = 6;\r\n\t\t\t} else if (m >= 3) {\r\n\t\t\t\tres_month = 3;\r\n\t\t\t} else {\r\n\t\t\t\tres_month = 0;\r\n\t\t\t}\r\n\r\n\t\t\tdate.setMonth(res_month);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tyear_start: function (date) {\r\n\t\t\tdate.setMonth(0);\r\n\t\t\treturn this.month_start(date);\r\n\t\t},\r\n\t\tday_start: function (date) {\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\thour_start: function (date) {\r\n\t\t\tif (date.getMinutes())\r\n\t\t\t\tdate.setMinutes(0);\r\n\t\t\tthis.minute_start(date);\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tminute_start: function (date) {\r\n\t\t\tif (date.getSeconds())\r\n\t\t\t\tdate.setSeconds(0);\r\n\t\t\tif (date.getMilliseconds())\r\n\t\t\t\tdate.setMilliseconds(0);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\t_add_days: function (date, inc) {\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\r\n\t\t\tndate.setDate(ndate.getDate() + inc);\r\n\t\t\tif (inc >= 0 && (!date.getHours() && ndate.getHours()) &&//shift to yesterday on dst\r\n\t\t\t\t(ndate.getDate() <= date.getDate() || ndate.getMonth() < date.getMonth() || ndate.getFullYear() < date.getFullYear()))\r\n\t\t\t\tndate.setTime(ndate.getTime() + 60 * 60 * 1000 * (24 - ndate.getHours()));\r\n\t\t\treturn ndate;\r\n\t\t},\r\n\r\n\t\tadd: function (date, inc, mode) {\r\n\t\t\t/*jsl:ignore*/\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase \"day\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"week\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc * 7);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"month\":\r\n\t\t\t\t\tndate.setMonth(ndate.getMonth() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"year\":\r\n\t\t\t\t\tndate.setYear(ndate.getFullYear() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hour\":\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tadding hours/minutes via setHour(getHour() + inc) gives weird result when\r\n\t\t\t\t\t\tadding one hour to the time before switch to a Daylight Saving time\r\n\r\n\t\t\t\t\t\texample: //Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\t\t\t\t\t\tnew Date(2014, 02, 30, 1).setHours(2)\r\n\t\t\t\t\t\t>>Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\r\n\t\t\t\t\t\tsetTime seems working as expected\r\n\t\t\t\t\t */\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"minute\":\r\n\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn this[\"add_\" + mode](date, inc, mode);\r\n\t\t\t}\r\n\t\t\treturn ndate;\r\n\t\t\t/*jsl:end*/\r\n\t\t},\r\n\t\tadd_quarter: function (date, inc) {\r\n\t\t\treturn this.add(date, inc * 3, \"month\");\r\n\t\t},\r\n\r\n\t\tto_fixed: function (num) {\r\n\t\t\tif (num < 10) return \"0\" + num;\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\tcopy: function (date) {\r\n\t\t\treturn new Date(date.valueOf());\r\n\t\t},\r\n\t\tdate_to_str: function (format, utc) {\r\n\t\t\tformat = format.replace(/%[a-zA-Z]/g, function (a) {\r\n\t\t\t\tswitch (a) {\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getDate())+\\\"\";\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getMonth()+1))+\\\"\";\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getDate()+\\\"\";\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getMonth()+1)+\\\"\";\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getFullYear()%100)+\\\"\";\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getFullYear()+\\\"\";\r\n\t\t\t\t\tcase \"%D\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_short[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%l\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_full[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_short[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_full[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\t\treturn \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getHours()+\\\"\";\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getHours())+\\\"\";\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getMinutes())+\\\"\";\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"pm\\\":\\\"am\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"PM\\\":\\\"AM\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getSeconds())+\\\"\";\r\n\t\t\t\t\tcase \"%W\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getISOWeek(date))+\\\"\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn a;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (utc) format = format.replace(/date\\.get/g, \"date.getUTC\");\r\n\t\t\tvar dateToStr = new Function(\"date\", \"to_fixed\", \"locale\", \"getISOWeek\", \"return \\\"\" + format + \"\\\";\");\r\n\r\n\t\t\treturn function (date) {\r\n\t\t\t\treturn dateToStr(date, dateHelper.to_fixed, gantt.locale, dateHelper.getISOWeek);\r\n\t\t\t};\r\n\t\t},\r\n\t\tstr_to_date: function (format, utc) {\r\n\t\t\tvar splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\t\t\tvar mask = format.match(/%[a-zA-Z]/g);\r\n\t\t\tfor (var i = 0; i < mask.length; i++) {\r\n\t\t\t\tswitch (mask[i]) {\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsplt += \"set[2]=temp[\" + i + \"]||1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsplt += \"set[1]=(temp[\" + i + \"]||1)-1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]*1+(temp[\" + i + \"]>50?1900:2000);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\tsplt += \"set[3]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\tsplt += \"set[4]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\tsplt += \"set[3]=set[3]%12+((temp[\" + i + \"]||'').toLowerCase()=='am'?0:12);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\tsplt += \"set[5]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_short_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_full_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\t\t\tif (utc) code = \" Date.UTC(\" + code + \")\";\r\n\t\t\tvar strToDate = new Function(\"date\", \"locale\", \"var set=[0,0,1,0,0,0]; \" + splt + \" return new Date(\" + code + \");\");\r\n\r\n\t\t\treturn function (dateString) {\r\n\t\t\t\treturn strToDate(dateString, gantt.locale);\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetISOWeek: function (ndate) {\r\n\t\t\tif (!ndate) return false;\r\n\t\t\tvar nday = ndate.getDay();\r\n\t\t\tif (nday === 0) {\r\n\t\t\t\tnday = 7;\r\n\t\t\t}\r\n\t\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\t\tvar ordinal_date = Math.round((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\t\tvar week_number = 1 + Math.floor(ordinal_date / 7);\r\n\t\t\treturn week_number;\r\n\t\t},\r\n\t\tgetUTCISOWeek: function (ndate) {\r\n\t\t\treturn this.getISOWeek(ndate);\r\n\t\t},\r\n\t\tconvert_to_utc: function (date) {\r\n\t\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t\t},\r\n\t\tparseDate: function (date, format) {\r\n\t\t\t// raw date may be of type string, number (timestamp) or something else\r\n\t\t\t// do not check for instanceof Date explicitly, since we may swap native date with different date implementation at some point\r\n\t\t\tif (date && !date.getFullYear) {\r\n\t\t\t\tif (gantt.defined(format)) {\r\n\t\t\t\t\tif (typeof(format) == \"string\")\r\n\t\t\t\t\t\tformat = gantt.defined(gantt.templates[format]) ? gantt.templates[format] : gantt.date.str_to_date(format);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tformat = gantt.templates.xml_date;\r\n\t\t\t\t}\r\n\t\t\t\tif (date)\r\n\t\t\t\t\tdate = format(date);\r\n\t\t\t\telse\r\n\t\t\t\t\tdate = null;\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t}\r\n\t};\r\n\treturn dateHelper;\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/date.js\n// module id = 30\n// module chunks = 0","var eventable = require(\"../../utils/eventable\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar timeout = require(\"../../utils/timeout\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tfunction copyDomEvent(e){\r\n\t\treturn {\r\n\t\t\ttarget: e.target || e.srcElement,\r\n\t\t\tpageX: e.pageX,\r\n\t\t\tpageY: e.pageY,\r\n\t\t\tclientX: e.clientX,\r\n\t\t\tclientY: e.clientY,\r\n\t\t\tmetaKey: e.metaKey,\r\n\t\t\tshiftKey: e.shiftKey,\r\n\t\t\tctrlKey: e.ctrlKey,\r\n\t\t\taltKey: e.altKey\r\n\t\t};\r\n\t}\r\n\r\n\tfunction DnD(obj, config) {\r\n\t\tthis._obj = obj;\r\n\t\tthis._settings = config || {};\r\n\t\teventable(this);\r\n\r\n\t\tvar inputMethods = this.getInputMethods();\r\n\r\n\t\tthis._drag_start_timer = null;\r\n\t\tgantt.attachEvent(\"onGanttScroll\", utils.bind(function (left, top) {\r\n\t\t\tthis.clearDragTimer();\r\n\t\t}, this));\r\n\r\n\t\tfor(var i = 0; i < inputMethods.length; i++){\r\n\t\t\t(utils.bind(function(input){\r\n\r\n\t\t\t\tgantt.event(obj, input.down, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._settings.original_target = copyDomEvent(e);\r\n\r\n\t\t\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t\t\tthis.clearDragTimer();\r\n\r\n\t\t\t\t\t\tthis._drag_start_timer = setTimeout(utils.bind(function () {\r\n\t\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t\t}, this), gantt.config.touch_drag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t\tgantt.event(document.body, input.up, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t}, this))(inputMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tDnD.prototype = {\r\n\t\ttraceDragEvents: function (domElement, inputMethod) {\r\n\t\t\tvar mousemove = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragMove(domElement, e, inputMethod.accessor);\r\n\t\t\t}, this);\r\n\t\t\tvar scroll = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragScroll(domElement, e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar limited_mousemove = utils.bind(function (e) {\r\n\t\t\t\tif (e && e.preventDefault) //Cancel default action on DND\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t(e || event).cancelBubble = true;\r\n\t\t\t\tif (utils.defined(this.config.updates_per_second)) {\r\n\t\t\t\t\tif (!timeout(this, this.config.updates_per_second))\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn mousemove(e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar mouseup = utils.bind(function (e) {\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.up, mouseup);\r\n\t\t\t\treturn this.dragEnd(domElement);\r\n\t\t\t}, this);\r\n\r\n\r\n\t\t\tgantt.event(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\tgantt.event(document.body, inputMethod.up, mouseup);\r\n\t\t},\r\n\t\tcheckPositionChange: function (pos) {\r\n\t\t\tvar diff_x = pos.x - this.config.pos.x;\r\n\t\t\tvar diff_y = pos.y - this.config.pos.y;\r\n\t\t\tvar distance = Math.sqrt(Math.pow(Math.abs(diff_x), 2) + Math.pow(Math.abs(diff_y), 2));\r\n\r\n\t\t\tif (distance > this.config.sensitivity) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitDnDMarker: function () {\r\n\t\t\t// create dnd placeholder and put it in dom\r\n\t\t\tvar marker = this.config.marker = document.createElement(\"div\");\r\n\t\t\tmarker.className = \"gantt_drag_marker\";\r\n\t\t\tmarker.innerHTML = \"Dragging object\";\r\n\t\t\tdocument.body.appendChild(marker);\r\n\t\t},\r\n\t\tbackupEventTarget: function (domEvent, getEvent) {\r\n\t\t\tif (!gantt.config.touch) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// keep original event target in DOM in order to keep dnd on touchmove event\r\n\t\t\tvar e = getEvent(domEvent);\r\n\r\n\t\t\tvar el = e.target || e.srcElement;\r\n\t\t\tvar copy = el.cloneNode(true);\r\n\t\t\t//this.config.target.target = copy;\r\n\t\t\tthis.config.original_target = copyDomEvent(e);\r\n\t\t\tthis.config.original_target.target = copy;\r\n\t\t\tthis.config.backup_element = el;\r\n\t\t\tel.parentNode.appendChild(copy);\r\n\r\n\t\t\tel.style.display = \"none\";\r\n\t\t\tdocument.body.appendChild(el);\r\n\t\t},\r\n\t\tgetInputMethods: function () {\r\n\t\t\t// bind actions to browser events\r\n\t\t\tvar inputMethods = [];\r\n\r\n\t\t\tinputMethods.push({\r\n\t\t\t\t\"move\": \"mousemove\",\r\n\t\t\t\t\"down\": \"mousedown\",\r\n\t\t\t\t\"up\": \"mouseup\",\r\n\t\t\t\t\"accessor\": function (e) {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\r\n\t\t\t\tvar touchEventsSupported = true;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t\t}catch (e){\r\n\t\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(touchEventsSupported){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"touchmove\",\r\n\t\t\t\t\t\t\"down\": \"touchstart\",\r\n\t\t\t\t\t\t\"up\": \"touchend\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttarget: document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY),\r\n\t\t\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(window.navigator.pointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"pointermove\",\r\n\t\t\t\t\t\t\"down\": \"pointerdown\",\r\n\t\t\t\t\t\t\"up\": \"pointerup\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}else if (window.navigator.msPointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"MSPointerMove\",\r\n\t\t\t\t\t\t\"down\": \"MSPointerDown\",\r\n\t\t\t\t\t\t\"up\": \"MSPointerUp\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn inputMethods;\r\n\t\t},\r\n\t\tclearDragTimer: function () {\r\n\t\t\tif (this._drag_start_timer) {\r\n\t\t\t\tclearTimeout(this._drag_start_timer);\r\n\t\t\t\tthis._drag_start_timer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdragStart: function (obj, e, inputMethod) {\r\n\t\t\tthis.config = {\r\n\t\t\t\tobj: obj,\r\n\t\t\t\tmarker: null,\r\n\t\t\t\tstarted: false,\r\n\t\t\t\tpos: this.getPosition(e),\r\n\t\t\t\tsensitivity: 4\r\n\t\t\t};\r\n\t\t\tif (this._settings)\r\n\t\t\t\tutils.mixin(this.config, this._settings, true);\r\n\r\n\r\n\t\t\tthis.traceDragEvents(obj, inputMethod);\r\n\r\n\t\t\tgantt._prevent_touch_scroll = true;\r\n\t\t\tdocument.body.className += \" gantt_noselect\";\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\tthis.dragMove(obj, e, inputMethod.accessor);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdragMove: function (obj, e, getEvent) {\r\n\t\t\tvar source = getEvent(e);\r\n\t\t\tif (!source) return;\r\n\r\n\t\t\tif (!this.config.marker && !this.config.started) {\r\n\t\t\t\tvar pos = this.getPosition(source);\r\n\r\n\t\t\t\tif (gantt.config.touch || this.checkPositionChange(pos)) {\r\n\t\t\t\t\t// real drag starts here,\r\n\t\t\t\t\t// when user moves mouse at first time after onmousedown\r\n\t\t\t\t\tthis.config.started = true;\r\n\t\t\t\t\tthis.config.ignore = false;\r\n\t\t\t\t\tif (this.callEvent(\"onBeforeDragStart\", [obj, this.config.original_target]) === false) {\r\n\t\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.backupEventTarget(e, getEvent);\r\n\t\t\t\t\tthis.initDnDMarker();\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\tthis.callEvent(\"onAfterDragStart\", [obj, this.config.original_target]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!this.config.ignore) {\r\n\t\t\t\tsource.pos = this.getPosition(source);\r\n\t\t\t\tthis.config.marker.style.left = source.pos.x + \"px\";\r\n\t\t\t\tthis.config.marker.style.top = source.pos.y + \"px\";\r\n\t\t\t\tthis.callEvent(\"onDragMove\", [obj, source]);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdragEnd: function (obj) {\r\n\t\t\tvar target = this.config.backup_element;\r\n\t\t\tif (target && target.parentNode) {\r\n\t\t\t\ttarget.parentNode.removeChild(target);\r\n\t\t\t}\r\n\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\tif (this.config.marker) {\r\n\t\t\t\tthis.config.marker.parentNode.removeChild(this.config.marker);\r\n\t\t\t\tthis.config.marker = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onDragEnd\", []);\r\n\t\t\t}\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_noselect\", \"\");\r\n\t\t},\r\n\r\n\t\tgetPosition: function (e) {\r\n\t\t\tvar x = 0, y = 0;\r\n\t\t\te = e || window.event;\r\n\t\t\tif (e.pageX || e.pageY) {\r\n\t\t\t\tx = e.pageX;\r\n\t\t\t\ty = e.pageY;\r\n\t\t\t} else if (e.clientX || e.clientY) {\r\n\t\t\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n\t\t\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n\t\t\t}\r\n\t\t\treturn {x: x, y: y};\r\n\t\t}\r\n\t};\r\n\r\n\treturn DnD;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/dnd.js\n// module id = 31\n// module chunks = 0","module.exports = function(gantt) {\r\n\r\n\tvar regTemplates = {};\r\n\r\n\tfunction initTemplate(name, initial, template_name) {\r\n\t\ttemplate_name = template_name || name;\r\n\t\tvar config = gantt.config,\r\n\t\t\ttemplates = gantt.templates;\r\n\r\n\t\tif (gantt.config[name] && regTemplates[template_name] != config[name]) {\r\n\t\t\tif (!(initial && templates[template_name])) {\r\n\t\t\t\ttemplates[template_name] = gantt.date.date_to_str(config[name]);\r\n\t\t\t\tregTemplates[template_name] = config[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initTemplates() {\r\n\t\tvar labels = gantt.locale.labels;\r\n\t\tlabels.gantt_save_btn = labels.icon_save;\r\n\t\tlabels.gantt_cancel_btn = labels.icon_cancel;\r\n\t\tlabels.gantt_delete_btn = labels.icon_delete;\r\n\r\n\r\n\t\tvar date = gantt.date;\r\n\r\n\t\t//build configuration based templates\r\n\t\tvar d = date.date_to_str;\r\n\t\tvar c = gantt.config;\r\n\t\tinitTemplate(\"date_scale\", true, undefined, gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"date_grid\", true, \"grid_date_format\", gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"task_date\", true, undefined, gantt.config, gantt.templates);\r\n\r\n\t\tgantt.mixin(gantt.templates, {\r\n\t\t\txml_date: date.str_to_date(c.xml_date, c.server_utc),\r\n\t\t\txml_format: d(c.xml_date, c.server_utc),\r\n\t\t\tapi_date: date.str_to_date(c.api_date),\r\n\t\t\tprogress_text: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_header_class: function (column, config) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttask_text: function (start, end, task) {\r\n\t\t\t\treturn task.text;\r\n\t\t\t},\r\n\t\t\ttask_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_cell_class: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_cell_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_row_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\tgrid_indent: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_indent'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_folder: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_folder_\" + (item.$open ? \"open\" : \"closed\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_file: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_file'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_open: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_\" + (item.$open ? \"close\" : \"open\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_blank: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_blank'></div>\";\r\n\t\t\t},\r\n\t\t\tdate_grid: function (date, item) {\r\n\t\t\t\tif (item && gantt.isUnscheduledTask(item) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.grid_date_format(date);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_time: function (start, end, ev) {\r\n\t\t\t\tif (gantt.isUnscheduledTask(ev) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(ev);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.task_date(start) + \" - \" + gantt.templates.task_date(end);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_unscheduled_time: function (task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttime_picker: d(c.time_picker),\r\n\t\t\tlink_class: function (link) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tlink_description: function (link) {\r\n\t\t\t\tvar from = gantt.getTask(link.source),\r\n\t\t\t\t\tto = gantt.getTask(link.target);\r\n\r\n\t\t\t\treturn \"<b>\" + from.text + \"</b> &ndash;  <b>\" + to.text + \"</b>\";\r\n\t\t\t},\r\n\r\n\t\t\tdrag_link: function (from, from_start, to, to_start) {\r\n\t\t\t\tfrom = gantt.getTask(from);\r\n\t\t\t\tvar labels = gantt.locale.labels;\r\n\r\n\t\t\t\tvar text = \"<b>\" + from.text + \"</b> \" + (from_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tto = gantt.getTask(to);\r\n\t\t\t\t\ttext += \"<b> \" + to.text + \"</b> \" + (to_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn text;\r\n\t\t\t},\r\n\t\t\tdrag_link_class: function (from, from_start, to, to_start) {\r\n\t\t\t\tvar add = \"\";\r\n\r\n\t\t\t\tif (from && to) {\r\n\t\t\t\t\tvar allowed = gantt.isLinkAllowed(from, to, from_start, to_start);\r\n\t\t\t\t\tadd = \" \" + (allowed ? \"gantt_link_allow\" : \"gantt_link_deny\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"gantt_link_tooltip\" + add;\r\n\t\t\t},\r\n\r\n\t\t\t/* used for aria-labels of bar elements and for tooltip.js */\r\n\t\t\ttooltip_date_format: date.date_to_str(\"%Y-%m-%d\"),\r\n\t\t\ttooltip_text: function (start, end, event) {\r\n\t\t\t\treturn \"<b>Task:</b> \" + event.text + \"<br/><b>Start date:</b> \" + gantt.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + gantt.templates.tooltip_date_format(end);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tinitTemplates: initTemplates,\r\n\t\tinitTemplate: initTemplate\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/templates.js\n// module id = 32\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nvar StateService = (function(){\r\n\tvar stateProviders = {};\r\n\r\n\tfunction getState(name){\r\n\t\tif(name){\r\n\t\t\treturn stateProviders[name].method();\r\n\t\t}else{\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i in stateProviders){\r\n\t\t\t\tif(!stateProviders[i].internal)\r\n\t\t\t\t\tutils.mixin(res, stateProviders[i].method(), true);\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction registerProvider(name, provider, internal){\r\n\t\tstateProviders[name] = { method: provider, internal: internal};\r\n\t}\r\n\r\n\tfunction unregisterProvider(name){\r\n\t\tdelete stateProviders[name];\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetState: getState,\r\n\t\tregisterProvider: registerProvider,\r\n\t\tunregisterProvider: unregisterProvider\r\n\t};\r\n});\r\n\r\nmodule.exports = StateService;\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/state.js\n// module id = 33\n// module chunks = 0","var utils = require(\"../utils/utils\");\r\nvar domHelpers = require(\"../utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tvar _dhx_msg_cfg = null;\r\n\r\n\tfunction callback(config, result) {\r\n\t\tvar usercall = config.callback;\r\n\t\tmodalBox.hide(config.box);\r\n\r\n\t\t_dhx_msg_cfg = config.box = null;\r\n\t\tif (usercall)\r\n\t\t\tusercall(result);\r\n\t}\r\n\r\n\tfunction modal_key(e) {\r\n\t\tif (_dhx_msg_cfg) {\r\n\t\t\te = e || event;\r\n\t\t\tvar code = e.which || event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (messageBox.keyboard) {\r\n\t\t\t\tif (code == 13 || code == 32) {\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"gantt_popup_button\") > -1 && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27) {\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preventDefault) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\treturn !(e.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.event(document, \"keydown\", modal_key, true);\r\n\r\n\tfunction modality(mode) {\r\n\t\tif (!modality.cover) {\r\n\t\t\tmodality.cover = document.createElement(\"DIV\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tmodality.cover.onkeydown = modal_key;\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\t\tvar height = document.body.scrollHeight;\r\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\r\n\t}\r\n\r\n\tfunction button(text, className, result) {\r\n\t\tvar buttonAriaAttrs = gantt._waiAria.messageButtonAttrString(text);\r\n\t\tvar name = className.toLowerCase().replace(/ /g, \"_\");\r\n\t\tvar button_css = \"gantt_\" + name + \"_button\" + \" dhtmlx_\" + name + \"_button\"; // dhtmlx_ok_button, dhtmlx_click_me_button\r\n\t\treturn \"<div \" + buttonAriaAttrs + \" class='gantt_popup_button dhtmlx_popup_button \" + button_css + \"' result='\" + result + \"' ><div>\" + text + \"</div></div>\";\r\n\t}\r\n\r\n\tfunction info(text) {\r\n\t\tif (!messageBox.area) {\r\n\t\t\tmessageBox.area = document.createElement(\"DIV\");\r\n\t\t\tmessageBox.area.className = \"gantt_message_area dhtmlx_message_area\";\r\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\r\n\t\t\tdocument.body.appendChild(messageBox.area);\r\n\t\t}\r\n\r\n\t\tmessageBox.hide(text.id);\r\n\t\tvar message = document.createElement(\"DIV\");\r\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\r\n\t\tmessage.className = \"gantt-info dhtmlx-info gantt-\" + text.type + \" dhtmlx-\" + text.type;\r\n\t\tmessage.onclick = function () {\r\n\t\t\tmessageBox.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t};\r\n\r\n\t\tgantt._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\r\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\r\n\t\telse\r\n\t\t\tmessageBox.area.appendChild(message);\r\n\r\n\t\tif (text.expire > 0)\r\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\r\n\t\t\t\tmessageBox.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tmessageBox.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\r\n\tfunction getFirstDefined() {\r\n\t\tvar values = [].slice.apply(arguments, [0]);\r\n\r\n\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i]) {\r\n\t\t\t\treturn values[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _boxStructure(config, ok, cancel) {\r\n\t\tvar box = document.createElement(\"DIV\");\r\n\r\n\t\tvar locale = gantt.locale;\r\n\r\n\t\tvar contentId = utils.uid();\r\n\t\tgantt._waiAria.messageModalAttr(box, contentId);\r\n\r\n\r\n\t\tbox.className = \" gantt_modal_box dhtmlx_modal_box gantt-\" + config.type + \" dhtmlx-\" + config.type;\r\n\t\tbox.setAttribute(\"dhxbox\", 1);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title)\r\n\t\t\tinner += '<div class=\"gantt_popup_title dhtmlx_popup_title\">' + config.title + '</div>';\r\n\t\tinner += '<div class=\"gantt_popup_text dhtmlx_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"gantt_popup_controls dhtmlx_popup_controls\">';\r\n\t\tif (ok)\r\n\t\t\tinner += button(getFirstDefined(config.ok, gantt.locale.labels.message_ok, \"OK\"), \"ok\", true);\r\n\t\tif (cancel)\r\n\t\t\tinner += button(getFirstDefined(config.cancel, gantt.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\r\n\r\n\t\tif (config.buttons) {\r\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\r\n\t\t\t\tvar btn = config.buttons[i];\r\n\t\t\t\tif (typeof btn == \"object\") {\r\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\r\n\t\t\t\t\tvar label = btn.label;\r\n\t\t\t\t\tvar css = btn.css || (\"gantt_\" + btn.label.toLowerCase() + \"_button dhtmlx_\" + btn.label.toLowerCase() + \"_button\");\r\n\t\t\t\t\tvar value = btn.value || i;\r\n\t\t\t\t\tinner += button(label, css, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinner += button(btn, btn, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content) {\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\")\r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tbox.onclick = function (e) {\r\n\t\t\te = e || event;\r\n\t\t\tvar source = e.target || e.srcElement;\r\n\t\t\tif (!source.className) source = source.parentNode;\r\n\t\t\tif (source.className.split(\" \")[0] == \"gantt_popup_button\") {\r\n\t\t\t\tvar result = source.getAttribute(\"result\");\r\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconfig.box = box;\r\n\t\tif (ok || cancel)\r\n\t\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction _createBox(config, ok, cancel) {\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y + 'px';\r\n\t\tbox.style.left = x + 'px';\r\n\t\t//necessary for IE only\r\n\t\tbox.onkeydown = modal_key;\r\n\r\n\t\tmodalBox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tmodalBox.hide(box);\r\n\r\n\t\tgantt.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config) {\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\r\n\tfunction confirmPopup(config) {\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\r\n\tfunction boxPopup(config) {\r\n\t\treturn _createBox(config);\r\n\t}\r\n\r\n\tfunction box_params(text, type, callback) {\r\n\t\tif (typeof text != \"object\") {\r\n\t\t\tif (typeof type == \"function\") {\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text: text, type: type, callback: callback};\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction params(text, type, expire, id) {\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text: text, type: type, expire: expire, id: id};\r\n\t\ttext.id = text.id || utils.uid();\r\n\t\ttext.expire = text.expire || messageBox.expire;\r\n\t\treturn text;\r\n\t}\r\n\r\n\tvar alertBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tvar confirmBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tvar modalBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tmodalBox.hide = function (node) {\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(\"dhxbox\"))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\r\n\t\t\tgantt.callEvent(\"onAfterMessagePopup\", [node]);\r\n\t\t}\r\n\t};\r\n\r\n\tvar domHelpers = require(\"../utils/dom_helpers\");\r\n\r\n\tmodalBox.focus = function (node) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\r\n\t\t\tif (focusable.length) {\r\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar messageBox = function (text, type, expire, id) {\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype) {\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tmessageBox.seed = (new Date()).valueOf();\r\n\tmessageBox.uid = utils.uid;\r\n\tmessageBox.expire = 4000;\r\n\tmessageBox.keyboard = true;\r\n\tmessageBox.position = \"top\";\r\n\tmessageBox.pull = {};\r\n\tmessageBox.timers = {};\r\n\r\n\tmessageBox.hideAll = function () {\r\n\t\tfor (var key in messageBox.pull)\r\n\t\t\tmessageBox.hide(key);\r\n\t};\r\n\tmessageBox.hide = function (id) {\r\n\t\tvar obj = messageBox.pull[id];\r\n\t\tif (obj && obj.parentNode) {\r\n\t\t\twindow.setTimeout(function () {\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t}, 2000);\r\n\t\t\tobj.className += \" hidden\";\r\n\r\n\t\t\tif (messageBox.timers[id])\r\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\r\n\t\t\tdelete messageBox.pull[id];\r\n\t\t}\r\n\t};\r\n\r\n\tvar popups = [];\r\n\tgantt.attachEvent(\"onMessagePopup\", function(box){\r\n\t\tpopups.push(box);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterMessagePopup\", function(box){\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i] === box){\r\n\t\t\t\tpopups.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tif(modality.cover && modality.cover.parentNode){\r\n\t\t\tmodality.cover.parentNode.removeChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i].parentNode){\r\n\t\t\t\tpopups[i].parentNode.removeChild(popups[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpopups = null;\r\n\r\n\t\tif(messageBox.area && messageBox.area.parentNode){\r\n\t\t\tmessageBox.area.parentNode.removeChild(messageBox.area);\r\n\t\t}\r\n\t\tmessageBox = null;\r\n\t});\r\n\r\n\treturn {\r\n\t\talert: alertBox,\r\n\t\tconfirm: confirmBox,\r\n\t\tmessage: messageBox,\r\n\t\tmodalbox: modalBox\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/message.js\n// module id = 34\n// module chunks = 0","var uiFactory = require(\"./ui_factory\"),\r\n\tmouseEvents = require(\"./mouse\"),\r\n\tcreateLayers = require(\"./gantt_layers\"),\r\n\tCell = require(\"./layout/cell\"),\r\n\tLayout = require(\"./layout/layout\"),\r\n\tViewLayout = require(\"./layout/view_layout\"),\r\n\tViewCell = require(\"./layout/view_cell\"),\r\n\tResizer = require(\"./layout/resizer_cell\"),\r\n\tScrollbar = require(\"./layout/scrollbar_cell\"),\r\n\tTimeline = require(\"./timeline/timeline\"),\r\n\tGrid = require(\"./grid/grid\"),\r\n\tResourceGrid = require(\"./grid/resource_grid\"),\r\n\tResourceTimeline = require(\"./timeline/resource_timeline\");\r\n\r\nvar renderTaskBar = require(\"./render/task_bar_render\"),\r\n\trenderTaskBg = require(\"./render/task_bg_render\"),\r\n\trenderLink = require(\"./render/link_render\"),\r\n\tgridRenderer = require(\"./render/task_grid_line_render\");\r\n\r\nvar mainGridInitializer = require(\"./grid/main_grid_initializer\");\r\nvar mainTimelineInitializer = require(\"./timeline/main_timeline_initializer\");\r\nvar mainLayoutInitializer = require(\"./main_layout_initializer\");\r\n\r\nfunction initUI(gantt){\r\n\tfunction inheritGridConfig(id){\r\n\t\treturn {\r\n\t\t\t//width: gantt.config.grid_width\r\n\t\t};\r\n\t}\r\n\r\n\tfunction attachInitializer(view, initializer){\r\n\t\tvar ext = initializer(gantt);\r\n\t\tif(ext.onCreated)\r\n\t\t\text.onCreated(view);\r\n\t\tview.attachEvent(\"onReady\", function(){\r\n\t\t\tif(ext.onInitialized)\r\n\t\t\t\text.onInitialized(view);\r\n\t\t});\r\n\t\tview.attachEvent(\"onDestroy\", function(){\r\n\t\t\tif(ext.onDestroyed)\r\n\t\t\t\text.onDestroyed(view);\r\n\t\t});\r\n\t}\r\n\r\n\tvar factory = uiFactory.createFactory(gantt);\r\n\tfactory.registerView(\"cell\", Cell);\r\n\tfactory.registerView(\"resizer\", Resizer);\r\n\tfactory.registerView(\"scrollbar\", Scrollbar);\r\n\tfactory.registerView(\"layout\", Layout, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"main\"){\r\n\t\t\tattachInitializer(view, mainLayoutInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"viewcell\", ViewCell);\r\n\tfactory.registerView(\"multiview\", ViewLayout);\r\n\tfactory.registerView(\"timeline\", Timeline, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"timeline\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainTimelineInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"grid\", Grid, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"grid\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainGridInitializer);\r\n\t\t}\r\n\t});\r\n\r\n\tfactory.registerView(\"resourceGrid\", ResourceGrid);\r\n\tfactory.registerView(\"resourceTimeline\", ResourceTimeline);\r\n\r\n\tvar layersEngine = createLayers(gantt);\r\n\r\n\treturn {\r\n\t\tfactory:factory,\r\n\t\tmouseEvents: mouseEvents.init(gantt),\r\n\t\tlayersApi: layersEngine.init(),\r\n\t\trender:{\r\n\t\t\tgridLine: gridRenderer(gantt),\r\n\t\t\ttaskBg: renderTaskBg(gantt),\r\n\t\t\ttaskBar: renderTaskBar(gantt),\r\n\t\t\tlink: renderLink(gantt)\r\n\t\t},\r\n\t\tlayersService: {\r\n\t\t\tgetDataRender: function(name){\r\n\t\t\t\treturn layersEngine.getDataRender(name, gantt);\r\n\t\t\t},\r\n\t\t\tcreateDataRender: function(config){\r\n\t\t\t\treturn layersEngine.createDataRender(config, gantt);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: initUI\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/index.js\n// module id = 35\n// module chunks = 0","var utils = require(\"../../utils/utils\"),\r\n\tconfigurable = require(\"./configurable\");\r\n\r\nvar uiFactory = function createFactory(gantt){\r\n\tvar views = {};\r\n\r\n\tfunction ui(cell, parentView) {\r\n\t\tvar content;\r\n\t\tvar view = \"cell\";\r\n\t\tif (cell.view){\r\n\t\t\tview = \"viewcell\";\r\n\t\t}else if (cell.resizer) {\r\n\t\t\tview = \"resizer\";\r\n\t\t}\r\n\t\telse if (cell.rows || cell.cols) {\r\n\t\t\tview = \"layout\";\r\n\t\t}\r\n\t\telse if (cell.views) {\r\n\t\t\tview = \"multiview\";\r\n\t\t}\r\n\r\n\t\tcontent = createView.call(this, view, null, cell, parentView);\r\n\t\treturn content;\r\n\t}\r\n\t\r\n\tvar createdViews = {};\r\n\r\n\tfunction createView(name, parent, config, parentView) {\r\n\t\tvar creator = views[name];\r\n\r\n\t\tif(!creator || !creator.create)\r\n\t\t\treturn false;\r\n\r\n\t\tif(name == \"resizer\" && !config.mode){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.mode = \"x\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.mode = \"y\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(name == \"viewcell\" && config.view == \"scrollbar\" && !config.scroll){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.scroll = \"y\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.scroll = \"x\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar config = utils.copy(config);\r\n\r\n\t\tif(!config.id && !createdViews[config.view]){\r\n\t\t\tconfig.id = config.view;\r\n\t\t}\r\n\r\n\t\tif(config.id && !config.css){\r\n\t\t\tconfig.css = config.id+\"_cell\";\r\n\t\t}\r\n\r\n\t\tvar view = new creator.create(parent, config, this, gantt);\r\n\r\n\t\tif(creator.configure){\r\n\t\t\tcreator.configure(view);\r\n\t\t}\r\n\r\n\t\tconfigurable(view, parentView);\r\n\t\tif(!view.$id){\r\n\t\t\tview.$id = config.id || gantt.uid();\r\n\t\t}\r\n\r\n\t\tif(!view.$parent && typeof parent == \"object\"){\r\n\t\t\tview.$parent = parent;\r\n\t\t}\r\n\t\tif(!view.$config){\r\n\t\t\tview.$config = config;\r\n\t\t}\r\n\r\n\t\tif(createdViews[view.$id]){\r\n\t\t\tview.$id = gantt.uid();\r\n\t\t}\r\n\r\n\t\tcreatedViews[view.$id] = view;\r\n\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction reset(){\r\n\t\tcreatedViews = {};\r\n\t}\r\n\r\n\tfunction register(name, viewConstructor, configure){\r\n\t\tviews[name] = {create: viewConstructor, configure: configure};\r\n\t}\r\n\r\n\tfunction getView(id){\r\n\t\treturn createdViews[id];\r\n\t}\r\n\r\n\tvar factory = {\r\n\t\tinitUI:ui,\r\n\t\treset: reset,\r\n\t\tregisterView: register,\r\n\t\tcreateView: createView,\r\n\t\tgetView: getView\r\n\t};\r\n\r\n\treturn factory;\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateFactory: uiFactory\r\n};\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/ui_factory.js\n// module id = 36\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nfunction ViewSettings(config){\r\n\tutils.mixin(this, config, true);\r\n}\r\n\r\n\r\nfunction extendSettings (store, parentSettings){\r\n\tvar own = this.$config[store];\r\n\r\n\tif(own){\r\n\t\tif(own instanceof ViewSettings){\r\n\t\t\treturn own;\r\n\t\t}else{\r\n\t\t\tViewSettings.prototype = parentSettings;\r\n\t\t\tthis.$config[store] = new ViewSettings(own);\r\n\t\t\treturn this.$config[store];\r\n\t\t}\r\n\t}else{\r\n\t\treturn parentSettings;\r\n\t}\r\n}\r\n\r\nvar configurable = function(parentView){\r\n\tvar parentConfig,\r\n\t\tparentTemplates;\r\n\r\n\treturn {\r\n\t\t$getConfig: function(){\r\n\t\t\tif(!parentConfig){\r\n\t\t\t\tparentConfig = parentView ? parentView.$getConfig() : this.$gantt.config;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"config\", parentConfig);\r\n\t\t},\r\n\t\t$getTemplates: function(){\r\n\t\t\tif(!parentTemplates){\r\n\t\t\t\tparentTemplates = parentView ? parentView.$getTemplates() : this.$gantt.templates;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"templates\", parentTemplates);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = function(obj, parent){\r\n\tutils.mixin(obj, configurable(parent));\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/configurable.js\n// module id = 37\n// module chunks = 0","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nvar createMouseHandler = (function(domHelpers) {\r\n\treturn function (gantt) {\r\n\t\tvar eventHandlers = {\r\n\t\t\t\"click\": {},\r\n\t\t\t\"doubleclick\": {},\r\n\t\t\t\"contextMenu\": {}\r\n\t\t};\r\n\r\n\t\tfunction addEventTarget(event, className, handler, root) {\r\n\t\t\tif(!eventHandlers[event][className]){\r\n\t\t\t\teventHandlers[event][className] = [];\r\n\t\t\t}\r\n\r\n\t\t\teventHandlers[event][className].push({\r\n\t\t\t\thandler: handler,\r\n\t\t\t\troot: root\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction callHandler(eventName, className, root, args) {\r\n\t\t\tvar handlers = eventHandlers[eventName][className];\r\n\t\t\tif(handlers){\r\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\t\tif(!(root || handlers[i].root) || handlers[i].root === root){\r\n\t\t\t\t\t\thandlers[i].handler.apply(this, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.click);\r\n\t\t\tvar res = true;\r\n\t\t\tif (id !== null) {\r\n\t\t\t\tres = !gantt.checkEvent(\"onTaskClick\") || gantt.callEvent(\"onTaskClick\", [id, e]);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.callEvent(\"onEmptyClick\", [e]);\r\n\t\t\t}\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id && gantt.getTask(id) && gantt.config.select_task && !gantt.config.multiselect) {\r\n\t\t\t\t\tgantt.selectTask(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onContextMenu(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target || e.srcElement,\r\n\t\t\t\ttaskId = gantt.locate(src),\r\n\t\t\t\tlinkId = gantt.locate(src, gantt.config.link_attribute);\r\n\r\n\t\t\tvar res = !gantt.checkEvent(\"onContextMenu\") || gantt.callEvent(\"onContextMenu\", [taskId, linkId, e]);\r\n\t\t\tif (!res) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\telse\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction findEventHandlers(e, hash){\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar handlers = [];\r\n\t\t\twhile (trg) {\r\n\t\t\t\tvar css = domHelpers.getClassName(trg);\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tcss = css.split(\" \");\r\n\t\t\t\t\tfor (var i = 0; i < css.length; i++) {\r\n\t\t\t\t\t\tif (!css[i]) continue;\r\n\t\t\t\t\t\tif (hash[css[i]]) {\r\n\t\t\t\t\t\t\tvar delegateHandlers = hash[css[i]];\r\n\r\n\t\t\t\t\t\t\tfor(var h = 0; h < delegateHandlers.length; h++){\r\n\t\t\t\t\t\t\t\tif(delegateHandlers[h].root){\r\n\t\t\t\t\t\t\t\t\tif(!domHelpers.isChildOf(trg, delegateHandlers[h].root)){\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\thandlers.push(delegateHandlers[h].handler);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttrg = trg.parentNode;\r\n\t\t\t}\r\n\t\t\treturn handlers;\r\n\t\t}\r\n\r\n\t\tfunction callEventHandlers(handlers, e, id){\r\n\t\t\tvar res = true;\r\n\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handlerResult =  handlers[i].call(gantt, e, id, e.target || e.srcElement);\r\n\t\t\t\tres = res && !(typeof handlerResult != \"undefined\" && handlerResult !== true);\r\n\t\t\t}\r\n\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\r\n\t\tfunction onDoubleClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.doubleclick);\r\n\t\t\tvar res = !gantt.checkEvent(\"onTaskDblClick\") || gantt.callEvent(\"onTaskDblClick\", [id, e]);\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id !== null && gantt.getTask(id)) {\r\n\t\t\t\t\tif (res && gantt.config.details_on_dblclick) {\r\n\t\t\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(e) {\r\n\t\t\tif (gantt.checkEvent(\"onMouseMove\")) {\r\n\t\t\t\tvar id = gantt.locate(e);\r\n\t\t\t\tgantt._last_move_event = e;\r\n\t\t\t\tgantt.callEvent(\"onMouseMove\", [id, e]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction detach(eventName, className, handler, root) {\r\n\t\t\tif (eventHandlers[eventName]) {\r\n\t\t\t\tfor(var i = 0; i < eventHandlers[eventName].length; i++){\r\n\t\t\t\t\tif(eventHandlers[eventName][i].root == root){\r\n\t\t\t\t\t\teventHandlers[eventName].splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar domEvents = gantt._createDomEventScope();\r\n\r\n\t\tfunction reset(node){\r\n\r\n\t\t\tdomEvents.detachAll();\r\n\r\n\t\t\tif(node){\r\n\t\t\t\tdomEvents.attach(node, \"click\", onClick);\r\n\t\t\t\tdomEvents.attach(node, \"dblclick\", onDoubleClick);\r\n\t\t\t\tdomEvents.attach(node, \"mousemove\", onMouseMove);\r\n\t\t\t\tdomEvents.attach(node, \"contextmenu\", onContextMenu);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn {\r\n\t\t\treset: reset,\r\n\t\t\tglobal: function(event, classname, handler){\r\n\t\t\t\taddEventTarget(event, classname, handler, null);\r\n\t\t\t},\r\n\t\t\tdelegate: addEventTarget,\r\n\t\t\tdetach: detach,\r\n\t\t\tcallHandler: callHandler,\r\n\t\t\tonDoubleClick: onDoubleClick,\r\n\t\t\tonMouseMove: onMouseMove,\r\n\t\t\tonContextMenu: onContextMenu,\r\n\t\t\tonClick: onClick,\r\n\t\t\tdestructor: function(){\r\n\t\t\t\treset();\r\n\t\t\t\teventHandlers = null;\r\n\t\t\t\tdomEvents = null;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t};\r\n\r\n})(domHelpers);\r\n\r\n\r\nmodule.exports = {\r\n\tinit:createMouseHandler\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/mouse.js\n// module id = 38\n// module chunks = 0","var createLayerFactory = require(\"./render/layer_engine\");\r\n\r\nvar createLayerEngine = function(gantt){\r\n\tvar factory = createLayerFactory(gantt);\r\n\treturn {\r\n\t\tgetDataRender: function(name){\r\n\t\t\treturn gantt.$services.getService(\"layer:\" + name) || null;\r\n\t\t},\r\n\t\tcreateDataRender: function(config){\r\n\t\t\tvar name = config.name,\r\n\t\t\t\tdefaultContainer = config.defaultContainer,\r\n\t\t\t\tpreviusSiblingContainer = config.defaultContainerSibling;\r\n\r\n\t\t\tvar layers = factory.createGroup(\r\n\t\t\t\tdefaultContainer,\r\n\t\t\t\tpreviusSiblingContainer,\r\n\t\t\t\tfunction(itemId, item){\r\n\t\t\t\t\tif(layers.filters){\r\n\t\t\t\t\t\tfor(var i = 0; i < layers.filters.length; i++){\r\n\t\t\t\t\t\t\tif(layers.filters[i](itemId, item) === false){\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tgantt.$services.setService(\"layer:\" + name, function(){\r\n\t\t\t\treturn layers;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function () {\r\n\t\t\t\tlayers.addLayer();// init layers on start\r\n\t\t\t});\r\n\r\n\t\t\treturn layers;\r\n\t\t},\r\n\t\tinit: function(){\r\n\t\t\tvar taskLayers = this.createDataRender({\r\n\t\t\t\tname: \"task\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefaultContainerSibling: function(){\r\n\t\t\t\t\tif(gantt.$task_links){\r\n\t\t\t\t\t\treturn gantt.$task_links;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_links;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function(item){\r\n\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\tvar linkLayers = this.createDataRender({\r\n\t\t\t\tname: \"link\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\treturn {\r\n\t\t\t\taddTaskLayer: function(config){\r\n\t\t\t\t\treturn taskLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/*getTaskLayer: function(id){\r\n\t\t\t\t\treturn taskLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\r\n\t\t\t\t_getTaskLayers: function(){\r\n\t\t\t\t\treturn taskLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveTaskLayer: function(id){\r\n\t\t\t\t\ttaskLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachTaskLayer: function(code){\r\n\t\t\t\t\ttaskLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearTaskLayers: function(){\r\n\t\t\t\t\ttaskLayers.clear();\r\n\t\t\t\t},\r\n\t\t\t\taddLinkLayer: function(config){\r\n\t\t\t\t\treturn linkLayers.addLayer(config);\r\n\t\t\t\t},\r\n\t\t\t\t/*getLinkLayer: function(id){\r\n\t\t\t\t\treturn linkLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\t\t\t\t_getLinkLayers: function(){\r\n\t\t\t\t\treturn linkLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveLinkLayer: function(id){\r\n\t\t\t\t\tlinkLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachLinkLayer: function(code){\r\n\t\t\t\t\tlinkLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearLinkLayers: function(){\r\n\t\t\t\t\tlinkLayers.clear();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = createLayerEngine;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/gantt_layers.js\n// module id = 39\n// module chunks = 0","var renderFactoryProvider = require(\"./render_factory\");\r\nvar utils = require(\"../../../utils/utils\");\r\n\r\nvar layerFactory = function(gantt){\r\n\r\n\tvar renderFactory = renderFactoryProvider(gantt);\r\n\treturn {\r\n\tcreateGroup: function (get_container, rel_root, defaultFilters) {\r\n\r\n\t\tvar renderGroup = {\r\n\t\t\ttempCollection: [],\r\n\t\t\trenderers: {},\r\n\t\t\tcontainer: get_container,\r\n\t\t\tfilters: [],\r\n\t\t\tgetLayers: function () {\r\n\t\t\t\tvar res = [];\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tres.push(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t},\r\n\t\t\tgetLayer: function (id) {\r\n\t\t\t\treturn this.renderers[id];\r\n\t\t\t},\r\n\t\t\t_add: function (layer) {\r\n\t\t\t\tif (layer) {\r\n\t\t\t\t\tlayer.id = layer.id || utils.uid();\r\n\t\t\t\t\tthis.tempCollection.push(layer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this.container()) return;\r\n\r\n\t\t\t\tvar container = this.container();\r\n\r\n\t\t\t\tvar pending = this.tempCollection;\r\n\t\t\t\tfor (var i = 0; i < pending.length; i++) {\r\n\t\t\t\t\tlayer = pending[i];\r\n\r\n\r\n\t\t\t\t\tvar node = layer.container,\r\n\t\t\t\t\t\tid = layer.id,\r\n\t\t\t\t\t\ttopmost = layer.topmost;\r\n\t\t\t\t\tif (!node.parentNode) {\r\n\t\t\t\t\t\t//insert on top or below the tasks\r\n\t\t\t\t\t\tif (topmost) {\r\n\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar rel = rel_root ? rel_root() : container.firstChild;\r\n\t\t\t\t\t\t\tif (rel)\r\n\t\t\t\t\t\t\t\tcontainer.insertBefore(node, rel);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renderers[id] = renderFactory.getRenderer(\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tlayer,\r\n\t\t\t\t\t\tnode\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.tempCollection.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddLayer: function (config) {\r\n\t\t\t\t//config = prepareConfig(config);\r\n\t\t\t\tif(config){\r\n\t\t\t\t\tif(typeof config == \"function\"){\r\n\t\t\t\t\t\tconfig = {renderer: config};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.filter === undefined){\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(defaultFilters || []);\r\n\t\t\t\t\t}else if(config.filter instanceof Array){\r\n\t\t\t\t\t\tconfig.filter.push(defaultFilters);\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(config.filter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!config.container){\r\n\t\t\t\t\t\tconfig.container = document.createElement(\"div\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._add(config);\r\n\t\t\t\treturn (config ? config.id : undefined);\r\n\t\t\t},\r\n\t\t\teachLayer: function(code){\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tcode(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveLayer: function (id) {\r\n\t\t\t\tif(!this.renderers[id])\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.renderers[id].destructor();\r\n\t\t\t\tdelete this.renderers[id];\r\n\t\t\t},\r\n\t\t\tclear: function () {\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tthis.renderers[i].destructor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.renderers = {};\r\n\t\t\t}//,\r\n\t\t\t//prepareConfig: prepareConfig\r\n\t\t};\r\n\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\trenderGroup.clear();\r\n\t\t\trenderGroup = null;\r\n\t\t});\r\n\r\n\t\treturn renderGroup;\r\n\t}\r\n};};\r\n\r\n\r\nfunction mergeFilters(filter_methods){\r\n\tif(!(filter_methods instanceof Array)){\r\n\t\tfilter_methods = Array.prototype.slice.call(arguments, 0);\r\n\t}\r\n\r\n\treturn function(obj){\r\n\t\tvar res = true;\r\n\t\tfor(var i = 0, len = filter_methods.length; i < len; i++){\r\n\t\t\tvar filter_method = filter_methods[i];\r\n\t\t\tif(filter_method){\r\n\t\t\t\tres = res && (filter_method(obj.id, obj) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t};\r\n}\r\n\r\n\r\nmodule.exports = layerFactory;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/render/layer_engine.js\n// module id = 40\n// module chunks = 0","var rendererFactory = function(gantt){\r\n\tvar services = gantt.$services;\r\n\r\n\t//hash of dom elements is needed to redraw single bar/link\r\n\tvar task_area_pulls = {},\r\n\t\ttask_area_renderers = {};\r\n\r\n\tfunction getRenderer(id, layer, node) {\r\n\r\n\t\tif (task_area_renderers[id])\r\n\t\t\treturn task_area_renderers[id];\r\n\r\n\t\tif (!layer.renderer)\r\n\t\t\tgantt.assert(false, \"Invalid renderer call\");\r\n\r\n\t\tvar renderOne = function(item){\r\n\t\t\treturn layer.renderer.call(this, item, layer.host);\r\n\t\t} ;\r\n\r\n\t\tvar filter = layer.filter;\r\n\r\n\t\tif (node)\r\n\t\t\tnode.setAttribute(services.config().layer_attribute, true);\r\n\r\n\t\ttask_area_renderers[id] = {\r\n\t\t\trender_item: function (item, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tif (filter) {\r\n\t\t\t\t\tif (!filter(item)) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dom = renderOne.call(gantt, item);\r\n\t\t\t\tthis.append(item, dom, container);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclear: function (container) {\r\n\t\t\t\tthis.rendered = task_area_pulls[id] = {};\r\n\t\t\t\tthis.clear_container(container);\r\n\t\t\t},\r\n\t\t\tclear_container: function (container) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (container)\r\n\t\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t},\r\n\t\t\trender_items: function (items, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\t\t\t\tthis.clear(container);\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tthis.render_item(items[i], buffer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer.appendChild(buffer);\r\n\t\t\t},\r\n\t\t\tappend: function (item, node, container) {\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tif (this.rendered[item.id]) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.rendered[item.id] && this.rendered[item.id].parentNode) {\r\n\t\t\t\t\tthis.replace_item(item.id, node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item.id] = node;\r\n\r\n\t\t\t},\r\n\t\t\treplace_item: function (item_id, newNode) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.replaceChild(newNode, item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item_id] = newNode;\r\n\t\t\t},\r\n\t\t\tremove_item: function (item_id) {\r\n\t\t\t\tthis.hide(item_id);\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\thide: function (item_id) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.removeChild(item);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trestore: function (item) {\r\n\t\t\t\tvar dom = this.rendered[item.id];\r\n\t\t\t\tif (dom) {\r\n\t\t\t\t\tif (!dom.parentNode) {\r\n\t\t\t\t\t\tthis.append(item, dom, node);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render_item(item, node);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchange_id: function (oldid, newid) {\r\n\t\t\t\tthis.rendered[newid] = this.rendered[oldid];\r\n\t\t\t\tdelete this.rendered[oldid];\r\n\t\t\t},\r\n\t\t\trendered: task_area_pulls[id],\r\n\t\t\tnode: node,\r\n\t\t\tdestructor: function () {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tdelete task_area_renderers[id];\r\n\t\t\t\tdelete task_area_pulls[id];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn task_area_renderers[id];\r\n\t}\r\n\r\n\r\n\tfunction clearRenderers() {\r\n\t\tfor (var i in task_area_renderers) {\r\n\t\t\tgetRenderer(i).destructor();\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetRenderer: getRenderer,\r\n\t\tclearRenderers: clearRenderers\r\n\t};\r\n\r\n};\r\n\r\nmodule.exports = rendererFactory;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/render/render_factory.js\n// module id = 41\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tLayout = require(\"./layout\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewLayout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewLayout, _super);\r\n\tfunction ViewLayout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tfor (var i = 0; i < _this.$cells.length; i++) {\r\n\t\t\t_this.$cells[i].$config.hidden = (i !== 0);\r\n\t\t}\r\n\t\t_this.$cell = _this.$cells[0];\r\n\t\t_this.$name = \"viewLayout\";\r\n\r\n\t\treturn _this;\r\n\t}\r\n\tViewLayout.prototype.cell = function (id) {\r\n\t\tvar cell = _super.prototype.cell.call(this, id);\r\n\t\tif (!cell.$view) {\r\n\t\t\tthis.$fill(null, this);\r\n\t\t}\r\n\t\treturn cell;\r\n\t};\r\n\tViewLayout.prototype.moveView = function (view) {\r\n\t\tvar body = this.$view;\r\n\t\tif (this.$cell) {\r\n\t\t\tthis.$cell.$config.hidden = true;\r\n\t\t\tbody.removeChild(this.$cell.$view);\r\n\t\t}\r\n\t\tthis.$cell = view;\r\n\t\tbody.appendChild(view.$view);\r\n\t};\r\n\tViewLayout.prototype.setSize = function (x, y) {\r\n\t\tCell.prototype.setSize.call(this, x, y);\r\n\t};\r\n\r\n\tViewLayout.prototype.setContentSize = function(){\r\n\t\tvar size = this.$lastSize;\r\n\t\tthis.$cell.setSize(size.contentX, size.contentY);\r\n\t};\r\n\r\n\tViewLayout.prototype.getSize = function () {\r\n\t\tvar sizes = _super.prototype.getSize.call(this);\r\n\t\tif (this.$cell) {\r\n\t\t\tvar cellSize = this.$cell.getSize();\r\n\t\t\tif (this.$config.byMaxSize) {\r\n\t\t\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\t\t\tvar otherCell = this.$cells[i].getSize();\r\n\t\t\t\t\tfor (var cell in cellSize) {\r\n\t\t\t\t\t\tcellSize[cell] = Math.max(cellSize[cell], otherCell[cell]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var size in sizes) {\r\n\t\t\t\tsizes[size] = sizes[size] || cellSize[size];\r\n\t\t\t}\r\n\t\t\tsizes.gravity = Math.max(sizes.gravity, cellSize.gravity);\r\n\t\t}\r\n\t\treturn sizes;\r\n\t};\r\n\treturn ViewLayout;\r\n}(Layout));\r\n\r\nmodule.exports = ViewLayout;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/layout/view_layout.js\n// module id = 42\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewCell, _super);\r\n\tfunction ViewCell(parent, config, factory) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(config.view){\r\n\t\t\tif(config.id){\r\n\t\t\t\t// pass id to the nested view\r\n\t\t\t\tthis.$id = utils.uid();\r\n\t\t\t}\r\n\t\t\tvar childConfig = utils.copy(config);\r\n\t\t\tdelete childConfig.config;\r\n\t\t\tdelete childConfig.templates;\r\n\r\n\t\t\tthis.$content = this.$factory.createView(config.view, this, childConfig, this);\r\n\t\t\tif(!this.$content)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t_this.$name = \"viewCell\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tViewCell.prototype.destructor = function(){\r\n\t\tthis.clear();\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tViewCell.prototype.clear = function(){\r\n\r\n\t\tthis.$initialized = false;\r\n\r\n\t\t// call destructor\r\n\t\tif (this.$content){\r\n\t\t\tvar method = this.$content.unload || this.$content.destructor;\r\n\t\t\tif (method){\r\n\t\t\t\tmethod.call(this.$content);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.clear.call(this);\r\n\r\n\t};\r\n\r\n\tViewCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif(this.$content && this.$content.scrollTo){\r\n\t\t\tthis.$content.scrollTo(left, top);\r\n\t\t}else{\r\n\t\t\t_super.prototype.scrollTo.call(this, left, top);\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype._setContentSize = function(x, y){\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar outerX = x + borders.horizontal;\r\n\t\tvar outerY = y + borders.vertical;\r\n\t\tthis.$config.width = outerX;\r\n\t\tthis.$config.height = outerY;\r\n\t};\r\n\r\n\tViewCell.prototype.setSize = function(x, y){\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (!this.$initialized) {\r\n\t\t\t\tthis.$initialized = true;\r\n\t\t\t\tvar header = this.$view.childNodes[0];\r\n\t\t\t\tvar content = this.$view.childNodes[1];\r\n\t\t\t\tif(!content) content = header;\r\n\r\n\t\t\t\t/*if(this.$content.$config){\r\n\t\t\t\t\tthis.$content.$config.width = this.$lastSize.contentX;\r\n\t\t\t\t\tthis.$content.$config.height = this.$lastSize.contentY;\r\n\t\t\t\t}*/\r\n\t\t\t\tthis.$content.init(content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.setContentSize = function(){\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (this.$initialized) {\r\n\t\t\t\tthis.$content.setSize(this.$lastSize.contentX, this.$lastSize.contentY);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tViewCell.prototype.getContentSize = function(){\r\n\t\tvar size = _super.prototype.getContentSize.call(this);\r\n\r\n\t\tif(this.$content && this.$initialized){\r\n\t\t\tvar childSize = this.$content.getSize();\r\n\t\t\tsize.width = childSize.contentX === undefined ? childSize.width : childSize.contentX;\r\n\t\t\tsize.height = childSize.contentY === undefined ? childSize.height : childSize.contentY;\r\n\t\t}\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tsize.width += borders.horizontal;\r\n\t\tsize.height += borders.vertical;\r\n\r\n\t\treturn size;\r\n\t};\r\n\r\n\treturn ViewCell;\r\n}(Cell));\r\n\r\nmodule.exports = ViewCell;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/layout/view_cell.js\n// module id = 43\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ResizerCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ResizerCell, _super);\r\n\tfunction ResizerCell(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tvar startBackSize, startFrontSize;\r\n\r\n\t\t_this._moveHandler = function (e) {\r\n\t\t\t_this._moveResizer(_this._resizer, e.pageX, e.pageY);\r\n\t\t};\r\n\t\t_this._upHandler = function () {\r\n\t\t\tvar newSizes = _this._getNewSizes();\r\n\t\t\tif(_this.callEvent(\"onResizeEnd\", [startBackSize, startFrontSize, newSizes ? newSizes.back : 0, newSizes ? newSizes.front : 0]) !== false){\r\n\t\t\t\t_this._setSizes();\r\n\t\t\t}\r\n\r\n\t\t\t_this._setBackground(false);\r\n\t\t\t_this._clearResizer();\r\n\t\t\t_this._clearListeneres();\r\n\t\t};\r\n\r\n\t\t_this._clearListeneres = function(){\r\n\t\t\tthis.$domEvents.detach(document, \"mouseup\", _this._upHandler);\r\n\t\t\tthis.$domEvents.detach(document, \"mousemove\", _this._moveHandler);\r\n\t\t\tthis.$domEvents.detach(document, \"mousemove\", _this._startOnMove);\r\n\t\t\tthis.$domEvents.detach(document, \"mouseup\", _this._cancelDND);\r\n\t\t};\r\n\r\n\t\t_this._callStartDNDEvent = function(){\r\n\t\t\tif (this._xMode) {\r\n\t\t\t\tstartBackSize = this._behind.$config.width || this._behind.$view.offsetWidth;\r\n\t\t\t\tstartFrontSize = this._front.$config.width || this._front.$view.offsetWidth;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tstartBackSize = this._behind.$config.height || this._behind.$view.offsetHeight;\r\n\t\t\t\tstartFrontSize = this._front.$config.height || this._front.$view.offsetHeight;\r\n\t\t\t}\r\n\r\n\t\t\tif(_this.callEvent(\"onResizeStart\", [startBackSize, startFrontSize]) === false){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t_this._startDND = function(e){\r\n\t\t\tvar res = this._callStartDNDEvent();\r\n\t\t\tif(res === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar stop = false;\r\n\t\t\tthis._eachGroupItem(function(resizer){\r\n\t\t\t\tresizer._getSiblings();\r\n\t\t\t\tif(resizer._callStartDNDEvent() === false){\r\n\t\t\t\t\tstop = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(stop){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_this._moveHandler(e);\r\n\r\n\t\t\t_this.$domEvents.attach(document, \"mousemove\", _this._moveHandler);\r\n\t\t\t_this.$domEvents.attach(document, \"mouseup\", _this._upHandler);\r\n\t\t};\r\n\r\n\t\t_this._cancelDND = function(){\r\n\t\t\t_this._setBackground(false);\r\n\t\t\t_this._clearResizer();\r\n\t\t\t_this._clearListeneres();\r\n\t\t};\r\n\r\n\t\t_this._startOnMove = function(e){\r\n\t\t\tif(_this._isPosChanged(e)){\r\n\t\t\t\t_this._clearListeneres();\r\n\t\t\t\t_this._startDND(e);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t_this._downHandler = function (e) {\r\n\t\t\t_this._getSiblings();\r\n\r\n\t\t\tif (_this._behind.$config.collapsed || _this._front.$config.collapsed) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_this._setBackground(true);\r\n\t\t\t_this._resizer = _this._setResizer();\r\n\r\n\t\t\t_this._positions = {\r\n\t\t\t\tx: e.pageX,\r\n\t\t\t\ty: e.pageY,\r\n\t\t\t\ttimestamp: Date.now()\r\n\t\t\t};\r\n\r\n\t\t\t_this.$domEvents.attach(document, \"mousemove\", _this._startOnMove);\r\n\t\t\t_this.$domEvents.attach(document, \"mouseup\", _this._cancelDND);\r\n\t\t};\r\n\t\t_this.$name = \"resizer\";\r\n\t\treturn _this;\r\n\t}\r\n\tResizerCell.prototype.init = function () {\r\n\t\tvar _this = this;\r\n\t\t_super.prototype.init.call(this);\r\n\t\tthis._xMode = this.$config.mode === \"x\";\r\n\t\tif (this._xMode && !this.$config.width) {\r\n\t\t\tthis.$config.width = this.$config.minWidth = 1;\r\n\t\t}\r\n\t\telse if (!this._xMode && !this.$config.height) {\r\n\t\t\tthis.$config.height = this.$config.minHeight = 1;\r\n\t\t}\r\n\r\n\t\tthis.$config.margin = -1;\r\n\r\n\t\tthis.$domEvents.attach(this.$view, \"mousedown\", _this._downHandler);\r\n\r\n\t};\r\n\tResizerCell.prototype.$toHTML = function () {\r\n\t\tvar mode = this.$config.mode;\r\n\t\tvar css = this.$config.css || \"\";\r\n\t\treturn \"<div class='gantt_layout_cell gantt_resizer gantt_resizer_\"+mode+\"'><div class='gantt_layout_content gantt_resizer_\" + mode + (css ? (\" \" + css) : \"\") + \"'></div></div>\";\r\n\t};\r\n\r\n\tResizerCell.prototype._clearResizer = function(){\r\n\t\tif(this._resizer){\r\n\t\t\tif(this._resizer.parentNode){\r\n\t\t\t\tthis._resizer.parentNode.removeChild(this._resizer);\r\n\t\t\t}\r\n\t\t\tthis._resizer = null;\r\n\t\t}\r\n\t};\r\n\r\n\tResizerCell.prototype._isPosChanged = function(e){\r\n\t\tif(!this._positions){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(Math.abs(this._positions.x - e.pageX) > 3 || Math.abs(this._positions.y - e.pageY) > 3){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif(Date.now() - this._positions.timestamp > 300){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tResizerCell.prototype._getSiblings = function () {\r\n\t\tvar cells = this.$parent.getCells();\r\n\r\n\t\tif(this.$config.prev){\r\n\t\t\tthis._behind = this.$factory.getView(this.$config.prev);\r\n\t\t}\r\n\t\tif(this.$config.next){\r\n\t\t\tthis._front = this.$factory.getView(this.$config.next);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (this === cells[i]) {\r\n\t\t\t\tif(!this._behind)\r\n\t\t\t\t\tthis._behind = cells[i - 1];\r\n\t\t\t\tif(!this._front)\r\n\t\t\t\t\tthis._front = cells[i + 1];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tResizerCell.prototype._setBackground = function (state) {\r\n\t\tvar classes = \"gantt_resizing\";\r\n\t\tif (!state) {\r\n\t\t\tdomHelpers.removeClassName(this._behind.$view, classes);\r\n\t\t\tdomHelpers.removeClassName(this._front.$view, classes);\r\n\t\t\tdomHelpers.removeClassName(document.body, 'gantt_noselect');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdomHelpers.addClassName(this._behind.$view, classes, true);\r\n\t\tdomHelpers.addClassName(this._front.$view, classes, true);\r\n\t\tdomHelpers.addClassName(document.body, 'gantt_noselect', true);\r\n\t};\r\n\tResizerCell.prototype._setResizer = function () {\r\n\t\tvar resizer = document.createElement(\"div\");\r\n\t\tresizer.className = \"gantt_resizer_stick\";\r\n\t\tthis.$view.appendChild(resizer);\r\n\t\tthis.$view.style.overflow = \"visible\";\r\n\t\tresizer.style.height = this.$view.style.height;\r\n\t\treturn resizer;\r\n\t};\r\n\r\n\tResizerCell.prototype._getDirection = function(x, y){\r\n\t\tvar shift;\r\n\t\tif (this._xMode) {\r\n\t\t\tshift = x - this._positions.x;\r\n\t\t}else{\r\n\t\t\tshift = y - this._positions.y;\r\n\t\t}\r\n\t\treturn shift ? shift < 0 ? -1 : 1 : 0;\r\n\t};\r\n\r\n\tResizerCell.prototype._getResizePosition = function(x, y){\r\n\t\tvar size;\r\n\t\tvar behindSide;\r\n\t\tvar behindMin;\r\n\t\tvar frontSide;\r\n\t\tvar frontMin;\r\n\t\tif (this._xMode) {\r\n\t\t\tsize = x - this._positions.x;\r\n\t\t\tbehindSide = this._behind.$config.width || this._behind.$view.offsetWidth;\r\n\t\t\tfrontSide = this._front.$config.width || this._front.$view.offsetWidth;\r\n\t\t\tbehindMin = this._behind.$config.minWidth;\r\n\t\t\tfrontMin = this._front.$config.minWidth;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsize = y - this._positions.y;\r\n\t\t\tbehindSide = this._behind.$config.height || this._behind.$view.offsetHeight;\r\n\t\t\tfrontSide = this._front.$config.height || this._front.$view.offsetHeight;\r\n\t\t\tbehindMin = this._front.$config.minHeight;\r\n\t\t\tfrontMin = this._front.$config.minHeight;\r\n\t\t}\r\n\t\tvar direction = this._getDirection(x, y);\r\n\t\tvar newBehindSide,\r\n\t\t\tnewFrontSide;\r\n\r\n\t\tif (direction === -1) {\r\n\t\t\tnewFrontSide = frontSide - size;\r\n\t\t\tnewBehindSide = behindSide - Math.abs(size);\r\n\r\n\t\t\tif (frontSide - size > this._front.$config.maxWidth) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (Math.abs(size) >= behindSide) {\r\n\t\t\t\tsize = -Math.abs(behindSide - 2);\r\n\t\t\t}\r\n\t\t\t// if min width\r\n\t\t\tif (behindSide - Math.abs(size) <= behindMin) {\r\n\t\t\t\t//this._resizer.style.background = \"red\";\r\n\t\t\t\tsize = -Math.abs(behindSide - behindMin);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnewFrontSide = frontSide - Math.abs(size);\r\n\t\t\tnewBehindSide = behindSide + size;\r\n\r\n\t\t\tif (behindSide + size > this._behind.$config.maxWidth) {\r\n\t\t\t\tsize = this._behind.$config.maxWidth - behindSide;\r\n\t\t\t\t// return;\r\n\t\t\t}\r\n\t\t\tif (Math.abs(size) >= frontSide) {\r\n\t\t\t\tsize = frontSide - 2;\r\n\t\t\t}\r\n\t\t\t// if min width\r\n\t\t\tif (frontSide - Math.abs(size) <= frontMin) {\r\n\t\t\t\tsize = Math.abs(frontSide - frontMin);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (direction === -1) {\r\n\t\t\tnewFrontSide = frontSide - size;\r\n\t\t\tnewBehindSide = behindSide - Math.abs(size);\r\n\t\t} else {\r\n\t\t\tnewFrontSide = frontSide - Math.abs(size);\r\n\t\t\tnewBehindSide = behindSide + size;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsize: size,\r\n\t\t\tnewFrontSide: newFrontSide,\r\n\t\t\tnewBehindSide: newBehindSide\r\n\t\t};\r\n\t};\r\n\r\n\tResizerCell.prototype._getGroupName = function(){\r\n\t\tthis._getSiblings();\r\n\t\treturn this._front.$config.group || this._behind.$config.group;\r\n\t};\r\n\r\n\tResizerCell.prototype._eachGroupItem = function(callback, master){\r\n\t\tvar layout = this.$factory.getView(\"main\");\r\n\r\n\t\tvar group = this._getGroupName();\r\n\r\n\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\tfor(var i = 0; i < resizers.length; i++) {\r\n\t\t\tif (resizers[i]._getGroupName() == group && resizers[i] != this) {\r\n\t\t\t\tcallback.call(master || this, resizers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tResizerCell.prototype._getGroupResizePosition = function(x, y){\r\n\t\tvar sizes = this._getResizePosition(x, y);\r\n\r\n\t\tif(!this._getGroupName()){\r\n\t\t\treturn sizes;\r\n\t\t}\r\n\r\n\t\tvar positions = [sizes];\r\n\r\n\t\tthis._eachGroupItem(function(resizer){\r\n\t\t\tresizer._getSiblings();\r\n\t\t\tvar pos = utils.copy(this._positions);\r\n\t\t\tif(this._xMode){\r\n\t\t\t\tpos.x += (resizer._behind.$config.width - this._behind.$config.width);\r\n\t\t\t}else{\r\n\t\t\t\tpos.y += (resizer._behind.$config.height - this._behind.$config.height);\r\n\t\t\t}\r\n\t\t\tresizer._positions = pos;\r\n\t\t\tpositions.push(resizer._getResizePosition(x, y));\r\n\t\t});\r\n\r\n\t\tvar minMax;\r\n\t\tfor(var i =0; i < positions.length; i++){\r\n\t\t\tif(!positions[i]) return;\r\n\t\t\tif(minMax === undefined){\r\n\t\t\t\tminMax = positions[i];\r\n\t\t\t}else if(positions[i].newBehindSide > minMax.newBehindSide){\r\n\t\t\t\tminMax = positions[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t/*\tif(minMax != sizes){\r\n\t\t\tminMax.size = minMax.size;\r\n\t\t}*/\r\n\r\n\t\treturn minMax;\r\n\t};\r\n\r\n\tResizerCell.prototype._moveResizer = function (av, x, y) {\r\n\t\tif (x === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar sizes = this._getGroupResizePosition(x, y);\r\n\t\tif(!sizes)\r\n\t\t\treturn;\r\n\r\n\t\tif (Math.abs(sizes.size) === 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this._xMode) {\r\n\t\t\tav.style.left = sizes.size + 'px';\r\n\t\t\tthis._positions.nextX = sizes.size || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tav.style.top = sizes.size + 'px';\r\n\t\t\tthis._positions.nextY = sizes.size || 0;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onResize\", [sizes.newBehindSide, sizes.newFrontSide]);\r\n\t};\r\n\tResizerCell.prototype._setGravity = function (cell) {\r\n\t\tvar size = this._xMode ? \"offsetWidth\" : \"offsetHeight\";\r\n\t\tvar position = this._xMode ? this._positions.nextX : this._positions.nextY;\r\n\t\tvar frontSize = this._front.$view[size];\r\n\t\tvar behindSize = this._behind.$view[size];\r\n\t\tvar frontG = this._front.getSize().gravity;\r\n\t\tvar behindG = this._behind.getSize().gravity;\r\n\t\tvar newFrontG = (frontSize - position) / frontSize * frontG;\r\n\t\tvar newBehindG = (behindSize + position) / behindSize * behindG;\r\n\t\tif (cell !== \"front\") {\r\n\t\t\tthis._front.$config.gravity = newFrontG;\r\n\t\t}\r\n\t\tif (cell !== \"behind\") {\r\n\t\t\tthis._behind.$config.gravity = newBehindG;\r\n\t\t}\r\n\t};\r\n\r\n/*\tResizerCell.prototype.setSize = function(){\r\n\t\t_super.apply(this, arguments)\r\n\t};*/\r\n\r\n\tResizerCell.prototype._getNewSizes = function(){\r\n\t\tvar behindSize = this._xMode ? this._behind.$config.width : this._behind.$config.height;\r\n\t\tvar frontSize = this._xMode ? this._front.$config.width : this._front.$config.height;\r\n\t\tvar position = this._xMode ? this._positions.nextX : this._positions.nextY;\r\n\r\n\t\tif(!frontSize && !behindSize){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tfront: frontSize ? ((frontSize - position) || 1) : 0,\r\n\t\t\tback: behindSize ? ((behindSize + position) || 1) : 0\r\n\t\t};\r\n\t};\r\n\r\n\tResizerCell.prototype._assignNewSizes = function(newSizes){\r\n\t\tthis._getSiblings();\r\n\t\tvar side = this._xMode ? 'width' : 'height';\r\n\r\n\t\t// if only gravity cells\r\n\t\tif (!newSizes) {\r\n\t\t\tthis._setGravity();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!newSizes.front) {\r\n\t\t\t\tthis._setGravity(\"behind\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._front.$config[side] = newSizes.front;\r\n\t\t\t}\r\n\t\t\tif (!newSizes.back) {\r\n\t\t\t\tthis._setGravity(\"front\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._behind.$config[side] = newSizes.back;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tResizerCell.prototype._setSizes = function () {\r\n\t\tif (this._resizer) {\r\n\t\t\tthis.$view.removeChild(this._resizer);\r\n\t\t}\r\n\t\tvar newSizes = this._getNewSizes();\r\n\r\n\t\tif (this._positions.nextX || this._positions.nextY) {\r\n\t\t\tthis._assignNewSizes(newSizes);\r\n\r\n\t\t\tvar side = this._xMode ? 'width' : 'height';\r\n\t\t\tif(this._front.$config.group){\r\n\t\t\t\tthis.$gantt.$layout._syncCellSizes(this._front.$config.group, this._front.$config[side]);\r\n\t\t\t}else if(this._behind.$config.group){\r\n\t\t\t\tthis.$gantt.$layout._syncCellSizes(this._behind.$config.group, this._behind.$config[side]);\r\n\t\t\t}\r\n\r\n\t\t\tif(this._getGroupName()){\r\n\t\t\t\tthis.$factory.getView(\"main\").resize();\r\n\t\t\t}else{\r\n\t\t\t\tthis.$parent.resize();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n\treturn ResizerCell;\r\n}(Cell));\r\n\r\nmodule.exports = ResizerCell;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/layout/resizer_cell.js\n// module id = 44\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tenv = require(\"../../../utils/env\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ScrollbarCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ScrollbarCell, _super);\r\n\tfunction ScrollbarCell(parent, config, factory, gantt) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tthis.$config = utils.mixin(config, {scroll: \"x\"});\r\n\t\t_this._scrollHorizontalHandler = utils.bind(_this._scrollHorizontalHandler, _this);\r\n\t\t_this._scrollVerticalHandler = utils.bind(_this._scrollVerticalHandler, _this);\r\n\t\t_this._outerScrollVerticalHandler = utils.bind(_this._outerScrollVerticalHandler, _this);\r\n\t\t_this._outerScrollHorizontalHandler = utils.bind(_this._outerScrollHorizontalHandler, _this);\r\n\t\t_this._mouseWheelHandler = utils.bind(_this._mouseWheelHandler, _this);\r\n\r\n\t\tthis.$config.hidden = true;\r\n\t\tvar size = gantt.config.scroll_size;\r\n\r\n\t\tif(gantt.env.isIE){\r\n\t\t\t// full element height/width must be bigger than just a browser scrollbar,\r\n\t\t\t// otherwise the scrollbar element won't be scrolled on click\r\n\t\t\tsize += 1;\r\n\t\t}\r\n\r\n\t\tif(this._isHorizontal()){\r\n\t\t\t_this.$config.height = size;\r\n\t\t\t_this.$parent.$config.height = size;\r\n\t\t}else{\r\n\t\t\t_this.$config.width = size;\r\n\t\t\t_this.$parent.$config.width = size;\r\n\t\t}\r\n\r\n\t\tthis.$config.scrollPosition = 0;\r\n\r\n\t\t_this.$name = \"scroller\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tScrollbarCell.prototype.init = function(container){\r\n\t\tcontainer.innerHTML = this.$toHTML();\r\n\t\tthis.$view = container.firstChild;\r\n\r\n\t\tif(!this.$view){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tif(this._isVertical()){\r\n\t\t\tthis._initVertical();\r\n\t\t}else{\r\n\t\t\tthis._initHorizontal();\r\n\t\t}\r\n\t\tthis._initMouseWheel();\r\n\t\tthis._initLinkedViews();\r\n\t};\r\n\r\n\tScrollbarCell.prototype.$toHTML = function () {\r\n\t\tvar className = this._isHorizontal() ? \"gantt_hor_scroll\" : \"gantt_ver_scroll\";\r\n\t\treturn \"<div class='gantt_layout_cell \"+className+\"'><div style='\"+(this._isHorizontal() ? \"width:2000px\" : \"height:2000px\")+\"'></div></div>\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getRootParent = function(){\r\n\t\tvar parent = this.$parent;\r\n\t\twhile(parent && parent.$parent){\r\n\t\t\tparent = parent.$parent;\r\n\t\t}\r\n\t\tif(parent){\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction eachCell(root, res){\r\n\t\tres.push(root);\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\teachCell(root.$cells[i], res);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tScrollbarCell.prototype._eachView = function(){\r\n\t\tvar res = [];\r\n\t\teachCell(this._getRootParent(), res);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getLinkedViews = function(){\r\n\t\tvar views = this._eachView();\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].$config && ((this._isVertical() && views[i].$config.scrollY == this.$id) || (this._isHorizontal() && views[i].$config.scrollX == this.$id)) ){\r\n\t\t\t\tres.push(views[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype._initHorizontal = function(){\r\n\t\tthis.$scroll_hor = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollHorizontalHandler);\r\n\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initLinkedViews = function(){\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tvar css = this._isVertical() ?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\" : \"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\";\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\t//views[i].$config.css = [views[i].$config.css || \"\", css].join(\" \");\r\n\t\t\tdomHelpers.addClassName(views[i].$view || views[i].getNode(), css);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initVertical = function(){\r\n\t\tthis.$scroll_ver = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollVerticalHandler);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._updateLinkedViews = function(){\r\n\t\tvar root = this._getRootParent();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initMouseWheel = function(){\r\n\t\tvar ff = env.isFF;\r\n\t\tif (ff)\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"wheel\", this._mouseWheelHandler);\r\n\t\telse\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"mousewheel\", this._mouseWheelHandler);\r\n\t};\r\n\r\n\r\n\r\n\r\n\tScrollbarCell.prototype.scrollHorizontally = function(left){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\tthis.$config.codeScrollLeft = left;\r\n\t\tleft = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(left, undefined);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = left;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, left, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\tScrollbarCell.prototype.scrollVertically = function(top){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_ver.scrollTop = top;\r\n\t\ttop = this.$scroll_ver.scrollTop;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(undefined, top);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = top;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, top, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVertical = function(){\r\n\t\treturn this.$config.scroll == \"y\";\r\n\t};\r\n\tScrollbarCell.prototype._isHorizontal = function(){\r\n\t\treturn this.$config.scroll == \"x\";\r\n\t};\r\n\tScrollbarCell.prototype._scrollHorizontalHandler = function (e) {\r\n\t\tif(this._isVertical() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//in safari we can catch previous onscroll after setting new value from mouse-wheel event\r\n\t\t//set delay to prevent value drifiting\r\n\t\tif ((new Date()) - ( this._wheel_time || 0 ) < 100) return true;\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar left = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tthis.scrollHorizontally(left);\r\n\r\n\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollHorizontalHandler = function(e){\r\n\t\tif(this._isVertical()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.show = function(){\r\n\t\tthis.$parent.show();\r\n\t};\r\n\tScrollbarCell.prototype.hide = function(){\r\n\t\tthis.$parent.hide();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollSize = function(){\r\n\t\tvar scrollSize = 0;\r\n\t\tvar outerSize = 0;\r\n\t\tvar isHorizontal = this._isHorizontal();\r\n\r\n\t\tvar linked = this._getLinkedViews();\r\n\t\tvar view;\r\n\t\tvar scrollProperty = isHorizontal ? \"scrollWidth\" : \"scrollHeight\",\r\n\t\t\tinnerSizeProperty = isHorizontal ? \"contentX\" : \"contentY\";\r\n\t\tvar outerProperty = isHorizontal ? \"x\" : \"y\";\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tfor(var i = 0; i < linked.length; i++){\r\n\t\t\tview = linked[i];\r\n\t\t\tif(!(view && view.$content && view.$content.getSize)) continue;\r\n\r\n\t\t\tvar sizes = view.$content.getSize();\r\n\t\t\tvar cellScrollSize;\r\n\t\t\tif(sizes.hasOwnProperty(scrollProperty)){\r\n\t\t\t\tcellScrollSize = sizes[scrollProperty];\r\n\t\t\t}else{\r\n\t\t\t\tcellScrollSize = sizes[innerSizeProperty];\r\n\t\t\t}\r\n\r\n\t\t\tif(offset){\r\n\t\t\t\t// precalculated vertical/horizontal offsets of scrollbar to emulate 4.x look\r\n\t\t\t\tif(sizes[innerSizeProperty] > sizes[outerProperty] && sizes[innerSizeProperty] > scrollSize && (cellScrollSize > (sizes[outerProperty] - offset + 2))){\r\n\t\t\t\t\tscrollSize = cellScrollSize + (isHorizontal ? 0 : 2);\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar nonScrollableSize = Math.max(sizes[innerSizeProperty] - cellScrollSize, 0);\r\n\t\t\t\tvar scrollableViewPortSize = Math.max(sizes[outerProperty] - nonScrollableSize, 0);\r\n\t\t\t\tcellScrollSize = cellScrollSize + nonScrollableSize;\r\n\r\n\t\t\t\tif(cellScrollSize > scrollableViewPortSize && (cellScrollSize > scrollSize) ){\r\n\t\t\t\t\t//|| (cellScrollSize === scrollSize && sizes[outerProperty] < outerSize) // same scroll width but smaller scrollable view port\r\n\r\n\t\t\t\t\tscrollSize = cellScrollSize;\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\touterScroll: outerSize,\r\n\t\t\tinnerScroll: scrollSize\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.scroll = function(position){\r\n\t\tif(this._isHorizontal()){\r\n\t\t\tthis.scrollHorizontally(position);\r\n\t\t}else{\r\n\t\t\tthis.scrollVertically(position);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.getScrollState = function(){\r\n\t\treturn {\r\n\t\t\tvisible: this.isVisible(),\r\n\t\t\tdirection: this.$config.scroll,\r\n\t\t\tsize: this.$config.outerSize,\r\n\t\t\tscrollSize: this.$config.scrollSize || 0,\r\n\t\t\tposition: this.$config.scrollPosition || 0\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.setSize = function(width, height){\r\n\t\t_super.prototype.setSize.apply(this, arguments);\r\n\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\r\n\t\tvar ownSize = (this._isVertical() ? height : width) - this._getScrollOffset() + (this._isHorizontal() ? 1 : 0);\r\n\r\n\t\tif(scrollSizes.innerScroll && ownSize > scrollSizes.outerScroll){\r\n\t\t\tscrollSizes.innerScroll += (ownSize - scrollSizes.outerScroll);\r\n\t\t}\r\n\t\tthis.$config.scrollSize = scrollSizes.innerScroll;\r\n\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$config.height = height;\r\n\t\tthis._setScrollSize(scrollSizes.innerScroll);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.isVisible = function(){\r\n\t\treturn !!(this.$parent && this.$parent.$view.parentNode);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldShow = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn false;\r\n\t\t}else if(scrollSizes.innerScroll && !(this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldHide = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype.toggleVisibility = function(){\r\n\t\tif(this.shouldHide()){\r\n\t\t\tthis.hide();\r\n\t\t}else if(this.shouldShow()){\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\t\r\n\tScrollbarCell.prototype._getScaleOffset = function(view){\r\n\t\tvar offset = 0;\r\n\t\tif(view && (view.$config.view == \"timeline\" || view.$config.view == \"grid\")){\r\n\t\t\toffset = view.$content.$getConfig().scale_height;\r\n\t\t}\r\n\t\treturn offset;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollOffset = function(){\r\n\t\tvar offset = 0;\r\n\t\tif(this._isVertical()){\r\n\t\t\tvar parentLayout = this.$parent.$parent;\r\n\t\t\toffset = Math.max(\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getPrevSibling(this.$parent.$id)),\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getNextSibling(this.$parent.$id))\r\n\t\t\t\t);\r\n\t\t}else{\r\n\t\t\tvar linked = this._getLinkedViews();\r\n\r\n\t\t\tfor (var i = 0; i < linked.length; i++) {\r\n\t\t\t\tvar view = linked[i],\r\n\t\t\t\t\tvparent = view.$parent;\r\n\t\t\t\tvar cells = vparent.$cells;\r\n\r\n\t\t\t\tvar last = cells[cells.length - 1];\r\n\r\n\t\t\t\tif (last && last.$config.view == \"scrollbar\" && last.$config.hidden === false) {\r\n\t\t\t\t\toffset = last.$config.width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn offset || 0;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._setScrollSize = function(size){\r\n\t\tvar property = this._isHorizontal() ? \"width\" : \"height\";\r\n\t\tvar scrollbar = this._isHorizontal() ? this.$scroll_hor : this.$scroll_ver;\r\n\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tvar node = scrollbar.firstChild;\r\n\r\n\t\tif(offset){\r\n\t\t\tif(this._isVertical()){\r\n\r\n\t\t\t\tthis.$config.outerSize = (this.$config.height - offset + 3);\r\n\t\t\t\tscrollbar.style.height = this.$config.outerSize + \"px\";\r\n\t\t\t\tscrollbar.style.top = (offset-1) + \"px\";\r\n\t\t\t\tdomHelpers.addClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\t\tdomHelpers.addClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\t}else{\r\n\t\t\t\tthis.$config.outerSize = (this.$config.width - offset + 1);\r\n\t\t\t\tscrollbar.style.width = this.$config.outerSize + \"px\";\r\n\t\t\t\t//domHelpers.addClassName(scrollbar, this.$parent._borders.right);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tscrollbar.style.top = \"auto\";\r\n\t\t\tdomHelpers.removeClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\tdomHelpers.removeClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t}\r\n\r\n\t\tnode.style[property] = size + \"px\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._scrollVerticalHandler = function (e) {\r\n\t\tif(this._scrollHorizontalHandler() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar top = this.$scroll_ver.scrollTop;\r\n\t\tvar prev = this._oldTop;\r\n\t\tif(top == prev) return;\r\n\r\n\t\tthis.scrollVertically(top);\r\n\r\n\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollVerticalHandler = function(e){\r\n\t\tif(this._scrollHorizontalHandler()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._checkWheelTarget = function(targetNode){\r\n\t\tvar connectedViews = this._getLinkedViews().concat(this);\r\n\r\n\t\tfor(var i = 0; i < connectedViews.length; i++){\r\n\t\t\tvar node = connectedViews[i].$view;\r\n\t\t\tif(domHelpers.isChildOf(targetNode, node)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._mouseWheelHandler = function(e){\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif(!this._checkWheelTarget(target))\r\n\t\t\treturn;\r\n\r\n\t\tthis._wheel_time = new Date();\r\n\r\n\t\tvar res = {};\r\n\t\tvar ff = env.isFF;\r\n\t\tvar wx = ff ? (e.deltaX*-20) : e.wheelDeltaX*2;\r\n\t\tvar wy = ff ? (e.deltaY*-40) : e.wheelDelta;\r\n\r\n\t\tif(e.shiftKey && !(e.deltaX || e.wheelDeltaX)){\r\n\t\t\t// shift+mousewheel for horizontal scroll\r\n\t\t\twx = wy*2;\r\n\t\t\twy = 0;\r\n\t\t}\r\n\r\n\t\tif (wx && Math.abs(wx) > Math.abs(wy)){\r\n\t\t\tif(this._isVertical()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.x) return true;//no horisontal scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_hor || !this.$scroll_hor.offsetWidth) return true;\r\n\r\n\t\t\tvar dir  = wx/-40;\r\n\t\t\tvar oldLeft = this._oldLeft;\r\n\t\t\tvar left = oldLeft+dir*30;\r\n\t\t\tthis.scrollHorizontally(left);\r\n\t\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldLeft == this.$scroll_hor.scrollLeft){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t\t} else {\r\n\t\t\tif(this._isHorizontal()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.y) return true;//no vertical scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_ver || !this.$scroll_ver.offsetHeight) return true;\r\n\r\n\t\t\tvar dir  = wy/-40;\r\n\t\t\tif (typeof wy == \"undefined\")\r\n\t\t\t\tdir = e.detail;\r\n\r\n\t\t\tvar oldTop = this._oldTop;\r\n\t\t\tvar top = this.$scroll_ver.scrollTop+dir*30;\r\n\r\n\t\t\t//if(!this.$gantt.config.prevent_default_scroll &&\r\n\t\t\t//\t(this.$gantt._cached_scroll_pos && ((this.$gantt._cached_scroll_pos.y == top) || (this.$gantt._cached_scroll_pos.y <= 0 && top <= 0)))) return true;\r\n\r\n\r\n\t\t\tthis.scrollVertically(top);\r\n\t\t\tthis.$scroll_ver.scrollTop = top;\r\n\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldTop == this.$scroll_ver.scrollTop){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble=true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\treturn ScrollbarCell;\r\n})(Cell);\r\n\r\nmodule.exports = ScrollbarCell;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/layout/scrollbar_cell.js\n// module id = 45\n// module chunks = 0","var utils = require(\"../../../utils/utils\");\r\n\r\nfunction ScaleHelper(gantt){\r\n\tvar dateHelper = gantt.date;\r\n\tvar services = gantt.$services;\r\n\r\n\treturn {\r\n\t\tgetSum: function (sizes, from, to) {\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = sizes.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\r\n\t\t\tvar summ = 0;\r\n\t\t\tfor (var i = from; i <= to; i++)\r\n\t\t\t\tsumm += sizes[i];\r\n\r\n\t\t\treturn summ;\r\n\t\t},\r\n\t\tsetSumWidth: function (sum_width, scale, from, to) {\r\n\t\t\tvar parts = scale.width;\r\n\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tif (from > parts.length - 1 || length <= 0 || to > parts.length - 1)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar oldWidth = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar diff = sum_width - oldWidth;\r\n\r\n\t\t\tthis.adjustSize(diff, parts, from, to);\r\n\t\t\tthis.adjustSize(-diff, parts, to + 1);\r\n\r\n\t\t\tscale.full_width = this.getSum(parts);\r\n\t\t},\r\n\t\tsplitSize: function (width, count) {\r\n\t\t\tvar arr = [];\r\n\t\t\tfor (var i = 0; i < count; i++) arr[i] = 0;\r\n\r\n\t\t\tthis.adjustSize(width, arr);\r\n\t\t\treturn arr;\r\n\r\n\t\t},\r\n\t\tadjustSize: function (width, parts, from, to) {\r\n\t\t\tif (!from)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tvar full = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar shared = 0;\r\n\r\n\t\t\tfor (var i = from; i <= to; i++) {\r\n\t\t\t\tvar share = Math.floor(width * (full ? (parts[i] / full) : (1 / length)));\r\n\r\n\t\t\t\tfull -= parts[i];\r\n\t\t\t\twidth -= share;\r\n\t\t\t\tlength--;\r\n\r\n\t\t\t\tparts[i] += share;\r\n\t\t\t\tshared += share;\r\n\t\t\t}\r\n\t\t\tparts[parts.length - 1] += width;\r\n\t\t\t//parts[parts.length - 1] += width - shared;\r\n\t\t},\r\n\t\tsortScales: function (scales) {\r\n\t\t\tfunction cellSize(unit, step) {\r\n\t\t\t\tvar d = new Date(1970, 0, 1);\r\n\t\t\t\treturn dateHelper.add(d, step, unit) - d;\r\n\t\t\t}\r\n\r\n\t\t\tscales.sort(function (a, b) {\r\n\t\t\t\tif (cellSize(a.unit, a.step) < cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else if (cellSize(a.unit, a.step) > cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\t\tscales[i].index = i;\r\n\t\t\t}\r\n\t\t},\r\n\t\tprimaryScale: function () {\r\n\r\n\t\t\tvar config = services.getService(\"templateLoader\");\r\n\t\t\tconfig.initTemplate(\"date_scale\", undefined, undefined, services.config(), services.templates());\r\n\r\n\t\t\treturn {\r\n\t\t\t\tunit: services.config().scale_unit,\r\n\t\t\t\tstep: services.config().step,\r\n\t\t\t\ttemplate: services.templates().date_scale,\r\n\t\t\t\tdate: services.config().date_scale,\r\n\t\t\t\tcss: services.templates().scale_cell_class\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tprepareConfigs: function (scales, min_coll_width, container_width, scale_height, minDate, maxDate, rtl) {\r\n\t\t\tvar heights = this.splitSize(scale_height, scales.length);\r\n\t\t\tvar full_width = container_width;\r\n\r\n\t\t\tvar configs = [];\r\n\t\t\tfor (var i = scales.length - 1; i >= 0; i--) {\r\n\t\t\t\tvar main_scale = (i == scales.length - 1);\r\n\t\t\t\tvar cfg = this.initScaleConfig(scales[i], minDate, maxDate);\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tthis.processIgnores(cfg);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initColSizes(cfg, min_coll_width, full_width, heights[i]);\r\n\t\t\t\tthis.limitVisibleRange(cfg);\r\n\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tfull_width = cfg.full_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfigs.unshift(cfg);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < configs.length - 1; i++) {\r\n\t\t\t\tthis.alineScaleColumns(configs[configs.length - 1], configs[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\r\n\t\t\t\tif(rtl){\r\n\t\t\t\t\tthis.reverseScale(configs[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosSettings(configs[i]);\r\n\t\t\t}\r\n\t\t\treturn configs;\r\n\r\n\t\t},\r\n\r\n\t\treverseScale: function(scale){\r\n\t\t\tscale.width = scale.width.reverse();\r\n\t\t\tscale.trace_x = scale.trace_x.reverse();\r\n\r\n\t\t\tvar indexes = scale.trace_indexes;\r\n\t\t\tscale.trace_indexes = {};\r\n\t\t\tscale.trace_index_transition = {};\r\n\t\t\tscale.rtl = true;\r\n\t\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\t\tscale.trace_indexes[scale.trace_x[i].valueOf()] = i;\r\n\t\t\t\tscale.trace_index_transition[indexes[scale.trace_x[i].valueOf()]] = i;\r\n\t\t\t}\r\n\t\t\treturn scale;\r\n\t\t},\r\n\r\n\t\tsetPosSettings: function (config) {\r\n\t\t\tfor (var i = 0, len = config.trace_x.length; i < len; i++) {\r\n\t\t\t\tconfig.left.push((config.width[i - 1] || 0) + (config.left[i - 1] || 0));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_ignore_time_config: function (date, scale) {\r\n\r\n\t\t\tif (services.config().skip_off_time) {\r\n\t\t\t\tvar skip = true;\r\n\t\t\t\tvar probe = date;\r\n\r\n\t\t\t\t// check dates in case custom scale unit, e.g. {unit: \"month\", step: 3}\r\n\t\t\t\tfor (var i = 0; i < scale.step; i++) {\r\n\t\t\t\t\tif (i) {\r\n\t\t\t\t\t\tprobe = dateHelper.add(date, i, scale.unit);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tskip = skip && !this.isWorkTime(probe, scale.unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn skip;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t//defined in an extension\r\n\t\tprocessIgnores: function (config) {\r\n\t\t\tconfig.ignore_x = {};\r\n\t\t\tconfig.display_count = config.count;\r\n\t\t},\r\n\t\tinitColSizes: function (config, min_col_width, full_width, line_height) {\r\n\t\t\tvar cont_width = full_width;\r\n\r\n\t\t\tconfig.height = line_height;\r\n\r\n\t\t\tvar column_count = config.display_count === undefined ? config.count : config.display_count;\r\n\r\n\t\t\tif (!column_count)\r\n\t\t\t\tcolumn_count = 1;\r\n\r\n\t\t\tconfig.col_width = Math.floor(cont_width / column_count);\r\n\r\n\t\t\tif (min_col_width) {\r\n\t\t\t\tif (config.col_width < min_col_width) {\r\n\t\t\t\t\tconfig.col_width = min_col_width;\r\n\t\t\t\t\tcont_width = config.col_width * column_count;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconfig.width = [];\r\n\t\t\tvar ignores = config.ignore_x || {};\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\t\t\t\tif (ignores[config.trace_x[i].valueOf()] || (config.display_count == config.count)) {\r\n\t\t\t\t\tconfig.width[i] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// width of month columns should be proportional month duration\r\n\t\t\t\t\tvar width = 1;\r\n\t\t\t\t\tif (config.unit == \"month\") {\r\n\t\t\t\t\t\tvar days = Math.round((dateHelper.add(config.trace_x[i], config.step, config.unit) - config.trace_x[i]) / (1000 * 60 * 60 * 24));\r\n\t\t\t\t\t\twidth = days;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.width[i] = width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.adjustSize(cont_width - this.getSum(config.width)/* 1 width per column from the code above */, config.width);\r\n\t\t\tconfig.full_width = this.getSum(config.width);\r\n\t\t},\r\n\t\tinitScaleConfig: function (config, min_date, max_date) {\r\n\t\t\tvar cfg = utils.mixin({\r\n\t\t\t\tcount: 0,\r\n\t\t\t\tcol_width: 0,\r\n\t\t\t\tfull_width: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: [],\r\n\t\t\t\tleft: [],\r\n\t\t\t\ttrace_x: [],\r\n\t\t\t\ttrace_indexes: {},\r\n\t\t\t\tmin_date: new Date(min_date),\r\n\t\t\t\tmax_date: new Date(max_date)\r\n\t\t\t}, config);\r\n\r\n\t\t\tthis.eachColumn(config.unit, config.step, min_date, max_date, function (date) {\r\n\t\t\t\tcfg.count++;\r\n\t\t\t\tcfg.trace_x.push(new Date(date));\r\n\t\t\t\tcfg.trace_indexes[date.valueOf()] = cfg.trace_x.length - 1;\r\n\t\t\t});\r\n\r\n\t\t\tcfg.trace_x_ascending = cfg.trace_x.slice();\r\n\t\t\treturn cfg;\r\n\t\t},\r\n\t\titerateScales: function (lower_scale, upper_scale, from, to, callback) {\r\n\t\t\tvar upper_dates = upper_scale.trace_x;\r\n\t\t\tvar lower_dates = lower_scale.trace_x;\r\n\r\n\t\t\tvar prev = from || 0;\r\n\t\t\tvar end = to || (lower_dates.length - 1);\r\n\t\t\tvar prevUpper = 0;\r\n\r\n\r\n\t\t\tfor (var up = 1; up < upper_dates.length; up++) {\r\n\t\t\t\tvar target_index = (lower_scale.trace_indexes[+upper_dates[up]]);\r\n\t\t\t\tif (target_index !== undefined && target_index <= end) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(this, [prevUpper, up, prev, target_index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprev = target_index;\r\n\t\t\t\t\tprevUpper = up;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\talineScaleColumns: function (lower_scale, upper_scale, from, to) {\r\n\t\t\tthis.iterateScales(lower_scale, upper_scale, from, to, function (upper_start, upper_end, lower_start, lower_end) {\r\n\t\t\t\tvar targetWidth = this.getSum(lower_scale.width, lower_start, lower_end - 1);\r\n\t\t\t\tvar actualWidth = this.getSum(upper_scale.width, upper_start, upper_end - 1);\r\n\t\t\t\tif (actualWidth != targetWidth) {\r\n\t\t\t\t\tthis.setSumWidth(targetWidth, upper_scale, upper_start, upper_end - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teachColumn: function (unit, step, min_date, max_date, callback) {\r\n\t\t\tvar start = new Date(min_date),\r\n\t\t\t\tend = new Date(max_date);\r\n\t\t\tif (dateHelper[unit + \"_start\"]) {\r\n\t\t\t\tstart = dateHelper[unit + \"_start\"](start);\r\n\t\t\t}\r\n\r\n\t\t\tvar curr = new Date(start);\r\n\t\t\tif (+curr >= +end) {\r\n\t\t\t\tend = dateHelper.add(curr, step, unit);\r\n\t\t\t}\r\n\t\t\twhile (+curr < +end) {\r\n\t\t\t\tcallback.call(this, new Date(curr));\r\n\t\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\t\tcurr = dateHelper.add(curr, step, unit);\r\n\t\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, step, unit);\r\n\t\t\t\tif (dateHelper[unit + '_start'])\r\n\t\t\t\t\tcurr = dateHelper[unit + \"_start\"](curr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlimitVisibleRange: function (cfg) {\r\n\t\t\tvar dates = cfg.trace_x;\r\n\r\n\t\t\tvar left = 0, right = cfg.width.length - 1;\r\n\t\t\tvar diff = 0;\r\n\t\t\tif (+dates[0] < +cfg.min_date && left != right) {\r\n\t\t\t\tvar width = Math.floor(cfg.width[0] * ((dates[1] - cfg.min_date) / (dates[1] - dates[0])));\r\n\t\t\t\tdiff += cfg.width[0] - width;\r\n\t\t\t\tcfg.width[0] = width;\r\n\r\n\t\t\t\tdates[0] = new Date(cfg.min_date);\r\n\t\t\t}\r\n\r\n\t\t\tvar last = dates.length - 1;\r\n\t\t\tvar lastDate = dates[last];\r\n\t\t\tvar outDate = dateHelper.add(lastDate, cfg.step, cfg.unit);\r\n\t\t\tif (+outDate > +cfg.max_date && last > 0) {\r\n\t\t\t\tvar width = cfg.width[last] - Math.floor(cfg.width[last] * ((outDate - cfg.max_date) / (outDate - lastDate)));\r\n\t\t\t\tdiff += cfg.width[last] - width;\r\n\t\t\t\tcfg.width[last] = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (diff) {\r\n\t\t\t\tvar full = this.getSum(cfg.width);\r\n\t\t\t\tvar shared = 0;\r\n\t\t\t\tfor (var i = 0; i < cfg.width.length; i++) {\r\n\t\t\t\t\tvar share = Math.floor(diff * (cfg.width[i] / full));\r\n\t\t\t\t\tcfg.width[i] += share;\r\n\t\t\t\t\tshared += share;\r\n\t\t\t\t}\r\n\t\t\t\tthis.adjustSize(diff - shared, cfg.width);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = ScaleHelper;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/scales.js\n// module id = 46\n// module chunks = 0","var utils = require(\"../../../utils/utils\"),\r\n\tenv = require(\"../../../utils/env\");\r\n\r\nvar createStaticBgHelper = function(utils, env){\r\n\r\n\tvar canvasBgCache = {};\r\n\tvar staticBgStyleId = \"gantt-static-bg-styles-\" + utils.uid();\r\n\r\n\tfunction renderBgCanvas(targetNode, config, scale, totalHeight) {\r\n\t\tif (!config.static_background) return;\r\n\r\n\t\tvar canvas = document.createElement(\"canvas\");\r\n\t\tif (!canvas.getContext) return; // if canvas is not supported (for IE8)\r\n\r\n\t\t// clear previous bg data\r\n\t\ttargetNode.innerHTML = \"\";\r\n\r\n\t\tvar styleParams = getCellStyles(targetNode);\r\n\t\tvar png = createBackgroundTiles(styleParams, config, scale);\r\n\t\tvar bgDivs = createBgDivs(png, config, scale, totalHeight);\r\n\r\n\t\tvar fragment = document.createDocumentFragment();\r\n\r\n\t\tbgDivs.forEach(function (div) {\r\n\t\t\tfragment.appendChild(div);\r\n\t\t});\r\n\r\n\t\ttargetNode.appendChild(fragment);\r\n\t}\r\n\r\n\tfunction getColumnWidths(scale) {\r\n\t\tvar widths = scale.width;\r\n\t\tvar differentWidths = {};\r\n\t\tfor (var i = 0; i < widths.length; i++) {\r\n\t\t\tif (widths[i] * 1)\r\n\t\t\t\tdifferentWidths[widths[i]] = true;\r\n\t\t}\r\n\t\treturn differentWidths;\r\n\t}\r\n\r\n\tfunction parseRgb(rgbCss) {\r\n\t\tvar result = /^rgba?\\(([\\d]{1,3}), *([\\d]{1,3}), *([\\d]{1,3}) *(,( *[\\d\\.]+ *))?\\)$/i.exec(rgbCss);\r\n\t\treturn result ? {\r\n\t\t\tr: result[1] * 1,\r\n\t\t\tg: result[2] * 1,\r\n\t\t\tb: result[3] * 1,\r\n\t\t\ta: (result[5] * 255) || 255\r\n\t\t} : null;\r\n\t}\r\n\r\n\tfunction getUrlFromCache(key) {\r\n\t\treturn canvasBgCache[key] || null;\r\n\t}\r\n\r\n\tfunction getHashKey(width, height, cellStyles) {\r\n\t\treturn (width + '' + height + cellStyles.bottomBorderColor + cellStyles.rightBorderColor).replace(/[^\\w\\d]/g, '');\r\n\t}\r\n\r\n\tfunction getStyleElement() {\r\n\t\tvar style = document.getElementById(staticBgStyleId);\r\n\r\n\t\tif (!style) {\r\n\t\t\tstyle = document.createElement(\"style\");\r\n\t\t\tstyle.id = staticBgStyleId;\r\n\t\t\tdocument.body.appendChild(style);\r\n\t\t}\r\n\t\treturn style;\r\n\t}\r\n\r\n\tfunction cacheUrl(key, url) {\r\n\t\tcanvasBgCache[key] = url;\r\n\t}\r\n\r\n\tfunction generateBgUrl(width, height, cellStyles) {\r\n\t\t// use relatively big bg image about 500*500px in order to reduce misalignments due browser zoom\r\n\t\tvar cols = Math.floor(500 / width) || 1;\r\n\t\tvar rows = Math.floor(500 / height) || 1;\r\n\r\n\t\tvar canvas = document.createElement(\"canvas\");\r\n\t\tcanvas.height = height * rows;\r\n\t\tcanvas.width = width * cols;\r\n\r\n\t\tvar context = canvas.getContext(\"2d\");\r\n\r\n\t\tdrawGrid(height, width, rows, cols, context, cellStyles);\r\n\r\n\t\treturn canvas.toDataURL();\r\n\r\n\t\tfunction drawGrid(rowHeight, colWidth, rows, cols, context, styles) {\r\n\t\t\t// paint pixels manually instead of using lineTo in order to prevent canvas aliasing\r\n\t\t\tvar image = context.createImageData(colWidth * cols, rowHeight * rows);\r\n\t\t\timage.imageSmoothingEnabled = false;\r\n\r\n\t\t\tvar verticalLineWidth = styles.rightBorderWidth * 1;\r\n\t\t\tvar verticalLineColor = parseRgb(styles.rightBorderColor);\r\n\r\n\t\t\tvar x = 0,\r\n\t\t\t\ty = 0,\r\n\t\t\t\tw = 0;\r\n\r\n\t\t\tfor (var col = 1; col <= cols; col++) {\r\n\t\t\t\tx = col * colWidth - 1;\r\n\t\t\t\tfor (w = 0; w < verticalLineWidth; w++) {\r\n\t\t\t\t\tfor (y = 0; y < rowHeight * rows; y++) {\r\n\t\t\t\t\t\tdrawDot(x - w, y, verticalLineColor, image);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar horizontalLineWidth = styles.bottomBorderWidth * 1;\r\n\t\t\tvar horizontalLineColor = parseRgb(styles.bottomBorderColor);\r\n\r\n\t\t\ty = 0;\r\n\t\t\tfor (var row = 1; row <= rows; row++) {\r\n\t\t\t\ty = row * rowHeight - 1;\r\n\t\t\t\tfor (w = 0; w < horizontalLineWidth; w++) {\r\n\t\t\t\t\tfor (x = 0; x < colWidth * cols; x++) {\r\n\t\t\t\t\t\tdrawDot(x, y - w, horizontalLineColor, image);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcontext.putImageData(image, 0, 0);\r\n\t\t}\r\n\r\n\t\tfunction drawDot(x, y, color, matrix) {\r\n\t\t\tvar rowLength = width * cols;\r\n\r\n\t\t\tvar index = (y * rowLength + x) * 4;\r\n\r\n\t\t\tmatrix.data[index] = color.r;\r\n\t\t\tmatrix.data[index + 1] = color.g;\r\n\t\t\tmatrix.data[index + 2] = color.b;\r\n\t\t\tmatrix.data[index + 3] = color.a;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getCssClass(key) {\r\n\t\treturn \"gantt-static-bg-\" + key;\r\n\t}\r\n\r\n\tfunction createBackgroundTiles(cellStyles, config, scale) {\r\n\t\tvar data = {};\r\n\t\tvar widths = getColumnWidths(scale),\r\n\t\t\theight = config.row_height;\r\n\r\n\t\tvar styleHTML = \"\";\r\n\t\tfor (var i in widths) {\r\n\r\n\t\t\tvar width = i * 1;\r\n\t\t\tvar key = getHashKey(width, height, cellStyles);\r\n\t\t\tvar cachedUrl = getUrlFromCache(key);\r\n\r\n\t\t\tif (!cachedUrl) {\r\n\t\t\t\tvar bgImage = generateBgUrl(width, height, cellStyles);\r\n\t\t\t\tcacheUrl(key, bgImage);\r\n\t\t\t\tstyleHTML += \".\" + getCssClass(key) + \"{ background-image: url('\" + bgImage + \"');}\";\r\n\t\t\t}\r\n\r\n\t\t\tdata[i] = getCssClass(key);\r\n\t\t}\r\n\r\n\t\tif (styleHTML) {\r\n\t\t\tvar style = getStyleElement();\r\n\t\t\tstyle.innerHTML += styleHTML;\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tfunction createBgDivs(bgTiles, config, scale, dataHeight) {\r\n\t\tvar divs = [];\r\n\t\tvar tile,\r\n\t\t\tprevWidth = 0,\r\n\t\t\tprevCell;\r\n\r\n\t\tvar widths = scale.width.filter(function (i) {\r\n\t\t\treturn !!i;\r\n\t\t});\r\n\r\n\t\tvar leftPos = 0;\r\n\r\n\t\t//TODO: fixme\r\n\t\t// bg image misalignments on horizontal scroll on very large time scales, especially in IE/Edge browsers\r\n\t\t// limiting max tile width seems to solve the issue, but can increase rendering time\r\n\t\tvar maxTileSize = 100000;\r\n\t\tif (env.isIE) {\r\n\t\t\t// special case for IE11 on win7x and probably 8x\r\n\t\t\tvar appVersion = navigator.appVersion || \"\";\r\n\t\t\tif (appVersion.indexOf(\"Windows NT 6.2\") != -1 ||\r\n\t\t\t\tappVersion.indexOf(\"Windows NT 6.1\") != -1 ||\r\n\t\t\t\tappVersion.indexOf(\"Windows NT 6.0\") != -1) {\r\n\r\n\t\t\t\tmaxTileSize = 20000;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < widths.length; i++) {\r\n\t\t\t//var currentWidth = cells[i].clientWidth;\r\n\t\t\tvar cell = widths[i];\r\n\r\n\t\t\tif ((cell != prevCell && prevCell !== undefined) || (i == widths.length - 1) || (prevWidth > maxTileSize)) {\r\n\r\n\t\t\t\tvar totalHeight = dataHeight,\r\n\t\t\t\t\tcurrentTop = 0,\r\n\t\t\t\t\trowHeight = Math.floor(maxTileSize / config.row_height) * config.row_height;\r\n\r\n\t\t\t\tvar tileWidth = prevWidth;\r\n\r\n\t\t\t\twhile (totalHeight > 0) {\r\n\t\t\t\t\tvar currentHeight = Math.min(totalHeight, rowHeight);\r\n\t\t\t\t\ttotalHeight -= rowHeight;\r\n\r\n\t\t\t\t\ttile = document.createElement(\"div\");\r\n\r\n\t\t\t\t\ttile.style.height = currentHeight + \"px\";\r\n\t\t\t\t\ttile.style.position = \"absolute\";\r\n\t\t\t\t\ttile.style.top = currentTop + \"px\";\r\n\t\t\t\t\ttile.style.left = leftPos + \"px\";\r\n\r\n\t\t\t\t\ttile.style.whiteSpace = \"no-wrap\";\r\n\t\t\t\t\ttile.className = bgTiles[prevCell || cell];\r\n\r\n\t\t\t\t\t// if last - short by 1 px (bug fix)\r\n\t\t\t\t\tif (i == widths.length - 1) {\r\n\t\t\t\t\t\ttileWidth = cell + tileWidth - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttile.style.width = tileWidth + \"px\";\r\n\r\n\t\t\t\t\tdivs.push(tile);\r\n\t\t\t\t\tcurrentTop += currentHeight;\r\n\t\t\t\t}\r\n\t\t\t\tprevWidth = 0;\r\n\t\t\t\tleftPos += tileWidth;\r\n\r\n\t\t\t\t//cell = 0;\r\n\t\t\t}\r\n\t\t\tif (cell) {\r\n\t\t\t\tprevWidth += cell;\r\n\t\t\t\tprevCell = cell;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn divs;\r\n\t}\r\n\r\n\tfunction getCellStyles(targetNode) {\r\n\t\t// creating temp DOM structure for resolving style parameters. Will be removed after calculating.\r\n\t\tvar cell = document.createElement(\"div\");\r\n\t\tcell.className = \"gantt_task_cell\";\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\trow.className = \"gantt_task_row\";\r\n\t\trow.appendChild(cell);\r\n\t\ttargetNode.appendChild(row);\r\n\r\n\t\tvar rowStyles = getComputedStyle(row),\r\n\t\t\tcellStyles = getComputedStyle(cell);\r\n\r\n\t\tvar params = {\r\n\t\t\tbottomBorderWidth: rowStyles.getPropertyValue(\"border-bottom-width\").replace(\"px\", \"\"),\r\n\t\t\trightBorderWidth: cellStyles.getPropertyValue(\"border-right-width\").replace(\"px\", \"\"),\r\n\t\t\tbottomBorderColor: rowStyles.getPropertyValue(\"border-bottom-color\"),\r\n\t\t\trightBorderColor: cellStyles.getPropertyValue(\"border-right-color\")\r\n\t\t};\r\n\r\n\t\ttargetNode.removeChild(row);\r\n\r\n\t\treturn params;\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: renderBgCanvas\r\n\t};\r\n};\r\n\r\nmodule.exports = {\r\n\tcreate: function(){\r\n\t\treturn createStaticBgHelper(utils, env);\r\n\t}\r\n};\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/tasks_canvas_render.js\n// module id = 47\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nfunction createResizer(gantt, grid){\r\n// renders resize elements in the grid header\r\n\tvar _render_grid_header_resize = function () {\r\n\t\tvar columns = grid.getGridColumns(),\r\n\t\t\tconfig = grid.$getConfig(),\r\n\t\t\twidth = 0,\r\n\t\t\ttotalWidth = grid.$config.width,\r\n\t\t\tlineHeigth = config.scale_height;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\tvar pos;\r\n\t\t\twidth += col.width;\r\n\t\t\tif(config.rtl){\r\n\t\t\t\tpos = totalWidth - width;\r\n\t\t\t}else{\r\n\t\t\t\tpos = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (col.resize) {\r\n\t\t\t\tvar resize_el = document.createElement(\"div\");\r\n\t\t\t\tresize_el.className = \"gantt_grid_column_resize_wrap\";\r\n\t\t\t\tresize_el.style.top = \"0px\";\r\n\t\t\t\tresize_el.style.height = lineHeigth + \"px\";\r\n\t\t\t\tresize_el.innerHTML = \"<div class='gantt_grid_column_resize'></div>\";\r\n\t\t\t\tresize_el.setAttribute(config.grid_resizer_column_attribute, i);\r\n\r\n\t\t\t\tgantt._waiAria.gridSeparatorAttr(resize_el);\r\n\r\n\t\t\t\tgrid.$grid_scale.appendChild(resize_el);\r\n\r\n\t\t\t\tresize_el.style.left = Math.max(0, pos) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar _grid_resize = {\r\n\t\tcolumn_before_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar el = domHelpers.locateAttribute(e, config.grid_resizer_column_attribute);\r\n\t\t\tif (!el) return false;\r\n\r\n\t\t\tvar column_index = this.locate(e, config.grid_resizer_column_attribute),\r\n\t\t\t\tcolumn = grid.getGridColumns()[column_index];\r\n\r\n\t\t\tif (grid.callEvent(\"onColumnResizeStart\", [column_index, column]) === false)\r\n\t\t\t\treturn false;\r\n\t\t}, gantt),\r\n\r\n\t\tcolumn_after_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar column_index = this.locate(e, config.grid_resizer_column_attribute);\r\n\t\t\tdnd.config.marker.innerHTML = \"\";\r\n\t\t\tdnd.config.marker.className += \" gantt_grid_resize_area\";\r\n\t\t\tdnd.config.marker.style.height = grid.$grid.offsetHeight + \"px\";\r\n\t\t\tdnd.config.marker.style.top = \"0px\";\r\n\t\t\tdnd.config.drag_index = column_index;\r\n\r\n\t\t}, gantt),\r\n\r\n\t\tcolumn_drag_move: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar dd = dnd.config,\r\n\t\t\t\tcolumns = grid.getGridColumns();\r\n\t\t\tvar index = parseInt(dd.drag_index, 10);\r\n\t\t\tvar target_column = columns[index];\r\n\t\t\tvar\tpos = domHelpers.getNodePosition(grid.$grid_scale),\r\n\t\t\t\tpointerPosition = parseInt(dd.marker.style.left, 10),\r\n\t\t\t\tminPointerPosition = target_column.min_width ? target_column.min_width : config.min_grid_column_width,\r\n\t\t\t\tmaxPointerPosition = grid.$grid_data.offsetWidth,// - config.min_grid_column_width * (columns.length - dd.drag_index - 2),// 1 for current column + 1 for last column\r\n\t\t\t\tmarkerStartPosition = 0,\r\n\t\t\t\tmarker_width = 0;\r\n\r\n\t\t\t\r\n\t\t/*\tif(config.rtl){\r\n\t\t\t\tindex = columns.length - 1 - index;\r\n\t\t\t\tcolumns = columns.reverse();\r\n\t\t\t}*/\r\n\r\n\t\t\tif(!config.rtl){\r\n\t\t\t\tpointerPosition -= pos.x - 1;\r\n\t\t\t}else{\r\n\t\t\t\tpointerPosition = (pos.x + pos.width - 1) - pointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\t//pointerPosition -= pos.x - 1;\r\n\t\t\tfor (var i = 0; i < index; i++) {\r\n\t\t\t\tminPointerPosition += columns[i].width;\r\n\t\t\t\tmarkerStartPosition += columns[i].width;\r\n\t\t\t}\r\n\r\n\t\t\tif (pointerPosition < minPointerPosition) {\r\n\t\t\t\tpointerPosition = minPointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\tif (config.keep_grid_width) {\r\n\t\t\t\tvar limit_max = 0;\r\n\t\t\t\tfor (var i=index+1; i<columns.length; i++) {\r\n\t\t\t\t\tif (columns[i].min_width)\r\n\t\t\t\t\t\tmaxPointerPosition -= columns[i].min_width;\r\n\t\t\t\t\telse if (config.min_grid_column_width)\r\n\t\t\t\t\t\tmaxPointerPosition -= config.min_grid_column_width;\r\n\r\n\t\t\t\t\tif (columns[i].max_width && limit_max !== false)\r\n\t\t\t\t\t\tlimit_max += columns[i].max_width;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tlimit_max = false;\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// we have to restrict min value if only ALL right-side columns have 'max_width' field\r\n\t\t\t\tif (limit_max) {\r\n\t\t\t\t\tminPointerPosition = grid.$grid_data.offsetWidth - limit_max;\r\n\t\t\t\t}\r\n\t\t\t\tif (pointerPosition < minPointerPosition) {\r\n\t\t\t\t\tpointerPosition = minPointerPosition;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (pointerPosition > maxPointerPosition)\r\n\t\t\t\t\tpointerPosition = maxPointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\tdd.left = pointerPosition - 1;// -1 for border\r\n\r\n\t\t\tmarker_width = Math.abs(pointerPosition - markerStartPosition);\r\n\r\n\t\t\t// column.max_width - maximum width of the column, user defined\r\n\t\t\tif (target_column.max_width && marker_width > target_column.max_width)\r\n\t\t\t\tmarker_width = target_column.max_width;\r\n\r\n\t\t\tif(config.rtl){\r\n\t\t\t\tmarkerStartPosition = (pos.width - markerStartPosition) + 2 - marker_width;\r\n\t\t\t}\r\n\t\t\tdd.marker.style.top = pos.y + \"px\";\r\n\t\t\tdd.marker.style.left = pos.x - 1 + markerStartPosition + \"px\";\r\n\t\t\tdd.marker.style.width = marker_width + \"px\";\r\n\r\n\t\t\tgrid.callEvent(\"onColumnResize\", [index, columns[index], marker_width - 1]);\r\n\t\t\treturn true;\r\n\t\t}, gantt),\r\n\r\n\t\tcolumn_drag_end: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar columns = grid.getGridColumns(),\r\n\t\t\t\tcolumns_width = 0,\r\n\t\t\t\tindex = parseInt(dnd.config.drag_index, 10),\r\n\t\t\t\ttarget_column = columns[index];\r\n\r\n\t\t\t// var colIndex = index;\r\n\t\t\t/*if(config.rtl){\r\n\t\t\t\tcolIndex = columns.length - 1 - target_index;\r\n\t\t\t\tcolumns = columns.reverse();\r\n\t\t\t}*/\r\n\r\n\t\t\tfor (var i = 0; i < index; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width;\r\n\t\t\t}\r\n\r\n\t\t\tvar final_width = (target_column.min_width && (dnd.config.left - columns_width) < target_column.min_width) ?\r\n\t\t\t\ttarget_column.min_width : (dnd.config.left - columns_width);\r\n\r\n\t\t\tif (target_column.max_width && target_column.max_width < final_width) // TODO: probably can be omitted\r\n\t\t\t\tfinal_width = target_column.max_width;\r\n\r\n\t\t\tif (grid.callEvent(\"onColumnResizeEnd\", [index, target_column, final_width]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (target_column.width == final_width)\r\n\t\t\t\treturn;\r\n\r\n\t\t\ttarget_column.width = final_width;\r\n\r\n\t\t\tif (config.keep_grid_width) {\r\n\t\t\t\tcolumns_width = config.grid_width;\r\n\t\t\t} else {\r\n\t\t\t\t// in other case we set a new grid width and call gantt render\r\n\t\t\t\tfor (var i = index, l = columns.length; i < l; i++) {\r\n\t\t\t\t\tcolumns_width += columns[i].width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgrid.callEvent(\"onColumnResizeComplete\", [columns, grid._setColumnsWidth(columns_width, index)]);\r\n\r\n\t\t\tif(!grid.$config.scrollable){\r\n\t\t\t\tgantt.$layout._syncCellSizes(grid.$config.group, config.grid_width);\r\n\t\t\t}\r\n\t\t\t//grid.callEvent(\"onColumnResizeComplete\", [columns, columns_width]);\r\n\r\n\t\t\tthis.render();\r\n\t\t}, gantt)\r\n\t};\r\n\r\n// calls the initialization of the D'n'D events for resize elements\r\n\tvar _init_resize = function () {\r\n\t\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\r\n\t\tvar dnd = new DnD(grid.$grid_scale, {updates_per_second: 60});\r\n\t\tif (gantt.defined(config.dnd_sensitivity))\r\n\t\t\tdnd.config.sensitivity = config.dnd_sensitivity;\r\n\r\n\t\tdnd.attachEvent(\"onBeforeDragStart\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_before_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onAfterDragStart\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_after_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragMove\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_drag_move(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragEnd\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_drag_end(dnd, obj, e);\r\n\t\t});\r\n\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: _init_resize,\r\n\t\tdoOnRender: _render_grid_header_resize\r\n\t};\r\n}\r\n\r\nmodule.exports = createResizer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/grid/grid_resize.js\n// module id = 48\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tresourceStoreMixin = require(\"../resouce_store_mixin\"),\r\n\tGrid = require(\"./grid\");\r\nvar __extends = require(\"../../../utils/extends\");\r\n\r\nvar ResourceGrid = (function (_super) {\r\n\r\n\tfunction ResourceGrid(parent, config, factory, gantt) {\r\n\t\treturn _super.apply(this, arguments) || this;\r\n\t}\r\n\r\n\t__extends(ResourceGrid, _super);\r\n\r\n\tutils.mixin(ResourceGrid.prototype, {\r\n\t\tinit: function(){\r\n\t\t\tif(this.$config.bind === undefined){\r\n\t\t\t\tthis.$config.bind = this.$getConfig().resource_store;\r\n\t\t\t}\r\n\t\t\t_super.prototype.init.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\t_initEvents: function(){\r\n\t\t\t_super.prototype._initEvents.apply(this, arguments);\r\n\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tif(!store) return true;\r\n\r\n\t\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\t\tif(target){\r\n\t\t\t\t\tstore.select(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}, this), this.$grid);\r\n\r\n\t\t}\r\n\r\n\t}, true);\r\n\r\n\tutils.mixin(ResourceGrid.prototype, resourceStoreMixin(_super), true);\r\n\r\n\treturn ResourceGrid;\r\n})(Grid);\r\n\r\nmodule.exports = ResourceGrid;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/grid/resource_grid.js\n// module id = 49\n// module chunks = 0","var utils = require(\"../../../utils/utils\");\r\nvar Timeline = require(\"./timeline\");\r\nvar resourceStoreMixin = require(\"../resouce_store_mixin\");\r\nvar __extends = require(\"../../../utils/extends\");\r\n\r\nvar ResourceTimeline = (function (_super) {\r\n\r\n\tfunction ResourceTimeline(parent, config, factory, gantt) {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\tself.$config.bindLinks = null;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(ResourceTimeline, _super);\r\n\r\n\tutils.mixin(ResourceTimeline.prototype, {\r\n\t\tinit: function(){\r\n\t\t\tif(this.$config.bind === undefined){\r\n\t\t\t\tthis.$config.bind = this.$getConfig().resource_store;\r\n\t\t\t}\r\n\t\t\t_super.prototype.init.apply(this, arguments);\r\n\t\t},\r\n\t\t_createLayerConfig: function(){\r\n\t\t\tvar self = this;\r\n\t\t\tvar taskFilter = function(){\r\n\t\t\t\treturn self.isVisible();\r\n\t\t\t};\r\n\r\n\t\t\tvar taskLayers = [\r\n\t\t\t\t{\r\n\t\t\t\t\trenderer: this.$gantt.$ui.layers.resourceRow,\r\n\t\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\t\tfilter: [taskFilter]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg,\r\n\t\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\t\tfilter: [taskFilter]\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tvar linkLayers = [];\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttasks: taskLayers,\r\n\t\t\t\tlinks: linkLayers\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t}, true);\r\n\r\n\tutils.mixin(ResourceTimeline.prototype, resourceStoreMixin(_super), true);\r\n\r\n\treturn ResourceTimeline;\r\n})(Timeline);\r\n\r\n\r\nmodule.exports = ResourceTimeline;\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/resource_timeline.js\n// module id = 50\n// module chunks = 0","function createTaskRenderer(gantt){\r\n\r\n\tfunction _render_task_element(task, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar painters = config.type_renderers;\r\n\t\tvar renderer = painters[gantt.getTaskType(task.type)],\r\n\t\t\tdefaultRenderer = _task_default_render;\r\n\r\n\t\tif (!renderer) {\r\n\t\t\treturn defaultRenderer.call(gantt, task, view);\r\n\t\t}else{\r\n\t\t\treturn renderer.call(gantt, task, function(task){ return defaultRenderer.call(gantt, task, view);}, view);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _task_default_render(task, view) {\r\n\t\tif (gantt._isAllowedUnscheduledTask(task))\r\n\t\t\treturn;\r\n\r\n\r\n\t\tvar pos = view.getItemPosition(task);\r\n\r\n\t\tvar cfg = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar height = view.getItemHeight();\r\n\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tvar padd = Math.floor((gantt.config.row_height - height) / 2);\r\n\t\tif (taskType == cfg.types.milestone && cfg.link_line_width > 1) {\r\n\t\t\t//little adjust milestone position, so horisontal corners would match link arrow when thickness of link line is more than 1px\r\n\t\t\tpadd += 1;\r\n\t\t}\r\n\r\n\t\tif (taskType == cfg.types.milestone){\r\n\t\t\tpos.left -= Math.round(height / 2);\r\n\t\t\tpos.width = height;\r\n\t\t}\r\n\r\n\t\tvar div = document.createElement(\"div\");\r\n\r\n\t\tvar width = Math.round(pos.width);\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tdiv.setAttribute(view.$config.item_attribute, task.id);\r\n\t\t}\r\n\r\n\t\tif (cfg.show_progress && taskType != cfg.types.milestone) {\r\n\t\t\t_render_task_progress(task, div, width, cfg, templates);\r\n\t\t}\r\n\r\n\t\t//use separate div to display content above progress bar\r\n\t\tvar content = _render_task_content(task, width, templates);\r\n\t\tif (task.textColor) {\r\n\t\t\tcontent.style.color = task.textColor;\r\n\t\t}\r\n\t\tdiv.appendChild(content);\r\n\r\n\t\tvar css = _combine_item_class(\"gantt_task_line\",\r\n\t\t\ttemplates.task_class(task.start_date, task.end_date, task),\r\n\t\t\ttask.id,\r\n\t\t\tview);\r\n\t\tif (task.color || task.progressColor || task.textColor) {\r\n\t\t\tcss += \" gantt_task_inline_color\";\r\n\t\t}\r\n\t\tdiv.className = css;\r\n\r\n\t\tvar styles = [\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"top:\" + (padd + pos.top) + 'px',\r\n\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\"line-height:\" + (Math.max(height < 30 ? height - 2 : height, 0)) + 'px',\r\n\t\t\t\"width:\" + width + 'px'\r\n\t\t];\r\n\t\tif (task.color) {\r\n\t\t\tstyles.push(\"background-color:\" + task.color);\r\n\t\t}\r\n\t\tif (task.textColor) {\r\n\t\t\tstyles.push(\"color:\" + task.textColor);\r\n\t\t}\r\n\r\n\t\tdiv.style.cssText = styles.join(\";\");\r\n\t\tvar side = _render_leftside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tside = _render_rightside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tgantt._waiAria.setTaskBarAttr(task, div);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tif (!gantt.isReadonly(task)) {\r\n\t\t\tif (cfg.drag_resize && !gantt.isSummaryTask(task) && taskType != cfg.types.milestone) {\r\n\t\t\t\t_render_pair(div, \"gantt_task_drag\", task, function (css) {\r\n\t\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\t\tel.className = css;\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t\tif (cfg.drag_links && cfg.show_links) {\r\n\t\t\t\t_render_pair(div, \"gantt_link_control\", task, function (css) {\r\n\t\t\t\t\tvar outer = document.createElement(\"div\");\r\n\t\t\t\t\touter.className = css;\r\n\t\t\t\t\touter.style.cssText = [\r\n\t\t\t\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\t\t\t\"line-height:\" + height + 'px'\r\n\t\t\t\t\t].join(\";\");\r\n\t\t\t\t\tvar inner = document.createElement(\"div\");\r\n\t\t\t\t\tinner.className = \"gantt_link_point\";\r\n\r\n\t\t\t\t\tvar showLinkPoints = false;\r\n\t\t\t\t\tif(state.link_source_id && cfg.touch){\r\n\t\t\t\t\t\tshowLinkPoints = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinner.style.display = showLinkPoints ? \"block\" : \"\";\r\n\t\t\t\t\touter.appendChild(inner);\r\n\t\t\t\t\treturn outer;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn div;\r\n\t}\r\n\r\n\tfunction _render_side_content(task, template, cssClass) {\r\n\t\tif (!template) return null;\r\n\r\n\t\tvar text = template(task.start_date, task.end_date, task);\r\n\t\tif (!text) return null;\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tcontent.className = \"gantt_side_content \" + cssClass;\r\n\t\tcontent.innerHTML = text;\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_leftside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_left \" + _get_link_crossing_css(!cfg.rtl ? true : false, task, cfg);\r\n\t\treturn _render_side_content(task, templates.leftside_text, css);\r\n\t}\r\n\r\n\tfunction _render_rightside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_right \" + _get_link_crossing_css(!cfg.rtl ? false : true, task, cfg);\r\n\t\treturn _render_side_content(task, templates.rightside_text, css);\r\n\t}\r\n\r\n\tfunction _get_link_crossing_css(left, task) {\r\n\t\tvar cond = _get_conditions(left);\r\n\r\n\t\tfor (var i in cond) {\r\n\t\t\tvar links = task[i];\r\n\t\t\tfor (var ln = 0; ln < links.length; ln++) {\r\n\t\t\t\tvar link = gantt.getLink(links[ln]);\r\n\r\n\t\t\t\tfor (var tp = 0; tp < cond[i].length; tp++) {\r\n\t\t\t\t\tif (link.type == cond[i][tp]) {\r\n\t\t\t\t\t\treturn \"gantt_link_crossing\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\r\n\tfunction _render_task_content(task, width, templates) {\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif (gantt.getTaskType(task.type) != gantt.config.types.milestone)\r\n\t\t\tcontent.innerHTML = templates.task_text(task.start_date, task.end_date, task);\r\n\t\tcontent.className = \"gantt_task_content\";\r\n\t\t//content.style.width = width + 'px';\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_task_progress(task, element, maxWidth, cfg, templates) {\r\n\t\tvar done = task.progress * 1 || 0;\r\n\r\n\t\tmaxWidth = Math.max(maxWidth - 2, 0);//2px for borders\r\n\t\tvar pr = document.createElement(\"div\");\r\n\t\tvar width = Math.round(maxWidth * done);\r\n\r\n\t\twidth = Math.min(maxWidth, width);\r\n\t\tif (task.progressColor) {\r\n\t\t\tpr.style.backgroundColor = task.progressColor;\r\n\t\t\tpr.style.opacity = 1;\r\n\t\t}\r\n\t\tpr.style.width = width + 'px';\r\n\t\tpr.className = \"gantt_task_progress\";\r\n\t\tpr.innerHTML = templates.progress_text(task.start_date, task.end_date, task);\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tpr.style.position = \"absolute\";\r\n\t\t\tpr.style.right = \"0px\";\r\n\t\t}\r\n\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.className = \"gantt_task_progress_wrapper\";\r\n\t\twrapper.appendChild(pr);\r\n\t\telement.appendChild(wrapper);\r\n\r\n\t\tif (gantt.config.drag_progress && !gantt.isReadonly(task)) {\r\n\t\t\tvar drag = document.createElement(\"div\");\r\n\r\n\t\t\tvar markerPos = width;\r\n\t\t\tif(cfg.rtl){\r\n\t\t\t\tmarkerPos = maxWidth - width;\r\n\t\t\t}\r\n\r\n\t\t\tdrag.style.left = markerPos + 'px';\r\n\t\t\tdrag.className = \"gantt_task_progress_drag\";\r\n\t\t\tpr.appendChild(drag);\r\n\t\t\telement.appendChild(drag);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _get_conditions(leftside) {\r\n\t\tif (leftside) {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.start_to_start\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.start_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_start\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.finish_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _combine_item_class(basic, template, itemId, view) {\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar css = [basic];\r\n\t\tif (template)\r\n\t\t\tcss.push(template);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tvar task = gantt.getTask(itemId);\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.milestone) {\r\n\t\t\tcss.push(\"gantt_milestone\");\r\n\t\t}\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.project) {\r\n\t\t\tcss.push(\"gantt_project\");\r\n\t\t}\r\n\r\n\t\tif (gantt.isSummaryTask(task))\r\n\t\t\tcss.push(\"gantt_dependent_task\");\r\n\r\n\t\tif (cfg.select_task && itemId == state.selected_task)\r\n\t\t\tcss.push(\"gantt_selected\");\r\n\r\n\t\tif (itemId == state.drag_id) {\r\n\t\t\tcss.push(\"gantt_drag_\" + state.drag_mode);\r\n\t\t\tif (state.touch_drag) {\r\n\t\t\t\tcss.push(\"gantt_touch_\" + state.drag_mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_source_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_source\");\r\n\r\n\t\tif (state.link_target_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_target\");\r\n\r\n\r\n\t\tif (cfg.highlight_critical_path && gantt.isCriticalTask) {\r\n\t\t\tif (gantt.isCriticalTask(task))\r\n\t\t\t\tcss.push(\"gantt_critical_task\");\r\n\t\t}\r\n\r\n\t\tif (state.link_landing_area &&\r\n\t\t\t(state.link_target_id && state.link_source_id) &&\r\n\t\t\t(state.link_target_id != state.link_source_id)) {\r\n\r\n\t\t\tvar from_id = state.link_source_id;\r\n\t\t\tvar from_start = state.link_from_start;\r\n\t\t\tvar to_start = state.link_to_start;\r\n\r\n\t\t\tvar allowDrag = gantt.isLinkAllowed(from_id, itemId, from_start, to_start);\r\n\r\n\t\t\tvar dragClass = \"\";\r\n\t\t\tif (allowDrag) {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_allow\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_allow\";\r\n\t\t\t} else {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_deny\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_deny\";\r\n\t\t\t}\r\n\t\t\tcss.push(dragClass);\r\n\t\t}\r\n\t\treturn css.join(\" \");\r\n\t}\r\n\r\n\tfunction _render_pair(parent, css, task, content, config) {\r\n\t\tvar state = gantt.getState();\r\n\t\tvar className, element;\r\n\t\tif (+task.start_date >= +state.min_date) {\r\n\t\t\tclassName = [css, config.rtl ? \"task_right\" : \"task_left\", \"task_start_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"start_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t\tif (+task.end_date <= +state.max_date){\r\n\t\t\tclassName = [css, config.rtl ? \"task_left\" : \"task_right\", \"task_end_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"end_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn _render_task_element;\r\n}\r\n\r\nmodule.exports = createTaskRenderer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/render/task_bar_render.js\n// module id = 51\n// module chunks = 0","function createTaskBgRender(gantt){\r\n\t//this.getTaskTop\r\n\tfunction _render_bg_line(item, view) {\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\tif (config.show_task_cells) {\r\n\t\t\tfor (var j = 0; j < count; j++) {\r\n\t\t\t\tvar width = cfg.width[j],\r\n\t\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\t\tif (width > 0) {//do not render skipped columns\r\n\t\t\t\t\tvar cell = document.createElement(\"div\");\r\n\t\t\t\t\tcell.style.width = (width) + \"px\";\r\n\r\n\t\t\t\t\tcssclass = \"gantt_task_cell\" + (j == count - 1 ? \" gantt_last_cell\" : \"\");\r\n\t\t\t\t\tcssTemplate = templates.task_cell_class(item, cfg.trace_x[j]);\r\n\t\t\t\t\tif (cssTemplate)\r\n\t\t\t\t\t\tcssclass += \" \" + cssTemplate;\r\n\t\t\t\t\tcell.className = cssclass;\r\n\r\n\t\t\t\t\trow.appendChild(cell);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar odd = gantt.getGlobalTaskIndex(item.id) % 2 !== 0;\r\n\t\tvar cssTemplate = templates.task_row_class(item.start_date, item.end_date, item);\r\n\t\tvar css = \"gantt_task_row\" + (odd ? \" odd\" : \"\") + (cssTemplate ? ' ' + cssTemplate : '');\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\t//var row = \"<div class='\" + css + \"' \" + this.config.task_attribute + \"='\" + item.id + \"'>\" + cells.join(\"\") + \"</div>\";\r\n\r\n\t\trow.className = css;\r\n\r\n\t\tif (config.smart_rendering) {\r\n\t\t\trow.style.position = \"absolute\";\r\n\t\t\trow.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t\trow.style.width = \"100%\";\r\n\t\t}\r\n\t\trow.style.height = (config.row_height) + \"px\";\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\trow.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\treturn _render_bg_line;\r\n}\r\n\r\nmodule.exports = createTaskBgRender;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/render/task_bg_render.js\n// module id = 52\n// module chunks = 0","\r\nfunction createLinkRender(gantt){\r\n\r\nfunction _render_link_element(link, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar dots = path_builder.get_points(link, view);\r\n\tvar lines = drawer.get_lines(dots, view);\r\n\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\tvar css = \"gantt_task_link\";\r\n\r\n\tif (link.color) {\r\n\t\tcss += \" gantt_link_inline_color\";\r\n\t}\r\n\tvar cssTemplate = gantt.templates.link_class ? gantt.templates.link_class(link) : \"\";\r\n\tif (cssTemplate) {\r\n\t\tcss += \" \" + cssTemplate;\r\n\t}\r\n\r\n\tif (config.highlight_critical_path && gantt.isCriticalLink) {\r\n\t\tif (gantt.isCriticalLink(link))\r\n\t\t\tcss += \" gantt_critical_link\";\r\n\t}\r\n\r\n\tdiv.className = css;\r\n\r\n\tif(view.$config.link_attribute){\r\n\t\tdiv.setAttribute(view.$config.link_attribute, link.id);\r\n\t}\r\n\r\n\tfor (var i = 0; i < lines.length; i++) {\r\n\t\tif (i == lines.length - 1) {\r\n\t\t\tlines[i].size -= config.link_arrow_size;\r\n\t\t}\r\n\t\tvar el = drawer.render_line(lines[i], lines[i + 1], view);\r\n\t\tif (link.color) {\r\n\t\t\tel.firstChild.style.backgroundColor = link.color;\r\n\t\t}\r\n\t\tdiv.appendChild(el);\r\n\t}\r\n\r\n\tvar direction = lines[lines.length - 1].direction;\r\n\tvar endpoint = _render_link_arrow(dots[dots.length - 1], direction, view);\r\n\tif (link.color) {\r\n\t\tendpoint.style.borderColor = link.color;\r\n\t}\r\n\tdiv.appendChild(endpoint);\r\n\r\n\tgantt._waiAria.linkAttr(link, div);\r\n\r\n\treturn div;\r\n}\r\n\r\nfunction _render_link_arrow(point, direction, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar div = document.createElement(\"div\");\r\n\tvar top = point.y;\r\n\tvar left = point.x;\r\n\r\n\tvar size = config.link_arrow_size;\r\n\tvar line_width = config.row_height;\r\n\tvar className = \"gantt_link_arrow gantt_link_arrow_\" + direction;\r\n\tswitch (direction) {\r\n\t\tcase drawer.dirs.right:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.left:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.up:\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.down:\r\n\t\t\ttop += size * 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\tdiv.style.cssText = [\r\n\t\t\"top:\" + top + \"px\",\r\n\t\t\"left:\" + left + 'px'].join(';');\r\n\tdiv.className = className;\r\n\r\n\treturn div;\r\n}\r\n\r\n\r\nvar drawer = {\r\n\tcurrent_pos: null,\r\n\tdirs: {\"left\": 'left', \"right\": 'right', \"up\": 'up', \"down\": 'down'},\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.current_pos = null;\r\n\t\tthis.path = [];\r\n\t},\r\n\tpoint: function (pos) {\r\n\t\tthis.current_pos = gantt.copy(pos);\r\n\t},\r\n\tget_lines: function (dots) {\r\n\t\tthis.clear();\r\n\t\tthis.point(dots[0]);\r\n\t\tfor (var i = 1; i < dots.length; i++) {\r\n\t\t\tthis.line_to(dots[i]);\r\n\t\t}\r\n\t\treturn this.get_path();\r\n\t},\r\n\tline_to: function (pos) {\r\n\t\tvar next = gantt.copy(pos);\r\n\t\tvar prev = this.current_pos;\r\n\r\n\t\tvar line = this._get_line(prev, next);\r\n\t\tthis.path.push(line);\r\n\t\tthis.current_pos = next;\r\n\t},\r\n\tget_path: function () {\r\n\t\treturn this.path;\r\n\t},\r\n\tget_wrapper_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\ty = v.y + (config.row_height - wrapper_size) / 2;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - v.size - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y - v.size,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y /*- wrapper_size/2*/,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t},\r\n\tget_line_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tsize = v.size + line_size;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: line_size,\r\n\t\t\t\t\twidth: size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: size,\r\n\t\t\t\t\twidth: line_size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t},\r\n\trender_line: function (v, end, view) {\r\n\t\tvar pos = this.get_wrapper_sizes(v, view);\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.style.cssText = [\r\n\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"height:\" + pos.height + \"px\",\r\n\t\t\t\"width:\" + pos.width + \"px\"\r\n\t\t].join(';');\r\n\t\twrapper.className = \"gantt_line_wrapper\";\r\n\r\n\t\tvar innerPos = this.get_line_sizes(v, view);\r\n\t\tvar inner = document.createElement(\"div\");\r\n\t\tinner.style.cssText = [\r\n\t\t\t\"height:\" + innerPos.height + \"px\",\r\n\t\t\t\"width:\" + innerPos.width + \"px\",\r\n\t\t\t\"margin-top:\" + innerPos.marginTop + \"px\",\r\n\t\t\t\"margin-left:\" + innerPos.marginLeft + \"px\"\r\n\t\t].join(\";\");\r\n\r\n\t\tinner.className = \"gantt_link_line_\" + v.direction;\r\n\t\twrapper.appendChild(inner);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\t_get_line: function (from, to) {\r\n\t\tvar direction = this.get_direction(from, to);\r\n\t\tvar vect = {\r\n\t\t\tx: from.x,\r\n\t\t\ty: from.y,\r\n\t\t\tdirection: this.get_direction(from, to)\r\n\t\t};\r\n\t\tif (direction == this.dirs.left || direction == this.dirs.right) {\r\n\t\t\tvect.size = Math.abs(from.x - to.x);\r\n\t\t} else {\r\n\t\t\tvect.size = Math.abs(from.y - to.y);\r\n\t\t}\r\n\t\treturn vect;\r\n\t},\r\n\tget_direction: function (from, to) {\r\n\t\tvar direction = 0;\r\n\t\tif (to.x < from.x) {\r\n\t\t\tdirection = this.dirs.left;\r\n\t\t} else if (to.x > from.x) {\r\n\t\t\tdirection = this.dirs.right;\r\n\t\t} else if (to.y > from.y) {\r\n\t\t\tdirection = this.dirs.down;\r\n\t\t} else {\r\n\t\t\tdirection = this.dirs.up;\r\n\t\t}\r\n\t\treturn direction;\r\n\t}\r\n\r\n};\r\n\r\nvar path_builder = {\r\n\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.path = [];\r\n\t},\r\n\tcurrent: function () {\r\n\t\treturn this.path[this.path.length - 1];\r\n\t},\r\n\tpoint: function (next) {\r\n\t\tif (!next)\r\n\t\t\treturn this.current();\r\n\r\n\t\tthis.path.push(gantt.copy(next));\r\n\t\treturn next;\r\n\t},\r\n\tpoint_to: function (direction, diff, point) {\r\n\t\tif (!point)\r\n\t\t\tpoint = gantt.copy(this.point());\r\n\t\telse\r\n\t\t\tpoint = {x: point.x, y: point.y};\r\n\t\tvar dir = drawer.dirs;\r\n\t\tswitch (direction) {\r\n\t\t\tcase (dir.left):\r\n\t\t\t\tpoint.x -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.right):\r\n\t\t\t\tpoint.x += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.up):\r\n\t\t\t\tpoint.y -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.down):\r\n\t\t\t\tpoint.y += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this.point(point);\r\n\t},\r\n\tget_points: function (link, view) {\r\n\t\tvar pt = this.get_endpoint(link, view);\r\n\t\tvar xy = gantt.config;\r\n\r\n\t\tvar dy = pt.e_y - pt.y;\r\n\t\tvar dx = pt.e_x - pt.x;\r\n\r\n\t\tvar dir = drawer.dirs;\r\n\r\n\t\tthis.clear();\r\n\t\tthis.point({x: pt.x, y: pt.y});\r\n\r\n\t\tvar shiftX = 2 * xy.link_arrow_size;//just random size for first line\r\n\t\tvar lineType = this.get_line_type(link, view.$getConfig());\r\n\r\n\t\tvar forward = (pt.e_x > pt.x);\r\n\t\tif (lineType.from_start && lineType.to_start) {\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\r\n\t\t} else if (!lineType.from_start && lineType.to_start) {\r\n\t\t\tforward = (pt.e_x > (pt.x + 2 * shiftX));\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tdx -= shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx -= 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\t}\r\n\r\n\t\t} else if (!lineType.from_start && !lineType.to_start) {\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t} else if (lineType.from_start && !lineType.to_start) {\r\n\r\n\t\t\tforward = (pt.e_x > (pt.x - 2 * shiftX));\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\r\n\t\t\tif (!forward) {\r\n\t\t\t\tdx += shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx += 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.path;\r\n\t},\r\n\tget_line_type: function(link, config){\r\n\t\tvar types = config.links;\r\n\t\tvar from_start = false, to_start = false;\r\n\t\tif (link.type == types.start_to_start) {\r\n\t\t\tfrom_start = to_start = true;\r\n\t\t} else if (link.type == types.finish_to_finish) {\r\n\t\t\tfrom_start = to_start = false;\r\n\t\t} else if (link.type == types.finish_to_start) {\r\n\t\t\tfrom_start = false;\r\n\t\t\tto_start = true;\r\n\t\t} else if (link.type == types.start_to_finish) {\r\n\t\t\tfrom_start = true;\r\n\t\t\tto_start = false;\r\n\t\t} else {\r\n\t\t\tgantt.assert(false, \"Invalid link type\");\r\n\t\t}\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tfrom_start = !from_start;\r\n\t\t\tto_start = !to_start;\r\n\t\t}\r\n\r\n\t\treturn {from_start: from_start, to_start: to_start};\r\n\t},\r\n\r\n\tget_endpoint: function (link, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar types = config.links;\r\n\r\n\t\tvar lineType = this.get_line_type(link, config);\r\n\t\tvar from_start = lineType.from_start,\r\n\t\t\tto_start = lineType.to_start;\r\n\r\n\t\tvar source = gantt.getTask(link.source);\r\n\t\tvar target = gantt.getTask(link.target);\r\n\r\n\t\tvar from = getMilestonePosition(source, view),\r\n\t\t\tto = getMilestonePosition(target, view);\r\n\r\n\t\treturn {\r\n\t\t\tx: from_start ? from.left : (from.left + from.width),\r\n\t\t\te_x: to_start ? to.left : (to.left + to.width),\r\n\t\t\ty: from.top,\r\n\t\t\te_y: to.top\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction getMilestonePosition(task, view){\r\n\tvar config = view.$getConfig();\r\n\tvar pos = view.getItemPosition(task);\r\n\tif(gantt.getTaskType(task.type) == config.types.milestone){\r\n\t\tvar milestoneHeight = gantt.getTaskHeight();\r\n\t\tvar milestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\tpos.left -= milestoneWidth / 2;\r\n\t\tpos.width = milestoneWidth;\r\n\t}\r\n\treturn pos;\r\n}\r\n\r\nreturn _render_link_element;\r\n\r\n}\r\n\r\nmodule.exports = createLinkRender;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/render/link_render.js\n// module id = 53\n// module chunks = 0","var dateHelper = require(\"../../../utils/date_helpers\");\r\n\r\nfunction createGridLineRender(gantt){\r\n\tfunction _render_grid_item(item, view) {\r\n\t\t//if (!_is_grid_visible.call(this))\r\n\t\t//\treturn null;\r\n\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\r\n\t\tvar cells = [];\r\n\t\tvar width = 0;\r\n\t\tvar has_child;\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar cell;\r\n\r\n\t\t\tvar value;\r\n\t\t\tvar textValue;\r\n\t\t\tif (col.name == \"add\") {\r\n\t\t\t\tvar aria = gantt._waiAria.gridAddButtonAttrString(col);\r\n\r\n\t\t\t\tvalue = \"<div \" + aria + \" class='gantt_add'></div>\";\r\n\t\t\t\ttextValue = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tif (col.template)\r\n\t\t\t\t\tvalue = col.template(item);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalue = item[col.name];\r\n\r\n\t\t\t\tif (dateHelper.isDate(value))\r\n\t\t\t\t\tvalue = templates.date_grid(value, item);\r\n\t\t\t\ttextValue = value;\r\n\t\t\t\tvalue = \"<div class='gantt_tree_content'>\" + value + \"</div>\";\r\n\t\t\t}\r\n\t\t\tvar css = \"gantt_cell\" + (last ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\tvar tree = [];\r\n\t\t\tif (col.tree) {\r\n\t\t\t\tfor (var j = 0; j < item.$level; j++)\r\n\t\t\t\t\ttree.push(templates.grid_indent(item));\r\n\r\n\t\t\t\thas_child = store.hasChild(item.id);\r\n\t\t\t\tif (has_child) {\r\n\t\t\t\t\ttree.push(templates.grid_open(item));\r\n\t\t\t\t\ttree.push(templates.grid_folder(item));\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree.push(templates.grid_blank(item));\r\n\t\t\t\t\ttree.push(templates.grid_file(item));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar style = \"width:\" + (col.width - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tif (this.defined(col.align))\r\n\t\t\t\tstyle += \"text-align:\" + col.align + \";\";\r\n\r\n\t\t\tvar aria = gantt._waiAria.gridCellAttrString(col, textValue);\r\n\r\n\t\t\ttree.push(value);\r\n\t\t\tif(config.rtl){\r\n\t\t\t\ttree = tree.reverse();\r\n\t\t\t}\r\n\t\t\tcell = \"<div class='\" + css + \"' style='\" + style + \"' \" + aria + \">\" + tree.join(\"\") + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tvar css = gantt.getGlobalTaskIndex(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\tcss += (item.$transparent) ? \" gantt_transparent\" : \"\";\r\n\r\n\t\tcss += (item.$dataprocessor_class ? \" \" + item.$dataprocessor_class : \"\");\r\n\r\n\t\tif (templates.grid_row_class) {\r\n\t\t\tvar css_template = templates.grid_row_class.call(gantt, item.start_date, item.end_date, item);\r\n\t\t\tif (css_template)\r\n\t\t\t\tcss += \" \" + css_template;\r\n\t\t}\r\n\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.className = \"gantt_row\" + css;\r\n\t\tel.style.height = config.row_height + \"px\";\r\n\t\tel.style.lineHeight = (config.row_height) + \"px\";\r\n\r\n\t\tif(config.smart_rendering){\r\n\t\t\tel.style.position = \"absolute\";\r\n\t\t\tel.style.left = \"0px\";\r\n\t\t\tel.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t}\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tel.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\tgantt._waiAria.taskRowAttr(item, el);\r\n\r\n\t\tel.innerHTML = cells.join(\"\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\treturn _render_grid_item;\r\n}\r\n\r\nmodule.exports = createGridLineRender;\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/render/task_grid_line_render.js\n// module id = 54\n// module chunks = 0","var utils = require(\"../../../utils/utils\");\r\nvar rowDnd = require(\"./tasks_grid_dnd\");\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\treturn {\r\n\t\t\tonCreated: function (grid) {\r\n\t\t\t\tgrid.$config = utils.mixin(grid.$config, {\r\n\t\t\t\t\tbind: \"task\"\r\n\t\t\t\t});\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendGantt(grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (grid) {\r\n\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\tif (config.order_branch) {\r\n\t\t\t\t\trowDnd.init(grid.$gantt, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initEvents(grid, gantt);\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendDom(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (grid) {\r\n\t\t\t\tthis.clearEvents(grid, gantt);\r\n\t\t\t},\r\n\r\n\t\t\tinitEvents: function (grid, gantt) {\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (id !== null) {\r\n\t\t\t\t\t\tvar task = this.getTask(id);\r\n\t\t\t\t\t\tif (config.scroll_on_click && !gantt._is_icon_open_click(e))\r\n\t\t\t\t\t\t\tthis.showDate(task.start_date);\r\n\t\t\t\t\t\tgantt.callEvent(\"onTaskRowClick\", [id, trg]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_grid_head_cell\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar column = trg.getAttribute(\"column_id\");\r\n\r\n\t\t\t\t\tif (!gantt.callEvent(\"onGridHeaderClick\", [column, e]))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\t\t\tif (column == \"add\") {\r\n\t\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\t\tmouseEvents.callHandler(\"click\", \"gantt_add\", grid.$grid, [e, config.root_id]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\tvar sorting_method = column,\r\n\t\t\t\t\t\t\tconf;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < config.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (config.columns[i].name == column) {\r\n\t\t\t\t\t\t\t\tconf = config.columns[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (conf && conf.sort !== undefined && conf.sort !== true) {\r\n\t\t\t\t\t\t\tsorting_method = conf.sort;\r\n\r\n\t\t\t\t\t\t\tif (!sorting_method) { // column sort property 'false', no sorting\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar sort = (this._sort && this._sort.direction && this._sort.name == column) ? this._sort.direction : \"desc\";\r\n\t\t\t\t\t\t// invert sort direction\r\n\t\t\t\t\t\tsort = (sort == \"desc\") ? \"asc\" : \"desc\";\r\n\t\t\t\t\t\tthis._sort = {\r\n\t\t\t\t\t\t\tname: column,\r\n\t\t\t\t\t\t\tdirection: sort\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.sort(sorting_method, sort == \"desc\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_add\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (config.readonly) return;\r\n\r\n\t\t\t\t\tvar item = {};\r\n\t\t\t\t\tthis.createTask(item, id ? id : gantt.config.root_id);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclearEvents: function(grid, gantt){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\textendDom: function(grid){\r\n\t\t\t\tgantt.$grid = grid.$grid;\r\n\t\t\t\tgantt.$grid_scale = grid.$grid_scale;\r\n\t\t\t\tgantt.$grid_data = grid.$grid_data;\r\n\t\t\t},\r\n\t\t\textendGantt: function(grid){\r\n\r\n\t\t\t\tgantt.getGridColumns = gantt.bind(grid.getGridColumns, grid);\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeStart\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeStart\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeComplete\", function(columns, totalWidth){\r\n\t\t\t\t\tgantt.config.grid_width = totalWidth;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/grid/main_grid_initializer.js\n// module id = 55\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt._hideQuickInfo();\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar datastore = getStore();\r\n\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\telement.style.position = \"static\";\r\n\t\t}\r\n\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.index = store.getBranchIndex(dnd.config.id);\r\n\t\tdnd.config.parent = task.parent;\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tdnd.lastTaskOfLevel = function (level) {\r\n\t\tvar last_item = null;\r\n\t\tvar store = getStore();\r\n\t\tvar tasks = store.getItems();\r\n\t\tfor (var i = 0, len = tasks.length; i < len; i++) {\r\n\t\t\tif (tasks[i].$level == level) {\r\n\t\t\t\tlast_item = tasks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn last_item ? last_item.id : null;\r\n\t};\r\n\tdnd._getGridPos = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tvar store = getStore();\r\n\t\t// row offset\r\n\t\tvar x = pos.x;\r\n\t\tvar y = e.pos.y - 10;\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\t\t// prevent moving row out of grid_data container\r\n\t\tif (y < pos.y) y = pos.y;\r\n\t\tvar gridHeight = store.countVisible() * config.row_height;\r\n\t\tif (y > pos.y + gridHeight - config.row_height) y = pos.y + gridHeight - config.row_height;\r\n\r\n\t\tpos.x = x;\r\n\t\tpos.y = y;\r\n\t\treturn pos;\r\n\t}, gantt);\r\n\tdnd._getTargetY = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\r\n\t\tvar y = e.pageY - pos.y + (grid.$state.scrollTop || 0);\r\n\t\tif (y < 0)\r\n\t\t\ty = 0;\r\n\t\treturn y;\r\n\t}, gantt);\r\n\tdnd._getTaskByY = gantt.bind(function (y, dropIndex) {\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\ty = y || 0;\r\n\r\n\t\tvar index = Math.floor(y / config.row_height);\r\n\t\tindex = dropIndex < index ? index - 1 : index;\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn null;\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}, gantt);\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd._getGridPos(e);\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\t// setting position of row\r\n\t\tdd.marker.style.left = pos.x + 10 + \"px\";\r\n\t\tdd.marker.style.top = pos.y + \"px\";\r\n\r\n\t\t// highlight row when mouseover\r\n\t\tvar item = store.getItem(dnd.config.id);\r\n\t\tvar targetY = dnd._getTargetY(e);\r\n\t\tvar el = dnd._getTaskByY(targetY, store.getIndexById(item.id));\r\n\r\n\t\tif (!store.exists(el)) {\r\n\t\t\tel = dnd.lastTaskOfLevel(config.order_branch_free ? item.$level : 0);\r\n\t\t\tif (el == dnd.config.id) {\r\n\t\t\t\tel = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction allowedLevel(next, item) {\r\n\t\t\treturn (!(store.isChildOf(over.id, item.id)) && (next.$level == item.$level || config.order_branch_free));\r\n\t\t}\r\n\r\n\t\tif (store.exists(el)) {\r\n\t\t\tvar over = store.getItem(el);\r\n\r\n\t\t\tif (store.getIndexById(over.id) * config.row_height + config.row_height / 2 < targetY) {\r\n\t\t\t\t//hovering over bottom part of item, check can be drop to bottom\r\n\t\t\t\tvar index = store.getIndexById(over.id);\r\n\t\t\t\tvar nextId = store.getNext(over.id);//adds +1 when hovering over placeholder\r\n\t\t\t\tvar next = store.getItem(nextId);\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tif (next.id != item.id) {\r\n\t\t\t\t\t\tover = next; //there is a valid target\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (config.order_branch_free) {\r\n\t\t\t\t\t\t\tif (!(store.isChildOf(item.id, over.id) && store.getChildren(over.id).length == 1))\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstore.move(item.id, store.getBranchIndex(over.id) + 1, store.getParent(over.id));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//we at end of the list, check and drop at the end of list\r\n\t\t\t\t\tnextId = store.getIdByIndex(index);\r\n\t\t\t\t\tnext = store.getItem(nextId);\r\n\r\n\t\t\t\t\tif (allowedLevel(next, item) && next.id != item.id) {\r\n\t\t\t\t\t\tstore.move(item.id, -1, store.getParent(next.id));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (config.order_branch_free) {\r\n\t\t\t\tif (over.id != item.id && allowedLevel(over, item)) {\r\n\t\t\t\t\tif (!store.hasChild(over.id)) {\r\n\t\t\t\t\t\tover.$open = true;\r\n\t\t\t\t\t\tstore.move(item.id, -1, over.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (store.getIndexById(over.id) || config.row_height / 3 < targetY) return;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//if item is on different level, check the one before it\r\n\t\t\tvar index = store.getIndexById(over.id),\r\n\t\t\t\tprevId = store.getIdByIndex(index - 1);\r\n\r\n\t\t\tvar prev = store.getItem(prevId);\r\n\r\n\t\t\tvar shift = 1;\r\n\t\t\twhile ((!prev || prev.id == over.id) && index - shift >= 0) {\r\n\r\n\t\t\t\tprevId = store.getIdByIndex(index - shift);\r\n\t\t\t\tprev = store.getItem(prevId);\r\n\t\t\t\tshift++;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.id == over.id) return;\r\n\t\t\t//replacing item under cursor\r\n\t\t\tif (allowedLevel(over, item) && item.id != over.id) {\r\n\t\t\t\tstore.move(item.id, 0, 0, over.id);\r\n\r\n\t\t\t} else if (over.$level == item.$level - 1 && !store.getChildren(over.id).length) {\r\n\t\t\t\tstore.move(item.id, 0, over.id);\r\n\r\n\t\t\t} else if (prev && (allowedLevel(prev, item)) && (item.id != prev.id)) {\r\n\t\t\t\tstore.move(item.id, -1, store.getParent(prev.id));\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = getStore();\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, dnd.config.parent, dnd.config.index]) === false) {\r\n\t\t\tstore.move(dnd.config.id, dnd.config.index, dnd.config.parent);\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, task.$drop_target]);\r\n\t\t}\r\n\r\n\t\tstore.refresh(task.id);\r\n\t\t//this.refreshData();\r\n\t}, gantt));\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: _init_dnd\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/grid/tasks_grid_dnd.js\n// module id = 56\n// module chunks = 0","var utils = require(\"../../../utils/utils\"),\r\n\ttaskDnD = require(\"./tasks_dnd\"),\r\n\tlinkDnD = require(\"./links_dnd\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\tvar services = gantt.$services;\r\n\t\treturn {\r\n\t\t\tonCreated: function (timeline) {\r\n\t\t\t\tvar config = timeline.$config;\r\n\t\t\t\tconfig.bind = utils.defined(config.bind) ? config.bind : \"task\";\r\n\t\t\t\tconfig.bindLinks = utils.defined(config.bindLinks) ? config.bindLinks : \"link\";\r\n\r\n\t\t\t\ttimeline._linksDnD = linkDnD.createLinkDND();\r\n\t\t\t\ttimeline._tasksDnD = taskDnD.createTaskDND();\r\n\t\t\t\ttimeline._tasksDnD.extend(timeline);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\") {\r\n\t\t\t\t\tthis.extendGantt(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (timeline) {\r\n\t\t\t\tthis._attachDomEvents(gantt);\r\n\r\n\t\t\t\tthis._attachStateProvider(gantt, timeline);\r\n\r\n\t\t\t\ttimeline._tasksDnD.init(timeline, gantt);\r\n\t\t\t\ttimeline._linksDnD.init(timeline, gantt);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\"){\r\n\t\t\t\t\tthis.extendDom(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\t\t\t\tthis._clearDomEvents(gantt);\r\n\t\t\t\tthis._clearStateProvider(gantt);\r\n\t\t\t},\r\n\t\t\textendDom: function(timeline){\r\n\t\t\t\tgantt.$task = timeline.$task;\r\n\t\t\t\tgantt.$task_scale = timeline.$task_scale;\r\n\t\t\t\tgantt.$task_data = timeline.$task_data;\r\n\t\t\t\tgantt.$task_bg = timeline.$task_bg;\r\n\t\t\t\tgantt.$task_links = timeline.$task_links;\r\n\t\t\t\tgantt.$task_bars = timeline.$task_bars;\r\n\t\t\t},\r\n\r\n\t\t\textendGantt: function(timeline){\r\n\t\t\t\tgantt.dateFromPos = gantt.bind(timeline.dateFromPos, timeline);\r\n\t\t\t\tgantt.posFromDate = gantt.bind(timeline.posFromDate, timeline);\r\n\t\t\t\tgantt.getRowTop = gantt.bind(timeline.getRowTop, timeline);\r\n\t\t\t\tgantt.getTaskTop = gantt.bind(timeline.getItemTop, timeline);\r\n\t\t\t\tgantt.getTaskPosition = gantt.bind(timeline.getItemPosition, timeline);\r\n\t\t\t\tgantt.getTaskHeight = gantt.bind(timeline.getItemHeight, timeline);\r\n\t\t\t\tgantt.columnIndexByDate = gantt.bind(timeline.columnIndexByDate, timeline);\r\n\t\t\t\tgantt.roundTaskDates = gantt.bind(timeline.roundTaskDates, timeline);\r\n\t\t\t\tgantt.getScale = gantt.bind(timeline.getScale, timeline);\r\n\t\t\t\tgantt.getTaskNode = function (id) {\r\n\t\t\t\t\treturn timeline._taskRenderer.rendered[id];\r\n\t\t\t\t};\r\n\t\t\t\tgantt.getLinkNode = function (id) {\r\n\t\t\t\t\treturn timeline._linkRenderer.rendered[id];\r\n\t\t\t\t};\r\n\r\n\t\t\t},\r\n\r\n\t\t\t_clearDomEvents: function(){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvents: function(gantt){\r\n\t\t\t\tfunction _delete_link_handler(id, e) {\r\n\t\t\t\t\tif (id && this.callEvent(\"onLinkDblClick\", [id, e])) {\r\n\r\n\t\t\t\t\t\tvar link = this.getLink(id);\r\n\t\t\t\t\t\tif (this.isReadonly(link)) return;\r\n\r\n\t\t\t\t\t\tvar title = \"\";\r\n\t\t\t\t\t\tvar question = this.locale.labels.link + \" \" + this.templates.link_description(this.getLink(id)) + \" \" + this.locale.labels.confirm_link_deleting;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\t\t\tgantt._dhtmlx_confirm(question, title, function () {\r\n\t\t\t\t\t\t\t\tgantt.deleteLink(id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (this.config.touch ? 300 : 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_task_link\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, this.config.link_attribute);\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tthis.callEvent(\"onLinkClick\", [id, e]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_scale_cell\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\t\tvar date = gantt.dateFromPos(pos.x);\r\n\t\t\t\t\tvar coll = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\t\t\tvar coll_date = gantt.getScale().trace_x[coll];\r\n\r\n\t\t\t\t\tgantt.callEvent(\"onScaleClick\", [e, coll_date]);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_task_link\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, gantt.config.link_attribute);\r\n\t\t\t\t\t_delete_link_handler.call(this, id, e);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_link_point\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e),\r\n\t\t\t\t\t\ttask = this.getTask(id);\r\n\r\n\t\t\t\t\tvar link = null;\r\n\t\t\t\t\tif (trg.parentNode && domHelpers.getClassName(trg.parentNode)) {\r\n\t\t\t\t\t\tif (domHelpers.getClassName(trg.parentNode).indexOf(\"_left\") > -1) {\r\n\t\t\t\t\t\t\tlink = task.$target[0];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlink = task.$source[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link)\r\n\t\t\t\t\t\t_delete_link_handler.call(this, link, e);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), this.$task);\r\n\t\t\t},\r\n\r\n\t\t\t_attachStateProvider: function(gantt, timeline){\r\n\t\t\t\tvar self = timeline;\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.registerProvider(\"tasksTimeline\", function(){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tscale_unit: self._tasks ? self._tasks.unit : undefined,\r\n\t\t\t\t\t\tscale_step:  self._tasks ? self._tasks.step  : undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearStateProvider: function(){\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.unregisterProvider(\"tasksTimeline\");\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n})();\r\n\r\nmodule.exports = initializer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/main_timeline_initializer.js\n// module id = 57\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\");\r\nvar timeout = require(\"../../../utils/timeout\");\r\n\r\nfunction createTaskDND(timeline, gantt){\r\n\tvar services = gantt.$services;\r\n\treturn {\r\n\t\tdrag: null,\r\n\t\tdragMultiple: {},\r\n\t\t_events: {\r\n\t\t\tbefore_start: {},\r\n\t\t\tbefore_finish: {},\r\n\t\t\tafter_finish: {}\r\n\t\t},\r\n\t\t_handlers: {},\r\n\t\tinit: function () {\r\n\t\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\t\tthis.clear_drag_state();\r\n\t\t\tvar drag = gantt.config.drag_mode;\r\n\t\t\tthis.set_actions();\r\n\r\n\t\t\tvar stateService = services.getService(\"state\");\r\n\t\t\tstateService.registerProvider(\"tasksDnd\", utils.bind(function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdrag_id : this.drag ? this.drag.id : undefined,\r\n\t\t\t\t\tdrag_mode : this.drag ? this.drag.mode : undefined,\r\n\t\t\t\t\tdrag_from_start : this.drag ? this.drag.left : undefined\r\n\t\t\t\t};\r\n\t\t\t}, this));\r\n\r\n\t\t\tvar evs = {\r\n\t\t\t\t\"before_start\": \"onBeforeTaskDrag\",\r\n\t\t\t\t\"before_finish\": \"onBeforeTaskChanged\",\r\n\t\t\t\t\"after_finish\": \"onAfterTaskDrag\"\r\n\t\t\t};\r\n\t\t\t//for now, all drag operations will trigger the same events\r\n\t\t\tfor (var stage in this._events) {\r\n\t\t\t\tfor (var mode in drag) {\r\n\t\t\t\t\tthis._events[stage][mode] = evs[stage];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._handlers[drag.move] = this._move;\r\n\t\t\tthis._handlers[drag.resize] = this._resize;\r\n\t\t\tthis._handlers[drag.progress] = this._resize_progress;\r\n\t\t},\r\n\t\tset_actions: function () {\r\n\t\t\tvar data = timeline.$task_data;\r\n\t\t\tthis._domEvents.attach(data, \"mousemove\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_move(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mousedown\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_down(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mouseup\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_up(e || event);\r\n\t\t\t}, this));\r\n\t\t},\r\n\r\n\t\tclear_drag_state: function () {\r\n\t\t\tthis.drag = {\r\n\t\t\t\tid: null,\r\n\t\t\t\tmode: null,\r\n\t\t\t\tpos: null,\r\n\t\t\t\tstart_x: null,\r\n\t\t\t\tstart_y: null,\r\n\t\t\t\tobj: null,\r\n\t\t\t\tleft: null\r\n\t\t\t};\r\n\t\t\tthis.dragMultiple = {};\r\n\t\t},\r\n\t\t_resize: function (ev, shift, drag) {\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tif (drag.left) {\r\n\t\t\t\tev.start_date = gantt.dateFromPos(coords_x.start + shift);\r\n\t\t\t\tif (!ev.start_date) {\r\n\t\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tev.end_date = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\t\tif (!ev.end_date) {\r\n\t\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (ev.end_date - ev.start_date < cfg.min_duration) {\r\n\t\t\t\tif (drag.left)\r\n\t\t\t\t\tev.start_date = gantt.calculateEndDate({start_date: ev.end_date, duration: -1, task: ev});\r\n\t\t\t\telse\r\n\t\t\t\t\tev.end_date = gantt.calculateEndDate({start_date: ev.start_date, duration: 1, task: ev});\r\n\t\t\t}\r\n\t\t\tgantt._init_task_timing(ev);\r\n\t\t},\r\n\t\t_resize_progress: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar diffValue = !config.rtl ? (drag.pos.x - coords_x.start) : (coords_x.start - drag.pos.x);\r\n\r\n\t\t\tvar diff = Math.max(0, diffValue);\r\n\t\t\tev.progress = Math.min(1, diff / Math.abs(coords_x.end - coords_x.start));\r\n\t\t},\r\n\r\n\t\t_find_max_shift: function(dragItems, shift){\r\n\t\t\tvar correctShift;\r\n\t\t\tfor(var i in dragItems){\r\n\t\t\t\tvar drag = dragItems[i];\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\t\tvar minX = gantt.posFromDate( new Date(gantt.getState().min_date)),\r\n\t\t\t\t\tmaxX = gantt.posFromDate( new Date(gantt.getState().max_date));\r\n\r\n\t\t\t\tif(coords_x.end + shift > maxX){\r\n\t\t\t\t\tvar maxShift = maxX - coords_x.end;\r\n\t\t\t\t\tif(maxShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = maxShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(coords_x.start + shift < minX){\r\n\t\t\t\t\tvar minShift = minX - coords_x.start;\r\n\t\t\t\t\tif(minShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = minShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn correctShift;\r\n\t\t},\r\n\t\t_move: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tvar new_start = gantt.dateFromPos(coords_x.start + shift),\r\n\t\t\t\tnew_end = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\tif (!new_start) {\r\n\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\tev.end_date = gantt.dateFromPos(gantt.posFromDate(ev.start_date) + (coords_x.end - coords_x.start));\r\n\t\t\t} else if (!new_end) {\r\n\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\tev.start_date = gantt.dateFromPos(gantt.posFromDate(ev.end_date) - (coords_x.end - coords_x.start));\r\n\t\t\t} else {\r\n\t\t\t\tev.start_date = new_start;\r\n\t\t\t\tev.end_date = new_end;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_drag_task_coords: function (t, drag) {\r\n\t\t\tvar start = drag.obj_s_x = drag.obj_s_x || gantt.posFromDate(t.start_date);\r\n\t\t\tvar end = drag.obj_e_x = drag.obj_e_x || gantt.posFromDate(t.end_date);\r\n\t\t\treturn {\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: end\r\n\t\t\t};\r\n\t\t},\r\n\t\t_mouse_position_change: function (oldPos, newPos) {\r\n\t\t\tvar dx = oldPos.x - newPos.x,\r\n\t\t\t\tdy = oldPos.y - newPos.y;\r\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t\t},\r\n\t\t_is_number: function (n) {\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\r\n\t\ton_mouse_move: function (e) {\r\n\t\t\tif (this.drag.start_drag) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\tvar sX = this.drag.start_drag.start_x,\r\n\t\t\t\t\tsY = this.drag.start_drag.start_y;\r\n\r\n\t\t\t\tif ((Date.now() - this.drag.timestamp > 50) ||\r\n\t\t\t\t\t(this._is_number(sX) && this._is_number(sY) && this._mouse_position_change({\r\n\t\t\t\t\t\tx: sX,\r\n\t\t\t\t\t\ty: sY\r\n\t\t\t\t\t}, pos) > 20)) {\r\n\t\t\t\t\tthis._start_dnd(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tif (!timeout(this, 40))//limit update frequency\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._update_on_move(e);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_update_item_on_move: function(shift, id, mode, drag, e){\r\n\t\t\tvar ev = gantt.getTask(id);\r\n\t\t\tvar original = gantt.mixin({}, ev);\r\n\t\t\tvar copy = gantt.mixin({}, ev);\r\n\t\t\tthis._handlers[mode].apply(this, [copy, shift, drag]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\t//gantt._update_parents(drag.id, true);\r\n\t\t\tgantt.callEvent(\"onTaskDrag\", [ev.id, mode, copy, original, e]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t},\r\n\r\n\t\t_update_on_move: function (e) {\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t\t\tif (drag.pos && drag.pos.x == pos.x)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tdrag.pos = pos;\r\n\r\n\t\t\t\tvar curr_date = gantt.dateFromPos(pos.x);\r\n\t\t\t\tif (!curr_date || isNaN(curr_date.getTime()))\r\n\t\t\t\t\treturn;\r\n\r\n\r\n\t\t\t\tvar shift = pos.x - drag.start_x;\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tif (this._handlers[drag.mode]) {\r\n\r\n\t\t\t\t\tif(gantt.isSummaryTask(ev) && gantt.config.drag_project && drag.mode == config.drag_mode.move){\r\n\r\n\t\t\t\t\t\tvar initialDrag = {};\r\n\t\t\t\t\t\tinitialDrag[drag.id] = utils.copy(drag);\r\n\t\t\t\t\t\tvar maxShift = this._find_max_shift(utils.mixin(initialDrag, this.dragMultiple), shift);\r\n\t\t\t\t\t\tif(maxShift !== undefined){\r\n\t\t\t\t\t\t\tshift = maxShift;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t\tfor(var i in this.dragMultiple){\r\n\t\t\t\t\t\t\tvar childDrag =  this.dragMultiple[i];\r\n\t\t\t\t\t\t\tthis._update_item_on_move(shift, childDrag.id, childDrag.mode, childDrag, e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt._update_parents(drag.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ton_mouse_down: function (e, src) {\r\n\t\t\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t\t\t// let's ignore right mouse button then\r\n\t\t\tif (e.button == 2 && e.button !== undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar task = null;\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\ttask = gantt.getTask(id);\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.isReadonly(task) || this.drag.mode) return;\r\n\r\n\t\t\tthis.clear_drag_state();\r\n\r\n\t\t\tsrc = src || (e.target || e.srcElement);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tvar drag = this._get_drag_mode(className, src);\r\n\r\n\t\t\tif (!className || !drag) {\r\n\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!drag) {\r\n\t\t\t\tif (gantt.checkEvent(\"onMouseDown\") && gantt.callEvent(\"onMouseDown\", [className.split(\" \")[0]])) {\r\n\t\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (drag.mode && drag.mode != config.drag_mode.ignore && config[\"drag_\" + drag.mode]) {\r\n\t\t\t\t\tid = gantt.locate(src);\r\n\t\t\t\t\ttask = gantt.copy(gantt.getTask(id) || {});\r\n\r\n\t\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((gantt.isSummaryTask(task) && !config.drag_project) && drag.mode != config.drag_mode.progress) {//only progress drag is allowed for tasks with flexible duration\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdrag.id = id;\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\t\tdrag.start_x = pos.x;\r\n\t\t\t\t\tdrag.start_y = pos.y;\r\n\t\t\t\t\tdrag.obj = task;\r\n\t\t\t\t\tthis.drag.start_drag = drag;\r\n\t\t\t\t\tthis.drag.timestamp = Date.now();\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_dnd_scale_time: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar unit = gantt.getScale().unit,\r\n\t\t\t\tstep = gantt.getScale().step;\r\n\t\t\tif (!config.round_dnd_dates) {\r\n\t\t\t\tunit = 'minute';\r\n\t\t\t\tstep = config.time_step;\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixStart(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(task.start_date, undefined, task))\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\tduration: -1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixEnd(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(new Date(task.end_date - 1), undefined, task))\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\t\tfixStart(task);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.roundDate({date: task.end_date, unit: unit, step: step});\r\n\t\t\t\t\tfixEnd(task);\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\tfixStart(task);\r\n\t\t\t\ttask.end_date = gantt.calculateEndDate(task);\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_working_times: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar drag = drag || {mode: config.drag_mode.move};\r\n\t\t\t\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.getClosestWorkTime({date: task.end_date, dir: 'past', task: task});\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\tgantt.correctTaskWorkTime(task);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_finalize_mouse_up: function(taskId, config, drag, e){\r\n\t\t\tvar ev = gantt.getTask(taskId);\r\n\r\n\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\tthis._fix_working_times(ev, drag);\r\n\t\t\t}\r\n\r\n\t\t\tthis._fix_dnd_scale_time(ev, drag);\r\n\r\n\t\t\tif (!this._fireEvent(\"before_finish\", drag.mode, [taskId, drag.mode, gantt.copy(drag.obj), e])) {\r\n\t\t\t\t//drag.obj._dhx_changed = false;\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tif(taskId == drag.id){\r\n\t\t\t\t\tdrag.obj._dhx_changed = false;\r\n\t\t\t\t\tgantt.mixin(ev, drag.obj, true);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tgantt.refreshTask(ev.id);\r\n\t\t\t} else {\r\n\t\t\t\tvar drag_id = taskId;\r\n\r\n\t\t\t\tgantt._init_task_timing(ev);\r\n\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tgantt.updateTask(ev.id);\r\n\t\t\t\tthis._fireEvent(\"after_finish\", drag.mode, [drag_id, drag.mode, e]);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ton_mouse_up: function (e) {\r\n\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tif (drag.mode && drag.id) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\t//drop\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar dragMultiple = this.dragMultiple;\r\n\t\t\t\tthis._finalize_mouse_up(drag.id, config, drag, e);\r\n\t\t\t\tif(gantt.isSummaryTask(ev) && config.drag_project && drag.mode == config.drag_mode.move){\r\n\t\t\t\t\tfor(var i in dragMultiple){\r\n\t\t\t\t\t\tthis._finalize_mouse_up(dragMultiple[i].id, config, dragMultiple[i], e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.clear_drag_state();\r\n\t\t},\r\n\t\t_get_drag_mode: function (className, el) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar modes = config.drag_mode;\r\n\t\t\tvar classes = (className || \"\").split(\" \");\r\n\t\t\tvar classname = classes[0];\r\n\t\t\tvar drag = {mode: null, left: null};\r\n\t\t\tswitch (classname) {\r\n\t\t\t\tcase \"gantt_task_line\":\r\n\t\t\t\tcase \"gantt_task_content\":\r\n\t\t\t\t\tdrag.mode = modes.move;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_drag\":\r\n\t\t\t\t\tdrag.mode = modes.resize;\r\n\r\n\t\t\t\t\tvar dragProperty = el.getAttribute(\"data-bind-property\");\r\n\r\n\t\t\t\t\tif (dragProperty == \"start_date\") {\r\n\t\t\t\t\t\tdrag.left = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrag.left = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_progress_drag\":\r\n\t\t\t\t\tdrag.mode = modes.progress;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_link_control\":\r\n\t\t\t\tcase \"gantt_link_point\":\r\n\t\t\t\t\tdrag.mode = modes.ignore;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdrag = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn drag;\r\n\r\n\t\t},\r\n\r\n\t\t_start_dnd: function (e) {\r\n\t\t\tvar drag = this.drag = this.drag.start_drag;\r\n\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar id = drag.id;\r\n\t\t\tif (!cfg[\"drag_\" + drag.mode] || !gantt.callEvent(\"onBeforeDrag\", [id, drag.mode, e]) || !this._fireEvent(\"before_start\", drag.mode, [id, drag.mode, e])) {\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t} else {\r\n\t\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\tif(gantt.isSummaryTask(task) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move){\r\n\t\t\t\t\tgantt.eachTask(function(child){\r\n\t\t\t\t\t\tthis.dragMultiple[child.id] = gantt.mixin({\r\n\t\t\t\t\t\t\tid: child.id,\r\n\t\t\t\t\t\t\tobj: child\r\n\t\t\t\t\t\t}, this.drag);\r\n\t\t\t\t\t}, task.id, this);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.callEvent(\"onTaskDragStart\", []);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_fireEvent: function (stage, mode, params) {\r\n\t\t\tgantt.assert(this._events[stage], \"Invalid stage:{\" + stage + \"}\");\r\n\r\n\t\t\tvar trigger = this._events[stage][mode];\r\n\r\n\t\t\tgantt.assert(trigger, \"Unknown after drop mode:{\" + mode + \"}\");\r\n\t\t\tgantt.assert(params, \"Invalid event arguments\");\r\n\r\n\r\n\t\t\tif (!gantt.checkEvent(trigger))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\treturn gantt.callEvent(trigger, params);\r\n\t\t},\r\n\r\n\t\tround_task_dates: function(task){\r\n\t\t\tvar drag_state = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (!drag_state) {\r\n\t\t\t\tdrag_state = {mode: config.drag_mode.move};\r\n\t\t\t}\r\n\t\t\tthis._fix_dnd_scale_time(task, drag_state);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tthis._domEvents.detachAll();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction initTaskDND() {\r\n\tvar _tasks_dnd;\r\n\treturn {\r\n\t\textend: function(timeline){\r\n\t\t\ttimeline.roundTaskDates = function (task) {\r\n\t\t\t\t_tasks_dnd.round_task_dates(task);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tinit: function(timeline, gantt){\r\n\t\t\t_tasks_dnd = createTaskDND(timeline, gantt);\r\n\t\t\t// TODO: entry point for touch handlers, move touch to timeline\r\n\t\t\ttimeline._tasks_dnd = _tasks_dnd;\r\n\t\t\treturn _tasks_dnd.init(gantt);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\t_tasks_dnd.destructor();\r\n\t\t\t_tasks_dnd = null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateTaskDND: initTaskDND\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/tasks_dnd.js\n// module id = 58\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar initLinksDND = function(timeline, gantt) {\r\n\tvar _link_landing,\r\n\t\t_link_target_task,\r\n\t\t_link_target_task_start,\r\n\t\t_link_source_task,\r\n\t\t_link_source_task_start;\r\n\r\n\r\n\tfunction getVisibleMilestoneWidth() {\r\n\t\tvar origWidth = timeline.getItemHeight();//m-s have square shape\r\n\t\treturn Math.round(Math.sqrt(2 * origWidth * origWidth)) - 2;\r\n\t}\r\n\r\n\tfunction isMilestone(task) {\r\n\t\treturn gantt.getTaskType(task.type) == gantt.config.types.milestone;\r\n\t}\r\n\r\n\tfunction getDndState(){\r\n\t\treturn {\r\n\t\t\tlink_source_id : _link_source_task,\r\n\t\t\tlink_target_id : _link_target_task,\r\n\t\t\tlink_from_start : _link_source_task_start,\r\n\t\t\tlink_to_start : _link_target_task_start,\r\n\t\t\tlink_landing_area : _link_landing\r\n\t\t};\r\n\t}\r\n\r\n\tvar services = gantt.$services;\r\n\r\n\tvar state = services.getService(\"state\");\r\n\tvar DnD = services.getService(\"dnd\");\r\n\r\n\tstate.registerProvider(\"linksDnD\", getDndState);\r\n\r\n\tvar dnd = new DnD(timeline.$task_bars, { sensitivity : 0, updates_per_second : 60 }),\r\n\t\tstart_marker = \"task_start_date\",\r\n\t\tend_marker = \"task_end_date\",\r\n\t\tlink_edge_marker = \"gantt_link_point\",\r\n\t\tlink_landing_hover_area = \"gantt_link_control\";\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function(obj,e) {\r\n\t\tvar target = (e.target||e.srcElement);\r\n\t\tresetDndState();\r\n\t\tif(gantt.getState().drag_id)\r\n\t\t\treturn false;\r\n\r\n\t\tif(domHelpers.locateClassName(target, link_edge_marker)){\r\n\t\t\tif(domHelpers.locateClassName(target, start_marker))\r\n\t\t\t\t_link_source_task_start = true;\r\n\r\n\t\t\tvar sid = gantt.locate(e);\r\n\t\t\t_link_source_task = sid;\r\n\r\n\t\t\tvar t = gantt.getTask(sid);\r\n\t\t\tif(gantt.isReadonly(t)){\r\n\t\t\t\tresetDndState();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar shift = 0;\r\n\r\n\t\t\tthis._dir_start = getLinePos(t, !!_link_source_task_start, shift, timeline.$getConfig(), true);\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, this));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function(obj,e) {\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tupdateMarkedHtml(dnd.config.marker);\r\n\t}, this));\r\n\r\n\tfunction getLinePos(task, to_start, shift, cfg, isStart){\r\n\t\tvar taskPos = getMilestonePosition(task, function(task){ return gantt.getTaskPosition(task);}, cfg);\r\n\r\n\t\tvar pos = {x: taskPos.x, y: taskPos.y};\r\n\t\tif(!to_start){\r\n\t\t\tpos.x = taskPos.xEnd;\r\n\t\t}\r\n\r\n\t\t//var pos = gantt._get_task_pos(task, !!to_start);\r\n\t\tpos.y += gantt.config.row_height/2;\r\n\r\n\t\tvar offset = isMilestone(task) && isStart ? 2 : 0;\r\n\r\n\t\tshift = shift || 0;\r\n\t\tif(cfg.rtl)\r\n\t\t\tshift = shift * -1;\r\n\r\n\t\tpos.x += (to_start ? -1 : 1)*shift  - offset;\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tfunction getMilestonePosition(task, getTaskPosition, cfg){\r\n\t\tvar pos = getTaskPosition(task);\r\n\r\n\t\tvar res = {\r\n\t\t\tx: pos.left,\r\n\t\t\ty: pos.top,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height\r\n\t\t};\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tres.xEnd = res.x;\r\n\t\t\tres.x = res.xEnd + res.width;\r\n\t\t}else{\r\n\t\t\tres.xEnd = res.x + res.width;\r\n\t\t}\r\n\t\tres.yEnd = res.y + res.height;\r\n\r\n\t\tif(gantt.getTaskType(task.type) == gantt.config.types.milestone){\r\n\t\t\tvar milestoneWidth = getVisibleMilestoneWidth();\r\n\r\n\t\t\tres.x += (!cfg.rtl ? -1 : 1)*(milestoneWidth / 2);\r\n\t\t\tres.xEnd += (!cfg.rtl ? 1 : -1)*(milestoneWidth / 2);\r\n\r\n\t\t\t//pos.x -= milestoneWidth / 2;\r\n\t\t\t//pos.xEnd += milestoneWidth / 2;\r\n\t\t\tres.width = pos.xEnd - pos.x;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function(obj,e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd.getPosition(e);\r\n\t\tadvanceMarker(dd.marker, pos);\r\n\t\tvar landing = !!domHelpers.locateClassName(e, link_landing_hover_area);\r\n\r\n\t\tvar prevTarget = _link_target_task;\r\n\t\tvar prevLanding = _link_landing;\r\n\t\tvar prevToStart = _link_target_task_start;\r\n\r\n\t\tvar targ = gantt.locate(e),\r\n\t\t\tto_start = true;\r\n\t\tif(landing){\r\n\t\t\t//refreshTask\r\n\t\t\tto_start = !domHelpers.locateClassName(e, end_marker);\r\n\t\t\tlanding = !!targ;\r\n\t\t}\r\n\r\n\t\t_link_target_task = targ;\r\n\t\t_link_landing = landing;\r\n\t\t_link_target_task_start = to_start;\r\n\r\n\t\tif(landing){\r\n\t\t\tvar t = gantt.getTask(targ);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar node = domHelpers.locateClassName(e, link_landing_hover_area);\r\n\t\t\tvar shift = 0;\r\n\t\t\tif(node){\r\n\t\t\t\tshift = Math.floor(node.offsetWidth  / 2);\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_end = getLinePos(t, !!_link_target_task_start,shift, config);\r\n\t\t}else{\r\n\t\t\tthis._dir_end = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t}\r\n\r\n\t\tvar targetChanged = !(prevLanding == landing && prevTarget == targ && prevToStart == to_start);\r\n\t\tif(targetChanged){\r\n\t\t\tif(prevTarget)\r\n\t\t\t\tgantt.refreshTask(prevTarget, false);\r\n\t\t\tif(targ)\r\n\t\t\t\tgantt.refreshTask(targ, false);\r\n\t\t}\r\n\r\n\t\tif(targetChanged){\r\n\t\t\tupdateMarkedHtml(dd.marker);\r\n\t\t}\r\n\r\n\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\r\n\t\treturn true;\r\n\t}, this));\r\n\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function() {\r\n\t\tvar drag = getDndState();\r\n\r\n\t\tif(drag.link_source_id && drag.link_target_id && drag.link_source_id != drag.link_target_id){\r\n\t\t\tvar type = gantt._get_link_type(drag.link_from_start, drag.link_to_start);\r\n\r\n\t\t\tvar link = {source : drag.link_source_id, target: drag.link_target_id, type:type};\r\n\t\t\tif(link.type && gantt.isLinkAllowed(link))\r\n\t\t\t\tgantt.addLink(link);\r\n\t\t}\r\n\r\n\t\tresetDndState();\r\n\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (drag.link_source_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_source_id, false);\r\n\t\t\tif (drag.link_target_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_target_id, false);\r\n\t\t}\r\n\t\tremoveDirectionLine();\r\n\t}, this));\r\n\r\n\tfunction updateMarkedHtml(marker){\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_tooltip\"];\r\n\t\tif(link.link_source_id && link.link_target_id){\r\n\t\t\tif(gantt.isLinkAllowed(link.link_source_id, link.link_target_id, link.link_from_start, link.link_to_start)){\r\n\t\t\t\tcss.push(\"gantt_allowed_link\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_invalid_link\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar className = gantt.templates.drag_link_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start);\r\n\t\tif(className)\r\n\t\t\tcss.push(className);\r\n\r\n\t\tvar html = \"<div class='\"+className+ \"'>\" +\r\n\t\t\tgantt.templates.drag_link(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start) +\r\n\t\t\t\"</div>\";\r\n\t\tmarker.innerHTML = html;\r\n\t}\r\n\r\n\tfunction advanceMarker(marker, pos){\r\n\t\tmarker.style.left = pos.x + 5 + \"px\";\r\n\t\tmarker.style.top = pos.y + 5 + \"px\";\r\n\t}\r\n\r\n\tfunction resetDndState(){\r\n\t\t_link_source_task =\r\n\t\t\t_link_source_task_start =\r\n\t\t\t\t_link_target_task = null;\r\n\t\t_link_target_task_start = true;\r\n\t}\r\n\tfunction showDirectingLine(s_x, s_y, e_x, e_y){\r\n\t\tvar div = getDirectionLine();\r\n\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_direction\"];\r\n\t\tif(gantt.templates.link_direction_class){\r\n\t\t\tcss.push(gantt.templates.link_direction_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start));\r\n\t\t}\r\n\r\n\t\tvar dist =Math.sqrt( (Math.pow(e_x - s_x, 2)) + (Math.pow(e_y - s_y, 2)) );\r\n\t\tdist = Math.max(0, dist - 3);\r\n\t\tif(!dist)\r\n\t\t\treturn;\r\n\r\n\t\tdiv.className = css.join(\" \");\r\n\t\tvar tan = (e_y - s_y)/(e_x - s_x),\r\n\t\t\tangle = Math.atan(tan);\r\n\r\n\t\tif(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 2){\r\n\t\t\tangle += Math.PI;\r\n\t\t}else if(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 3){\r\n\t\t\tangle -= Math.PI;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar sin = Math.sin(angle),\r\n\t\t\tcos = Math.cos(angle),\r\n\t\t\ttop = Math.round(s_y),\r\n\t\t\tleft = Math.round(s_x);\r\n\r\n\r\n\t\tvar style = [\r\n\t\t\t\"-webkit-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-moz-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-ms-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-o-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"width:\" + Math.round(dist) + \"px\"\r\n\t\t];\r\n\r\n\t\tif(window.navigator.userAgent.indexOf(\"MSIE 8.0\") != -1){\r\n\t\t\t//ms-filter breaks styles in ie9, so add it only for 8th\r\n\t\t\tstyle.push(\"-ms-filter: \\\"\" + ieTransform(sin, cos) + \"\\\"\");\r\n\r\n\t\t\tvar shiftLeft = Math.abs(Math.round(s_x - e_x)),\r\n\t\t\t\tshiftTop = Math.abs(Math.round(e_y - s_y));\r\n\t\t\t//fix rotation axis\r\n\t\t\tswitch(coordinateCircleQuarter(s_x, e_x, s_y, e_y)){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstyle.push(\"top:\" +  top + \"px\");\r\n\t\tstyle.push(\"left:\" +  left + \"px\");\r\n\r\n\t\tdiv.style.cssText = style.join(\";\");\r\n\t}\r\n\r\n\tfunction ieTransform(sin, cos){\r\n\t\treturn \"progid:DXImageTransform.Microsoft.Matrix(\"+\r\n\t\t\t\"M11 = \"+cos+\",\"+\r\n\t\t\t\"M12 = -\"+sin+\",\"+\r\n\t\t\t\"M21 = \"+sin+\",\"+\r\n\t\t\t\"M22 = \"+cos+\",\"+\r\n\t\t\t\"SizingMethod = 'auto expand'\"+\r\n\t\t\")\";\r\n\t}\r\n\tfunction coordinateCircleQuarter(sX, eX, sY, eY){\r\n\t\tif(eX >= sX){\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tfunction getDirectionLine(){\r\n\t\tif(!dnd._direction){\r\n\t\t\tdnd._direction = document.createElement(\"div\");\r\n\t\t\ttimeline.$task_links.appendChild(dnd._direction);\r\n\t\t}\r\n\t\treturn dnd._direction;\r\n\t}\r\n\tfunction removeDirectionLine(){\r\n\t\tif(dnd._direction){\r\n\t\t\tif (dnd._direction.parentNode)\t//the event line can be detached because of data refresh\r\n\t\t\t\tdnd._direction.parentNode.removeChild(dnd._direction);\r\n\r\n\t\t\tdnd._direction = null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateLinkDND: function(){\r\n\t\treturn {\r\n\t\t\tinit: initLinksDND\r\n\t\t};\r\n\t}\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/links_dnd.js\n// module id = 59\n// module chunks = 0","var initializer = (function() {\r\n\treturn function (gantt) {\r\n\t\treturn {\r\n\r\n\t\t\tgetVerticalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t\t\t},\r\n\t\t\tgetHorizontalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t\t\t},\r\n\r\n\t\t\t_legacyGridResizerClass: function(layout){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar r = resizers[i];\r\n\t\t\t\t\tvar gridResizer = false;\r\n\r\n\t\t\t\t\tvar prev = r.$parent.getPrevSibling(r.$id);\r\n\t\t\t\t\tif(prev && prev.$config && prev.$config.id === \"grid\"){\r\n\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar next = r.$parent.getNextSibling(r.$id);\r\n\t\t\t\t\t\tif(next && next.$config && next.$config.id === \"grid\"){\r\n\t\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(gridResizer){\r\n\t\t\t\t\t\tr.$config.css = (r.$config.css ? r.$config.css + \" \" : \"\") + \"gantt_grid_resize_wrap\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonCreated: function (layout) {\r\n\t\t\t\tvar first = true;\r\n\r\n\t\t\t\tthis._legacyGridResizerClass(layout);\r\n\r\n\t\t\t\tlayout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\t\t\tvar mainTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\tif(mainTimeline)\r\n\t\t\t\t\t\tmainTimeline.$config.hidden = mainTimeline.$parent.$config.hidden = !gantt.config.show_chart;\r\n\r\n\t\t\t\t\tvar mainGrid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\tif(!mainGrid)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar showGrid = gantt.config.show_grid;\r\n\t\t\t\t\tif(first) {\r\n\t\t\t\t\t\tvar colsWidth = mainGrid._getColsTotalWidth();\r\n\t\t\t\t\t\tif(colsWidth !== false){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = colsWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tshowGrid = showGrid && !!gantt.config.grid_width;\r\n\t\t\t\t\t\tgantt.config.show_grid = showGrid;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmainGrid.$config.hidden = mainGrid.$parent.$config.hidden = !showGrid;\r\n\r\n\t\t\t\t\tif(!mainGrid.$config.hidden){\r\n\t\t\t\t\t\t/* restrict grid width due to min_width, max_width, min_grid_column_width */\r\n\t\t\t\t\t\tvar grid_limits = mainGrid._getGridWidthLimits();\r\n\t\t\t\t\t\tif (grid_limits[0] && gantt.config.grid_width < grid_limits[0])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[0];\r\n\t\t\t\t\t\tif (grid_limits[1] && gantt.config.grid_width > grid_limits[1])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[1];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmainGrid.$config.width = gantt.config.grid_width - 1;\r\n\t\t\t\t\t\tif(!first){\r\n\t\t\t\t\t\t\tmainGrid.$parent._setContentSize(mainGrid.$config.width, mainGrid.$config.height);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\r\n\t\t\t\t\t\t\tif(mainGrid.$parent.$config.group){\r\n\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, mainGrid.$parent.$config.width);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfirst = false;\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt._getVerticalScrollbar = this.getVerticalScrollbar;\r\n\t\t\t\tgantt._getHorizontalScrollbar = this.getHorizontalScrollbar;\r\n\r\n\t\t\t\tvar vertical = this.getVerticalScrollbar();\r\n\t\t\t\tvar horizontal = this.getHorizontalScrollbar();\r\n\t\t\t\tif(vertical){\r\n\t\t\t\t\tvertical.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [scrollState.x, oldPos, scrollState.x, newPos]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif(horizontal){\r\n\t\t\t\t\thorizontal.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [oldPos, scrollState.y, newPos, scrollState.y]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayout.attachEvent(\"onResize\", function(){\r\n\t\t\t\t\tif(vertical && !gantt.$scroll_ver){\r\n\t\t\t\t\t\tgantt.$scroll_ver = vertical.$scroll_ver;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(horizontal && !gantt.$scroll_hor){\r\n\t\t\t\t\t\tgantt.$scroll_hor = horizontal.$scroll_hor;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\tonInitialized: function (layout) {\r\n\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\tif(!(grid && grid.$parent && grid.$parent.$parent && grid.$parent.$parent._xLayout)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar parent = grid.$parent.$parent;\r\n\r\n\t\t\t\t//TODO: can't bind resizer to a grid in complex layouts\r\n\t\t\t\tvar next = parent.getNextSibling(grid.$parent.$id);\r\n\t\t\t\tvar gridFirst = true;\r\n\t\t\t\tif(!(next && next.$name == \"resizer\")){\r\n\t\t\t\t\tnext = parent.getPrevSibling(grid.$parent.$id);\r\n\t\t\t\t\tgridFirst = false;\r\n\t\t\t\t}\r\n\t\t\t\t// expose grid resize events\r\n\t\t\t\tif(next && next.$name == \"resizer\"){\r\n\t\t\t\t\tvar initialWidth;\r\n\t\t\t\t\tnext.attachEvent(\"onResizeStart\", function(prevCellWidth, nextCellWidth){\r\n\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tvar limits = grid._getGridWidthLimits();\r\n\r\n\t\t\t\t\t\t\t// min grid width is defined by min widths of its columns, unless grid has horizontal scroll\r\n\t\t\t\t\t\t\tif(!grid.$config.scrollable)\r\n\t\t\t\t\t\t\t\tviewCell.$config.minWidth = limits[0];\r\n\r\n\t\t\t\t\t\t\tviewCell.$config.maxWidth = limits[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinitialWidth = gridFirst ? prevCellWidth : nextCellWidth;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResizeStart\", [initialWidth]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResize\", function(newBehindSize, newFrontSize){\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBehindSize : newFrontSize;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResize\", [initialWidth, newSize]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResizeEnd\", function(oldBackSize, oldFrontSize, newBackSize, newFrontSize){\r\n\r\n\t\t\t\t\t\tvar oldSize = gridFirst ? oldBackSize : oldFrontSize;\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBackSize : newFrontSize;\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tviewCell.$config.minWidth = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar res = gantt.callEvent(\"onGridResizeEnd\", [oldSize, newSize]);\r\n\t\t\t\t\t\tif(res){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = newSize;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/main_layout_initializer.js\n// module id = 60\n// module chunks = 0","module.exports = function(gantt) {\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/data_task_layers.js\n// module id = 61\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar facadeFactory = require(\"./../facades/datastore\");\r\nvar calculateScaleRange = require(\"../gantt_data_range\");\r\nfunction initDataStores(gantt){\r\n\r\n\tvar facade = facadeFactory.create();\r\n\tutils.mixin(gantt, facade);\r\n\tvar tasksStore = gantt.createDatastore({\r\n\t\tname: \"task\",\r\n\t\ttype: \"treeDatastore\",\r\n\t\trootId: function(){return gantt.config.root_id;},\r\n\t\tinitItem: utils.bind(_init_task, gantt)\r\n\t});\r\n\r\n\tvar linksStore = gantt.createDatastore({\r\n\t\tname: \"link\",\r\n\t\tinitItem: utils.bind(_init_link, gantt)\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onBeforeRefreshAll\", function(){\r\n\r\n\t\tvar order = tasksStore.getVisibleItems();\r\n\r\n\t\tfor(var i=0; i < order.length; i++){\r\n\t\t\tvar item = order[i];\r\n\t\t\titem.$index = i;\r\n\t\t\tgantt.resetProjectDates(item);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onFilterItem\", function(id, task){\r\n\t\tvar min = null, max = null;\r\n\t\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) return true;\r\n\t\t\tmin = gantt.config.start_date.valueOf();\r\n\t\t\tmax = gantt.config.end_date.valueOf();\r\n\r\n\t\t\tif (+task.start_date > max || +task.end_date < +min)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tgantt._update_flags(oldId, newId);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterUpdate\", function(id){\r\n\t\tgantt._update_parents(id);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterItemMove\", function(sid, parent, tindex){\r\n\t\tvar source = gantt.getTask(sid);\r\n\r\n\t\tif(this.getNextSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = this.getNextSibling(sid);\r\n\t\t} else if(this.getPrevSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = \"next:\" + this.getPrevSibling(sid);\r\n\t\t}else{\r\n\t\t\tsource.$drop_target = \"next:null\";\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(action == \"delete\"){\r\n\t\t\tgantt._update_flags(id, null);\r\n\t\t}\r\n\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.fit_tasks && action !== \"paint\"){\r\n\t\t\tvar oldState = gantt.getState();\r\n\t\t\tcalculateScaleRange(gantt);\r\n\t\t\tvar newState = gantt.getState();\r\n\r\n\t\t\t//this._init_tasks_range();\r\n\t\t\tif (+oldState.min_date != +newState.min_date || +oldState.max_date != +newState.max_date) {\r\n\t\t\t\tgantt.render();\r\n\r\n\t\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(action == \"add\" || action == \"move\" || action == \"delete\"){\r\n\t\t\tgantt.$layout.resize();\r\n\t\t}else if(!id){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onAfterAdd\", function(id, link){\r\n\t\tsync_link(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterUpdate\", function(id, link){\r\n\t\tsync_links();\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tsync_link_delete(gantt.mixin({id:oldId}, gantt.$data.linksStore.getItem(newId)));\r\n\t\tsync_link(gantt.$data.linksStore.getItem(newId));\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onFilterItem\", function(id, link){\r\n\t\tif (!gantt.config.show_links) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (!(gantt.isTaskVisible(link.source) && gantt.isTaskVisible(link.target)) ||\r\n\t\t\tgantt._isAllowedUnscheduledTask(gantt.getTask(link.source)) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.target)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn gantt.callEvent(\"onBeforeLinkDisplay\", [id, link]);\r\n\t});\r\n\r\n\r\n\t(function(){\r\n\t\t// delete all connected links after task is deleted\r\n\t\tvar treeHelper = require(\"../../utils/task_tree_helpers\");\r\n\t\tvar deletedLinks = {};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n \t\t\tdeletedLinks[id] = treeHelper.getSubtreeLinks(gantt, id);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tif(deletedLinks[id]){\r\n\t\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\t\tfor(var i in deletedLinks[id]){\r\n\t\t\t\t\t\tgantt.$data.linksStore.removeItem(i);\r\n\t\t\t\t\t\tsync_link_delete(deletedLinks[id][i]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeletedLinks[id] = null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t})();\r\n\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, link) {\r\n\t\tgantt.refreshTask(link.source);\r\n\t\tgantt.refreshTask(link.target);\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onParse\", sync_links);\r\n\r\n\tmapEvents({\r\n\t\tsource: linksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onLinkLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeLinkAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterLinkAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeLinkUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterLinkUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeLinkDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterLinkDelete\",\r\n\t\t\t\"onIdChange\":\"onLinkIdChange\"\r\n\t\t}\r\n\t});\r\n\r\n\tmapEvents({\r\n\t\tsource: tasksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onTaskLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeTaskAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterTaskAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeTaskUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterTaskUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeTaskDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterTaskDelete\",\r\n\t\t\t\"onIdChange\":\"onTaskIdChange\",\r\n\t\t\t\"onBeforeItemMove\":\"onBeforeTaskMove\",\r\n\t\t\t\"onAfterItemMove\":\"onAfterTaskMove\",\r\n\t\t\t\"onFilterItem\":\"onBeforeTaskDisplay\",\r\n\t\t\t\"onItemOpen\":\"onTaskOpened\",\r\n\t\t\t\"onItemClose\":\"onTaskClosed\",\r\n\t\t\t\"onBeforeSelect\":\"onBeforeTaskSelected\",\r\n\t\t\t\"onAfterSelect\":\"onTaskSelected\",\r\n\t\t\t\"onAfterUnselect\":\"onTaskUnselected\"\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.$data = {\r\n\t\ttasksStore: tasksStore,\r\n\t\tlinksStore: linksStore\r\n\t};\r\n\r\n\tfunction sync_link(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tsourceTask.$source = sourceTask.$source || [];\r\n\t\t\tsourceTask.$source.push(link.id);\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\ttargetTask.$target = targetTask.$target || [];\r\n\t\t\ttargetTask.$target.push(link.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_link_delete(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tfor(var i = 0; i < sourceTask.$source.length; i++){\r\n\t\t\t\tif(sourceTask.$source[i] == link.id){\r\n\t\t\t\t\tsourceTask.$source.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\tfor(var i = 0; i < targetTask.$target.length; i++){\r\n\t\t\t\tif(targetTask.$target[i] == link.id){\r\n\t\t\t\t\ttargetTask.$target.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_links() {\r\n\t\tvar task = null;\r\n\t\tvar tasks = gantt.$data.tasksStore.getItems();\r\n\r\n\t\tfor(var i = 0, len = tasks.length; i < len; i++){\r\n\t\t\ttask = tasks[i];\r\n\t\t\ttask.$source = [];\r\n\t\t\ttask.$target = [];\r\n\t\t}\r\n\r\n\t\tvar links = gantt.$data.linksStore.getItems();\r\n\t\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\r\n\t\t\tvar link = links[i];\r\n\t\t\tsync_link(link);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapEvents(conf){\r\n\t\tvar mapFrom = conf.source;\r\n\t\tvar mapTo = conf.target;\r\n\t\tfor(var i in conf.events){\r\n\t\t\t(function(sourceEvent, targetEvent){\r\n\t\t\t\tmapFrom.attachEvent(sourceEvent, function(){\r\n\t\t\t\t\treturn mapTo.callEvent(targetEvent, Array.prototype.slice.call(arguments));\r\n\t\t\t\t}, targetEvent);\r\n\t\t\t})(i, conf.events[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _init_task(task) {\r\n\t\tif (!this.defined(task.id))\r\n\t\t\ttask.id = this.uid();\r\n\r\n\t\tif (task.start_date)\r\n\t\t\ttask.start_date = gantt.date.parseDate(task.start_date, \"xml_date\");\r\n\t\tif (task.end_date)\r\n\t\t\ttask.end_date = gantt.date.parseDate(task.end_date, \"xml_date\");\r\n\r\n\r\n\t\tvar duration = null;\r\n\t\tif (task.duration || task.duration === 0) {\r\n\t\t\ttask.duration = duration = task.duration * 1;\r\n\t\t}\r\n\r\n\t\tif (duration) {\r\n\t\t\tif (task.start_date && !task.end_date) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!task.start_date && task.end_date) {\r\n\t\t\t\ttask.start_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\tduration: -task.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\tthis._set_default_task_timing(task);\r\n\t\t}\r\n\t\tthis._init_task_timing(task);\r\n\t\tif (task.start_date && task.end_date)\r\n\t\t\tthis.correctTaskWorkTime(task);\r\n\r\n\t\ttask.$source = [];\r\n\t\ttask.$target = [];\r\n\t\tif (task.parent === undefined) {\r\n\t\t\tthis.setParent(task, this.config.root_id);\r\n\t\t}\r\n\r\n\t\treturn task;\r\n\t}\r\n\r\n\tfunction _init_link(link) {\r\n\t\tif (!this.defined(link.id))\r\n\t\t\tlink.id = this.uid();\r\n\t\treturn link;\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = initDataStores;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/datastore/datastore_hooks.js\n// module id = 62\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar createTasksFacade = require(\"./datastore_tasks\"),\r\n\tcreateLinksFacade = require(\"./datastore_links\"),\r\n\tDataStore = require(\"../datastore/datastore\"),\r\n\tTreeDataStore = require(\"../datastore/treedatastore\"),\r\n\tcreateDatastoreSelect = require(\"../datastore/select\");\r\nvar datastoreRender = require(\"../datastore/datastore_render\");\r\n\r\nfunction getDatastores(){\r\n\tvar storeNames = this.$services.getService(\"datastores\");\r\n\tvar res = [];\r\n\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\tres.push(this.getDatastore(storeNames[i]));\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nvar createDatastoreFacade = function(){\r\n\treturn {\r\n\tcreateDatastore: function(config){\r\n\r\n\t\tvar $StoreType = (config.type || \"\").toLowerCase() == \"treedatastore\" ? TreeDataStore : DataStore;\r\n\r\n\t\tif(config){\r\n\t\t\tvar self = this;\r\n\t\t\tconfig.openInitially = function(){ return self.config.open_tree_initially; };\r\n\t\t}\r\n\r\n\t\tvar store = new $StoreType(config);\r\n\t\tthis.mixin(store, createDatastoreSelect());\r\n\r\n\t\tif(config.name){\r\n\r\n\t\t\tthis.$services.setService(\"datastore:\" + config.name, function(){return store;});\r\n\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\tif(!storeList){\r\n\t\t\t\tstoreList = [];\r\n\t\t\t\tthis.$services.setService(\"datastores\", function(){return storeList;});\r\n\t\t\t}\r\n\t\t\tstoreList.push(config.name);\r\n\r\n\t\t\tdatastoreRender.bindDataStore(config.name, this);\r\n\t\t}\r\n\r\n\t\treturn store;\r\n\t},\r\n\tgetDatastore: function(name){\r\n\t\treturn this.$services.getService(\"datastore:\" + name);\r\n\t},\r\n\r\n\trefreshData: function () {\r\n\t\tvar scrollState = this.getScrollState();\r\n\t\tthis.callEvent(\"onBeforeDataRender\", []);\r\n\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].refresh();\r\n\t\t}\r\n\r\n\t\tif(scrollState.x || scrollState.y){\r\n\t\t\tthis.scrollTo(scrollState.x, scrollState.y);\r\n\t\t}\r\n\t\tthis.callEvent(\"onDataRender\", []);\r\n\t},\r\n\r\n\tisChildOf: function(childId, parentId){\r\n\t\treturn this.$data.tasksStore.isChildOf(childId, parentId);\r\n\t},\r\n\r\n\trefreshTask: function (taskId, refresh_links) {\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tif (task && this.isTaskVisible(taskId)) {\r\n\r\n\t\t\tthis.$data.tasksStore.refresh(taskId, !!this.getState().drag_id);// do quick refresh during drag and drop\r\n\r\n\t\t\tif (refresh_links !== undefined && !refresh_links)\r\n\t\t\t\treturn;\r\n\t\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$source[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$target[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\trefreshLink: function (linkId) {\r\n\t\tthis.$data.linksStore.refresh(linkId);\r\n\t},\r\n\r\n\tsilent: function(code){\r\n\t\tvar gantt = this;\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\tcode();\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\r\n\tclearAll: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].clearAll();\r\n\t\t}\r\n\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t\tthis.callEvent(\"onClear\", []);\r\n\t\tthis.render();\r\n\t},\r\n\t_clear_data: function () {\r\n\t\tthis.$data.tasksStore.clearAll();\r\n\t\tthis.$data.linksStore.clearAll();\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t},\r\n\r\n\tselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tif(!this.config.select_task)\r\n\t\t\treturn false;\r\n\t\tif (id){\r\n\r\n\t\t\tstore.select(id);\r\n\t\t}\r\n\t\treturn store.getSelectedId();\r\n\t},\r\n\tunselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tstore.unselect(id);\r\n\t},\r\n\tgetSelectedId: function() {\r\n\t\treturn this.$data.tasksStore.getSelectedId();\r\n\t}\r\n};\r\n};\r\n\r\nfunction createFacade(){\r\n\tvar res = utils.mixin({}, createDatastoreFacade());\r\n\tutils.mixin(res, createTasksFacade());\r\n\tutils.mixin(res, createLinksFacade());\r\n\treturn res;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = {create: createFacade};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/facades/datastore.js\n// module id = 63\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nvar createTasksDatastoreFacade = function(){\r\n\treturn {\r\n\tgetTask: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument for gantt.getTask\");\r\n\t\tvar task = this.$data.tasksStore.getItem(id);\r\n\t\tthis.assert(task, \"Task not found id=\" + id);\r\n\t\treturn task;\r\n\t},\r\n\tgetTaskByTime: function (from, to) {\r\n\t\tvar p = this.$data.tasksStore.getItems();\r\n\r\n\t\tvar res = [];\r\n\r\n\t\tif (!(from || to)) {\r\n\t\t\tres = p;\r\n\t\t} else {\r\n\t\t\tfrom = +from || -Infinity;\r\n\t\t\tto = +to || Infinity;\r\n\t\t\tfor (var t = 0; t < p.length; t++){\r\n\t\t\t\tvar task = p[t];\r\n\t\t\t\tif (+task.start_date < to && +task.end_date > from)\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tisTaskExists: function (id) {\r\n\t\treturn this.$data.tasksStore.exists(id);\r\n\t},\r\n\tupdateTask: function (id, item) {\r\n\t\tif (!utils.defined(item)) item = this.getTask(id);\r\n\t\tthis.$data.tasksStore.updateItem(id, item);\r\n\t\tthis.refreshTask(id);\r\n\t},\r\n\taddTask: function (item, parent, index) {\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif (!utils.defined(parent)) parent = this.getParent(item) || 0;\r\n\t\tif (!this.isTaskExists(parent)) parent = 0;\r\n\t\tthis.setParent(item, parent);\r\n\r\n\t\treturn this.$data.tasksStore.addItem(item, index, parent);\r\n\t},\r\n\tdeleteTask: function (id) {\r\n\t\treturn this.$data.tasksStore.removeItem(id);\r\n\t},\r\n\tgetTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.count();\r\n\t},\r\n\tgetVisibleTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.countVisible();\r\n\t},\r\n\tgetTaskIndex: function (id) {\r\n\t\treturn this.$data.tasksStore.getBranchIndex(id);\r\n\t},\r\n\tgetGlobalTaskIndex: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument\");\r\n\t\treturn this.$data.tasksStore.getIndexById(id);\r\n\t},\r\n\teachTask: function (code, parent, master) {\r\n\t\treturn this.$data.tasksStore.eachItem(utils.bind(code, master||this), parent);\r\n\t},\r\n\teachParent: function (callback, startTask, master) {\r\n\t\treturn this.$data.tasksStore.eachParent(utils.bind(callback, master || this), startTask);\r\n\t},\r\n\tchangeTaskId: function (oldid, newid) {\r\n\t\tthis.$data.tasksStore.changeId(oldid, newid);\r\n\t\tvar task = this.$data.tasksStore.getItem(newid);\r\n\r\n\t\tvar links = [];\r\n\r\n\t\tif (task.$source) {\r\n\t\t\tlinks = links.concat(task.$source);\r\n\t\t}\r\n\t\tif (task.$target) {\r\n\t\t\tlinks = links.concat(task.$target);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = this.getLink(links[i]);\r\n\t\t\tif (link.source == oldid) {\r\n\t\t\t\tlink.source = newid;\r\n\t\t\t}\r\n\t\t\tif (link.target == oldid) {\r\n\t\t\t\tlink.target = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcalculateTaskLevel: function (item) {\r\n\t\treturn this.$data.tasksStore.calculateItemLevel(item);\r\n\t},\r\n\tgetNext: function (id) {\r\n\t\treturn this.$data.tasksStore.getNext(id);\r\n\t},\r\n\tgetPrev: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrev(id);\r\n\t},\r\n\tgetParent: function (id) {\r\n\t\treturn this.$data.tasksStore.getParent(id);\r\n\t},\r\n\tsetParent: function (task, new_pid, silent) {\r\n\t\treturn this.$data.tasksStore.setParent(task, new_pid, silent);\r\n\t},\r\n\tgetSiblings: function (id) {\r\n\t\treturn this.$data.tasksStore.getSiblings(id).slice();\r\n\t},\r\n\tgetNextSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getNextSibling(id);\r\n\t},\r\n\tgetPrevSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrevSibling(id);\r\n\t},\r\n\tgetTaskByIndex: function(index){\r\n\t\tvar id = this.$data.tasksStore.getIdByIndex(index);\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\treturn this.getTask(id);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetChildren: function (id) {\r\n\t\treturn this.$data.tasksStore.getChildren(id).slice();\r\n\t},\r\n\thasChild: function (id) {\r\n\t\treturn this.$data.tasksStore.hasChild(id);\r\n\t},\r\n\topen: function (id) {\r\n\t\tthis.$data.tasksStore.open(id);\r\n\t},\r\n\tclose: function (id) {\r\n\t\tthis.$data.tasksStore.close(id);\r\n\t},\r\n\tmoveTask: function (sid, tindex, parent) {\r\n\t\tthis.$data.tasksStore.move.apply(this.$data.tasksStore, arguments);\r\n\t},\r\n\tsort: function(field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\t\tthis.$data.tasksStore.sort(field, desc, parent);\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createTasksDatastoreFacade;\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/facades/datastore_tasks.js\n// module id = 64\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\n\r\nvar createLinksStoreFacade = function(){\r\n\treturn {\r\n\tgetLinkCount: function () {\r\n\t\treturn this.$data.linksStore.count();\r\n\t},\r\n\r\n\tgetLink : function (id) {\r\n\t\treturn this.$data.linksStore.getItem(id);\r\n\t},\r\n\r\n\tgetLinks : function () {\r\n\t\treturn this.$data.linksStore.getItems();\r\n\t},\r\n\r\n\tisLinkExists : function (id) {\r\n\t\treturn this.$data.linksStore.exists(id);\r\n\t},\r\n\r\n\taddLink : function (link) {\r\n\t\treturn this.$data.linksStore.addItem(link);\r\n\t},\r\n\r\n\tupdateLink : function (id, data) {\r\n\t\tif (!utils.defined(data))\r\n\t\t\tdata = this.getLink(id);\r\n\t\tthis.$data.linksStore.updateItem(id, data);\r\n\t},\r\n\r\n\tdeleteLink : function (id) {\r\n\t\treturn this.$data.linksStore.removeItem(id);\r\n\t},\r\n\r\n\tchangeLinkId : function (oldid, newid) {\r\n\t\treturn this.$data.linksStore.changeId(oldid, newid);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createLinksStoreFacade;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/facades/datastore_links.js\n// module id = 65\n// module chunks = 0","\r\nfunction createDataStoreSelectMixin(){\r\n\tvar selectedId = null;\r\n\treturn {\r\n\t\tselect: function(id){\r\n\t\t\tif (id){\r\n\r\n\t\t\t\tif(selectedId == id)\r\n\t\t\t\t\treturn selectedId;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tif (!this.callEvent(\"onBeforeSelect\", [id])) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.unselect();\r\n\r\n\t\t\t\tselectedId = id;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tthis.refresh(id);\r\n\t\t\t\t\tthis.callEvent(\"onAfterSelect\", [id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tgetSelectedId: function(){\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tunselect: function(id){\r\n\t\t\tvar id = id || selectedId;\r\n\t\t\tif(!id)\r\n\t\t\t\treturn;\r\n\t\t\tselectedId = null;\r\n\t\t\tif(!this._skip_refresh){\r\n\t\t\t\tthis.refresh(id);\r\n\t\t\t\tthis.callEvent(\"onAfterUnselect\", [id]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createDataStoreSelectMixin;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/datastore/select.js\n// module id = 66\n// module chunks = 0","var storeRenderCreator = function(name, gantt){\r\n\tvar store = gantt.getDatastore(name);\r\n\r\n\tvar itemRepainter = {\r\n\t\trenderItem: function(id, renderer){\r\n\r\n\t\t\tvar renders = renderer.getLayers();\r\n\r\n\t\t\tvar item = store.getItem(id);\r\n\t\t\tif(item && store.isVisible(id)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++)\r\n\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderItems: function(renderer){\r\n\t\t\tvar renderers = renderer.getLayers();\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].clear();\r\n\t\t\t}\r\n\r\n\t\t\tvar data = store.getVisibleItems();\r\n\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].render_items(data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction skipRepaint(gantt){\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\r\n\t\tif(renderer){\r\n\t\t\tif(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshAll\", []);\r\n\t\t\t\titemRepainter.renderItems(renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshAll\", []);\r\n\t\t\t}else{\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshItem\", [item.id]);\r\n\t\t\t\titemRepainter.renderItem(item.id, renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshItem\", [item.id]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tstore.attachEvent(\"onItemOpen\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tstore.attachEvent(\"onItemClose\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tfunction refreshId(renders, oldId, newId, item) {\r\n\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\trenders[i].change_id(oldId, newId);\r\n\t\t}\r\n\t}\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\trefreshId(renderer.getLayers(), oldId, newId, store.getItem(newId));\r\n\t});\r\n\r\n};\r\n\r\nmodule.exports = {\r\n\tbindDataStore: storeRenderCreator\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/datastore/datastore_render.js\n// module id = 67\n// module chunks = 0","var liveUpdateHooks = require(\"./live_update_hooks\");\r\nvar dateHelper = require(\"../../utils/date_helpers\");\r\nvar helpers = require(\"../../utils/helpers\");\r\n\r\nfunction addDataProcessorHooks(gantt) {\r\n\r\n\tgantt.dataProcessor = require(\"./dataprocessor\");\r\n\r\n\tfunction detachDataProcessor(gantt, dp){\r\n\t\tdelete dp.$gantt;\r\n\t\tdelete dp.setGanttMode;\r\n\t\tdelete dp._getRowData;\r\n\t\tdp.afterUpdate = oldAfterUpdate;\r\n\r\n\t\tdelete gantt._dp;\r\n\t\tdelete gantt._change_id;\r\n\t\tdelete gantt._row_style;\r\n\t\tdelete gantt._delete_task;\r\n\t\tdelete gantt._sendTaskOrder;\r\n\r\n\t\thelpers.forEach(dataProcessorHandlers, function(e){\r\n\t\t\tgantt.detachEvent(e);\r\n\t\t});\r\n\t\tdataProcessorHandlers = [];\r\n\t}\r\n\r\n\tvar oldAfterUpdate;\r\n\tfunction extendDataProcessor(gantt, dp){\r\n\t\tdp.setGanttMode = function(mode){\r\n\t\t\tvar modes = dp.modes || {};\r\n\t\t\tif(dp._ganttMode){\r\n\t\t\t\tmodes[dp._ganttMode] = {\r\n\t\t\t\t\t_in_progress : dp._in_progress,\r\n\t\t\t\t\t_invalid : dp._invalid,\r\n\t\t\t\t\tupdatedRows : dp.updatedRows\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar newState = modes[mode];\r\n\t\t\tif(!newState){\r\n\t\t\t\tnewState = modes[mode] = {\r\n\t\t\t\t\t_in_progress : {},\r\n\t\t\t\t\t_invalid : {},\r\n\t\t\t\t\tupdatedRows : []\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdp._in_progress = newState._in_progress;\r\n\t\t\tdp._invalid = newState._invalid;\r\n\t\t\tdp.updatedRows = newState.updatedRows;\r\n\t\t\tdp.modes = modes;\r\n\t\t\tdp._ganttMode = mode;\r\n\t\t};\r\n\r\n\t\toldAfterUpdate = dp.afterUpdate;\r\n\t\tdp.afterUpdate = function(){\r\n\t\t\tvar xml;\r\n\t\t\tif(arguments.length == 3){\r\n\t\t\t\txml = arguments[1];\r\n\t\t\t}else{\r\n\t\t\t\t// old dataprocessor\r\n\t\t\t\txml = arguments[4];\r\n\t\t\t}\r\n\t\t\tvar mode = dp._ganttMode;\r\n\t\t\tvar reqUrl = xml.filePath;\r\n\r\n\t\t\tif(this._tMode != \"REST\"){\r\n\t\t\t\tif (reqUrl.indexOf(\"gantt_mode=links\") != -1) {\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(reqUrl.indexOf(\"/link\") > reqUrl.indexOf(\"/task\")){\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdp.setGanttMode(mode);\r\n\r\n\t\t\tvar res = oldAfterUpdate.apply(dp, arguments);\r\n\t\t\tdp.setGanttMode(mode);\r\n\t\t\treturn res;\r\n\t\t};\r\n\r\n\t\tdp._getRowData=gantt.bind(function(id, pref) {\r\n\t\t\tvar task;\r\n\t\t\tif (dp._ganttMode == \"tasks\")\r\n\t\t\t\ttask = this.isTaskExists(id) ? this.getTask(id) : { id: id };\r\n\t\t\telse\r\n\t\t\t\ttask = this.isLinkExists(id) ? this.getLink(id) : { id: id };\r\n\r\n\t\t\ttask = gantt.copy(task);\r\n\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in task) {\r\n\t\t\t\tif (key.substr(0, 1) == \"$\") continue;\r\n\t\t\t\tvar value = task[key];\r\n\t\t\t\tif (dateHelper.isDate(value))\r\n\t\t\t\t\tdata[key] = this.templates.xml_format(value);\r\n\t\t\t\telse if(value === null)\r\n\t\t\t\t\tdata[key] = \"\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdata[key] = value;\r\n\t\t\t}\r\n\r\n\t\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\t\tif(taskTiming.$no_start){\r\n\t\t\t\ttask.start_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tif(taskTiming.$no_end){\r\n\t\t\t\ttask.end_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tdata[dp.action_param] = this.getUserData(id, dp.action_param);\r\n\t\t\treturn data;\r\n\t\t}, gantt);\r\n\t}\r\n\r\n\tfunction extendGantt(gantt, dp){\r\n\t\tgantt._change_id = gantt.bind(function(oldid, newid) {\r\n\t\t\tif (dp._ganttMode != \"tasks\")\r\n\t\t\t\tthis.changeLinkId(oldid, newid);\r\n\t\t\telse\r\n\t\t\t\tthis.changeTaskId(oldid, newid);\r\n\t\t}, this);\r\n\r\n\t\tgantt._row_style = function(row_id, classname){\r\n\t\t\tif (dp._ganttMode != \"tasks\") return;\r\n\t\t\tif(!gantt.isTaskExists(row_id))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar task = gantt.getTask(row_id);\r\n\t\t\ttask.$dataprocessor_class = classname;\r\n\t\t\tgantt.refreshTask(row_id);\r\n\t\t};\r\n\r\n\t\t// fake method for dataprocessor\r\n\t\tgantt._delete_task = function(row_id, node){};\r\n\r\n\t\tgantt._sendTaskOrder = function(id, item){\r\n\t\t\tif(item.$drop_target){\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tthis.getTask(id).target = item.$drop_target;\r\n\t\t\t\tdp.setUpdated(id, true,\"order\");\r\n\t\t\t\tdelete this.getTask(id).$drop_target;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis._dp = dp;\r\n\t}\r\n\r\n\tfunction attachDataProcessorEvents(gantt, dp){\r\n\t\tfunction clientSideDelete(id){\r\n\t\t\tvar updated = dp.updatedRows.slice();\r\n\t\t\tvar clientOnly = false;\r\n\r\n\t\t\tfor(var i = 0; i < updated.length && !dp._in_progress[id]; i++){\r\n\t\t\t\tif(updated[i] == id ){\r\n\t\t\t\t\tif(gantt.getUserData(id, \"!nativeeditor_status\") == \"inserted\"){\r\n\t\t\t\t\t\tclientOnly = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdp.setUpdated(id,false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn clientOnly;\r\n\t\t}\r\n\r\n\t\tfunction getTaskLinks(task){\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tif (task.$source) {\r\n\t\t\t\tlinks = links.concat(task.$source);\r\n\t\t\t}\r\n\t\t\tif (task.$target) {\r\n\t\t\t\tlinks = links.concat(task.$target);\r\n\t\t\t}\r\n\r\n\t\t\treturn links;\r\n\t\t}\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true,\"inserted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true);\r\n\r\n\t\t\tgantt._sendTaskOrder(id, item);\r\n\t\t}));\r\n\r\n\t\tvar treeHelper = require(\"../../utils/task_tree_helpers\");\r\n\t\tvar cascadeDelete = {};\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n\t\t\tif(!gantt.config.cascade_delete){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tcascadeDelete[id] = {\r\n\t\t\t\ttasks: treeHelper.getSubtreeTasks(gantt, id),\r\n\t\t\t\tlinks: treeHelper.getSubtreeLinks(gantt, id)\r\n\t\t\t};\r\n\t\t\treturn true;\r\n\t\t}));\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t// not send delete request if item is not inserted into the db - just remove it from the client\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tif(gantt.config.cascade_delete && cascadeDelete[id]){\r\n\t\t\t\tvar dpMode = dp.updateMode;\r\n\t\t\t\tdp.setUpdateMode(\"off\");\r\n\r\n\t\t\t\tvar cascade = cascadeDelete[id];\r\n\t\t\t\tfor(var i in cascade.tasks){\r\n\t\t\t\t\tif(!clientSideDelete(i)){\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tfor(var i in cascade.links){\r\n\t\t\t\t\tif(!clientSideDelete(i)){\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcascadeDelete[id] = null;\r\n\r\n\t\t\t\tif(dpMode != \"off\"){\r\n\t\t\t\t\tdp.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t\tdp.setUpdateMode(dpMode);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdp.setUpdated(id,true,\"deleted\");\r\n\r\n\t\t\tif(dp.updateMode != 'off' && !dp._tSend){\r\n\t\t\t\tdp.sendAllData();\r\n\t\t\t}\r\n\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true);\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onRowDragEnd\", function(id, target) {\r\n\t\t\tgantt._sendTaskOrder(id, gantt.getTask(id));\r\n\t\t}));\r\n\r\n\t\tvar tasks = null,\r\n\t\t\tlinks = null;\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onTaskIdChange\",function(oldId, newId){\r\n\t\t\tif(!dp._waitMode) return;\r\n\r\n\t\t\tvar children = gantt.getChildren(newId);\r\n\t\t\tif(children.length) {\r\n\t\t\t\ttasks = tasks || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\tvar ch = this.getTask(children[i]);\r\n\t\t\t\t\ttasks[ch.id] = ch;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar item = this.getTask(newId),\r\n\t\t\t\titemLinks = getTaskLinks(item);\r\n\r\n\t\t\tif(itemLinks.length) {\r\n\t\t\t\tlinks = links || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < itemLinks.length; i++) {\r\n\t\t\t\t\tvar link = this.getLink(itemLinks[i]);\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tdp.attachEvent(\"onAfterUpdateFinish\", function(){\r\n\t\t\tif(tasks || links){\r\n\t\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\t\tfor(var id in tasks){\r\n\t\t\t\t\t\tgantt.updateTask(tasks[id].id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor(var id in links){\r\n\t\t\t\t\t\tgantt.updateLink(links[id].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = null;\r\n\t\t\t\t\tlinks = null;\r\n\t\t\t\t});\r\n\t\t\t\tif(tasks) {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"tasks\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"links\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onBeforeDataSending\", function() {\r\n\t\t\tvar url = this._serverProcessor;\r\n\t\t\tif(this._tMode == \"REST\"){\r\n\t\t\t\tvar mode = this._ganttMode.substr(0, this._ganttMode.length - 1);// links, tasks -> /link/id, /task/id\r\n\r\n\t\t\t\turl = url.substring(0, url.indexOf(\"?\") > -1 ? url.indexOf(\"?\") : url.length);\r\n\t\t\t\t//editing=true&\r\n\t\t\t\tthis.serverProcessor = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + mode;\r\n\t\t\t}else{\r\n\t\t\t\tthis.serverProcessor = url + gantt.ajax.urlSeparator(url) + \"gantt_mode=\" + this._ganttMode;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\t}\r\n\r\n\tvar dataProcessorHandlers = [];\r\n\r\n\tgantt._dp_init = function(dp) {\r\n\t\tgantt.assert(!this._dp, \"The dataProcessor is already attached to this gantt instance\");\r\n\r\n\t\tdp.setTransactionMode(\"POST\", true);\r\n\t\tdp.serverProcessor += (dp.serverProcessor.indexOf(\"?\") != -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\tdp._serverProcessor = dp.serverProcessor;\r\n\t\tdp.$gantt = this;\r\n\t\tdp.styles = {\r\n\t\t\tupdated:\"gantt_updated\",\r\n\t\t\torder:\"gantt_updated\",\r\n\t\t\tinserted:\"gantt_inserted\",\r\n\t\t\tdeleted:\"gantt_deleted\",\r\n\t\t\tinvalid:\"gantt_invalid\",\r\n\t\t\terror:\"gantt_error\",\r\n\t\t\tclear:\"\"\r\n\t\t};\r\n\r\n\t\tdp._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"];\r\n\r\n\t\textendDataProcessor.call(this, gantt, dp);\r\n\t\textendGantt.call(this, gantt, dp);\r\n\t\tattachDataProcessorEvents.call(this, gantt, dp);\r\n\r\n\t\tdp.attachEvent(\"onDestroy\", function(){\r\n\t\t\tdetachDataProcessor(gantt, dp);\r\n\t\t});\r\n\t\tliveUpdateHooks(gantt, dp);\r\n\t};\r\n\r\n\tgantt.getUserData = function(id, name) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (this.userdata[id] && this.userdata[id][name]) return this.userdata[id][name];\r\n\t\treturn \"\";\r\n\t};\r\n\tgantt.setUserData = function(id, name, value) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (!this.userdata[id]) this.userdata[id] = {};\r\n\t\tthis.userdata[id][name] = value;\r\n\t};\r\n}\r\n\r\nmodule.exports = addDataProcessorHooks;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/dataprocessor/hooks.js\n// module id = 68\n// module chunks = 0","var utils = require (\"../../utils/utils\");\r\n\r\nfunction updateCallback(upd, id) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild);\r\n\tif(!this.isTaskExists(id))\r\n\t\treturn;\r\n\tvar objData = this.getTask(id);\r\n\tfor(var key in data) {\r\n\t\tvar property = data[key];\r\n\t\tswitch(key) {\r\n\t\t\tcase \"id\":\r\n\t\t\t\tcontinue;\r\n\t\t\tcase \"start_date\":\r\n\t\t\tcase \"end_date\":\r\n\t\t\t\tproperty = this.templates.xml_date(property);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"duration\":\r\n\t\t\t\tobjData.end_date = this.calculateEndDate({start_date: objData.start_date, duration: property, task:objData});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tobjData[key] = property;\r\n\t}\r\n\tthis.updateTask(id);\r\n\tthis.refreshData();\r\n}\r\n\r\nfunction insertCallback(upd, id, parent, mode) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild),\r\n\t\tmethods = {\r\n\t\t\tadd: this.addTask,\r\n\t\t\tisExist: this.isTaskExists\r\n\t\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods.add = this.addLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\treturn;\r\n\tdata.id = id;\r\n\tmethods.add.call(this, data);\r\n}\r\n\r\nfunction deleteCallback(upd, id, parent, mode) {\r\n\tvar methods = {\r\n\t\t\"delete\": this.deleteTask,\r\n\t\t\"isExist\": this.isTaskExists\r\n\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods[\"delete\"] = this.deleteLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\tmethods[\"delete\"].call(this, id);\r\n}\r\n\r\nfunction patchDataProcessor(gantt, dataprocessor){\r\n\tdataprocessor.attachEvent(\"insertCallback\", utils.bind(insertCallback, gantt));\r\n\tdataprocessor.attachEvent(\"updateCallback\",  utils.bind(deleteCallback, gantt));\r\n\tdataprocessor.attachEvent(\"deleteCallback\",  utils.bind(deleteCallback, gantt));\r\n}\r\n\r\nmodule.exports = patchDataProcessor;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/dataprocessor/live_update_hooks.js\n// module id = 69\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\n\r\n/**\r\n\t* \t@desc: constructor, data processor object \r\n\t*\t@param: serverProcessorURL - url used for update\r\n\t*\t@type: public\r\n\t*/\r\nvar dataProcessor = function(serverProcessorURL){\r\n    this.serverProcessor = serverProcessorURL;\r\n    this.action_param=\"!nativeeditor_status\";\r\n    \r\n\tthis.object = null;\r\n\tthis.updatedRows = []; //ids of updated rows\r\n\t\r\n\tthis.autoUpdate = true;\r\n\tthis.updateMode = \"cell\";\r\n\tthis._tMode=\"GET\"; \r\n\tthis._headers = null;\r\n\tthis._payload = null;\r\n\tthis.post_delim = \"_\";\r\n\t\r\n    this._waitMode=0;\r\n    this._in_progress={};//?\r\n    this._invalid={};\r\n    this.mandatoryFields=[];\r\n    this.messages=[];\r\n    \r\n    this.styles={\r\n    \tupdated:\"font-weight:bold;\",\r\n    \tinserted:\"font-weight:bold;\",\r\n    \tdeleted:\"text-decoration : line-through;\",\r\n    \tinvalid:\"background-color:FFE0E0;\",\r\n    \tinvalid_cell:\"border-bottom:2px solid red;\",\r\n    \terror:\"color:red;\",\r\n    \tclear:\"font-weight:normal;text-decoration:none;\"\r\n    };\r\n    \r\n    this.enableUTFencoding(true);\r\n\teventable(this);\r\n\r\n    return this;\r\n};\r\n\r\ndataProcessor.prototype={\r\n\tsetTransactionMode:function(mode,total){\r\n\t\tif (typeof mode == \"object\"){\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif(utils.defined(mode.headers)){\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif(utils.defined(mode.payload)){\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\r\n     \t    this._tMode=mode;\r\n\t\t\tthis._tSend=total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"REST\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"JSON\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-type\"] = \"application/json\";\r\n\t\t}\r\n    },\r\n    escape:function(data){\r\n    \tif (this._utf)\r\n    \t\treturn encodeURIComponent(data);\r\n    \telse\r\n        \treturn escape(data);\r\n\t},\r\n    /**\r\n\t* \t@desc: allows to set escaping mode\r\n\t*\t@param: true - utf based escaping, simple - use current page encoding\r\n\t*\t@type: public\r\n\t*/\t\r\n\tenableUTFencoding:function(mode){\r\n        this._utf=!!mode;\r\n    },\r\n    /**\r\n\t* \t@desc: allows to define, which column may trigger update\r\n\t*\t@param: val - array or list of true/false values\r\n\t*\t@type: public\r\n\t*/\r\n\tsetDataColumns:function(val){\r\n\t\tthis._columns=(typeof val == \"string\")?val.split(\",\"):val;\r\n    },\r\n    /**\r\n\t* \t@desc: get state of updating\r\n\t*\t@returns:   true - all in sync with server, false - some items not updated yet.\r\n\t*\t@type: public\r\n\t*/\r\n\tgetSyncState:function(){\r\n\t\treturn !this.updatedRows.length;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable named field for data syncing, will use column ids for grid\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenableDataNames:function(mode){\r\n\t\tthis._endnm= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable mode , when only changed fields and row id send to the server side, instead of all fields in default mode\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenablePartialDataSend:function(mode){\r\n\t\tthis._changed= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: set if rows should be send to server automaticaly\r\n\t*\t@param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdateMode:function(mode,dnd){\r\n\t\tthis.autoUpdate = (mode==\"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd=dnd;\r\n\t},\r\n\tignore:function(code,master){\r\n\t\tthis._silent_mode=true;\r\n\t\tcode.call(master||window);\r\n\t\tthis._silent_mode=false;\r\n\t},\r\n\t/**\r\n\t* \t@desc: mark row as updated/normal. check mandatory fields,initiate autoupdate (if turned on)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@param: state - true for \"updated\", false for \"not updated\"\r\n\t*\t@param: mode - update mode name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdated:function(rowId,state,mode){\r\n\t\tif (this._silent_mode) return;\r\n\t\tvar ind=this.findRow(rowId);\r\n\t\t\r\n\t\tmode=mode||\"updated\";\r\n\t\tvar existing = this.obj.getUserData(rowId,this.action_param);\r\n\t\tif (existing && mode == \"updated\") mode=existing;\r\n\t\tif (state){\r\n\t\t\tthis.set_invalid(rowId,false); //clear previous error flag\r\n\t\t\tthis.updatedRows[ind]=rowId;\r\n\t\t\tthis.obj.setUserData(rowId,this.action_param,mode);\r\n\t\t\tif (this._in_progress[rowId]) \r\n\t\t\t\tthis._in_progress[rowId]=\"wait\";\r\n\t\t} else{\r\n\t\t\tif (!this.is_invalid(rowId)){\r\n\t\t\t\tthis.updatedRows.splice(ind,1);\r\n\t\t\t\tthis.obj.setUserData(rowId,this.action_param,\"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//clear changed flag\r\n\t\tif (!state)\r\n\t\t\tthis._clearUpdateFlag(rowId);\r\n     \t\t\t\r\n\t\tthis.markRow(rowId,state,mode);\r\n\t\tif (state && this.autoUpdate) this.sendData(rowId);\r\n\t},\r\n\t_clearUpdateFlag:function(id){},\r\n\tmarkRow:function(id,state,mode){ \r\n\t\tvar str=\"\";\r\n\t\tvar invalid=this.is_invalid(id);\r\n\t\tif (invalid){\r\n        \tstr=this.styles[invalid];\r\n        \tstate=true;\r\n    \t}\r\n\t\tif (this.callEvent(\"onRowMark\",[id,state,mode,invalid])){\r\n\t\t\t//default logic\r\n\t\t\tstr=this.styles[state?mode:\"clear\"]+str;\r\n\t\t\t\r\n        \tthis.obj[this._methods[0]](id,str);\r\n\r\n\t\t\tif (invalid && invalid.details){\r\n\t\t\t\tstr+=this.styles[invalid+\"_cell\"];\r\n\t\t\t\tfor (var i=0; i < invalid.details.length; i++)\r\n\t\t\t\t\tif (invalid.details[i])\r\n        \t\t\t\tthis.obj[this._methods[1]](id,i,str);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetState:function(id){\r\n\t\treturn this.obj.getUserData(id,this.action_param);\r\n\t},\r\n\tis_invalid:function(id){\r\n\t\treturn this._invalid[id];\r\n\t},\r\n\tset_invalid:function(id,mode,details){ \r\n\t\tif (details) mode={value:mode, details:details, toString:function(){ return this.value.toString(); }};\r\n\t\tthis._invalid[id]=mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: check mandatory fields and varify values of cells, initiate update (if specified)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@type: public\r\n\t*/\r\n\tcheckBeforeUpdate:function(rowId){ \r\n\t\treturn true;\r\n\t},\r\n\t/**\r\n\t* \t@desc: send row(s) values to server\r\n\t*\t@param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t*\t@type: public\r\n\t*/\r\n\tsendData:function(rowId){\r\n\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return;\r\n\t\tif (this.obj.editStop) this.obj.editStop();\r\n\t\r\n\t\t\r\n\t\tif(typeof rowId == \"undefined\" || this._tSend) return this.sendAllData();\r\n\t\tif (this._in_progress[rowId]) return false;\r\n\t\t\r\n\t\tthis.messages=[];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\",[rowId,this.messages])) return false;\r\n\t\tthis._beforeSendData(this._getRowData(rowId),rowId);\r\n    },\r\n    _beforeSendData:function(data,rowId){\r\n    \tif (!this.callEvent(\"onBeforeUpdate\",[rowId,this.getState(rowId),data])) return false;\t\r\n\t\tthis._sendData(data,rowId);\r\n    },\r\n    serialize:function(data, id){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tif (typeof id != \"undefined\")\r\n    \t\treturn this.serialize_one(data,\"\");\r\n    \telse{\r\n    \t\tvar stack = [];\r\n    \t\tvar keys = [];\r\n    \t\tfor (var key in data)\r\n    \t\t\tif (data.hasOwnProperty(key)){\r\n    \t\t\t\tstack.push(this.serialize_one(data[key],key+this.post_delim));\r\n    \t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n    \t\tstack.push(\"ids=\"+this.escape(keys.join(\",\")));\r\n    \t\tif (this.$gantt.security_key)\r\n\t\t\t\tstack.push(\"dhx_security=\"+this.$gantt.security_key);\r\n    \t\treturn stack.join(\"&\");\r\n    \t}\r\n    },\r\n    serialize_one:function(data, pref){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tvar stack = [];\r\n    \tfor (var key in data)\r\n    \t\tif (data.hasOwnProperty(key)){\r\n    \t\t\tif ((key == \"id\" || key == this.action_param) && this._tMode == \"REST\") continue;\r\n    \t\t\tstack.push(this.escape((pref||\"\")+key)+\"=\"+this.escape(data[key]));\r\n    \t\t}\r\n\t\treturn stack.join(\"&\");\r\n    },\r\n\t_applyPayload:function(url){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._payload)\r\n\t\t\tfor (var key in this._payload)\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\treturn url;\r\n\t},\r\n    _sendData:function(a1,rowId){\r\n    \tif (!a1) return; //nothing to send\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\",rowId?[rowId,this.getState(rowId),a1]:[null, null, a1])) return false;\t\t\t\t\r\n\t\t\r\n    \tif (rowId)\r\n\t\t\tthis._in_progress[rowId]=(new Date()).valueOf();\r\n\r\n\t\tvar that = this;\r\n\t\tvar back = function(xml){\r\n\t\t\tvar ids = [];\r\n\t\t\tif (rowId)\r\n\t\t\t\tids.push(rowId);\r\n\t\t\telse if (a1)\r\n\t\t\t\tfor (var key in a1)\r\n\t\t\t\t\tids.push(key);\r\n\r\n\t\t\treturn that.afterUpdate(that,xml,ids);\r\n\t\t};\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\r\n\t\tvar a3 = this.serverProcessor+(this._user?(ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+this.obj.getUserData(0,\"version\")].join(\"&\")):\"\");\r\n\t\tvar a4 = this._applyPayload(a3);\r\n\r\n\t\tif (this._tMode==\"GET\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4 + ajax.urlSeparator(a4) + this.serialize(a1, rowId),\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tcallback: back,\r\n\t\t\t\theaders: this._headers\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"POST\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: this._headers,\r\n\t\t\t\tdata: this.serialize(a1, rowId),\r\n\t\t\t\tcallback: back\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"JSON\"){\r\n\t\t\tvar action = a1[this.action_param];\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in a1) data[key] = a1[key];\r\n\t\t\tdelete data[this.action_param];\r\n\t\t\tdelete data.id;\r\n\t\t\tdelete data.gr_id;\r\n\r\n\t\t\tajax.query({\r\n\t\t\t\turl:a4,\r\n\t\t\t\tmethod:\"POST\",\r\n\t\t\t\theaders:this._headers,\r\n\t\t\t\tcallback:back,\r\n\t\t\t\tdata:JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: action,\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n        else if (this._tMode == \"REST\"){\r\n        \tvar state = this.getState(rowId);\r\n        \tvar url = a3.replace(/(\\&|\\?)editing\\=true/,\"\");\r\n        \tvar data = \"\";\r\n        \tvar method = \"post\";\r\n\r\n        \tif (state == \"inserted\"){\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t} else if (state == \"deleted\"){\r\n        \t\tmethod = \"DELETE\";\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t} else {\r\n        \t\tmethod = \"PUT\";\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t}\r\n\r\n\r\n        \turl = this._applyPayload(url);\r\n        \tajax.query({\r\n        \t\turl:url,\r\n        \t\tmethod:method,\r\n        \t\theaders:this._headers,\r\n        \t\tdata:data,\r\n        \t\tcallback:back\r\n        \t});\r\n        }\r\n\r\n\t\tthis._waitMode++;\r\n    },\r\n\tsendAllData:function(){\r\n\t\tif (!this.updatedRows.length) return;\t\t\t\r\n\r\n\t\tthis.messages=[]; var valid=true;\r\n\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\tvalid&=this.checkBeforeUpdate(this.updatedRows[i]);\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\",[\"\",this.messages])) return false;\r\n\t\r\n\t\tif (this._tSend) \r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\telse\r\n\t\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\t\tif (!this._in_progress[this.updatedRows[i]]){\r\n\t\t\t\t\tif (this.is_invalid(this.updatedRows[i])) continue;\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(this.updatedRows[i]),this.updatedRows[i]);\r\n\t\t\t\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return; //block send all for tree\r\n\t\t\t\t}\r\n\t},\r\n\r\n\t_getAllData:function(rowId){\r\n\t\tvar out={};\r\n\t\tvar has_one = false;\r\n\t\tfor(var i=0;i<this.updatedRows.length;i++){\r\n\t\t\tvar id=this.updatedRows[i];\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)) continue;\r\n\t\t\tvar row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\",[id,this.getState(id), row])) continue;\r\n\t\t\tout[id]=row;\r\n\t\t\thas_one = true;\r\n\t\t\tthis._in_progress[id]=(new Date()).valueOf();\r\n\t\t}\r\n\t\treturn has_one?out:null;\r\n\t},\r\n\t\r\n\t\r\n\t/**\r\n\t* \t@desc: specify column which value should be varified before sending to server\r\n\t*\t@param: ind - column index (0 based)\r\n\t*\t@param: verifFunction - function (object) which should verify cell value (if not specified, then value will be compared to empty string). Two arguments will be passed into it: value and column name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetVerificator:function(ind,verifFunction){\r\n\t\tthis.mandatoryFields[ind] = verifFunction||(function(value){return (value!==\"\");});\r\n\t},\r\n\t/**\r\n\t* \t@desc: remove column from list of those which should be verified\r\n\t*\t@param: ind - column Index (0 based)\r\n\t*\t@type: public\r\n\t*/\r\n\tclearVerificator:function(ind){\r\n\t\tthis.mandatoryFields[ind] = false;\r\n\t},\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tfindRow:function(pattern){\r\n\t\tvar i=0;\r\n    \tfor(i=0;i<this.updatedRows.length;i++)\r\n\t\t    if(pattern==this.updatedRows[i]) break;\r\n\t    return i;\r\n    },\r\n\r\n   \r\n\t\r\n\r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n\t/**\r\n\t* \t@desc: define custom actions\r\n\t*\t@param: name - name of action, same as value of action attribute\r\n\t*\t@param: handler - custom function, which receives a XMl response content for action\r\n\t*\t@type: private\r\n\t*/\r\n\tdefineAction:function(name,handler){\r\n        if (!this._uActions) this._uActions=[];\r\n            this._uActions[name]=handler;\r\n\t},\r\n\r\n\r\n\r\n\r\n\t/**\r\n*     @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n*     @param: sid - id of item before update\r\n*     @param: tid - id of item after up0ate\r\n*     @param: action - action name\r\n*     @type: public\r\n*     @topic: 0\r\n*/\r\n\tafterUpdateCallback:function(sid, tid, action, btag) {\r\n\t\tvar marker = sid;\r\n\t\tvar correct=(action!=\"error\" && action!=\"invalid\");\r\n\t\tif (!correct) this.set_invalid(sid,action);\r\n\t\tif ((this._uActions)&&(this._uActions[action])&&(!this._uActions[action](btag)))\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\")\r\n\t\t\tthis.setUpdated(sid, false);\r\n\r\n\t\tvar soid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) {\r\n\t\t\t\t\tthis.setUpdated(sid,false);\r\n\t\t\t\t\tthis.obj[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tthis.obj.setUserData(sid, this.action_param, \"true_deleted\");\r\n\t\t\t\tthis.obj[this._methods[3]](sid);\r\n\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\"){\r\n\t\t\tif (correct) this.obj.setUserData(sid, this.action_param,'');\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid,true,this.obj.getUserData(sid,this.action_param));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [soid, action, tid, btag]);\r\n\t},\r\n\r\n\t/**\r\n\t* \t@desc: response from server\r\n\t*\t@param: xml - XMLLoader object with response XML\r\n\t*\t@type: private\r\n\t*/\r\n\tafterUpdate:function(that,xml,id){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\t//try to use json first\r\n\t\tif (window.JSON){\r\n\t\t\tvar tag;\r\n\r\n\t\t\ttry{\r\n\t\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t\t} catch(e){\r\n\r\n\t\t\t\t// empty response also can be processed by json handler\r\n\t\t\t\tif(!xml.xmlDoc.responseText.length){\r\n\t\t\t\t\ttag = {};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(tag){\r\n\t\t\t\tvar action = tag.action || this.getState(id) || \"updated\";\r\n\t\t\t\tvar sid = tag.sid || id[0];\r\n\t\t\t\tvar tid = tag.tid || id[0];\r\n\t\t\t\tthat.afterUpdateCallback(sid, tid, action, tag);\r\n\t\t\t\tthat.finalizeUpdate();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//xml response\r\n\t\tvar top = ajax.xmltop(\"data\", xml.xmlDoc); //fix incorrect content type in IE\r\n\t\tif (!top) return this.cleanUpdate(id);\r\n\t\tvar atag=ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) return this.cleanUpdate(id);\r\n\r\n\t\tfor (var i=0; i<atag.length; i++){\r\n        \tvar btag=atag[i];\r\n\t\t\tvar action = btag.getAttribute(\"type\");\r\n\t\t\tvar sid = btag.getAttribute(\"sid\");\r\n\t\t\tvar tid = btag.getAttribute(\"tid\");\r\n\t\t\t\r\n\t\t\tthat.afterUpdateCallback(sid,tid,action,btag);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t},\r\n\tcleanUpdate:function(id){\r\n\t\tif (id)\r\n\t\t\tfor (var i = 0; i < id.length; i++)\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t},\r\n\tfinalizeUpdate:function(){\r\n\t\tif (this._waitMode) this._waitMode--;\r\n\t\t\r\n\t\tif ((this.obj.mytype==\"tree\" || this.obj._h2) && this.updatedRows.length) \r\n\t\t\tthis.sendData();\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\",[]);\r\n\t\tif (!this.updatedRows.length)\r\n\t\t\tthis.callEvent(\"onFullSync\",[]);\r\n\t},\r\n\r\n\r\n\r\n\r\n\t\r\n\t/**\r\n\t* \t@desc: initializes data-processor\r\n\t*\t@param: anObj - dhtmlxGrid object to attach this data-processor to\r\n\t*\t@type: public\r\n\t*/\r\n\tinit:function(anObj){\r\n\t\tthis.obj = anObj;\r\n\t\tif (this.obj._dp_init) \r\n\t\t\tthis.obj._dp_init(this);\r\n\t},\r\n\t\r\n\t\r\n\tsetOnAfterUpdate:function(ev){\r\n\t\tthis.attachEvent(\"onAfterUpdate\",ev);\r\n\t},\r\n\tenableDebug:function(mode){\r\n\t},\r\n\tsetOnBeforeUpdateHandler:function(func){  \r\n\t\tthis.attachEvent(\"onBeforeDataSending\",func);\r\n\t},\r\n\r\n\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval\r\n\t\t\ttime interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate: function(interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\t\t\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._need_update = false;\r\n\t\t//this._loader = null;\r\n\t\tthis._update_busy = false;\r\n\t\t\r\n\t\tthis.attachEvent(\"onAfterUpdate\",function(sid,action,tid,xml_node){\r\n\t\t\tthis.afterAutoUpdate(sid, action, tid, xml_node);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onFullSync\",function(){\r\n\t\t\tthis.fullSync();\r\n\t\t});\r\n\t\t\r\n\t\tvar self = this;\r\n\t\twindow.setInterval(function(){\r\n\t\t\tself.loadUpdate();\r\n\t\t}, interval);\r\n\t},\r\n\r\n\r\n\t/* process updating request answer\r\n\t\tif status == collision version is depricated\r\n\t\tset flag for autoupdating immidiatly\r\n\t*/\r\n\tafterAutoUpdate: function(sid, action, tid, xml_node) {\r\n\t\tif (action == 'collision') {\r\n\t\t\tthis._need_update = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync: function() {\r\n\t\tif (this._need_update) {\r\n\t\t\tthis._need_update = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates: function(url,callback){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._update_busy) \r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\tthis._update_busy = true;\r\n\t\t\r\n\t\t//this._loader = this._loader || new dtmlXMLLoaderObject(true);\r\n\t\t\r\n\t\t//this._loader.async=true;\r\n\t\t//this._loader.waitCall=callback;\r\n\t\t//this._loader.loadXML(url);\r\n\t\tajax.get(url, callback);\r\n\r\n\t},\r\n\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\t_v: function(node) {\r\n\t\tif (node.firstChild) return node.firstChild.nodeValue;\r\n\t\treturn \"\";\r\n\t},\r\n\r\n\r\n\t/* returns values array of xml nodes array\r\n\t\t@param arr\r\n\t\t\tarray of xml nodes\r\n\t*/\r\n\t_a: function(arr) {\r\n\t\tvar res = [];\r\n\t\tfor (var i=0; i < arr.length; i++) {\r\n\t\t\tres[i]=this._v(arr[i]);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate: function(){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tvar self = this;\r\n\t\tvar version = this.obj.getUserData(0,\"version\");\r\n\t\tvar url = this.serverProcessor+ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\",\"\");\r\n\t\tthis.getUpdates(url, function(xml){\r\n\t\t\tvar vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tself.obj.setUserData(0,\"version\",self._v(vers[0]));\r\n\t\t\t\r\n\t\t\tvar upds = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (upds.length){\r\n\t\t\t\tself._silent_mode = true;\r\n\t\t\t\t\r\n\t\t\t\tfor (var i=0; i<upds.length; i++) {\r\n\t\t\t\t\tvar status = upds[i].getAttribute('status');\r\n\t\t\t\t\tvar id = upds[i].getAttribute('id');\r\n\t\t\t\t\tvar parent = upds[i].getAttribute('parent');\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase 'inserted':\r\n\t\t\t\t\t\t\tself.callEvent(\"insertCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'updated':\r\n\t\t\t\t\t\t\tself.callEvent(\"updateCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'deleted':\r\n\t\t\t\t\t\t\tself.callEvent(\"deleteCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tself._silent_mode = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself._update_busy = false;\r\n\t\t\tself = null;\r\n\t\t});\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tthis.updatedRows = [];\r\n\t\tthis._in_progress={};//?\r\n\t\tthis._invalid={};\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tthis.obj = null;\r\n\t}\r\n\r\n\r\n\r\n};\r\n\r\nmodule.exports = dataProcessor;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/dataprocessor/dataprocessor.js\n// module id = 70\n// module chunks = 0","module.exports = function(gantt){\r\n\tvar modules = [\r\n\t\trequire(\"./autoscroll\"),\r\n\t\trequire(\"./batch_update\"),\r\n\t\trequire(\"./wbs\"),\r\n\t\trequire(\"./jquery_hooks\"),\r\n\t\trequire(\"./dhtmlx_hooks\"),\r\n\t\trequire(\"./resources\")\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/index.js\n// module id = 71\n// module chunks = 0","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tvar scrollRange = 50,\r\n\t\tscrollStep = 30,\r\n\t\tscrollDelay = 10,\r\n\t\tscrollSpeed = 50;\r\n\r\n\tvar interval = null,\r\n\t\tisMove = false,\r\n\t\tdelayTimeout = null,\r\n\t\tbox = {},\r\n\t\tstartPos = {\r\n\t\t\tstarted: false\r\n\t\t},\r\n\t\teventPos = {};\r\n\r\n\tfunction isScrollState() {\r\n\t\tvar dragMarker = !!document.querySelector(\".gantt_drag_marker\");\r\n\t\tvar isResize = !!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\");\r\n\t\tvar isLink = !!document.querySelector(\".gantt_link_direction\");\r\n\t\tisMove = dragMarker && !isResize && !isLink;\r\n\t\treturn !((!gantt.getState().drag_mode && !dragMarker) || isResize);\r\n\t}\r\n\r\n\tfunction defineDelayTimeout(state) {\r\n\t\tif (delayTimeout) {\r\n\t\t\tclearTimeout(delayTimeout);\r\n\t\t\tdelayTimeout = null;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tvar speed = gantt.config.autoscroll_speed;\r\n\t\t\tif (speed && speed < 10) // limit speed value to 10 \r\n\t\t\t\tspeed = 10;\r\n\r\n\t\t\tdelayTimeout = setTimeout(function() {\r\n\t\t\t\tinterval = setInterval(tick, speed || scrollSpeed);\r\n\t\t\t\tbox = domHelpers.getNodePosition(gantt.$task);\r\n\t\t\t}, gantt.config.autoscroll_delay || scrollDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction defineScrollInterval(state) {\r\n\t\tif (state) {\r\n\t\t\tdefineDelayTimeout(true);\r\n\t\t\tif (!startPos.started) {\r\n\t\t\t\tstartPos.x = eventPos.x;\r\n\t\t\t\tstartPos.y = eventPos.y;\r\n\t\t\t\tstartPos.started = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (interval) {\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t\tinterval = null;\r\n\t\t\t}\r\n\t\t\tdefineDelayTimeout(false);\r\n\t\t\tstartPos.started = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autoscrollInterval(event) {\r\n\r\n\t\tvar isScroll = isScrollState();\r\n\r\n\t\tif ((interval || delayTimeout) && !isScroll) { \r\n\t\t\tdefineScrollInterval(false);\r\n\t\t}\r\n\r\n\t\tif (!gantt.config.autoscroll || !isScroll) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\teventPos = {\r\n\t\t\tx: event.clientX,\r\n\t\t\ty: event.clientY\r\n\t\t};\r\n\r\n\t\tif (!interval && isScroll) {\r\n\t\t\tdefineScrollInterval(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tick() {\r\n\r\n\t\tif (!isScrollState()) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar box = domHelpers.getNodePosition(gantt.$task);\r\n\t\tvar posX = eventPos.x - box.x; \r\n\t\tvar posY = eventPos.y - box.y;\r\n\r\n\t\tvar scrollLeft = isMove ? 0 : need_scroll(posX, box.width, startPos.x - box.x);\r\n\t\tvar scrollTop = need_scroll(posY, box.height, startPos.y - box.y);\r\n\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar currentScrollTop = scrollState.y,\r\n\t\t\tscrollOuterHeight = scrollState.inner_height,\r\n\t\t\tscrollInnerHeight = scrollState.height,\r\n\t\t\tcurrentScrollLeft = scrollState.x,\r\n\t\t\tscrollOuterWidth = scrollState.inner_width,\r\n\t\t\tscrollInnerWidth = scrollState.width;\r\n\r\n\t\t// do scrolling only if we have scrollable area to do so\r\n\t\tif (scrollTop && !scrollOuterHeight) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop < 0 && !currentScrollTop) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop > 0 && currentScrollTop + scrollOuterHeight >= scrollInnerHeight + 2) {\r\n\t\t\tscrollTop = 0;\r\n\t\t}\r\n\r\n\t\tif (scrollLeft && !scrollOuterWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft < 0 && !currentScrollLeft) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft > 0 && currentScrollLeft + scrollOuterWidth >= scrollInnerWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t}\r\n\r\n\t\tvar step = gantt.config.autoscroll_step;\r\n\r\n\t\tif (step && step < 2) // limit step value to 2\r\n\t\t\tstep = 2;\r\n\r\n\t\tscrollLeft = scrollLeft * (step || scrollStep);\r\n\t\tscrollTop = scrollTop * (step || scrollStep);\r\n\r\n\t\tif (scrollLeft || scrollTop) {\r\n\t\t\tscroll(scrollLeft, scrollTop);\r\n\t\t} \r\n\r\n\t}\r\n\r\n\tfunction need_scroll(pos, boxSize, startCoord) {\r\n\t\tif ((pos - scrollRange < 0) && (pos < startCoord))\r\n\t\t\treturn -1;\r\n\t\telse if ((pos > boxSize - scrollRange) && (pos > startCoord))\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfunction scroll(left, top) {\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar scrollLeft = null,\r\n\t\t\tscrollTop = null;\r\n\r\n\t\tif (left) {\r\n\t\t\tscrollLeft = scrollState.x + left;\r\n\t\t\tscrollLeft = Math.min(scrollState.width, scrollLeft);\r\n\t\t\tscrollLeft = Math.max(0, scrollLeft);\r\n\t\t}\r\n\r\n\t\tif (top) {\r\n\t\t\tscrollTop = scrollState.y + top;\r\n\t\t\tscrollTop = Math.min(scrollState.height, scrollTop);\r\n\t\t\tscrollTop = Math.max(0, scrollTop);\r\n\t\t}\r\n\r\n\t\tgantt.scrollTo(scrollLeft, scrollTop);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function() {\r\n\t\tgantt.eventRemove(document.body, \"mousemove\", autoscrollInterval);\r\n\t\tgantt.event(document.body, \"mousemove\", autoscrollInterval);\r\n\t});\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/autoscroll.js\n// module id = 72\n// module chunks = 0","function createMethod(gantt){\r\n\tvar methods = {};\r\n\tvar isActive = false;\r\n\tfunction disableMethod(methodName, dummyMethod){\r\n\t\tdummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function(){};\r\n\r\n\t\tif(!methods[methodName]){\r\n\t\t\tmethods[methodName] = this[methodName];\r\n\t\t\tthis[methodName] = dummyMethod;\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethod(methodName){\r\n\t\tif(methods[methodName]){\r\n\t\t\tthis[methodName] = methods[methodName];\r\n\t\t\tmethods[methodName] = null;\r\n\t\t}\r\n\t}\r\n\tfunction disableMethods(methodsHash){\r\n\t\tfor(var i in methodsHash){\r\n\t\t\tdisableMethod.call(this, i, methodsHash[i]);\r\n\t\t}\r\n\t}\r\n\t function restoreMethods(){\r\n\t\tfor(var i in methods){\r\n\t\t\trestoreMethod.call(this, i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction batchUpdatePayload(callback){\r\n\t\ttry{\r\n\t\t\tcallback();\r\n\t\t}catch(e){\r\n\t\t\twindow.console.error(e);\r\n\t\t}\r\n\t}\r\n\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"batchUpdate\", function(){\r\n\t\treturn {\r\n\t\t\tbatch_update: isActive\r\n\t\t};\r\n\t}, true);\r\n\r\n\treturn function batchUpdate(callback, noRedraw) {\r\n\t\tif(isActive){\r\n\t\t\t// batch mode is already active\r\n\t\t\tbatchUpdatePayload(callback);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar call_dp = (this._dp && this._dp.updateMode != \"off\");\r\n\t\tvar dp_mode;\r\n\t\tif (call_dp){\r\n\t\t\tdp_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\r\n\t\t// temporary disable some methods while updating multiple tasks\r\n\t\tvar resetProjects = {};\r\n\t\tvar methods = {\r\n\t\t\t\"render\":true,\r\n\t\t\t\"refreshData\":true,\r\n\t\t\t\"refreshTask\":true,\r\n\t\t\t\"refreshLink\":true,\r\n\t\t\t\"resetProjectDates\":function(task){\r\n\t\t\t\tresetProjects[task.id] = task;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdisableMethods.call(this, methods);\r\n\r\n\t\tisActive = true;\r\n\t\tthis.callEvent(\"onBeforeBatchUpdate\", []);\r\n\r\n\t\tbatchUpdatePayload(callback);\r\n\r\n\t\tthis.callEvent(\"onAfterBatchUpdate\", []);\r\n\r\n\t\trestoreMethods.call(this);\r\n\r\n\t\t// do required updates after changes applied\r\n\t\tfor(var i in resetProjects){\r\n\t\t\tthis.resetProjectDates(resetProjects[i]);\r\n\t\t}\r\n\r\n\t\tisActive = false;\r\n\r\n\t\tif(!noRedraw){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tif (call_dp) {\r\n\t\t\tthis._dp.setUpdateMode(dp_mode);\r\n\t\t\tthis._dp.setGanttMode(\"tasks\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t\tthis._dp.setGanttMode(\"links\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tgantt.batchUpdate = createMethod(gantt);\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/batch_update.js\n// module id = 73\n// module chunks = 0","var createWbs = (function(gantt){\r\n\treturn {\r\n\t_needRecalc: true,\r\n\treset: function(){\r\n\t\tthis._needRecalc = true;\r\n\t},\r\n\t_isRecalcNeeded: function(){\r\n\t\treturn (!this._isGroupSort() && this._needRecalc);\r\n\t},\r\n\t_isGroupSort: function() {\r\n\t\treturn !!(gantt._groups && gantt._groups.is_active());\r\n\t},\r\n\t_getWBSCode: function(task) {\r\n\t\tif(!task) return \"\";\r\n\r\n\t\tif(this._isRecalcNeeded()){\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\r\n\t\tif(task.$virtual) return \"\";\r\n\t\tif(this._isGroupSort()) return task.$wbs || \"\";\r\n\r\n\t\tif(!task.$wbs) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\t\treturn task.$wbs;\r\n\t},\r\n\t_setWBSCode: function(task, value) {\r\n\t\ttask.$wbs = value;\r\n\t},\r\n\tgetWBSCode: function(task) {\r\n\t\treturn this._getWBSCode(task);\r\n\t},\r\n\t_calcWBS: function() {\r\n\t\tif(!this._isRecalcNeeded()) return;\r\n\r\n\t\tvar _isFirst = true;\r\n\t\tgantt.eachTask(function(ch) {\r\n\t\t\tif(_isFirst) {\r\n\t\t\t\t_isFirst = false;\r\n\t\t\t\tthis._setWBSCode(ch, \"1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar _prevSibling = gantt.getPrevSibling(ch.id);\r\n\t\t\tif (_prevSibling !== null) {\r\n\t\t\t\tvar _wbs = gantt.getTask(_prevSibling).$wbs;\r\n\t\t\t\tif(_wbs) {\r\n\t\t\t\t\t_wbs = _wbs.split(\".\");\r\n\t\t\t\t\t_wbs[_wbs.length-1]++;\r\n\t\t\t\t\tthis._setWBSCode(ch, _wbs.join(\".\"));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar _parent = gantt.getParent(ch.id);\r\n\t\t\t\tthis._setWBSCode(ch, gantt.getTask(_parent).$wbs + \".1\");\r\n\t\t\t}\r\n\t\t}, gantt.config.root_id, this);\r\n\r\n\t\tthis._needRecalc = false;\r\n\t}\r\n};\r\n});\r\n\r\nmodule.exports = function(gantt){\r\n\tvar wbs = createWbs(gantt);\r\n\tgantt.getWBSCode = function getWBSCode(task) {\r\n\t\treturn wbs.getWBSCode(task);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeParse\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/wbs.js\n// module id = 74\n// module chunks = 0","if (window.jQuery){\r\n\r\n\t(function( $ ){\r\n\r\n\t\tvar methods = [];\r\n\t\t$.fn.dhx_gantt = function(config){\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (typeof(config) === 'string') {\r\n\t\t\t\tif (methods[config] ) {\r\n\t\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_gantt');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar views = [];\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\t\tif (!this.gantt && !(window.gantt.$root == this)){\r\n\r\n\t\t\t\t\t\t\tvar newgantt = (window.gantt.$container && window.Gantt) ? window.Gantt.getGanttInstance():window.gantt;\r\n\t\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\t\tnewgantt.config[key] = config[key];\r\n\r\n\t\t\t\t\t\t\tnewgantt.init(this);\r\n\t\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\t\tnewgantt.parse(config.data);\r\n\r\n\t\t\t\t\t\t\tviews.push(newgantt);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tviews.push(typeof this.gantt == \"object\" ? this.gantt : window.gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tif (views.length === 1) return views[0];\r\n\t\t\t\treturn views;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t})(jQuery);\r\n\r\n}\r\n\r\n\r\nmodule.exports = null;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/jquery_hooks.js\n// module id = 75\n// module chunks = 0","if (window.dhtmlx){\r\n\r\n\tif (!dhtmlx.attaches)\r\n\t\tdhtmlx.attaches = {};\r\n\r\n\tdhtmlx.attaches.attachGantt=function(start, end, gantt){\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tobj.id = \"gantt_\"+ gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tvar that = this.vs[this.av];\r\n\t\tthat.grid = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tthat.gridId = obj.id;\r\n\t\tthat.gridObj = obj;\r\n\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\treturn this.vs[this[method_name]()].grid;\r\n\t};\r\n\r\n}\r\nif (typeof(window.dhtmlXCellObject) != \"undefined\") {\r\n\r\n\tdhtmlXCellObject.prototype.attachGantt=function(start, end, gantt){\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"gantt_\"+gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\tobj = null;\r\n\t\tthis.callEvent(\"_onContentAttach\",[]);\r\n\r\n\t\treturn this.dataObj;\r\n\t};\r\n}\r\n\r\nmodule.exports = null;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/dhtmlx_hooks.js\n// module id = 76\n// module chunks = 0","function createResourceMethods(gantt){\r\n\r\n\tvar resourceTaskCache = {},\r\n\t\tresourceLoadCache = {};\r\n\r\n\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t\tresourceLoadCache = {};\r\n\t});\r\n\r\n\tfunction getTaskBy(propertyName, propertyValue){\r\n\t\tif(typeof propertyName == \"function\"){\r\n\t\t\treturn filterResourceTasks(propertyName);\r\n\t\t}else{\r\n\t\t\tif(propertyValue instanceof Array){\r\n\t\t\t\treturn getResourceTasks(propertyName, propertyValue);\r\n\t\t\t}else{\r\n\t\t\t\treturn getResourceTasks(propertyName, [propertyValue]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterResourceTasks(filter){\r\n\t\tvar res = [];\r\n\t\tgantt.eachTask(function (task) {\r\n\t\t\tif (filter(task)) {\r\n\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceTasks(property, resourceIds) {\r\n\t\tvar res;\r\n\r\n\t\tvar cacheKey = resourceIds.join(\"_\") + \"_\" + property;\r\n\r\n\t\tvar resourceHash = {};\r\n\t\tfor(var i = 0; i < resourceIds.length; i++){\r\n\t\t\tresourceHash[resourceIds[i]] = true;\r\n\t\t}\r\n\r\n\t\tif(!resourceTaskCache[cacheKey]){\r\n\t\t\tres = resourceTaskCache[cacheKey] = [];\r\n\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\tif (resourceHash[task[property]] && task.type != gantt.config.types.project) {\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceLoad(resourceId, resourceProperty, scale){\r\n\t\tvar cacheKey = [resourceId, resourceProperty, scale.unit, scale.step].join(\"_\");\r\n\t\tvar res;\r\n\t\tif(!resourceTaskCache[cacheKey]){\r\n\t\t\tres = resourceTaskCache[cacheKey] = calculateResourceLoad(resourceId, resourceProperty, scale);\r\n\r\n\t\t}else{\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction calculateResourceLoad(resourceProperty, resourceId, scale) {\r\n\r\n\t\tvar tasks = getTaskBy(resourceProperty, resourceId);\r\n\t\tvar step = scale.unit;\r\n\t\tvar timegrid = {};\r\n\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar task = tasks[i];\r\n\r\n\t\t\tvar currDate = gantt.date[step + \"_start\"](new Date(task.start_date));\r\n\r\n\t\t\twhile (currDate < task.end_date) {\r\n\r\n\t\t\t\tvar date = currDate;\r\n\t\t\t\tcurrDate = gantt.date.add(currDate, 1, step);\r\n\r\n\t\t\t\tif (!gantt.isWorkTime({date: date, task: task})) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar timestamp = date.valueOf();\r\n\t\t\t\tif (!timegrid[timestamp]){\r\n\t\t\t\t\ttimegrid[timestamp] = {\r\n\t\t\t\t\t\ttasks: []\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttimegrid[timestamp].tasks.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar timetable = [];\r\n\t\tvar start, end;\r\n\t\tfor (var i in timegrid) {\r\n\t\t\tstart = new Date(i * 1);\r\n\t\t\tend = gantt.date.add(start, 1, step);\r\n\t\t\ttimetable.push({\r\n\t\t\t\tstart_date: start,\r\n\t\t\t\tend_date: end,\r\n\t\t\t\ttasks: timegrid[i].tasks\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn timetable;\r\n\t}\r\n\r\n\tfunction renderResourceLine(resource, timeline) {\r\n\t\tvar config = timeline.$getConfig(),\r\n\t\t\ttemplates = timeline.$getTemplates();\r\n\t\tvar timetable = getResourceLoad(config.resource_property, resource.id, timeline.getScale());\r\n\r\n\t\tvar cells = [];\r\n\t\tfor (var i = 0; i < timetable.length; i++) {\r\n\r\n\t\t\tvar day = timetable[i];\r\n\r\n\t\t\tvar css = templates.resource_cell_class(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tvar content = templates.resource_cell_value(day.start_date, day.end_date, resource, day.tasks);\r\n\r\n\t\t\tif(css || content){\r\n\t\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\t\t\t\tvar el = document.createElement('div');\r\n\t\t\t\tel.className = [\"gantt_resource_marker\", css].join(\" \");\r\n\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t'left:' + sizes.left + 'px',\r\n\t\t\t\t\t'width:' + sizes.width + 'px',\r\n\t\t\t\t\t'height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'line-height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'top:' + sizes.top + 'px'\r\n\t\t\t\t].join(\";\");\r\n\r\n\t\t\t\tif(content)\r\n\t\t\t\t\tel.innerHTML = content;\r\n\r\n\t\t\t\tcells.push(el);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar row = null;\r\n\t\tif(cells.length){\r\n\t\t\trow = document.createElement(\"div\");\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\trow.appendChild(cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\treturn {\r\n\t\trenderLine: renderResourceLine,\r\n\t\tfilterTasks: getTaskBy\r\n\t};\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tvar methods = createResourceMethods(gantt);\r\n\r\n\tgantt.getTaskBy = methods.filterTasks;\r\n\tgantt.$ui.layers.resourceRow = methods.renderLine;\r\n\tgantt.config.resource_property = \"owner_id\";\r\n\tgantt.config.resource_store = \"resource\";\r\n\r\n\tgantt.templates.resource_cell_class = function(start, end, resource, tasks){\r\n\t\tvar css = \"\";\r\n\t\tif (tasks.length <= 1) {\r\n\t\t\tcss = \"gantt_resource_marker_ok\";\r\n\t\t} else {\r\n\t\t\tcss = \"gantt_resource_marker_overtime\";\r\n\t\t}\r\n\t\treturn css;\r\n\t};\r\n\r\n\tgantt.templates.resource_cell_value = function(start, end, resource, tasks){\r\n\t\treturn tasks.length * 8;\r\n\t};\r\n};\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/resources.js\n// module id = 77\n// module chunks = 0","module.exports = function(gantt) {\r\n\tvar TreeDataStore = require(\"./datastore/treedatastore\");\r\n\r\n\tvar old_has_children = TreeDataStore.prototype.hasChild;\r\n\tgantt.$data.tasksStore.hasChild = function (id) {\r\n\t\tif (old_has_children.apply(this, arguments))\r\n\t\t\treturn true;\r\n\t\tif (this.exists(id)) {\r\n\t\t\treturn this.getItem(id)[gantt.config.branch_loading_property];\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tfunction needLoading(id) {\r\n\t\tif (gantt.config.branch_loading && gantt._load_url) {\r\n\t\t\tvar was_rendered = gantt.getUserData(id, \"was_rendered\");\r\n\t\t\t// call ajax only if branch has children\r\n\t\t\tif (!was_rendered && (!gantt.getChildren(id).length && gantt.hasChild(id))) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onTaskOpened\", function (id) {\r\n\t\tif (gantt.config.branch_loading && gantt._load_url) {\r\n\t\t\t// call ajax only if branch has children\r\n\t\t\tif (needLoading(id)) {\r\n\t\t\t\tvar url = gantt._load_url;\r\n\t\t\t\turl = url.replace(/(\\?|&)?parent_id=.+&?/, \"\");\r\n\t\t\t\tvar param = url.indexOf(\"?\") >= 0 ? \"&\" : \"?\";\r\n\t\t\t\tvar y = gantt.getScrollState().y || 0;\r\n\r\n\t\t\t\tgantt.load(url + param + \"parent_id=\" + encodeURIComponent(id), this._load_type, function () {\r\n\t\t\t\t\tif (y) {\r\n\t\t\t\t\t\tgantt.scrollTo(null, y);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.setUserData(id, \"was_rendered\", true);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/dynamic_loading.js\n// module id = 78\n// module chunks = 0","var Grid = require(\"./ui/grid/grid\");\r\n\r\nmodule.exports = function(gantt) {\r\n\trequire(\"./grid_column_api.gpl\")(gantt);\r\n\tGrid.prototype.getGridColumns = function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = config.columns,\r\n\t\t\tvisibleColumns = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (!columns[i].hide)\r\n\t\t\t\tvisibleColumns.push(columns[i]);\r\n\t\t}\r\n\r\n\t\treturn visibleColumns;\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/grid_column_api.js\n// module id = 79\n// module chunks = 0","module.exports = function(gantt) {\r\n\tgantt.getGridColumn = function (name) {\r\n\t\tvar columns = gantt.config.columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name)\r\n\t\t\t\treturn columns[i];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/grid_column_api.gpl.js\n// module id = 80\n// module chunks = 0","module.exports = function(gantt){\r\n\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tgantt._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\r\n\t\t},\r\n\r\n\t\tgetTimelineCellAttr:function(dateString){\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\r\n\t\t_taskCommonAttr: function(task, div){\r\n\r\n\t\t\tif(!(task.start_date && task.end_date))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(gantt.templates.tooltip_text(task.start_date, task.end_date, task)));\r\n\r\n\t\t\tif(gantt.isReadonly(task)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(task.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tdiv.setAttribute(\"aria-selected\",\r\n\t\t\t\t(gantt.getState().selected_task == task.id || (gantt.isSelectedTask && gantt.isSelectedTask(task.id))) ? \"true\" : \"false\");\r\n\t\t},\r\n\r\n\t\tsetTaskBarAttr: function(task, div){\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.drag_move){\r\n\t\t\t\tif(task.id != gantt.getState().drag_id){\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskRowAttr: function(task, div){\r\n\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.order_branch){\r\n\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\r\n\t\t\tdiv.setAttribute(\"aria-level\", task.$level);\r\n\r\n\t\t\tif(gantt.hasChild(task.id)){\r\n\t\t\t\tdiv.setAttribute(\"aria-expanded\", task.$open ? \"true\" : \"false\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tlinkAttr: function(link, div){\r\n\r\n\t\t\tvar linkTypes = gantt.config.links;\r\n\r\n\t\t\tvar toStart = link.type == linkTypes.finish_to_start || link.type == linkTypes.start_to_start;\r\n\t\t\tvar fromStart = link.type == linkTypes.start_to_start || link.type == linkTypes.start_to_finish;\r\n\r\n\t\t\tvar content = gantt.locale.labels.link + \" \" +  gantt.templates.drag_link(link.source, fromStart, link.target, toStart);\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(content));\r\n\t\t\tif(gantt.isReadonly(link)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgridSeparatorAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"separator\");\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":gantt.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.years;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.months;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.days;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.hours + gantt.locale.labels.minutes;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\tlightboxDurationInputAttrString: function(section){\r\n\t\t\treturn this.getAttributeString({\"aria-label\": gantt.locale.labels.column_duration, \"aria-valuemin\": \"0\"});\r\n\t\t},\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn [\" role='treegrid'\", gantt.config.multiselect ? \"aria-multiselectable='true'\" : \"aria-multiselectable='false'\", \" \"].join(\" \");\r\n\t\t},\r\n\r\n\r\n\t\tgridScaleRowAttrString: function(){\r\n\t\t\treturn \"role='row'\";\r\n\t\t},\r\n\r\n\t\tgridScaleCellAttrString: function(column, label){\r\n\t\t\tvar attrs = \"\";\r\n\t\t\tif(column.name == \"add\"){\r\n\t\t\t\tattrs = this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar attributes = {\r\n\t\t\t\t\t\"role\":\"columnheader\",\r\n\t\t\t\t\t\"aria-label\": label\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(gantt._sort && gantt._sort.name == column.name){\r\n\t\t\t\t\tif(gantt._sort.direction == \"asc\"){\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"ascending\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"descending\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattrs = this.getAttributeString(attributes);\r\n\t\t\t}\r\n\t\t\treturn attrs;\r\n\t\t},\r\n\r\n\t\tgridDataAttrString: function(){\r\n\t\t\treturn \"role='rowgroup'\";\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(column, textValue){\r\n\t\t\treturn this.getAttributeString({\"role\":\"gridcell\", \"aria-label\": textValue});\r\n\t\t},\r\n\r\n\t\tgridAddButtonAttrString: function(column){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t},\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !gantt.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in gantt._waiAria){\r\n\t\tgantt._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(gantt._waiAria[i]);\r\n\t}\r\n\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/wai_aria.js\n// module id = 81\n// module chunks = 0","module.exports = function(gantt) {\r\n\tgantt.isReadonly = function (item) {\r\n\t\tif (item && item[this.config.editable_property]) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn (item && item[this.config.readonly_property]) || this.config.readonly;\r\n\t\t}\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/tasks.js\n// module id = 82\n// module chunks = 0","var utils = require(\"../utils/utils\");\r\nvar dateHelper = require(\"../utils/date_helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.load = function (url, type, callback) {\r\n\t\tthis._load_url = url;\r\n\t\tthis.assert(arguments.length, \"Invalid load arguments\");\r\n\r\n\t\tvar tp = 'json', cl = null;\r\n\t\tif (arguments.length >= 3) {\r\n\t\t\ttp = type;\r\n\t\t\tcl = callback;\r\n\t\t} else {\r\n\t\t\tif (typeof arguments[1] == \"string\")\r\n\t\t\t\ttp = arguments[1];\r\n\t\t\telse if (typeof arguments[1] == \"function\")\r\n\t\t\t\tcl = arguments[1];\r\n\t\t}\r\n\r\n\t\tthis._load_type = tp;\r\n\r\n\t\tthis.callEvent(\"onLoadStart\", [url, tp]);\r\n\r\n\t\tthis.ajax.get(url, gantt.bind(function (l) {\r\n\t\t\tthis.on_load(l, tp);\r\n\t\t\tthis.callEvent(\"onLoadEnd\", [url, tp]);\r\n\t\t\tif (typeof cl == \"function\")\r\n\t\t\t\tcl.call(this);\r\n\t\t}, this));\r\n\t};\r\n\tgantt.parse = function (data, type) {\r\n\t\tthis.on_load({xmlDoc: {responseText: data}}, type);\r\n\t};\r\n\r\n\tgantt.serialize = function (type) {\r\n\t\ttype = type || \"json\";\r\n\t\treturn this[type].serialize();\r\n\t};\r\n\r\n\t/*\r\n\ttasks and relations\r\n\t{\r\n\tdata:[\r\n\t\t{\r\n\t\t\t\"id\":\"string\",\r\n\t\t\t\"text\":\"...\",\r\n\t\t\t\"start_date\":\"Date or string\",\r\n\t\t\t\"end_date\":\"Date or string\",\r\n\t\t\t\"duration\":\"number\",\r\n\t\t\t\"progress\":\"0..1\",\r\n\t\t\t\"parent_id\":\"string\",\r\n\t\t\t\"order\":\"number\"\r\n\t\t},...],\r\n\tlinks:[\r\n\t\t{\r\n\t\t\tid:\"string\",\r\n\t\t\tsource:\"string\",\r\n\t\t\ttarget:\"string\",\r\n\t\t\ttype:\"string\"\r\n\t\t},...],\r\n\tcollections:{\r\n\t\t\tcollectionName:[\r\n\t\t\t\t{key:, label:, optional:...},...\r\n\t\t\t],...\r\n\t\t}\r\n\t}\r\n\r\n\t* */\r\n\r\n\tgantt.on_load = function (resp, type) {\r\n\t\tthis.callEvent(\"onBeforeParse\", []);\r\n\t\tif (!type)\r\n\t\t\ttype = \"json\";\r\n\t\tthis.assert(this[type], \"Invalid data type:'\" + type + \"'\");\r\n\r\n\t\tvar raw = resp.xmlDoc.responseText;\r\n\r\n\t\tvar data = this[type].parse(raw, resp);\r\n\t\tthis._process_loading(data);\r\n\t};\r\n\r\n\tgantt._process_loading = function (data) {\r\n\t\tif(data.collections)\r\n\t\t\tthis._load_collections(data.collections);\r\n\r\n\t\tthis.$data.tasksStore.parse(data.data);\r\n\t\tvar links = data.links || (data.collections ? data.collections.links : []);\r\n\t\tthis.$data.linksStore.parse(links);\r\n\r\n\t\t//this._sync_links();\r\n\t\tthis.callEvent(\"onParse\", []);\r\n\t\tthis.render();\r\n\t\tif(this.config.initial_scroll){\r\n\t\t\tvar firstTask = this.getTaskByIndex(0);\r\n\t\t\tvar id = firstTask ? firstTask.id : this.config.root_id;\r\n\t\t\tif(this.isTaskExists(id))\r\n\t\t\t\tthis.showTask(id);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._load_collections = function (collections) {\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\tvar arr = this.serverList[key];\r\n\t\t\t\tif (!arr) continue;\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = this.copy(option);\r\n\t\t\t\t\tobj.key = obj.value;// resulting option object\r\n\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tthis.callEvent(\"onOptionsLoad\", []);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDisplay\", function (id, task) {\r\n\t\treturn !task.$ignore;\r\n\t});\r\n\r\n\tgantt.json = {\r\n\t\tparse: function (data) {\r\n\t\t\tgantt.assert(data, \"Invalid data\");\r\n\r\n\t\t\tif (typeof data == \"string\") {\r\n\t\t\t\tif (window.JSON)\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\telse {\r\n\t\t\t\t\tgantt.assert(false, \"JSON is not supported\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.dhx_security)\r\n\t\t\t\tgantt.security_key = data.dhx_security;\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserializeTask: function (task) {\r\n\t\t\treturn this._copyObject(task);\r\n\t\t},\r\n\t\tserializeLink: function (link) {\r\n\t\t\treturn this._copyLink(link);\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj)\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj) {\r\n\t\t\t\tif (key.charAt(0) == \"$\")\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcopy[key] = obj[key];\r\n\r\n\t\t\t\tif (dateHelper.isDate(copy[key])) {\r\n\t\t\t\t\tcopy[key] = gantt.templates.xml_format(copy[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tgantt.eachTask(function (obj) {\r\n\t\t\t\tgantt.resetProjectDates(obj);\r\n\t\t\t\ttasks.push(this.serializeTask(obj));\r\n\t\t\t}, gantt.config.root_id, this);\r\n\r\n\t\t\tvar rawLinks = gantt.getLinks();\r\n\t\t\tfor (var i = 0; i < rawLinks.length; i++) {\r\n\t\t\t\tlinks.push(this.serializeLink(rawLinks[i]));\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata: tasks,\r\n\t\t\t\tlinks: links\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t<data>\r\n\t\t<task id:\"some\" parent_id=\"0\" progress=\"0.5\">\r\n\t\t\t<text>My task 1</text>\r\n\t\t\t<start_date>16.08.2013</start_date>\r\n\t\t\t<end_date>22.08.2013</end_date>\r\n\t\t</task>\r\n\t\t<coll_options>\r\n\t\t\t<links>\r\n\t\t\t\t<link source='a1' target='b2' type='c3' />\r\n\t\t\t</links>\r\n\t\t</coll_options>\r\n\t</data>\r\n\t*/\r\n\r\n\tgantt.xml = {\r\n\t\t_xmlNodeToJSON: function (node, attrs_only) {\r\n\t\t\tvar t = {};\r\n\t\t\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\t\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\t\t\tif (!attrs_only) {\r\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\t\t\t\tvar child = node.childNodes[i];\r\n\t\t\t\t\tif (child.nodeType == 1)\r\n\t\t\t\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\t\t},\r\n\t\t_getCollections: function (loader) {\r\n\t\t\tvar collection = {};\r\n\t\t\tvar opts = gantt.ajax.xpath(\"//coll_options\", loader);\r\n\t\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\t\tvar arr = collection[bind] = [];\r\n\t\t\t\tvar itms = gantt.ajax.xpath(\".//item\", opts[i]);\r\n\t\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\t\tvar itm = itms[j];\r\n\t\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\t\tvar obj = {key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn collection;\r\n\t\t},\r\n\t\t_getXML: function (text, loader, toptag) {\r\n\t\t\ttoptag = toptag || \"data\";\r\n\t\t\tif (!loader.getXMLTopNode) {\r\n\t\t\t\tloader = gantt.ajax.parse(loader);\r\n\t\t\t}\r\n\r\n\t\t\tvar xml = gantt.ajax.xmltop(toptag, loader.xmlDoc);\r\n\t\t\tif (!xml || xml.tagName != toptag) throw \"Invalid XML data\";\r\n\r\n\t\t\tvar skey = xml.getAttribute(\"dhx_security\");\r\n\t\t\tif (skey)\r\n\t\t\t\tgantt.security_key = skey;\r\n\r\n\t\t\treturn xml;\r\n\t\t},\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = this._getXML(text, loader);\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++)\r\n\t\t\t\tevs[i] = this._xmlNodeToJSON(xml[i]);\r\n\r\n\t\t\tdata.collections = this._getCollections(loader);\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\treturn \"<item id='\" + obj.id + \"' source='\" + obj.source + \"' target='\" + obj.target + \"' type='\" + obj.type + \"' />\";\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\treturn \"<task id='\" + obj.id + \"' parent='\" + (obj.parent || \"\") + \"' start_date='\" + obj.start_date + \"' duration='\" + obj.duration + \"' open='\" + (!!obj.open) + \"' progress='\" + obj.progress + \"' end_date='\" + obj.end_date + \"'><![CDATA[\" + obj.text + \"]]></task>\";\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tvar json = gantt.json.serialize();\r\n\t\t\tfor (var i = 0, len = json.data.length; i < len; i++) {\r\n\t\t\t\ttasks.push(this._copyObject(json.data[i]));\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, len = json.links.length; i < len; i++) {\r\n\t\t\t\tlinks.push(this._copyLink(json.links[i]));\r\n\t\t\t}\r\n\t\t\treturn \"<data>\" + tasks.join(\"\") + \"<coll_options for='links'>\" + links.join(\"\") + \"</coll_options></data>\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.oldxml = {\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = gantt.xml._getXML(text, loader, \"projects\");\r\n\t\t\tvar data = {collections: {links: []}};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tevs[i] = gantt.xml._xmlNodeToJSON(xml[i]);\r\n\t\t\t\tvar parent = xml[i].parentNode;\r\n\r\n\t\t\t\tif (parent.tagName == \"project\")\r\n\t\t\t\t\tevs[i].parent = \"project-\" + parent.getAttribute(\"id\");\r\n\t\t\t\telse\r\n\t\t\t\t\tevs[i].parent = parent.parentNode.getAttribute(\"id\");\r\n\t\t\t}\r\n\r\n\t\t\txml = gantt.ajax.xpath(\"//project\", loader);\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tvar ev = gantt.xml._xmlNodeToJSON(xml[i], true);\r\n\t\t\t\tev.id = \"project-\" + ev.id;\r\n\t\t\t\tevs.push(ev);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar ev = evs[i];\r\n\t\t\t\tev.start_date = ev.startdate || ev.est;\r\n\t\t\t\tev.end_date = ev.enddate;\r\n\t\t\t\tev.text = ev.name;\r\n\t\t\t\tev.duration = ev.duration / 8;\r\n\t\t\t\tev.open = 1;\r\n\t\t\t\tif (!ev.duration && !ev.end_date) ev.duration = 1;\r\n\t\t\t\tif (ev.predecessortasks)\r\n\t\t\t\t\tdata.collections.links.push({\r\n\t\t\t\t\t\ttarget: ev.id,\r\n\t\t\t\t\t\tsource: ev.predecessortasks,\r\n\t\t\t\t\t\ttype: gantt.config.links.finish_to_start\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tgantt.message(\"Serialization to 'old XML' is not implemented\");\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.serverList = function (name, array) {\r\n\t\tif (array) {\r\n\t\t\tthis.serverList[name] = array.slice(0);\r\n\t\t} else if (!this.serverList[name]) {\r\n\t\t\tthis.serverList[name] = [];\r\n\t\t}\r\n\t\treturn this.serverList[name];\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/load.js\n// module id = 83\n// module chunks = 0","var CalendarManager = require(\"./calendar_manager\"),\r\n\tTimeCalculator = require(\"./time_calculator\"),\r\n\tworktimeFacadeFactory = require(\"../facades/worktime_calendars\"),\r\n\tutils = require(\"../../utils/utils\");\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar manager = new CalendarManager(gantt),\r\n\ttimeCalculator = new TimeCalculator(manager);\r\n\tvar facade = worktimeFacadeFactory.create(manager, timeCalculator);\r\n\tutils.mixin(gantt, facade);\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/work_time.js\n// module id = 84\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar createArgumentsHelper = require(\"./calendar_arguments_helper\");\r\nvar CalendarWorktimeStrategy = require(\"./strategy/calendar_strategy\");\r\n\r\nfunction CalendarManager (gantt){\r\n\tthis.$gantt = gantt;\r\n\tthis._calendars = {};\r\n}\r\n\r\nCalendarManager.prototype = {\r\n\t_calendars: {},\r\n\t_getDayHoursForMultiple: function (calendars, date) {\r\n\t\tvar units = [],\r\n\t\t\ttick = true,\r\n\t\t\tcurrPos = 0,\r\n\t\t\tis_work_hour = false,\r\n\t\t\tstart = this.$gantt.date.day_start(new Date(date));\r\n\t\tfor (var hour = 0; hour < 24; hour++) {\r\n\t\t\tis_work_hour = calendars.reduce(function (acc, calendar) {\r\n\t\t\t\treturn acc && calendar._is_work_hour(start);\r\n\t\t\t}, true);\r\n\t\t\tif (is_work_hour) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tunits[currPos] = hour;\r\n\t\t\t\t\tunits[currPos + 1] = (hour + 1);\r\n\t\t\t\t\tcurrPos += 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits[currPos - 1] += 1;\r\n\t\t\t\t}\r\n\t\t\t\ttick = false;\r\n\t\t\t} else if (!tick) {\r\n\t\t\t\ttick = true;\r\n\t\t\t}\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"hour\");\r\n\t\t}\r\n\t\tif (!units.length)\r\n\t\t\tunits = false;\r\n\t\treturn units;\r\n\t},\r\n\tmergeCalendars: function () {\r\n\t\tvar newCalendar = this.createCalendar(),\r\n\t\t\tday,\r\n\t\t\tunits = [];\r\n\t\tvar calendars = Array.prototype.slice.call(arguments, 0);\r\n\t\tnewCalendar.worktime.hours = [0, 24];\r\n\t\tnewCalendar.worktime.dates = {};\r\n\t\tvar start = this.$gantt.date.day_start(new Date(259200000)); // 1970 day=0\r\n\t\tfor (day = 0; day < 7; day++) {\r\n\t\t\tunits = this._getDayHoursForMultiple(calendars, start);\r\n\t\t\tnewCalendar.worktime.dates[day] = units;\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\t\tfor (var i = 0; i < calendars.length; i++) {\r\n\t\t\tfor (var value in calendars[i].worktime.dates) if (+value > 10000) {\r\n\t\t\t\tunits = this._getDayHoursForMultiple(calendars, new Date(+value));\r\n\t\t\t\tnewCalendar.worktime.dates[value] = units;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newCalendar;\r\n\t},\r\n\r\n\t_convertWorktimeSettings: function (settings) {\r\n\t\tvar days = settings.days;\r\n\t\tif (days) {\r\n\t\t\tsettings.dates = settings.dates || {};\r\n\t\t\tfor (var i = 0; i < days.length; i++) {\r\n\t\t\t\tsettings.dates[i] = days[i];\r\n\t\t\t\tif (!(days[i] instanceof Array)) {\r\n\t\t\t\t\tsettings.dates[i] = !!days[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete settings.days;\r\n\t\t}\r\n\t\treturn settings;\r\n\t},\r\n\r\n\tcreateCalendar: function (parentCalendar) {\r\n\t\tvar settings;\r\n\r\n\t\tif (!parentCalendar) {\r\n\t\t\tparentCalendar = {};\r\n\t\t}\r\n\r\n\t\tif (parentCalendar.worktime) {\r\n\t\t\tsettings = utils.copy(parentCalendar.worktime);\r\n\t\t} else {\r\n\t\t\tsettings = utils.copy(parentCalendar);\r\n\t\t}\r\n\r\n\t\tvar defaults = utils.copy(this.defaults.fulltime.worktime);\r\n\t\tutils.mixin(settings, defaults);\r\n\r\n\t\tvar id = utils.uid();\r\n\t\tvar calendar = {\r\n\t\t\tid: id + \"\",\r\n\t\t\tworktime: this._convertWorktimeSettings(settings)\r\n\t\t};\r\n\r\n\t\tvar apiCore = new CalendarWorktimeStrategy(this.$gantt, createArgumentsHelper(this.$gantt));\r\n\t\tutils.mixin(apiCore, calendar);\r\n\r\n\t\t// validate/check if empty calendar\r\n\t\tif (!apiCore._tryChangeCalendarSettings(function () {\r\n\t\t\t})) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\treturn apiCore;\r\n\t\t}\r\n\t},\r\n\r\n\tgetCalendar: function (id) {\r\n\t\tid = id || \"global\";\r\n\t\tthis.createDefaultCalendars();\r\n\t\treturn this._calendars[id];\r\n\t},\r\n\r\n\tgetCalendars: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._calendars) {\r\n\t\t\tres.push(this.getCalendar(i));\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetTaskCalendar: function (task) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!task) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t} else if (task[config.calendar_property]) {\r\n\t\t\treturn this.getCalendar(task[config.calendar_property]);\r\n\t\t} else if (config.resource_calendars) {\r\n\r\n\t\t\tfor (var field in config.resource_calendars) {\r\n\t\t\t\tvar resource = config.resource_calendars[field];\r\n\t\t\t\tif (task[field]) {\r\n\t\t\t\t\tvar calendarId = resource[task[field]];\r\n\t\t\t\t\tif (calendarId) {\r\n\t\t\t\t\t\treturn this.getCalendar(calendarId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.getCalendar();\r\n\t},\r\n\r\n\taddCalendar: function (calendar) { // puts new calendar to Global Storage - gantt.calendarManager._calendars {}\r\n\t\tif (!(calendar instanceof CalendarWorktimeStrategy)) {\r\n\t\t\tvar id = calendar.id;\r\n\t\t\tcalendar = this.createCalendar(calendar);\r\n\t\t\tcalendar.id = id;\r\n\t\t}\r\n\t\tvar config = this.$gantt.$services.config();\r\n\r\n\t\tcalendar.id = calendar.id || utils.uid();\r\n\t\tthis._calendars[calendar.id] = calendar;\r\n\t\tif (!config.worktimes)\r\n\t\t\tconfig.worktimes = {};\r\n\t\tconfig.worktimes[calendar.id] = calendar.worktime;\r\n\t\treturn calendar.id;\r\n\t},\r\n\r\n\tdeleteCalendar: function (calendar) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!calendar) return false;\r\n\t\tif (this._calendars[calendar]) {\r\n\t\t\tdelete this._calendars[calendar];\r\n\t\t\tif (config.worktimes && config.worktimes[calendar])\r\n\t\t\t\tdelete config.worktimes[calendar];\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\t},\r\n\r\n\trestoreConfigCalendars: function (configs) {\r\n\t\tfor (var i in configs) {\r\n\t\t\tif (this._calendars[i])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar settings = configs[i];\r\n\t\t\tvar calendar = this.createCalendar(settings);\r\n\t\t\tcalendar.id = i;\r\n\t\t\tthis.addCalendar(calendar);\r\n\t\t}\r\n\t},\r\n\r\n\tdefaults: {\r\n\t\tglobal: {\r\n\t\t\tid: \"global\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [8, 17],\r\n\t\t\t\tdays: [0, 1, 1, 1, 1, 1, 0]\r\n\t\t\t}\r\n\t\t},\r\n\t\tfulltime: {\r\n\t\t\tid: \"fulltime\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tdays: [1, 1, 1, 1, 1, 1, 1]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateDefaultCalendars: function () {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tthis.restoreConfigCalendars(this.defaults);\r\n\t\tthis.restoreConfigCalendars(config.worktimes);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarManager;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/calendar_manager.js\n// module id = 85\n// module chunks = 0","var Cache = require(\"./calendar_workunit_cache\"),\r\n\tutils = require(\"../../../utils/utils\");\r\n\r\nfunction CalendarWorkTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n\tthis._workingUnitsCache = new Cache();\r\n}\r\n\r\nCalendarWorkTimeStrategy.prototype = {\r\n\tunits: [\r\n\t\t\"year\",\r\n\t\t\"month\",\r\n\t\t\"week\",\r\n\t\t\"day\",\r\n\t\t\"hour\",\r\n\t\t\"minute\"\r\n\t],\r\n\t// cache previously calculated worktime\r\n\t_getUnitOrder: function (unit) {\r\n\t\tfor (var i = 0, len = this.units.length; i < len; i++) {\r\n\t\t\tif (this.units[i] == unit)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t},\r\n\t_timestamp: function (settings) {\r\n\r\n\t\tvar timestamp = null;\r\n\t\tif ((settings.day || settings.day === 0)) {\r\n\t\t\ttimestamp = settings.day;\r\n\t\t} else if (settings.date) {\r\n\t\t\t// store worktime datestamp in utc so it could be recognized in different timezones (e.g. opened locally and sent to the export service in different timezone)\r\n\t\t\ttimestamp = Date.UTC(settings.date.getFullYear(), settings.date.getMonth(), settings.date.getDate());\r\n\t\t}\r\n\t\treturn timestamp;\r\n\t},\r\n\t_checkIfWorkingUnit: function (date, unit, order) {\r\n\t\tif (order === undefined) {\r\n\t\t\torder = this._getUnitOrder(unit);\r\n\t\t}\r\n\r\n\t\t// disable worktime check for custom time units\r\n\t\tif (order === undefined) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (order) {\r\n\t\t\t//check if bigger time unit is a work time (hour < day < month...)\r\n\t\t\t//i.e. don't check particular hour if the whole day is marked as not working\r\n\t\t\tif (!this._isWorkTime(date, this.units[order - 1], order - 1))\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this[\"_is_work_\" + unit])\r\n\t\t\treturn true;\r\n\t\treturn this[\"_is_work_\" + unit](date);\r\n\t},\r\n\t//checkings for particular time units\r\n\t//methods for month-year-week can be defined, otherwise always return 'true'\r\n\t_is_work_day: function (date) {\r\n\t\tvar val = this._getWorkHours(date);\r\n\r\n\t\tif (val instanceof Array) {\r\n\t\t\treturn val.length > 0;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_is_work_hour: function (date) {\r\n\t\tvar hours = this._getWorkHours(date); // [7,12] or []\r\n\t\tvar hour = date.getHours();\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tif (hours[i + 1] === undefined) {\r\n\t\t\t\treturn hours[i] == hour;\r\n\t\t\t} else {\r\n\t\t\t\tif (hour >= hours[i] && hour < hours[i + 1])\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_internDatesPull: {},\r\n\t_nextDate: function (start, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\treturn dateHelper.add(start, step, unit);\r\n\r\n\t\t/*var start_value = +start,\r\n\t\t\tkey = unit + \"_\" + step;\r\n\t\tvar interned = this._internDatesPull[key];\r\n\t\tif(!interned){\r\n\t\t\tinterned = this._internDatesPull[key] = {};\r\n\t\t}\r\n\t\tvar calculated;\r\n\t\tif(!interned[start_value]){\r\n\t\t\tinterned[start_value] = calculated = dateHelper.add(start, step, unit);\r\n\t\t\t//interned[start_value] = dateHelper.add(start, step, unit);\r\n\t\t}\r\n\t\treturn calculated || interned[start_value];*/\r\n\t},\r\n\t_getWorkUnitsBetweenGeneric: function (from, to, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\t\tvar units = 0;\r\n\r\n\r\n\t\tvar next = null;\r\n\t\tvar stepStart,\r\n\t\t\tstepEnd;\r\n\r\n\t\t// calculating decimal durations, i.e. 2016-09-20 00:05:00 - 2016-09-20 01:00:00 ~ 0.95 instead of 1\r\n\t\t// and also  2016-09-20 00:00:00 - 2016-09-20 00:05:00 ~ 0.05 instead of 1\r\n\t\t// durations must be rounded later\r\n\t\tvar checkFirst = false;\r\n\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\tif (stepStart.valueOf() != start.valueOf()) {\r\n\t\t\tcheckFirst = true;\r\n\t\t}\r\n\t\tvar checkLast = false;\r\n\t\tstepEnd = dateHelper[unit + \"_start\"](new Date(to));\r\n\t\tif (stepEnd.valueOf() != to.valueOf()) {\r\n\t\t\tcheckLast = true;\r\n\t\t}\r\n\r\n\t\tvar isLastStep = false;\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tnext = this._nextDate(start, unit, step);\r\n\t\t\tisLastStep = (next.valueOf() > end.valueOf());\r\n\r\n\t\t\tif (this._isWorkTime(start, unit)) {\r\n\t\t\t\tif (checkFirst || (checkLast && isLastStep)) {\r\n\t\t\t\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\t\t\t\tstepEnd = dateHelper.add(stepStart, step, unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkFirst) {\r\n\t\t\t\t\tcheckFirst = false;\r\n\t\t\t\t\tnext = this._nextDate(stepStart, unit, step);\r\n\t\t\t\t\tunits += ((stepEnd.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\t\t\t\t} else if (checkLast && isLastStep) {\r\n\t\t\t\t\tcheckLast = false;\r\n\t\t\t\t\tunits += ((end.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn units;\r\n\t},\r\n\t_getHoursPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tres += ((hours[i + 1] - hours[i]) || 0);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getWorkHoursForRange: function (from, to) {\r\n\t\tvar hours = 0;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, \"day\"))\r\n\t\t\t\thours += this._getHoursPerDay(start);\r\n\t\t\tstart = this._nextDate(start, \"day\", 1);\r\n\t\t}\r\n\t\treturn hours;\r\n\t},\r\n\t_getWorkUnitsBetweenHours: function (from, to, unit, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn this._getWorkUnitsBetweenGeneric(from, to, unit, step);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getWorkUnitsBetweenGeneric(firstDayStart, firstDayEnd, unit, step);\r\n\t\t\tvar endPart = this._getWorkUnitsBetweenGeneric(lastDayStart, lastDayEnd, unit, step);\r\n\r\n\t\t\tvar hourRange = this._getWorkHoursForRange(firstDayEnd, lastDayStart);\r\n\t\t\thourRange = ((hourRange / step) + startPart + endPart);\r\n\r\n\t\t\treturn hourRange;\r\n\t\t}\r\n\t},\r\n\r\n\t_getCalendar: function () {\r\n\t\treturn this.worktime;\r\n\t},\r\n\t_setCalendar: function (settings) {\r\n\t\tthis.worktime = settings;\r\n\t},\r\n\r\n\t_tryChangeCalendarSettings: function (payload) {\r\n\t\tvar backup = JSON.stringify(this._getCalendar());\r\n\t\tpayload();\r\n\t\tif (this._isEmptyCalendar(this._getCalendar())) {\r\n\t\t\tthis.$gantt.assert(false, \"Invalid calendar settings, no worktime available\");\r\n\t\t\tthis._setCalendar(JSON.parse(backup));\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_isEmptyCalendar: function (settings) {\r\n\t\tvar result = false,\r\n\t\t\tdatesArray = [],\r\n\t\t\tisFullWeekSet = true;\r\n\t\tfor (var i in settings.dates) {\r\n\t\t\tresult |= !!settings.dates[i];\r\n\t\t\tdatesArray.push(i);\r\n\t\t}\r\n\r\n\t\tvar checkFullArray = [];\r\n\t\tfor (var i = 0; i < datesArray.length; i++) {\r\n\t\t\tif (datesArray[i] < 10) {\r\n\t\t\t\tcheckFullArray.push(datesArray[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckFullArray.sort();\r\n\r\n\t\tfor (var i = 0; i < 7; i++) {\r\n\t\t\tif (checkFullArray[i] != i)\r\n\t\t\t\tisFullWeekSet = false;\r\n\t\t}\r\n\t\tif (isFullWeekSet)\r\n\t\t\treturn !result;\r\n\t\treturn !(result || !!settings.hours); // can still return false if separated dates are set to true\r\n\t},\r\n\r\n\tgetWorkHours: function () {\r\n\t\tvar config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn this._getWorkHours(config.date);\r\n\t},\r\n\t_getWorkHours: function (date) {\r\n\t\tvar t = this._timestamp({date: date});\r\n\t\tvar hours = true;\r\n\t\tvar calendar = this._getCalendar();\r\n\t\tif (calendar.dates[t] !== undefined) {\r\n\t\t\thours = calendar.dates[t];//custom day\r\n\t\t} else if (calendar.dates[date.getDay()] !== undefined) {\r\n\t\t\thours = calendar.dates[date.getDay()];//week day\r\n\t\t}\r\n\t\tif (hours === true) {\r\n\t\t\treturn calendar.hours;\r\n\t\t} else if (hours) {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t\treturn [];\r\n\t},\r\n\r\n\tsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tvar hours = settings.hours !== undefined ? settings.hours : true;\r\n\t\t\tvar timestamp = this._timestamp(settings);\r\n\t\t\tif (timestamp !== null) {\r\n\t\t\t\tthis._getCalendar().dates[timestamp] = hours;\r\n\t\t\t} else {\r\n\t\t\t\tthis._getCalendar().hours = hours;\r\n\t\t\t}\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\tunsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tif (!settings) {\r\n\t\t\t\tthis.reset_calendar();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar timestamp = this._timestamp(settings);\r\n\r\n\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\tdelete this._getCalendar().dates[timestamp];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Clear work units cache\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\t_isWorkTime: function (date, unit, order) {\r\n\t\t//Check if this item has in the cache\r\n\t\tvar is_work_unit = this._workingUnitsCache.get(unit, date);\r\n\r\n\t\tif (is_work_unit == -1) {\r\n\t\t\t// calculate if not cached\r\n\t\t\tis_work_unit = this._checkIfWorkingUnit(date, unit, order);\r\n\t\t\tthis._workingUnitsCache.put(unit, date, is_work_unit);\r\n\t\t}\r\n\r\n\t\treturn is_work_unit;\r\n\t},\r\n\r\n\tisWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.isWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._isWorkTime(config.date, config.unit);\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tif (!config.unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar res = 0;\r\n\t\tif (config.unit == \"hour\") {\r\n\t\t\tres = this._getWorkUnitsBetweenHours(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t} else {\r\n\t\t\tres = this._getWorkUnitsBetweenGeneric(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t}\r\n\r\n\t\t// getDuration.. returns decimal durations\r\n\t\treturn Math.round(res);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, unit))\r\n\t\t\t\treturn true;\r\n\t\t\tstart = this._nextDate(start, unit, step);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config =  this.argumentsHelper.calculateEndDateArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tvar mult = (config.duration >= 0) ? 1 : -1;\r\n\t\treturn this._calculateEndDate(from, duration, unit, step * mult);\r\n\t},\r\n\t_calculateEndDate: function (from, duration, unit, step) {\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tvar start = new Date(from),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar next = this._nextDate(start, unit, step);\r\n\t\t\t//if(this.isWorkTime(step > 0 ? start : next, unit))\r\n\t\t\tif (this._isWorkTime(step > 0 ? new Date(next.valueOf() - 1) : new Date(next.valueOf() + 1), unit))\r\n\t\t\t\tadded++;\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn start;\r\n\t},\r\n\r\n\tgetClosestWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.getClosestWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._getClosestWorkTime(config);\r\n\t},\r\n\r\n\t_getClosestWorkTime: function (settings) {\r\n\t\tif (this._isWorkTime(settings.date, settings.unit))\r\n\t\t\treturn settings.date;\r\n\r\n\t\tvar unit = settings.unit;\r\n\r\n\t\tvar curr = this.$gantt.date[unit + '_start'](settings.date);\r\n\r\n\t\tvar future_target = new Date(curr),\r\n\t\t\tprev_target = new Date(curr),\r\n\t\t\ttick = true,\r\n\t\t\tmaximum_loop = 3000,//be extra sure we won't fall into infinite loop, 3k seems big enough\r\n\t\t\tcount = 0,\r\n\t\t\tboth_directins = (settings.dir == 'any' || !settings.dir);\r\n\r\n\t\tvar inc = 1;\r\n\t\tif (settings.dir == 'past')\r\n\t\t\tinc = -1;\r\n\r\n\t\t//will seek closest working hour in future or in past, one step in one direction per iteration\r\n\t\twhile (!this._isWorkTime(curr, unit)) {\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tcurr = tick ? future_target : prev_target;\r\n\t\t\t\tinc = inc * (-1);\r\n\t\t\t}\r\n\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\tcurr = this.$gantt.date.add(curr, inc, unit);\r\n\r\n\t\t\tcurr = this.$gantt._correct_dst_change(curr, tzOffset, inc, unit);\r\n\t\t\tif (this.$gantt.date[unit + '_start'])\r\n\t\t\t\tcurr = this.$gantt.date[unit + '_start'](curr);\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tfuture_target = curr;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprev_target = curr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttick = !tick;\r\n\t\t\tcount++;\r\n\t\t\tif (count > maximum_loop) {\r\n\t\t\t\tthis.$gantt.assert(false, \"Invalid working time check\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (curr == prev_target || settings.dir == 'past') {\r\n\t\t\tcurr = this.$gantt.date.add(curr, 1, unit);\r\n\t\t}\r\n\r\n\t\treturn curr;\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarWorkTimeStrategy;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/strategy/calendar_strategy.js\n// module id = 86\n// module chunks = 0","function WorkUnitsCache() {\r\n\tthis._cache = {};\r\n}\r\n\r\nWorkUnitsCache.prototype = {\r\n\t// cache previously calculated worktime\r\n\tget: function (unit, date) {\r\n\t\tvar result = -1;// default value (if not existed in the cache)\r\n\r\n\t\tvar cache = this._cache;\r\n\t\tif (cache && cache[unit]) {\r\n\t\t\tvar units = cache[unit];\r\n\t\t\tvar time = date.getTime();\r\n\t\t\tif (units[time] !== undefined)\r\n\t\t\t\tresult = units[time];\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\tput: function (unit, date, value) {\r\n\t\tif (!unit || !date) return false;\r\n\r\n\t\tvar cache = this._cache;\r\n\r\n\t\tvar time = date.getTime();\r\n\r\n\t\tvalue = !!value;\r\n\r\n\t\tif (!cache) return false;\r\n\t\tif (!cache[unit]) cache[unit] = {};\r\n\t\tcache[unit][time] = value;\r\n\t\treturn true;\r\n\t},\r\n\r\n\tclear: function () {\r\n\t\tthis._cache = {};\r\n\t}\r\n};\r\n\r\nmodule.exports = WorkUnitsCache;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/strategy/calendar_workunit_cache.js\n// module id = 87\n// module chunks = 0","var createArgumentsHelper = require(\"./calendar_arguments_helper\"),\r\n\tNoWorkTimeCalendar = require(\"./strategy/no_work_time\");\r\n\r\nfunction TimeCalculator(calendarManager){\r\n\r\n\tthis.$gantt = calendarManager.$gantt;\r\n\tthis.argumentsHelper = createArgumentsHelper(this.$gantt);\r\n\tthis.calendarManager = calendarManager;\r\n\tthis.$disabledCalendar = new NoWorkTimeCalendar(this.$gantt, this.argumentsHelper);\r\n}\r\n\r\nTimeCalculator.prototype = {\r\n\t_getCalendar: function (config) {\r\n\t\tvar calendar;\r\n\t\tif (!this.$gantt.$services.config().work_time) {\r\n\t\t\tcalendar = this.$disabledCalendar;\r\n\t\t} else {\r\n\t\t\tvar manager = this.calendarManager;\r\n\t\t\tif (config.task) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config.task);\r\n\t\t\t} else if (config.id) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config);\r\n\t\t\t} else if (config.calendar) {\r\n\t\t\t\tcalendar = config.calendar;\r\n\t\t\t}\r\n\t\t\tif (!calendar) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetWorkHours: function (config) {\r\n\t\tconfig = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getWorkHours(config.date);\r\n\t},\r\n\r\n\tsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.setWorkTime(config);\r\n\t},\r\n\r\n\tunsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.unsetWorkTime(config);\r\n\t},\r\n\tisWorkTime: function (date, unit, task, calendar) {\r\n\t\tvar config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tcalendar = this._getCalendar(config);\r\n\t\treturn calendar.isWorkTime(config);\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tconfig = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getClosestWorkTime(config);\r\n\t},\r\n\r\n\tcalculateDuration: function () { // start_date_date, end_date, task\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateDuration(config);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.hasDuration(config);\r\n\t},\r\n\tcalculateEndDate: function (config) { // start_date, duration, unit, task\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateEndDate(config);\r\n\t}\r\n};\r\n\r\nmodule.exports = TimeCalculator;\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/time_calculator.js\n// module id = 88\n// module chunks = 0","function CalendarDisabledTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n}\r\n\r\nCalendarDisabledTimeStrategy.prototype = {\r\n\tgetWorkHours: function () {\r\n\t\treturn [0, 24];\r\n\t},\r\n\tsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tunsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tisWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tvar config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn config.date;\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this._calculateDuration(from, to, unit, step);\r\n\t},\r\n\t_calculateDuration: function (start, end, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar fixedUnits = {\r\n\t\t\t\"week\": 1000 * 60 * 60 * 24 * 7,\r\n\t\t\t\"day\": 1000 * 60 * 60 * 24,\r\n\t\t\t\"hour\": 1000 * 60 * 60,\r\n\t\t\t\"minute\": 1000 * 60\r\n\t\t};\r\n\r\n\t\tvar res = 0;\r\n\t\tif (fixedUnits[unit]) {\r\n\t\t\tres = Math.round((end - start) / (step * fixedUnits[unit]));\r\n\t\t} else {\r\n\t\t\tvar from = new Date(start),\r\n\t\t\t\tto = new Date(end);\r\n\t\t\twhile (from.valueOf() < to.valueOf()) {\r\n\t\t\t\tres += 1;\r\n\t\t\t\tfrom = dateHelper.add(from, step, unit);\r\n\t\t\t}\r\n\r\n\t\t\tif (from.valueOf() != end.valueOf()) {\r\n\t\t\t\tres += (to - from) / (dateHelper.add(from, step, unit) - from);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.round(res);\r\n\t},\r\n\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfrom = new Date(from);\r\n\t\tto = new Date(to);\r\n\r\n\t\treturn (from.valueOf() < to.valueOf());\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar start = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this.$gantt.date.add(start, step * duration, unit);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarDisabledTimeStrategy;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/strategy/no_work_time.js\n// module id = 89\n// module chunks = 0","// TODO: rework public api for date methods\r\nvar utils = require(\"../../utils/utils\");\r\n\r\nvar createWorktimeFacade = function(calendarManager, timeCalculator){\r\n\treturn {\r\n\t\tgetWorkHours: function (date) {\r\n\t\t\treturn timeCalculator.getWorkHours(date);\r\n\t\t},\r\n\r\n\t\tsetWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.setWorkTime(config);\r\n\t\t},\r\n\r\n\t\tunsetWorkTime: function (config) {\r\n\t\t\ttimeCalculator.unsetWorkTime(config);\r\n\t\t},\r\n\r\n\t\tisWorkTime: function (date, unit, task) {\r\n\t\t\treturn timeCalculator.isWorkTime(date, unit, task);\r\n\t\t},\r\n\r\n\t\tgetClosestWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.getClosestWorkTime(config);\r\n\t\t},\r\n\r\n\t\tcalculateDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.calculateDuration(start_date, end_date, task);\r\n\t\t},\r\n\t\t_hasDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.hasDuration(start_date, end_date, task);\r\n\t\t},\r\n\r\n\t\tcalculateEndDate: function (start, duration, unit, task) {\r\n\t\t\treturn timeCalculator.calculateEndDate(start, duration, unit, task);\r\n\t\t},\r\n\r\n\t\tcreateCalendar: utils.bind(calendarManager.createCalendar, calendarManager),\r\n\t\taddCalendar: utils.bind(calendarManager.addCalendar, calendarManager),\r\n\t\tgetCalendar: utils.bind(calendarManager.getCalendar, calendarManager),\r\n\t\tgetCalendars: utils.bind(calendarManager.getCalendars, calendarManager),\r\n\t\tgetTaskCalendar: utils.bind(calendarManager.getTaskCalendar, calendarManager),\r\n\t\tdeleteCalendar: utils.bind(calendarManager.deleteCalendar, calendarManager)\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = { create: createWorktimeFacade };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/facades/worktime_calendars.js\n// module id = 90\n// module chunks = 0","var dateHelper = require(\"../utils/date_helpers\"),\r\n\thelpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.isUnscheduledTask = function (task) {\r\n\t\treturn (!!task.unscheduled || !task.start_date);\r\n\t};\r\n\r\n\tgantt._isAllowedUnscheduledTask = function (task) {\r\n\t\treturn !!(task.unscheduled && gantt.config.show_unscheduled);\r\n\t};\r\n\r\n\tgantt.isTaskVisible = function (id) {\r\n\t\tif (!this.isTaskExists(id))\r\n\t\t\treturn false;\r\n\r\n\t\tvar task = this.getTask(id),\r\n\t\t\ttype = this.getTaskType(task.type);\r\n\r\n\t\tif (!((+task.start_date <= +this._max_date && +task.end_date >= +this._min_date) || gantt._isAllowedUnscheduledTask(task))){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn !!(gantt.getGlobalTaskIndex(id) >= 0);\r\n\t};\r\n\r\n\tgantt._defaultTaskDate = function (item, parent_id) {\r\n\t\tvar parent = (parent_id && parent_id != this.config.root_id) ? this.getTask(parent_id) : false,\r\n\t\t\tstartDate = '';\r\n\t\tif (parent) {\r\n\t\t\tstartDate = parent.start_date;\r\n\t\t} else {\r\n\t\t\tvar first = this.getTaskByIndex(0);\r\n\t\t\tstartDate = first ? (first.start_date ? first.start_date : (first.end_date ? this.calculateEndDate({\r\n\t\t\t\tstart_date: first.end_date,\r\n\t\t\t\tduration: -this.config.duration_step\r\n\t\t\t}) : '')) : this.config.start_date || this.getState().min_date;\r\n\t\t}\r\n\t\tgantt.assert(startDate, \"Invalid dates\");\r\n\t\treturn new Date(startDate);\r\n\t};\r\n\r\n\tgantt._set_default_task_timing = function (task) {\r\n\t\ttask.start_date = task.start_date || gantt._defaultTaskDate(task, this.getParent(task));\r\n\t\ttask.duration = task.duration || this.config.duration_step;\r\n\t\ttask.end_date = task.end_date || this.calculateEndDate(task);\r\n\t};\r\n\r\n\tgantt.createTask = function (item, parent, index) {\r\n\t\titem = item || {};\r\n\t\tif (!gantt.defined(item.id))\r\n\t\t\titem.id = gantt.uid();\r\n\r\n\t\tif (!item.start_date) {\r\n\t\t\titem.start_date = gantt._defaultTaskDate(item, parent);\r\n\t\t}\r\n\t\tif (item.text === undefined) {\r\n\t\t\titem.text = gantt.locale.labels.new_task;\r\n\t\t}\r\n\t\tif (item.duration === undefined) {\r\n\t\t\titem.duration = 1;\r\n\t\t}\r\n\r\n\t\tif (parent) {\r\n\t\t\tthis.setParent(item, parent, true);\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tparentObj.$open = true;\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onTaskCreated\", [item])) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.config.details_on_create) {\r\n\t\t\titem.$new = true;\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.addItem(item, index);\r\n\t\t\t});\r\n\t\t\tthis.selectTask(item.id);\r\n\t\t\tthis.refreshData();\r\n\t\t\tthis.showLightbox(item.id);\r\n\t\t} else {\r\n\t\t\tif (this.addTask(item, parent, index)) {\r\n\t\t\t\tthis.showTask(item.id);\r\n\t\t\t\tthis.selectTask(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn item.id;\r\n\t};\r\n\r\n\tgantt._update_flags = function (oldid, newid) {\r\n\t\t//  TODO: need a proper way to update all possible flags\r\n\t\tvar store = gantt.$data.tasksStore;\r\n\t\tif (oldid === undefined) {\r\n\t\t\tthis._lightbox_id = null;\r\n\r\n\t\t\tstore.silent(function(){\r\n\t\t\t\tstore.unselect();\r\n\t\t\t});\r\n\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._lightbox_id == oldid)\r\n\t\t\t\tthis._lightbox_id = newid;\r\n\r\n\t\t\tif (store.getSelectedId() == oldid) {\r\n\t\t\t\tstore.silent(function(){\r\n\t\t\t\t\tstore.unselect(oldid);\r\n\t\t\t\t\tstore.select(newid);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag && this._tasks_dnd.drag.id == oldid) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._get_task_timing_mode = function (task, force) {\r\n\t\tvar task_type = this.getTaskType(task.type);\r\n\r\n\t\tvar state = {\r\n\t\t\ttype: task_type,\r\n\t\t\t$no_start: false,\r\n\t\t\t$no_end: false\r\n\t\t};\r\n\r\n\t\tif (!force && task_type == task.$rendered_type) {\r\n\t\t\tstate.$no_start = task.$no_start;\r\n\t\t\tstate.$no_end = task.$no_end;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.project) {\r\n\t\t\t//project duration is always defined by children duration\r\n\t\t\tstate.$no_end = state.$no_start = true;\r\n\t\t} else if (task_type != this.config.types.milestone) {\r\n\t\t\t//tasks can have fixed duration, children duration(as projects), or one date fixed, and other defined by nested items\r\n\t\t\tstate.$no_end = !(task.end_date || task.duration);\r\n\t\t\tstate.$no_start = !task.start_date;\r\n\r\n\t\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\t\tstate.$no_end = state.$no_start = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t};\r\n\r\n\tgantt._init_task_timing = function (task) {\r\n\t\tvar task_mode = gantt._get_task_timing_mode(task, true);\r\n\r\n\t\tvar dirty = task.$rendered_type != task_mode.type;\r\n\r\n\t\tvar task_type = task_mode.type;\r\n\r\n\t\tif (dirty) {\r\n\t\t\ttask.$no_start = task_mode.$no_start;\r\n\t\t\ttask.$no_end = task_mode.$no_end;\r\n\t\t\ttask.$rendered_type = task_mode.type;\r\n\t\t}\r\n\r\n\t\tif (dirty && task_type != this.config.types.milestone) {\r\n\t\t\tif (task_type == this.config.types.project) {\r\n\t\t\t\t//project duration is always defined by children duration\r\n\t\t\t\tthis._set_default_task_timing(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.milestone) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\t\tif (task.start_date && task.end_date) {\r\n\t\t\ttask.duration = this.calculateDuration(task);\r\n\t\t}\r\n\t\ttask.duration = task.duration || 0;\r\n\t};\r\n\r\n\tgantt.isSummaryTask = function (task) {\r\n\t\tvar mode = gantt._get_task_timing_mode(task);\r\n\r\n\t\treturn !!(mode.$no_end || mode.$no_start);\r\n\t};\r\n\r\n// downward calculation of project duration\r\n\tgantt.resetProjectDates = function (task) {\r\n\t\tvar taskMode = this._get_task_timing_mode(task);\r\n\t\tif (taskMode.$no_end || taskMode.$no_start) {\r\n\t\t\tvar dates = this.getSubtaskDates(task.id);\r\n\t\t\tthis._assign_project_dates(task, dates.start_date, dates.end_date);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.getSubtaskDuration = function (task_id) {\r\n\t\tvar res = 0,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tres += child.duration;\r\n\t\t}, root);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\tgantt.getSubtaskDates = function (task_id) {\r\n\t\tvar min = null,\r\n\t\t\tmax = null,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif ((child.start_date && !child.$no_start) && (!min || min > child.start_date.valueOf()))\r\n\t\t\t\tmin = child.start_date.valueOf();\r\n\t\t\tif ((child.end_date && !child.$no_end) && (!max || max < child.end_date.valueOf()))\r\n\t\t\t\tmax = child.end_date.valueOf();\r\n\t\t}, root);\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: min ? new Date(min) : null,\r\n\t\t\tend_date: max ? new Date(max) : null\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._assign_project_dates = function (task, from, to) {\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\tif (taskTiming.$no_start) {\r\n\t\t\tif (from && from != Infinity) {\r\n\t\t\t\ttask.start_date = new Date(from);\r\n\t\t\t} else {\r\n\t\t\t\ttask.start_date = this._defaultTaskDate(task, this.getParent(task));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_end) {\r\n\t\t\tif (to && to != -Infinity) {\r\n\t\t\t\ttask.end_date = new Date(to);\r\n\t\t\t} else {\r\n\t\t\t\ttask.end_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\tduration: this.config.duration_step,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tthis._init_task_timing(task);\r\n\t\t}\r\n\t};\r\n\r\n// upward calculation of project duration\r\n\tgantt._update_parents = function (taskId, silent) {\r\n\t\tif (!taskId) return;\r\n\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tvar pid = this.getParent(task);\r\n\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\r\n\t\tvar has_changed = true;\r\n\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tvar oldStart = task.start_date.valueOf(),\r\n\t\t\t\toldEnd = task.end_date.valueOf();\r\n\r\n\t\t\tgantt.resetProjectDates(task);\r\n\r\n\t\t\t// not refresh parent projects if dates hasn't changed\r\n\t\t\tif (oldStart == task.start_date.valueOf() && oldEnd == task.end_date.valueOf()) {\r\n\t\t\t\thas_changed = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (has_changed && !silent) {\r\n\t\t\t\tthis.refreshTask(task.id, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (has_changed && pid && this.isTaskExists(pid)) {\r\n\t\t\tthis._update_parents(pid, silent);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.roundDate = function (config) {\r\n\t\tif (dateHelper.isDate(config)) {\r\n\t\t\tconfig = {\r\n\t\t\t\tdate: config,\r\n\t\t\t\tunit: gantt.getScale().unit,\r\n\t\t\t\tstep: gantt.getScale().step\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar date = config.date,\r\n\t\t\tsteps = config.step,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tvar scale = gantt.getScale();\r\n\t\tvar upper, lower, colIndex;\r\n\t\tif (unit == scale.unit && steps == scale.step &&\r\n\t\t\t+date >= +gantt._min_date && +date <= +gantt._max_date) {\r\n\t\t\t//find date in time scale config\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tif (!gantt.getScale().trace_x[colIndex]) {\r\n\t\t\t\tcolIndex -= 1;// end of time scale\r\n\t\t\t\tif(scale.rtl){\r\n\t\t\t\t\tcolIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlower = new Date(gantt.getScale().trace_x[colIndex]);\r\n\t\t\tupper = gantt.date.add(lower, steps, unit);\r\n\t\t} else {\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tupper = gantt.date[unit + \"_start\"](new Date(this._min_date));\r\n\t\t\tif (scale.trace_x[colIndex]) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](scale.trace_x[colIndex]);// end of time scale\r\n\t\t\t}\r\n\r\n\t\t\twhile (+upper < +date) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.date.add(upper, steps, unit));\r\n\r\n\t\t\t\tvar tzOffset = upper.getTimezoneOffset();\r\n\r\n\t\t\t\tupper = gantt._correct_dst_change(upper, tzOffset, upper, unit);\r\n\t\t\t\tif (gantt.date[unit + '_start'])\r\n\t\t\t\t\tupper = gantt.date[unit + '_start'](upper);\r\n\t\t\t}\r\n\r\n\t\t\tlower = gantt.date.add(upper, -1 * steps, unit);\r\n\r\n\t\t}\r\n\t\tif (config.dir && config.dir == 'future')\r\n\t\t\treturn upper;\r\n\t\tif (config.dir && config.dir == 'past')\r\n\t\t\treturn lower;\r\n\r\n\t\tif (Math.abs(date - lower) < Math.abs(upper - date)) {\r\n\t\t\treturn lower;\r\n\t\t} else {\r\n\t\t\treturn upper;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tgantt.correctTaskWorkTime = function (task) {\r\n\t\tif (gantt.config.work_time && gantt.config.correct_work_time) {\r\n\t\t\tif (!this.isWorkTime(task.start_date, undefined, task)) {\r\n\t\t\t\ttask.start_date = this.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!this.isWorkTime(new Date(+task.end_date - 1), undefined, task)) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeTaskAdd\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/data.js\n// module id = 91\n// module chunks = 0","module.exports = function(gantt) {\r\n\tvar domHelpers = require(\"../utils/dom_helpers\"),\r\n\t\thelpers = require(\"../utils/helpers\");\r\n\r\n\tgantt._lightbox_methods = {};\r\n\tgantt._lightbox_template = \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\";\r\n\r\n\r\n\t//TODO: gantt._lightbox_id is changed from data.js and accessed from autoscheduling, check if it can be removed from gantt object\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"lightbox\", function(){\r\n\t\treturn {\r\n\t\t\tlightbox: gantt._lightbox_id\r\n\t\t};\r\n\t});\r\n\r\n\tgantt.showLightbox = function (id) {\r\n\t\tif (!id || gantt.isReadonly(this.getTask(id))) return;\r\n\t\tif (!this.callEvent(\"onBeforeLightbox\", [id])) return;\r\n\r\n\t\tvar task = this.getTask(id);\r\n\r\n\t\tvar box = this.getLightbox(this.getTaskType(task.type));\r\n\t\tthis._center_lightbox(box);\r\n\t\tthis.showCover();\r\n\t\tthis._fill_lightbox(id, box);\r\n\r\n\t\tthis._waiAria.lightboxVisibleAttr(box);\r\n\r\n\t\tthis.callEvent(\"onLightbox\", [id]);\r\n\t};\r\n\r\n\tfunction _is_chart_visible(gantt) {\r\n\t\tvar timeline = gantt.$ui.getView(\"timeline\");\r\n\t\tif(timeline && timeline.isVisible()){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt._get_timepicker_step = function () {\r\n\t\tif (this.config.round_dnd_dates) {\r\n\t\t\tvar scale = gantt.getScale(),\r\n\t\t\t\tstep = (helpers.getSecondsInUnit(scale.unit) * scale.step) / 60;//timepicker step is measured in minutes\r\n\t\t\tif (step >= 60 * 24 || !_is_chart_visible(this)) {\r\n\t\t\t\tstep = this.config.time_step;\r\n\t\t\t}\r\n\t\t\treturn step;\r\n\t\t}\r\n\t\treturn this.config.time_step;\r\n\t};\r\n\tgantt.getLabel = function (property, key) {\r\n\t\tvar sections = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sections.length; i++) {\r\n\t\t\tif (sections[i].map_to == property) {\r\n\t\t\t\tvar options = sections[i].options;\r\n\t\t\t\tfor (var j = 0; j < options.length; j++) {\r\n\t\t\t\t\tif (options[j].key == key) {\r\n\t\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\r\n\tgantt.updateCollection = function (list_name, collection) {\r\n\t\tcollection = collection.slice(0);\r\n\t\tvar list = gantt.serverList(list_name);\r\n\t\tif (!list) return false;\r\n\t\tlist.splice(0, list.length);\r\n\t\tlist.push.apply(list, collection || []);\r\n\t\tgantt.resetLightbox();\r\n\t};\r\n\tgantt.getLightboxType = function () {\r\n\t\treturn this.getTaskType(this._lightbox_type);\r\n\t};\r\n\tgantt.getLightbox = function (type) {\r\n\t\tif (type === undefined)\r\n\t\t\ttype = this.getLightboxType();\r\n\r\n\t\tif (!this._lightbox || this.getLightboxType() != this.getTaskType(type)) {\r\n\t\t\tthis._lightbox_type = this.getTaskType(type);\r\n\t\t\tvar d = document.createElement(\"DIV\");\r\n\t\t\td.className = \"gantt_cal_light\";\r\n\r\n\t\t\tvar full_width = this._is_lightbox_timepicker();\r\n\t\t\tif (gantt.config.wide_form || full_width)\r\n\t\t\t\td.className += \" gantt_cal_light_wide\";\r\n\r\n\t\t\tif (full_width) {\r\n\t\t\t\tgantt.config.wide_form = true;\r\n\t\t\t\td.className += \" gantt_cal_light_full\";\r\n\t\t\t}\r\n\r\n\r\n\t\t\td.style.visibility = \"hidden\";\r\n\r\n\t\t\tvar html = this._lightbox_template;\r\n\r\n\t\t\tvar ariaAttr;\r\n\t\t\tvar buttons = this.config.buttons_left;\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\t// needed to migrate from 'dhx_something' to 'gantt_something' naming in a lightbox\r\n\t\t\t\tvar button = this.config._migrate_buttons[buttons[i]] ? this.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\r\n\t\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(button);\r\n\t\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_left_btn_set \" + button + \"_set'><div dhx_button='1' class='\" + button + \"'></div><div>\" + this.locale.labels[button] + \"</div></div>\";\r\n\r\n\t\t\t}\r\n\t\t\tbuttons = this.config.buttons_right;\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\tvar button = this.config._migrate_buttons[buttons[i]] ? this.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\t\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(button);\r\n\r\n\t\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_right_btn_set \" + button + \"_set' style='float:right;'><div dhx_button='1' class='\" + button + \"'></div><div>\" + this.locale.labels[button] + \"</div></div>\";\r\n\r\n\t\t\t}\r\n\t\t\thtml += \"</div>\";\r\n\t\t\td.innerHTML = html;\r\n\r\n\t\t\tgantt._waiAria.lightboxAttr(d);\r\n\r\n\t\t\tif (gantt.config.drag_lightbox) {\r\n\t\t\t\td.firstChild.onmousedown = gantt._ready_to_dnd;\r\n\t\t\t\td.firstChild.onselectstart = function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t\td.firstChild.style.cursor = \"pointer\";\r\n\t\t\t\tgantt._init_dnd_events();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.insertBefore(d, document.body.firstChild);\r\n\t\t\tthis._lightbox = d;\r\n\r\n\t\t\tvar sns = this._get_typed_lightbox_config(type);\r\n\t\t\thtml = this._render_sections(sns);\r\n\r\n\t\t\tvar ds = d.getElementsByTagName(\"div\");\r\n\t\t\tfor (var i = 0; i < ds.length; i++) {\r\n\t\t\t\tvar t_ds = ds[i];\r\n\t\t\t\tif (t_ds.className == \"gantt_cal_larea\") {\r\n\t\t\t\t\tt_ds.innerHTML = html;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// bind labels to lightbox inputs\r\n\t\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\t\tvar section = sns[i];\r\n\t\t\t\tif (!section.id || !document.getElementById(section.id))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar labelBlock = document.getElementById(section.id);\r\n\t\t\t\tvar label = labelBlock.querySelector(\"label\");\r\n\t\t\t\tvar inputBlock = labelBlock.nextSibling;\r\n\t\t\t\tif (!inputBlock)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar input = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\t\tif (input) {\r\n\t\t\t\t\tsection.inputId = input.id || \"input_\" + gantt.uid();\r\n\t\t\t\t\tif (!input.id)\r\n\t\t\t\t\t\tinput.id = section.inputId;\r\n\r\n\t\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//sizes\r\n\t\t\tthis.resizeLightbox();\r\n\r\n\t\t\tthis._init_lightbox_events(this);\r\n\t\t\td.style.display = \"none\";\r\n\t\t\td.style.visibility = \"visible\";\r\n\t\t}\r\n\t\treturn this._lightbox;\r\n\t};\r\n\r\n\tgantt._render_sections = function (sns) {\r\n\t\tvar html = \"\";\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id = \"area_\" + this.uid();\r\n\r\n\t\t\tvar display = sns[i].hidden ? \" style='display:none'\" : \"\";\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button) {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button' index='\" + i + \"'><div class='gantt_custom_button_\" + sns[i].button + \"'></div><div class='gantt_custom_button_label'>\" + this.locale.labels[\"button_\" + sns[i].button] + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (this.config.wide_form) {\r\n\t\t\t\thtml += \"<div class='gantt_wrap_section' \" + display + \">\";\r\n\t\t\t}\r\n\t\t\thtml += \"<div id='\" + sns[i].id + \"' class='gantt_cal_lsection'><label>\" + button + this.locale.labels[\"section_\" + sns[i].name] + \"</label></div>\" + block.render.call(this, sns[i]);\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t};\r\n\r\n\r\n\tgantt.resizeLightbox = function () {\r\n\t\tvar d = this._lightbox;\r\n\t\tif (!d) return;\r\n\r\n\t\tvar con = d.childNodes[1];\r\n\t\tcon.style.height = \"0px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\";\r\n\t\td.style.height = con.scrollHeight + this.config.lightbox_additional_height + \"px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\"; //it is incredible , how ugly IE can be\r\n\r\n\r\n\t};\r\n\r\n\tgantt._center_lightbox = function (box) {\r\n\t\tif (box) {\r\n\t\t\tbox.style.display = \"block\";\r\n\r\n\t\t\tvar scroll_top = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\r\n\t\t\tvar scroll_left = window.pageXOffset || document.body.scrollLeft || document.documentElement.scrollLeft;\r\n\r\n\t\t\tvar view_height = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n\t\t\tif (scroll_top) // if vertical scroll on window\r\n\t\t\t\tbox.style.top = Math.round(scroll_top + Math.max((view_height - box.offsetHeight) / 2, 0)) + \"px\";\r\n\t\t\telse // vertical scroll on body\r\n\t\t\t\tbox.style.top = Math.round(Math.max(((view_height - box.offsetHeight) / 2), 0) + 9) + \"px\"; // +9 for compatibility with auto tests\r\n\r\n\t\t\t// not quite accurate but used for compatibility reasons\r\n\t\t\tif (document.documentElement.scrollWidth > document.body.offsetWidth) // if horizontal scroll on the window\r\n\t\t\t\tbox.style.left = Math.round(scroll_left + (document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t\telse // horizontal scroll on the body\r\n\t\t\t\tbox.style.left = Math.round((document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt.showCover = function () {\r\n\t\tif (this._cover) return;\r\n\r\n\t\tthis._cover = document.createElement(\"DIV\");\r\n\t\tthis._cover.className = \"gantt_cal_cover\";\r\n\t\tvar _document_height = ((document.height !== undefined) ? document.height : document.body.offsetHeight);\r\n\t\tvar _scroll_height = ((document.documentElement) ? document.documentElement.scrollHeight : 0);\r\n\t\tthis._cover.style.height = Math.max(_document_height, _scroll_height) + 'px';\r\n\t\tdocument.body.appendChild(this._cover);\r\n\t};\r\n\r\n\r\n\tgantt._init_lightbox_events = function () {\r\n\t\tgantt.lightbox_events = {};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_save_btn\"] = function (e) {\r\n\t\t\tgantt._save_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_delete_btn\"] = function (e) {\r\n\t\t\tif (!gantt.callEvent(\"onLightboxDelete\", [gantt._lightbox_id]))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (gantt.isTaskExists(gantt._lightbox_id)) {\r\n\t\t\t\tgantt.$click.buttons[\"delete\"](gantt._lightbox_id);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.hideLightbox();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_cancel_btn\"] = function (e) {\r\n\t\t\tgantt._cancel_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"default\"] = function (e, src) {\r\n\t\t\tif (src.getAttribute(\"dhx_button\")) {\r\n\t\t\t\tgantt.callEvent(\"onLightboxButton\", [src.className, src, e]);\r\n\t\t\t} else {\r\n\t\t\t\tvar index, block, sec;\r\n\r\n\t\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\t\tif (className.indexOf(\"gantt_custom_button\") != -1) {\r\n\t\t\t\t\tif (className.indexOf(\"gantt_custom_button_\") != -1) {\r\n\t\t\t\t\t\tindex = src.parentNode.getAttribute(\"index\");\r\n\t\t\t\t\t\tsec = src;\r\n\t\t\t\t\t\twhile (sec && domHelpers.getClassName(sec).indexOf(\"gantt_cal_lsection\") == -1) {\r\n\t\t\t\t\t\t\tsec = sec.parentNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = src.getAttribute(\"index\");\r\n\t\t\t\t\t\tsec = src.parentNode;\r\n\t\t\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar sections = gantt._get_typed_lightbox_config();\r\n\r\n\t\t\t\tif (index) {\r\n\t\t\t\t\tindex = index * 1;\r\n\t\t\t\t\tblock = gantt.form_blocks[sections[index * 1].type];\r\n\t\t\t\t\tblock.button_click(index, src, sec, sec.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.event(gantt.getLightbox(), \"click\", function (e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target ? e.target : e.srcElement;\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className) {\r\n\t\t\t\tsrc = src.previousSibling;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className && className.indexOf(\"gantt_btn_set\") === 0) {\r\n\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className) {\r\n\t\t\t\tvar func = gantt.defined(gantt.lightbox_events[src.className]) ? gantt.lightbox_events[src.className] : gantt.lightbox_events[\"default\"];\r\n\t\t\t\treturn func(e, src);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tgantt.getLightbox().onkeydown = function (e) {\r\n\t\t\tvar event = e || window.event;\r\n\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\tvar buttonTarget = !!(domHelpers.getClassName(target).indexOf(\"gantt_btn_set\") > -1);\r\n\r\n\t\t\tswitch ((e || event).keyCode) {\r\n\t\t\t\tcase 32: {//space\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgantt._save_lightbox();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._cancel_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tthis.callEvent(\"onLightboxCancel\", [this._lightbox_id, task.$new]);\r\n\t\tif (gantt.isTaskExists(task.id) && task.$new) {\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.removeItem(task.id);\r\n\t\t\t\tgantt._update_flags(task.id, null);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.refreshData();\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._save_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tif (!this.callEvent(\"onLightboxSave\", [this._lightbox_id, task, !!task.$new]))\r\n\t\t\treturn;\r\n\r\n\t\tif (task.$new) {\r\n\t\t\tdelete task.$new;\r\n\t\t\tthis.addTask(task);\r\n\t\t}else if(this.isTaskExists(task.id)){\r\n\t\t\tthis.mixin(this.getTask(task.id), task, true);\r\n\t\t\tthis.refreshTask(task.id);\r\n\t\t\tthis.updateTask(task.id);\r\n\t\t}\r\n\t\tthis.refreshData();\r\n\r\n\t\t// TODO: do we need any blockable events here to prevent closing lightbox?\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._resolve_default_mapping = function (section) {\r\n\t\tvar mapping = section.map_to;\r\n\t\tvar time_controls = {\"time\": true, \"time_optional\": true, \"duration\": true, \"duration_optional\": true};\r\n\t\tif (time_controls[section.type]) {\r\n\t\t\tif (section.map_to == 'auto') {\r\n\t\t\t\tmapping = {start_date: \"start_date\", end_date: \"end_date\", duration: \"duration\"};\r\n\t\t\t} else if (typeof(section.map_to) === \"string\") {\r\n\t\t\t\tmapping = {start_date: section.map_to};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mapping;\r\n\t};\r\n\r\n\tgantt.getLightboxValues = function () {\r\n\t\tvar task = {};\r\n\r\n\t\tif (gantt.isTaskExists(this._lightbox_id)) {\r\n\t\t\ttask = this.mixin({}, this.getTask(this._lightbox_id));\r\n\t\t}\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar node = document.getElementById(sns[i].id);\r\n\t\t\tnode = (node ? node.nextSibling : node);\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue;\r\n\t\t\tvar res = block.get_value.call(this, node, task, sns[i]);\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tif (typeof map_to == \"string\" && map_to != \"auto\") {\r\n\t\t\t\ttask[map_to] = res;\r\n\t\t\t} else if (typeof map_to == \"object\") {\r\n\t\t\t\tfor (var property in map_to) {\r\n\t\t\t\t\tif (map_to[property])\r\n\t\t\t\t\t\ttask[map_to[property]] = res[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn task;\r\n\t};\r\n\r\n\r\n\tgantt.hideLightbox = function () {\r\n\t\tvar box = this.getLightbox();\r\n\t\tif (box) box.style.display = \"none\";\r\n\r\n\t\tthis._waiAria.lightboxHiddenAttr(box);\r\n\t\tthis._lightbox_id = null;\r\n\r\n\t\tthis.hideCover();\r\n\t\tthis.callEvent(\"onAfterLightbox\", []);\r\n\t};\r\n\tgantt.hideCover = function () {\r\n\t\tif (this._cover)\r\n\t\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\t\tthis._cover = null;\r\n\t};\r\n\r\n\tgantt.resetLightbox = function () {\r\n\t\tif (gantt._lightbox && !gantt._custom_lightbox)\r\n\t\t\tgantt._lightbox.parentNode.removeChild(gantt._lightbox);\r\n\t\tgantt._lightbox = null;\r\n\t};\r\n\tgantt._set_lightbox_values = function (data, box) {\r\n\t\tvar task = data;\r\n\t\tvar s = box.getElementsByTagName(\"span\");\r\n\t\tvar lightboxHeader = [];\r\n\t\tif (gantt.templates.lightbox_header) {\r\n\t\t\tlightboxHeader.push(\"\");\r\n\t\t\tlightboxHeader.push(gantt.templates.lightbox_header(task.start_date, task.end_date, task));\r\n\t\t\ts[1].innerHTML = \"\";\r\n\t\t\ts[2].innerHTML = gantt.templates.lightbox_header(task.start_date, task.end_date, task);\r\n\t\t} else {\r\n\t\t\tlightboxHeader.push(this.templates.task_time(task.start_date, task.end_date, task));\r\n\t\t\tlightboxHeader.push((this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70)); //IE6 fix\r\n\t\t\ts[1].innerHTML = this.templates.task_time(task.start_date, task.end_date, task);\r\n\t\t\ts[2].innerHTML = (this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70); //IE6 fix\r\n\t\t}\r\n\t\ts[1].innerHTML = lightboxHeader[0];\r\n\t\ts[2].innerHTML = lightboxHeader[1];\r\n\r\n\t\tgantt._waiAria.lightboxHeader(box, lightboxHeader.join(\" \"));\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config(this.getLightboxType());\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar section = sns[i];\r\n\r\n\t\t\tif (!this.form_blocks[section.type]) {\r\n\t\t\t\tcontinue;//skip incorrect sections, same check is done during rendering\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar node = document.getElementById(section.id).nextSibling;\r\n\t\t\tvar block = this.form_blocks[section.type];\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tvar value = this.defined(task[map_to]) ? task[map_to] : section.default_value;\r\n\t\t\tblock.set_value.call(gantt, node, value, task, section);\r\n\r\n\t\t\tif (section.focus)\r\n\t\t\t\tblock.focus.call(gantt, node);\r\n\t\t}\r\n\t\tif (data.id)\r\n\t\t\tgantt._lightbox_id = data.id;\r\n\t};\r\n\tgantt._fill_lightbox = function (id, box) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tthis._set_lightbox_values(task, box);\r\n\t};\r\n\r\n\r\n\tgantt.getLightboxSection = function (name) {\r\n\t\tvar config = this._get_typed_lightbox_config();\r\n\t\tvar i = 0;\r\n\t\tfor (i; i < config.length; i++)\r\n\t\t\tif (config[i].name == name)\r\n\t\t\t\tbreak;\r\n\t\tvar section = config[i];\r\n\t\tif (!section)\r\n\t\t\treturn null;\r\n\r\n\t\tif (!this._lightbox)\r\n\t\t\tthis.getLightbox();\r\n\t\tvar header = document.getElementById(section.id);\r\n\t\tvar node = header.nextSibling;\r\n\r\n\t\tvar result = {\r\n\t\t\tsection: section,\r\n\t\t\theader: header,\r\n\t\t\tnode: node,\r\n\t\t\tgetValue: function (ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].get_value.call(gantt, node, (ev || {}), section);\r\n\t\t\t},\r\n\t\t\tsetValue: function (value, ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].set_value.call(gantt, node, value, (ev || {}), section);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar handler = this._lightbox_methods[\"get_\" + section.type + \"_control\"];\r\n\t\treturn handler ? handler(result) : result;\r\n\t};\r\n\r\n\tgantt._lightbox_methods.get_template_control = function (result) {\r\n\t\tresult.control = result.node;\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_select_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('select')[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_textarea_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('textarea')[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_time_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('select'); // array\r\n\t\treturn result;\r\n\t};\r\n\r\n\r\n\tgantt._init_dnd_events = function () {\r\n\t\tthis.event(document.body, \"mousemove\", gantt._move_while_dnd);\r\n\t\tthis.event(document.body, \"mouseup\", gantt._finish_dnd);\r\n\t\tgantt._init_dnd_events = function () {\r\n\t\t};\r\n\t};\r\n\tgantt._move_while_dnd = function (e) {\r\n\t\tif (gantt._dnd_start_lb) {\r\n\t\t\tif (!document.gantt_unselectable) {\r\n\t\t\t\tdocument.body.className += \" gantt_unselectable\";\r\n\t\t\t\tdocument.gantt_unselectable = true;\r\n\t\t\t}\r\n\t\t\tvar lb = gantt.getLightbox();\r\n\t\t\tvar now = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t\t\tlb.style.top = gantt._lb_start[1] + now[1] - gantt._dnd_start_lb[1] + \"px\";\r\n\t\t\tlb.style.left = gantt._lb_start[0] + now[0] - gantt._dnd_start_lb[0] + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt._ready_to_dnd = function (e) {\r\n\t\tvar lb = gantt.getLightbox();\r\n\t\tgantt._lb_start = [parseInt(lb.style.left, 10), parseInt(lb.style.top, 10)];\r\n\t\tgantt._dnd_start_lb = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t};\r\n\tgantt._finish_dnd = function () {\r\n\t\tif (gantt._lb_start) {\r\n\t\t\tgantt._lb_start = gantt._dnd_start_lb = false;\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_unselectable\", \"\");\r\n\t\t\tdocument.gantt_unselectable = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._focus = function (node, select) {\r\n\t\tif (node && node.focus) {\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t//do not focus editor, to prevent auto-zoom\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (select && node.select) node.select();\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.form_blocks = {\r\n\t\tgetTimePicker: function (sns, hidden) {\r\n\t\t\tvar time_format = sns.time_format;\r\n\t\t\tif (!time_format) {\r\n\t\t\t\t// default order\r\n\t\t\t\tvar time_format = [\"%d\", \"%m\", \"%Y\"];\r\n\t\t\t\tif (helpers.getSecondsInUnit(gantt.getScale().unit) < helpers.getSecondsInUnit(\"day\")) {\r\n\t\t\t\t\ttime_format.push(\"%H:%i\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = {size: 0};\r\n\r\n\r\n\t\t\tvar cfg = this.config;\r\n\t\t\tvar dt = this.date.date_part(new Date(gantt._min_date.valueOf()));\r\n\t\t\tvar last = 24 * 60, first = 0;\r\n\t\t\tif (gantt.config.limit_time_select) {\r\n\t\t\t\tlast = 60 * cfg.last_hour + 1;\r\n\t\t\t\tfirst = 60 * cfg.first_hour;\r\n\t\t\t\tdt.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\t\t\tvar html = \"\";\r\n\r\n\t\t\tfor (var p = 0; p < time_format.length; p++) {\r\n\t\t\t\tvar time_option = time_format[p];\r\n\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (p > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar options = '';\r\n\t\t\t\tswitch (time_option) {\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsns._time_format_order[2] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//year\r\n\r\n\t\t\t\t\t\tvar range, offset, start_year, end_year;\r\n\r\n\t\t\t\t\t\tif (sns.year_range) {\r\n\t\t\t\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t\t\t\t// if\r\n\t\t\t\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trange = range || 10;\r\n\t\t\t\t\t\toffset = offset || Math.floor(range / 2);\r\n\t\t\t\t\t\tstart_year = start_year || dt.getFullYear() - offset;\r\n\t\t\t\t\t\tend_year = end_year || start_year + range;\r\n\r\n\r\n\t\t\t\t\t\tfor (var i = start_year; i < end_year; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsns._time_format_order[1] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//month\r\n\t\t\t\t\t\tfor (var i = 0; i < 12; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + this.locale.date.month_full[i] + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsns._time_format_order[0] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//days\r\n\t\t\t\t\t\tfor (var i = 1; i < 32; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + i + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\t\t//  var last = 24*60, first = 0;\r\n\t\t\t\t\t\tsns._time_format_order[3] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//hours\r\n\t\t\t\t\t\tvar i = first;\r\n\t\t\t\t\t\tvar tdate = dt.getDate();\r\n\t\t\t\t\t\tsns._time_values = [];\r\n\r\n\t\t\t\t\t\twhile (i < last) {\r\n\t\t\t\t\t\t\tvar time = this.templates.time_picker(dt);\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + time + \"</option>\";\r\n\t\t\t\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\t\t\t\tdt.setTime(dt.valueOf() + this._get_timepicker_step() * 60 * 1000);\r\n\t\t\t\t\t\t\tvar diff = (dt.getDate() != tdate) ? 1 : 0; // moved or not to the next day\r\n\t\t\t\t\t\t\ti = diff * 24 * 60 + dt.getHours() * 60 + dt.getMinutes();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options) {\r\n\r\n\t\t\t\t\tvar ariaAttrs = gantt._waiAria.lightboxSelectAttrString(time_option);\r\n\r\n\t\t\t\t\tvar readonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\tvar display = hidden ? \" style='display:none' \" : \"\";\r\n\t\t\t\t\thtml += \"<select \" + readonly + display + ariaAttrs + \">\" + options + \"</select>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t_fill_lightbox_select: function (s, i, d, map, cfg) {\r\n\t\t\ts[i + map[0]].value = d.getDate();\r\n\t\t\ts[i + map[1]].value = d.getMonth();\r\n\t\t\ts[i + map[2]].value = d.getFullYear();\r\n\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\tvar v = d.getHours() * 60 + d.getMinutes();\r\n\t\t\t\tv = Math.round(v / gantt._get_timepicker_step()) * gantt._get_timepicker_step();\r\n\t\t\t\tvar input = s[i + map[3]];\r\n\t\t\t\tinput.value = v;\r\n\t\t\t\t//in case option not shown\r\n\t\t\t\tinput.setAttribute('data-value', v);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"30\") + \"px\";\r\n\t\t\t\treturn \"<div class='gantt_cal_ltext gantt_cal_template' style='height:\" + height + \";'></div>\";\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tnode.innerHTML = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\treturn node.innerHTML || \"\";\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t}\r\n\t\t},\r\n\t\ttextarea: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"130\") + \"px\";\r\n\t\t\t\treturn \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><textarea></textarea></div>\";\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev) {\r\n\t\t\t\tthis.form_blocks.textarea._get_input(node).value = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev) {\r\n\t\t\t\treturn this.form_blocks.textarea._get_input(node).value;\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tvar a = this.form_blocks.textarea._get_input(node);\r\n\t\t\t\tgantt._focus(a, true);\r\n\t\t\t},\r\n\t\t\t_get_input: function (node) {\r\n\t\t\t\treturn node.querySelector(\"textarea\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tselect: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\t\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><select style='width:100%;'>\";\r\n\t\t\t\tfor (var i = 0; i < sns.options.length; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + sns.options[i].key + \"'>\" + sns.options[i].label + \"</option>\";\r\n\t\t\t\thtml += \"</select></div>\";\r\n\t\t\t\treturn html;\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, sns) {\r\n\t\t\t\tvar select = node.firstChild;\r\n\t\t\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\t\t\tselect.onchange = sns.onchange;\r\n\t\t\t\t\tselect._dhx_onchange = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof value == \"undefined\")\r\n\t\t\t\t\tvalue = (select.options[0] || {}).value;\r\n\t\t\t\tselect.value = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev) {\r\n\t\t\t\treturn node.firstChild.value;\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tvar a = node.firstChild;\r\n\t\t\t\tgantt._focus(a, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttime: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar time = this.form_blocks.getTimePicker.call(this, sns);\r\n\t\t\t\tvar parts = [\"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>\"];\r\n\t\t\t\tparts.push(time);\r\n\r\n\t\t\t\tif (sns.single_date) {\r\n\t\t\t\t\ttime = this.form_blocks.getTimePicker.call(this, sns, true);\r\n\t\t\t\t\tparts.push(\"<span></span>\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tparts.push(\"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparts.push(time);\r\n\t\t\t\tparts.push(\"</div>\");\r\n\t\t\t\treturn parts.join('');\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar cfg = config;\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\r\n\t\t\t\tvar map = config._time_format_order;\r\n\t\t\t\tvar map_size = config._time_format_size;\r\n\r\n\t\t\t\tif (cfg.auto_end_date) {\r\n\t\t\t\t\tvar _update_lightbox_select = function () {\r\n\t\t\t\t\t\tstart_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, 0, 0);\r\n\t\t\t\t\t\tend_date = gantt.calculateEndDate({start_date: start_date, duration: 1, task: ev});\r\n\t\t\t\t\t\tthis.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\t\t\ts[i].onchange = _update_lightbox_select;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\t\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\t\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\t\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tduration: 1,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\t\t\tthis.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t},\r\n\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\t\tvar hours = 0, minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar time = parseInt(s[map[3]].value, 10);\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\tvar start_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\r\n\t\t\t\thours = minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar time = parseInt(s[map.size + map[3]].value, 10);\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\tvar end_date = new Date(s[map[2] + map.size].value, s[map[1] + map.size].value, s[map[0] + map.size].value, hours, minutes);\r\n\r\n\t\t\t\tif (end_date <= start_date)\r\n\t\t\t\t\tend_date = gantt.date.add(start_date, gantt._get_timepicker_step(), \"minute\");\r\n\r\n\t\t\t\tvar mapped_fields = gantt._resolve_default_mapping(config);\r\n\r\n\t\t\t\tvar res = {\r\n\t\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\t\tend_date: new Date(end_date)\r\n\t\t\t\t};\r\n\t\t\t\tif (typeof mapped_fields == \"string\") {\r\n\t\t\t\t\treturn res.start_date;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tduration: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar time = this.form_blocks.getTimePicker.call(this, sns);\r\n\t\t\t\ttime = \"<div class='gantt_time_selects'>\" + time + \"</div>\";\r\n\t\t\t\tvar label = this.locale.labels[this.config.duration_unit + \"s\"];\r\n\r\n\t\t\t\tvar singleDate = sns.single_date ? ' style=\"display:none\"' : \"\";\r\n\t\t\t\tvar readonly = sns.readonly ? \" disabled='disabled'\" : \"\";\r\n\r\n\t\t\t\tvar ariaAttr = this._waiAria.lightboxDurationInputAttrString(sns);\r\n\r\n\t\t\t\tvar duration = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\t\t\t\"<input type='button' class='gantt_duration_dec' value=''\" + readonly + \">\" +\r\n\t\t\t\t\t\"<input type='text' value='5' class='gantt_duration_value'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \"> \" + label + \" <span></span>\" +\r\n\t\t\t\t\t\"</div>\";\r\n\t\t\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>\" + time + \" \" + duration + \"</div>\";\r\n\t\t\t\treturn html;\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar cfg = config;\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar inps = node.getElementsByTagName(\"input\");\r\n\r\n\t\t\t\tvar duration = inps[1];\r\n\t\t\t\tvar btns = [inps[0], inps[2]];\r\n\t\t\t\tvar endspan = node.getElementsByTagName(\"span\")[0];\r\n\r\n\t\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\t\tfunction _calc_date() {\r\n\t\t\t\t\tvar start_date = gantt.form_blocks.duration._get_start_date.call(gantt, node, config);\r\n\t\t\t\t\tvar duration = gantt.form_blocks.duration._get_duration.call(gantt, node, config);\r\n\t\t\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\r\n\t\t\t\t\tendspan.innerHTML = gantt.templates.task_date(end_date);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction _change_duration(step) {\r\n\t\t\t\t\tvar value = duration.value;\r\n\t\t\t\t\tvalue = parseInt(value, 10);\r\n\t\t\t\t\tif (window.isNaN(value))\r\n\t\t\t\t\t\tvalue = 0;\r\n\t\t\t\t\tvalue += step;\r\n\t\t\t\t\tif (value < 1) value = 1;\r\n\t\t\t\t\tduration.value = value;\r\n\t\t\t\t\t_calc_date();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbtns[0].onclick = gantt.bind(function () {\r\n\t\t\t\t\t_change_duration(-1 * this.config.duration_step);\r\n\t\t\t\t}, this);\r\n\t\t\t\tbtns[1].onclick = gantt.bind(function () {\r\n\t\t\t\t\t_change_duration(1 * this.config.duration_step);\r\n\t\t\t\t}, this);\r\n\t\t\t\ts[0].onchange = _calc_date;\r\n\t\t\t\ts[1].onchange = _calc_date;\r\n\t\t\t\ts[2].onchange = _calc_date;\r\n\t\t\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\t\t\t\tduration.onkeydown = gantt.bind(function (e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\t// up\r\n\t\t\t\t\tvar code = (e.charCode || e.keyCode || e.which);\r\n\r\n\t\t\t\t\tif (code == 40) {\r\n\t\t\t\t\t\t_change_duration(-1 * this.config.duration_step);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// down\r\n\t\t\t\t\tif (code == 38) {\r\n\t\t\t\t\t\t_change_duration(1 * this.config.duration_step);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twindow.setTimeout(function (e) {\r\n\t\t\t\t\t\t_calc_date();\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tduration.onchange = gantt.bind(function (e) {\r\n\t\t\t\t\t_calc_date();\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\t\t\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\t\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\t\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tduration: 1,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\t\t\t\tvar duration_val = Math.round(ev[mapping.duration]) || gantt.calculateDuration({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tend_date: end_date,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\t\t\tduration.value = duration_val;\r\n\t\t\t\t_calc_date();\r\n\t\t\t},\r\n\r\n\t\t\t_get_start_date: function (node, config) {\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar map = config._time_format_order;\r\n\t\t\t\tvar hours = 0;\r\n\t\t\t\tvar minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar input = s[map[3]];\r\n\t\t\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t\t\t},\r\n\t\t\t_get_duration: function (node, config) {\r\n\t\t\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\t\t\t\tduration = parseInt(duration.value, 10);\r\n\t\t\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\t\t\tif (duration < 0) duration *= -1;\r\n\t\t\t\treturn duration;\r\n\t\t\t},\r\n\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\tvar start_date = gantt.form_blocks.duration._get_start_date(node, config);\r\n\t\t\t\tvar duration = gantt.form_blocks.duration._get_duration(node, config);\r\n\r\n\t\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\t\t\t\tvar mapped_fields = gantt._resolve_default_mapping(config);\r\n\t\t\t\tvar res = {\r\n\t\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\t\tend_date: new Date(end_date),\r\n\t\t\t\t\tduration: duration\r\n\t\t\t\t};\r\n\t\t\t\tif (typeof mapped_fields == \"string\") {\r\n\t\t\t\t\treturn res.start_date;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tparent: {\r\n\t\t\t_filter: function (options, config, item_id) {\r\n\t\t\t\tvar filter = config.filter || function () {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\r\n\t\t\t\toptions = options.slice(0);\r\n\r\n\t\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\t\tvar task = options[i];\r\n\t\t\t\t\tif (task.id == item_id || gantt.isChildOf(task.id, item_id) || filter(task.id, task) === false) {\r\n\t\t\t\t\t\toptions.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn options;\r\n\t\t\t},\r\n\r\n\t\t\t_display: function (config, item_id) {\r\n\t\t\t\tvar tasks = [],\r\n\t\t\t\t\toptions = [];\r\n\t\t\t\tif (item_id) {\r\n\t\t\t\t\ttasks = gantt.getTaskByTime();\r\n\t\t\t\t\tif (config.allow_root) {\r\n\t\t\t\t\t\ttasks.unshift({id: gantt.config.root_id, text: config.root_label || \"\"});\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = this._filter(tasks, config, item_id);\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\ttasks.sort(config.sort);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar text = config.template || gantt.templates.task_text;\r\n\t\t\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\t\t\tvar label = text.apply(gantt, [tasks[i].start_date, tasks[i].end_date, tasks[i]]);\r\n\t\t\t\t\tif (label === undefined) {\r\n\t\t\t\t\t\tlabel = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptions.push({\r\n\t\t\t\t\t\tkey: tasks[i].id,\r\n\t\t\t\t\t\tlabel: label\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tconfig.options = options;\r\n\t\t\t\tconfig.map_to = config.map_to || \"parent\";\r\n\t\t\t\treturn gantt.form_blocks.select.render.apply(this, arguments);\r\n\t\t\t},\r\n\t\t\trender: function (sns) {\r\n\t\t\t\treturn gantt.form_blocks.parent._display(sns, false);\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar tmpDom = document.createElement(\"div\");\r\n\t\t\t\ttmpDom.innerHTML = gantt.form_blocks.parent._display(config, ev.id);\r\n\t\t\t\tvar newOptions = tmpDom.removeChild(tmpDom.firstChild);\r\n\t\t\t\tnode.onselect = null;\r\n\t\t\t\tnode.parentNode.replaceChild(newOptions, node);\r\n\r\n\t\t\t\treturn gantt.form_blocks.select.set_value.apply(gantt, [newOptions, value, ev, config]);\r\n\t\t\t},\r\n\t\t\tget_value: function () {\r\n\t\t\t\treturn gantt.form_blocks.select.get_value.apply(gantt, arguments);\r\n\t\t\t},\r\n\t\t\tfocus: function () {\r\n\t\t\t\treturn gantt.form_blocks.select.focus.apply(gantt, arguments);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._is_lightbox_timepicker = function () {\r\n\t\tvar s = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tif (s[i].name == \"time\" && s[i].type == \"time\")\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tgantt._dhtmlx_confirm = function (message, title, callback, ok) {\r\n\t\tif (!message)\r\n\t\t\treturn callback();\r\n\t\tvar opts = {text: message};\r\n\t\tif (title)\r\n\t\t\topts.title = title;\r\n\t\tif (ok) {\r\n\t\t\topts.ok = ok;\r\n\t\t}\r\n\t\tif (callback) {\r\n\t\t\topts.callback = function (result) {\r\n\t\t\t\tif (result)\r\n\t\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\tgantt.confirm(opts);\r\n\t};\r\n\r\n\tfunction _get_type_name(type_value) {\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == type_value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"task\";\r\n\t}\r\n\r\n\tgantt._get_typed_lightbox_config = function (type) {\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = this.getLightboxType();\r\n\t\t}\r\n\r\n\t\tvar field = _get_type_name.call(this, type);\r\n\r\n\t\tif (gantt.config.lightbox[field + \"_sections\"]) {\r\n\t\t\treturn gantt.config.lightbox[field + \"_sections\"];\r\n\t\t} else {\r\n\t\t\treturn gantt.config.lightbox.sections;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._silent_redraw_lightbox = function (type) {\r\n\t\tvar oldType = this.getLightboxType();\r\n\r\n\t\tif (this.getState().lightbox) {\r\n\t\t\tvar taskId = this.getState().lightbox;\r\n\t\t\tvar formData = this.getLightboxValues(),\r\n\t\t\t\ttask = this.copy(this.getTask(taskId));\r\n\r\n\t\t\tthis.resetLightbox();\r\n\r\n\t\t\tvar updTask = this.mixin(task, formData, true);\r\n\t\t\tvar box = this.getLightbox(type ? type : undefined);\r\n\t\t\tthis._center_lightbox(this.getLightbox());\r\n\t\t\tthis._set_lightbox_values(updTask, box);\r\n\t\t} else {\r\n\t\t\tthis.resetLightbox();\r\n\t\t\tthis.getLightbox(type ? type : undefined);\r\n\t\t}\r\n\t\tthis.callEvent(\"onLightboxChange\", [oldType, this.getLightboxType()]);\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/lightbox.js\n// module id = 92\n// module chunks = 0","module.exports = function(gantt) {\r\n\r\n\tgantt._extend_to_optional = function (lightbox_block) {\r\n\r\n\t\tvar duration = lightbox_block;\r\n\t\tvar optional_time = {\r\n\t\t\trender: duration.render,\r\n\t\t\tfocus: duration.focus,\r\n\t\t\tset_value: function (node, value, task, section) {\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(section);\r\n\t\t\t\tif (!task[mapping.start_date] || (mapping.start_date == \"start_date\" && this._isAllowedUnscheduledTask(task))) {\r\n\t\t\t\t\toptional_time.disable(node, section);\r\n\t\t\t\t\tvar val = {};\r\n\r\n\t\t\t\t\tfor (var i in mapping) {\r\n\t\t\t\t\t\t//take default values from the time control from task start/end dates\r\n\t\t\t\t\t\tval[mapping[i]] = task[i];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, val, section);//set default value\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.enable(node, section);\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_value: function (node, task, section) {\r\n\t\t\t\tif (section.disabled) {\r\n\t\t\t\t\treturn {start_date: null};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn duration.get_value.call(gantt, node, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_block: function (node, section) {\r\n\t\t\t\tgantt.callEvent(\"onSectionToggle\", [gantt._lightbox_id, section]);\r\n\t\t\t\tnode.style.display = section.disabled ? \"none\" : \"block\";\r\n\r\n\t\t\t\tif (section.button) {\r\n\t\t\t\t\tvar button = node.previousSibling.querySelector(\".gantt_custom_button_label\"),\r\n\t\t\t\t\t\tlabels = gantt.locale.labels;\r\n\r\n\t\t\t\t\tvar button_text = section.disabled ? labels[section.name + \"_enable_button\"] : labels[section.name + \"_disable_button\"];\r\n\r\n\t\t\t\t\tbutton.innerHTML = button_text;\r\n\t\t\t\t}\r\n\t\t\t\tgantt.resizeLightbox();\r\n\t\t\t},\r\n\t\t\tdisable: function (node, section) {\r\n\t\t\t\tsection.disabled = true;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\r\n\t\t\t},\r\n\t\t\tenable: function (node, section) {\r\n\t\t\t\tsection.disabled = false;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\t\t\t},\r\n\t\t\tbutton_click: function (index, el, section, container) {\r\n\t\t\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t\tif (config.disabled) {\r\n\t\t\t\t\toptional_time.enable(container, config);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.disable(container, config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn optional_time;\r\n\t};\r\n\r\n\tgantt.form_blocks.duration_optional = gantt._extend_to_optional(gantt.form_blocks.duration);\r\n\tgantt.form_blocks.time_optional = gantt._extend_to_optional(gantt.form_blocks.time);\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/lightbox_optional_time.js\n// module id = 93\n// module chunks = 0","module.exports = function(gantt) {\r\n\r\n\tgantt.getTaskType = function (type) {\r\n\t\tvar checkType = type;\r\n\t\tif(type && typeof type == \"object\"){\r\n\t\t\tcheckType = type.type;\r\n\t\t}\r\n\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == checkType) {\r\n\t\t\t\treturn checkType;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn gantt.config.types.task;\r\n\t};\r\n\r\n\tgantt.form_blocks.typeselect = {\r\n\t\trender: function (sns) {\r\n\t\t\tvar types = gantt.config.types,\r\n\t\t\t\tlocale = gantt.locale.labels,\r\n\t\t\t\toptions = [];\r\n\r\n\t\t\tvar filter = sns.filter || function () {\r\n\t\t\t\treturn true;\r\n\t\t\t};\r\n\t\t\tfor (var i in types) {\r\n\t\t\t\tif (!filter(i, types[i]) === false) {\r\n\t\t\t\t\toptions.push({key: types[i], label: locale[\"type_\" + i]});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsns.options = options;\r\n\r\n\t\t\tvar oldOnChange = sns.onchange;\r\n\t\t\tsns.onchange = function () {\r\n\t\t\t\tvar tId = gantt.getState().lightbox;\r\n\r\n\t\t\t\tgantt.changeLightboxType(this.value);\r\n\t\t\t\tif (typeof oldOnChange == 'function') {\r\n\t\t\t\t\toldOnChange.apply(this, arguments);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\treturn gantt.form_blocks.select.render.apply(gantt, arguments);\r\n\t\t},\r\n\t\tset_value: function () {\r\n\t\t\treturn gantt.form_blocks.select.set_value.apply(gantt, arguments);\r\n\t\t},\r\n\t\tget_value: function () {\r\n\t\t\treturn gantt.form_blocks.select.get_value.apply(gantt, arguments);\r\n\t\t},\r\n\t\tfocus: function () {\r\n\t\t\treturn gantt.form_blocks.select.focus.apply(this, arguments);\r\n\t\t}\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/data_task_types.js\n// module id = 94\n// module chunks = 0","/*\r\n reuse results of functions that can be recalculated during rendering\r\n greatly increases the rendering speed when critical path enabled\r\n Sample - 94_dev/critical_path.html\r\n\r\n */\r\nmodule.exports = function(gantt){\r\n\r\ngantt._cached_functions = {\r\n\tcache: {},\r\n\tmode: false,\r\n\tcritical_path_mode: false,\r\n\twrap_methods : function(methods, object){\r\n\t\tif(object._prefetch_originals){\r\n\t\t\tfor(var i in object._prefetch_originals){\r\n\t\t\t\tobject[i] = object._prefetch_originals[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tobject._prefetch_originals = {};\r\n\t\tfor(var i = 0; i < methods.length; i++)\r\n\t\t\tthis.prefetch(methods[i], object);\r\n\r\n\t},\r\n\tprefetch : function(methodname, host){\r\n\t\tvar original = host[methodname];\r\n\t\tif(original){\r\n\t\t\tvar optimizer = this;\r\n\r\n\t\t\thost._prefetch_originals[methodname] = original;\r\n\t\t\thost[methodname] = function get_prefetched_value(){\r\n\r\n\t\t\t\tvar argumentsArray = new Array(arguments.length);\r\n\t\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\r\n\t\t\t\t\targumentsArray[i] = arguments[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(optimizer.active){\r\n\t\t\t\t\tvar args = optimizer.get_arguments_hash(Array.prototype.slice.call(argumentsArray));\r\n\t\t\t\t\tif(!optimizer.cache[methodname]){\r\n\t\t\t\t\t\toptimizer.cache[methodname] = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cached_values = optimizer.cache[methodname];\r\n\r\n\t\t\t\t\tif(optimizer.has_cached_value(cached_values, args)){\r\n\t\t\t\t\t\treturn optimizer.get_cached_value(cached_values, args);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar value = original.apply(this, argumentsArray);\r\n\t\t\t\t\t\toptimizer.cache_value(cached_values, args, value);\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn original.apply(this, argumentsArray);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\tcache_value: function(cache, arguments_hash, value){\r\n\t\tif(this.is_date(value))\r\n\t\t\tvalue = new Date(value);\r\n\t\tcache[arguments_hash] = value;\r\n\t},\r\n\thas_cached_value: function(cache, arguments_hash){\r\n\t\treturn cache.hasOwnProperty(arguments_hash);\r\n\t},\r\n\tget_cached_value: function(cache, arguments_hash){\r\n\t\tvar data = cache[arguments_hash];\r\n\r\n\t\t//for cached dates - return copy\r\n\t\tif(this.is_date(data)){\r\n\t\t\tdata = new Date(data);\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tis_date: function(value){\r\n\t\treturn (value && value.getUTCDate);\r\n\t},\r\n\tget_arguments_hash:function(args){\r\n\t\tvar values = [];\r\n\t\tfor(var i = 0; i < args.length; i++){\r\n\t\t\tvalues.push(this.stringify_argument(args[i]));\r\n\t\t}\r\n\t\treturn \"(\" + values.join(\";\") + \")\";\r\n\t},\r\n\tstringify_argument: function(value){\r\n\t\t//expecting task or link, or any other data entries, dates and primitive values\r\n\t\tvar ret = \"\";\r\n\t\tif(value.id){\r\n\t\t\tret = value.id;\r\n\t\t}else if(this.is_date(value)){\r\n\t\t\tret = value.valueOf();\r\n\t\t}else{\r\n\t\t\tret = value;\r\n\t\t}\r\n\t\treturn ret + \"\";\r\n\t},\r\n\tactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = true;\r\n\t},\r\n\tdeactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = false;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis.cache = {};\r\n\t},\r\n\r\n\tsetup: function(gantt){\r\n\t\tvar override_gantt = [];\r\n\r\n\t\tvar gantt_methods  = [\r\n\t\t\t'_isCriticalTask',\r\n\t\t\t'isCriticalLink',\r\n\t\t\t'_isProjectEnd',\r\n\t\t\t'_getProjectEnd',\r\n\t\t\t'_getSlack'\r\n\t\t];\r\n\r\n\r\n\r\n\t\tif(this.mode == 'auto'){\r\n\t\t\tif(gantt.config.highlight_critical_path){\r\n\t\t\t\toverride_gantt = gantt_methods;\r\n\t\t\t}\r\n\t\t}else if(this.mode === true){\r\n\t\t\toverride_gantt = gantt_methods;\r\n\t\t}\r\n\r\n\t\tthis.wrap_methods(override_gantt, gantt);\r\n\r\n\t},\r\n\tupdate_if_changed: function(gantt){\r\n\t\tvar changed = (this.critical_path_mode != gantt.config.highlight_critical_path ||\r\n\t\t\t\t\t\tthis.mode !== gantt.config.optimize_render);\r\n\t\tif(changed){\r\n\t\t\tthis.critical_path_mode = gantt.config.highlight_critical_path;\r\n\t\t\tthis.mode = gantt.config.optimize_render;\r\n\t\t\tthis.setup(gantt);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction activate(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\tif(!gantt._cached_functions.active){\r\n\t\tgantt._cached_functions.activate();\r\n\t}\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onBeforeGanttRender\", activate);\r\ngantt.attachEvent(\"onBeforeDataRender\", activate);\r\ngantt.attachEvent(\"onBeforeSmartRender\",  function(){\r\n\tactivate();\r\n});\r\ngantt.attachEvent(\"onBeforeParse\", activate);\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tgantt._cached_functions.deactivate();\r\n});\r\nvar deactivTimeout = null;\r\ngantt.attachEvent(\"onSmartRender\", function(){\r\n\tif(deactivTimeout)\r\n\t\tclearTimeout(deactivTimeout);\r\n\tdeactivTimeout = setTimeout(function(){\r\n\t\tgantt._cached_functions.deactivate();\r\n\t}, 1000);\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\treturn true;\r\n});\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/cached_functions.js\n// module id = 95\n// module chunks = 0","function _configure(col, data, force) {\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\" || force)\r\n\t\t\tcol[key] = data[key];\r\n}\r\n\r\nfunction _get_skin(force, gantt) {\r\n\tvar skin = gantt.skin;\r\n\tif (!skin || force) {\r\n\t\tvar links = document.getElementsByTagName(\"link\");\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar res = links[i].href.match(\"dhtmlxgantt_([a-z\\_]+).css\");\r\n\t\t\tif (res) {\r\n\t\t\t\tif (gantt.skins[res[1]] || !skin) {\r\n\t\t\t\t\tskin = res[1];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.skin = skin || \"terrace\";\r\n\tvar skinset = gantt.skins[gantt.skin] || gantt.skins[\"terrace\"];\r\n\r\n\t//apply skin related settings\r\n\t_configure(gantt.config, skinset.config, force);\r\n\r\n\tvar config = gantt.getGridColumns();\r\n\tif (config[1] && !gantt.defined(config[1].width))\r\n\t\tconfig[1].width = skinset._second_column_width;\r\n\tif (config[2] && !gantt.defined(config[2].width))\r\n\t\tconfig[2].width = skinset._third_column_width;\r\n\t\r\n\tfor (var i=0; i<config.length; i++) {\r\n\t\tvar column = config[i];\r\n\t\tif (column.name == \"add\") {\r\n\t\t\tif(!column.width){\r\n\t\t\t\tcolumn.width = 44;\r\n\t\t\t}\r\n\t\t\tif (!(gantt.defined(column.min_width) && gantt.defined(column.max_width))) {\r\n\t\t\t\tcolumn.min_width = column.min_width || column.width;\r\n\t\t\t\tcolumn.max_width = column.max_width || column.width;\r\n\t\t\t}\r\n\t\t\tif (column.min_width)\r\n\t\t\t\tcolumn.min_width = +column.min_width;\r\n\t\t\tif (column.max_width)\r\n\t\t\t\tcolumn.max_width = +column.max_width;\r\n\t\t\tif (column.width) {\r\n\t\t\t\tcolumn.width = +column.width;\r\n\t\t\t\tcolumn.width = (column.min_width && column.min_width > column.width) ? column.min_width : column.width;\r\n\t\t\t\tcolumn.width = (column.max_width && column.max_width < column.width) ? column.max_width : column.width;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (skinset.config.task_height)\r\n\t\tgantt.config.task_height = skinset.config.task_height || \"full\"; \r\n\r\n\tif (skinset._lightbox_template)\r\n\t\tgantt._lightbox_template = skinset._lightbox_template;\r\n\r\n\tif (skinset._redefine_lightbox_buttons) {\r\n\t\tgantt.config.buttons_right = skinset._redefine_lightbox_buttons[\"buttons_right\"];\r\n\t\tgantt.config.buttons_left = skinset._redefine_lightbox_buttons[\"buttons_left\"];\r\n\t}\r\n\r\n\r\n\tgantt.resetLightbox();\r\n}\r\n\r\nmodule.exports = function(gantt) {\r\n\tif(!gantt.resetSkin){\r\n\t\tgantt.resetSkin = function () {\r\n\t\t\tthis.skin = \"\";\r\n\t\t\t_get_skin(true, this);\r\n\t\t};\r\n\t\tgantt.skins = {};\r\n\r\n\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t_get_skin(false, this);\r\n\t\t});\r\n\t}\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/skin.js\n// module id = 96\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins.skyblue = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 27,\r\n\t\tlink_line_width:1,\r\n\t\tlink_arrow_size:8,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/skyblue.js\n// module id = 97\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins.meadow = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 30,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:72\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/meadow.js\n// module id = 98\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins.terrace = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:90,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/terrace.js\n// module id = 99\n// module chunks = 0","\r\n\r\nmodule.exports = function(gantt) {\r\n\tgantt.skins.broadway = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 360,\r\n\t\t\trow_height: 35,\r\n\t\t\tscale_height: 35,\r\n\t\t\tlink_line_width: 1,\r\n\t\t\tlink_arrow_size: 7,\r\n\t\t\tlightbox_additional_height: 86\r\n\t\t},\r\n\t\t_second_column_width: 90,\r\n\t\t_third_column_width: 80,\r\n\r\n\t\t_lightbox_template: \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",\r\n\t\t_config_buttons_left: {},\r\n\t\t_config_buttons_right: {\r\n\t\t\t\"gantt_delete_btn\": \"icon_delete\",\r\n\t\t\t\"gantt_save_btn\": \"icon_save\"\r\n\t\t}\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/broadway.js\n// module id = 100\n// module chunks = 0","module.exports = function(gantt) {\r\n\tgantt.skins.material = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 411,\r\n\t\t\trow_height: 34,\r\n\t\t\ttask_height_offset: 6,\r\n\t\t\tscale_height: 36,\r\n\t\t\tlink_line_width: 2,\r\n\t\t\tlink_arrow_size: 6,\r\n\t\t\tlightbox_additional_height: 80\r\n\t\t},\r\n\t\t_second_column_width: 110,\r\n\t\t_third_column_width: 75,\r\n\t\t_redefine_lightbox_buttons: {\r\n\t\t\t\"buttons_left\": [\"dhx_delete_btn\"],\r\n\t\t\t\"buttons_right\": [\"dhx_save_btn\", \"dhx_cancel_btn\"]\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDrag\", function (id) {\r\n\t\tvar t = gantt.getTaskNode(id);\r\n\t\tif (t) {\r\n\t\t\tt.className += \" gantt_drag_animation\";\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar indx = t.className.indexOf(\" gantt_drag_animation\");\r\n\t\t\t\tif (indx > -1) {\r\n\t\t\t\t\tt.className = t.className.slice(0, indx);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t});\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/material.js\n// module id = 101\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_black\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/contrast_black.js\n// module id = 102\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_white\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/contrast_white.js\n// module id = 103\n// module chunks = 0","module.exports = function(gantt) {\r\n\r\n\tgantt.config.touch_drag = 500; //nearly immediate dnd\r\n\tgantt.config.touch = true;\r\n\tgantt.config.touch_feedback = true;\r\n\tgantt.config.touch_feedback_duration = 1;\r\n\tgantt._prevent_touch_scroll = false;\r\n\r\n\r\n\tgantt._touch_feedback = function () {\r\n\t\tif (gantt.config.touch_feedback) {\r\n\t\t\tif (navigator.vibrate)\r\n\t\t\t\tnavigator.vibrate(gantt.config.touch_feedback_duration);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", gantt.bind(function(){\r\n\t\tif (this.config.touch != \"force\")\r\n\t\t\tthis.config.touch = this.config.touch &&\r\n\t\t\t\t((navigator.userAgent.indexOf(\"Mobile\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"iPad\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Android\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Touch\") != -1));\r\n\r\n\t\tif (this.config.touch) {\r\n\r\n\t\t\tvar touchEventsSupported = true;\r\n\t\t\ttry {\r\n\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (touchEventsSupported) {\r\n\t\t\t\tthis._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.pointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.msPointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}, gantt));\r\n\r\n\r\n\tfunction getTaskDND(){\r\n\t\tvar _tasks_dnd;\r\n\t\tif(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t_tasks_dnd = gantt.$ui.getView(\"timeline\")._tasks_dnd;\r\n\t\t}\r\n\t\treturn _tasks_dnd;\r\n\t}\r\n\r\n\tvar touchHandlers = [];\r\n\r\n//we can't use native scrolling, as we need to sync momentum between different parts\r\n//so we will block native scroll and use the custom one\r\n//in future we can add custom momentum\r\n\tgantt._touch_events = function (names, accessor, ignore) {\r\n\t\t//webkit on android need to be handled separately\r\n\t\tvar dblclicktime = 0;\r\n\t\tvar action_mode = false;\r\n\t\tvar scroll_mode = false;\r\n\t\tvar dblclick_timer = 0;\r\n\t\tvar action_start = null;\r\n\t\tvar scroll_state;\r\n\t\tvar long_tap_timer = null;\r\n\t\tvar current_target = null;\r\n\r\n\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.eventRemove(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\t\ttouchHandlers = [];\r\n\r\n\t\t//touch move\r\n\t\ttouchHandlers.push([gantt.$container, names[0], function (e) {\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t\tif (ignore(e)) return;\r\n\r\n\t\t\t\t//ignore common and scrolling moves\r\n\t\t\t\tif (!action_mode) return;\r\n\r\n\t\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\r\n\t\t\t\tvar source = accessor(e);\r\n\t\t\t\tif (_tasks_dnd && (_tasks_dnd.drag.id || _tasks_dnd.drag.start_drag)) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_move(source);\r\n\t\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.cancelBubble = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!gantt._prevent_touch_scroll) {\r\n\t\t\t\t\tif (source && action_start) {\r\n\t\t\t\t\t\tvar dx = action_start.pageX - source.pageX;\r\n\t\t\t\t\t\tvar dy = action_start.pageY - source.pageY;\r\n\t\t\t\t\t\tif (!scroll_mode && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\r\n\t\t\t\t\t\t\tgantt._touch_scroll_active = scroll_mode = true;\r\n\t\t\t\t\t\t\tdblclicktime = 0;\r\n\t\t\t\t\t\t\tscroll_state = gantt.getScrollState();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scroll_mode) {\r\n\t\t\t\t\t\t\tgantt.scrollTo(scroll_state.x + dx, scroll_state.y + dy);\r\n\t\t\t\t\t\t\tvar new_scroll_state = gantt.getScrollState();\r\n\r\n\t\t\t\t\t\t\tif ((scroll_state.x != new_scroll_state.x && dy > 2 * dx) ||\r\n\t\t\t\t\t\t\t\t(scroll_state.y != new_scroll_state.y && dx > 2 * dy )) {\r\n\t\t\t\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}]);\r\n\r\n\r\n\t\t//block touch context menu in IE10\r\n\t\ttouchHandlers.push([this.$container, \"contextmenu\", function (e) {\r\n\t\t\tif (action_mode)\r\n\t\t\t\treturn block_action(e);\r\n\t\t}]);\r\n\r\n\t\t//touch start\r\n\t\ttouchHandlers.push([this.$container, names[1], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\t\taction_mode = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\taction_start = accessor(e);\r\n\t\t\tif (!gantt._locate_css(action_start, \"gantt_hor_scroll\") && !gantt._locate_css(action_start, \"gantt_ver_scroll\")) {\r\n\t\t\t\taction_mode = true;\r\n\t\t\t}\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t//long tap\r\n\t\t\tlong_tap_timer = setTimeout(function () {\r\n\t\t\t\tvar taskId = gantt.locate(action_start);\r\n\t\t\t\tif (_tasks_dnd && (taskId && !gantt._locate_css(action_start, \"gantt_link_control\") && !gantt._locate_css(action_start, \"gantt_grid_data\"))) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_down(action_start);\r\n\r\n\t\t\t\t\tif (_tasks_dnd.drag && _tasks_dnd.drag.start_drag) {\r\n\t\t\t\t\t\tcloneTaskRendered(taskId);\r\n\t\t\t\t\t\t_tasks_dnd._start_dnd(action_start);\r\n\t\t\t\t\t\tgantt._touch_drag = true;\r\n\r\n\t\t\t\t\t\tgantt.refreshTask(taskId);\r\n\r\n\t\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlong_tap_timer = null;\r\n\t\t\t}, gantt.config.touch_drag);\r\n\t\t}]);\r\n\r\n\t\t//touch end\r\n\t\ttouchHandlers.push([this.$container, names[2], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\taction_mode = false;\r\n\t\t\tvar source = accessor(e);\r\n\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\tif(_tasks_dnd)\r\n\t\t\t\t_tasks_dnd.on_mouse_up(source);\r\n\r\n\t\t\tif (current_target) {\r\n\t\t\t\tgantt.refreshTask(gantt.locate(current_target));\r\n\t\t\t\tif (current_target.parentNode) {\r\n\t\t\t\t\tcurrent_target.parentNode.removeChild(current_target);\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt._touch_scroll_active = action_mode = scroll_mode = false;\r\n\t\t\tcurrent_target = null;\r\n\r\n\t\t\t//dbl-tap handling\r\n\t\t\tif (action_start && dblclicktime) {\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\tif ((now - dblclicktime) < 500) {\r\n\r\n\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\tmouseEvents.onDoubleClick(action_start);\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t} else\r\n\t\t\t\t\tdblclicktime = now;\r\n\t\t\t} else {\r\n\t\t\t\tdblclicktime = new Date();\r\n\t\t\t}\r\n\t\t}]);\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.event(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\r\n\t\t//common helper, prevents event\r\n\t\tfunction block_action(e) {\r\n\t\t\tif (e && e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t(e || event).cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction cloneTaskRendered(taskId) {\r\n\t\t\tvar renders = gantt._getTaskLayers();\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\tif (task && gantt.isTaskVisible(taskId)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\t\t\ttask = renders[i].rendered[taskId];\r\n\t\t\t\t\tif (task && task.getAttribute(\"task_id\") && task.getAttribute(\"task_id\") == taskId) {\r\n\t\t\t\t\t\tvar copy = task.cloneNode(true);\r\n\t\t\t\t\t\tcurrent_target = task;\r\n\t\t\t\t\t\trenders[i].rendered[taskId] = copy;\r\n\t\t\t\t\t\ttask.style.display = \"none\";\r\n\t\t\t\t\t\tcopy.className += \" gantt_drag_move \";\r\n\t\t\t\t\t\ttask.parentNode.appendChild(copy);\r\n\t\t\t\t\t\t//return copy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/touch.js\n// module id = 104\n// module chunks = 0","module.exports = function(gantt) {\r\n\tgantt.locale = {\r\n\t\tdate: {\r\n\t\t\tmonth_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t\tday_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\t\tday_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t\t},\r\n\t\tlabels: {\r\n\t\t\tnew_task: \"New task\",\r\n\t\t\ticon_save: \"Save\",\r\n\t\t\ticon_cancel: \"Cancel\",\r\n\t\t\ticon_details: \"Details\",\r\n\t\t\ticon_edit: \"Edit\",\r\n\t\t\ticon_delete: \"Delete\",\r\n\t\t\tconfirm_closing: \"\",//Your changes will be lost, are you sure?\r\n\t\t\tconfirm_deleting: \"Task will be deleted permanently, are you sure?\",\r\n\t\t\tsection_description: \"Description\",\r\n\t\t\tsection_time: \"Time period\",\r\n\t\t\tsection_type: \"Type\",\r\n\r\n\t\t\t/* grid columns */\r\n\t\t\tcolumn_wbs: \"WBS\",\r\n\t\t\tcolumn_text: \"Task name\",\r\n\t\t\tcolumn_start_date: \"Start time\",\r\n\t\t\tcolumn_duration: \"Duration\",\r\n\t\t\tcolumn_add: \"\",\r\n\r\n\t\t\t/* link confirmation */\r\n\t\t\tlink: \"Link\",\r\n\t\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\t\tlink_start: \" (start)\",\r\n\t\t\tlink_end: \" (end)\",\r\n\r\n\t\t\ttype_task: \"Task\",\r\n\t\t\ttype_project: \"Project\",\r\n\t\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\t\tminutes: \"Minutes\",\r\n\t\t\thours: \"Hours\",\r\n\t\t\tdays: \"Days\",\r\n\t\t\tweeks: \"Week\",\r\n\t\t\tmonths: \"Months\",\r\n\t\t\tyears: \"Years\",\r\n\r\n\t\t\t/* message popup */\r\n\t\t\tmessage_ok: \"OK\",\r\n\t\t\tmessage_cancel: \"Cancel\"\r\n\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/locale/locale.js\n// module id = 105\n// module chunks = 0","var domHelpers = require(\"../utils/dom_helpers\"),\r\n\thelpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\tvar calculateScaleRange = require(\"./gantt_data_range\");\r\n\r\n\tgantt.assert = require(\"./common/assert\")(gantt);\r\n\r\n//initial initialization\r\n\tgantt.init = function(node, from, to){\r\n\t\tif(from && to){\r\n\t\t\tthis.config.start_date = this._min_date = new Date(from);\r\n\t\t\tthis.config.end_date = this._max_date = new Date(to);\r\n\t\t}\r\n\t\tthis.date.init();\r\n\r\n\t\tif (!this.config.scroll_size)\r\n\t\t\tthis.config.scroll_size = domHelpers.getScrollSize() || 1;\r\n\r\n\t\tvar resizeDelay;\r\n\t\tgantt.event(window, \"resize\", function(){\r\n\t\t\tclearTimeout(resizeDelay);\r\n\t\t\tresizeDelay = setTimeout(function(){\r\n\t\t\t\tgantt.render();\r\n\t\t\t}, 300);\r\n\t\t});\r\n\r\n\t\t//can be called only once\r\n\t\tthis.init = function(node){\r\n\t\t\tif (this.$container && this.$container.parentNode){\r\n\t\t\t\tthis.$container.parentNode.removeChild(this.$container);\r\n\t\t\t\tthis.$container = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$layout){\r\n\t\t\t\tthis.$layout.clear();\r\n\t\t\t}\r\n\t\t\tthis._reinit(node);\r\n\t\t};\r\n\r\n\t\tthis._reinit(node);\r\n\t};\r\n\r\n\tgantt._reinit = function(node){\r\n\t\tthis.callEvent(\"onBeforeGanttReady\", []);\r\n\t\t//this._init_tasks_range();\r\n\t\tthis.resetLightbox();\r\n\t\tthis._update_flags();\r\n\r\n\r\n\t\tvar config = this.$services.getService(\"templateLoader\");\r\n\t\tconfig.initTemplates(this);\r\n\r\n\t\tthis._clearTaskLayers();\r\n\t\tthis._clearLinkLayers();\r\n\r\n\t\t//this.clear\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t\tthis.$ui.reset();\r\n\t\t}\r\n\r\n\t\tthis.$root = domHelpers.toNode(node);\r\n\t\tif(this.$root){\r\n\t\t\tthis.$root.innerHTML = \"\";\r\n\t\t}\r\n\t\tthis.$root.gantt = this;\r\n\t\tcalculateScaleRange(this);\r\n\t\tthis.config.layout.id = \"main\";\r\n\t\tthis.$layout = this.$ui.createView(\"layout\", node, this.config.layout);\r\n\r\n\t\tthis.$layout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\tvar storeNames = gantt.$services.getService(\"datastores\");\r\n\t\t\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\t\t\tgantt.getDatastore(storeNames[i]).filter();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.$layout.attachEvent(\"onResize\", function(){\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onGanttLayoutReady\", []);\r\n\t\tthis.$layout.render();\r\n\r\n\t\tgantt.$container = this.$layout.$container.firstChild;\r\n\t\tthis.callEvent(\"onTemplatesReady\",[]);\r\n\t\tthis.$mouseEvents.reset(this.$root);\r\n\t\tthis.callEvent(\"onGanttReady\", []);\r\n\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt.$click={\r\n\t\tbuttons:{\r\n\t\t\t\"edit\":function(id){\r\n\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t},\r\n\t\t\t\"delete\":function(id){\r\n\t\t\t\tvar question = gantt.locale.labels.confirm_deleting;\r\n\t\t\t\tvar title = gantt.locale.labels.confirm_deleting_title;\r\n\r\n\t\t\t\tgantt._dhtmlx_confirm(question, title, function(){\r\n\t\t\t\t\tif(!gantt.isTaskExists(id)){\r\n\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\t\tif(task.$new){\r\n\t\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\t\tgantt.deleteTask(id, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tgantt.deleteTask(id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.getScrollState = function(){\r\n\t\tvar state = this._scroll_state();\r\n\t\treturn { x:state.x_pos, y:state.y_pos, inner_width:state.x, inner_height:state.y, width: state.x_inner, height: state.y_inner };\r\n\t};\r\n\r\n\tgantt.scrollTo = function(left, top){\r\n\t\tvar vertical = this._getVerticalScrollbar();\r\n\t\tvar horizontal = this._getHorizontalScrollbar();\r\n\r\n\t\tvar oldV = vertical.getScrollState(),\r\n\t\t\toldH = horizontal.getScrollState();\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\thorizontal.scroll(left);\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tvertical.scroll(top);\r\n\t\t}\r\n\r\n\t\tvar newV = vertical.getScrollState(),\r\n\t\t\tnewH = horizontal.getScrollState();\r\n\r\n\t\tthis.callEvent(\"onGanttScroll\", [oldH.position, oldV.position, newH.position, newV.position]);\r\n\t};\r\n\r\n\tgantt.showDate = function(date){\r\n\t\tvar date_x = this.posFromDate(date);\r\n\t\tvar scroll_to = Math.max(date_x - this.config.task_scroll_offset, 0);\r\n\t\tthis.scrollTo(scroll_to);\r\n\t};\r\n\tgantt.showTask = function(id) {\r\n\t\tvar pos = this.getTaskPosition(this.getTask(id));\r\n\r\n\t\tvar left = Math.max(pos.left - this.config.task_scroll_offset, 0);\r\n\r\n\t\tvar dataHeight = this._scroll_state().y;\r\n\t\tvar top;\r\n\t\tif(!dataHeight){\r\n\t\t\ttop = pos.top;\r\n\t\t}else{\r\n\t\t\ttop = pos.top - (dataHeight - this.config.row_height)/2;\r\n\t\t}\r\n\r\n\t\tthis.scrollTo(left, top);\r\n\t};\r\n\r\n//renders self\r\n\tgantt.render = function(){\r\n\t\tthis.callEvent(\"onBeforeGanttRender\", []);\r\n\r\n\t\tvar pos = this.getScrollState();\r\n\t\tvar posX = pos ? pos.x : 0;\r\n\t\tif(this._getHorizontalScrollbar()){\r\n\t\t\tvar scrollbar = this._getHorizontalScrollbar();\r\n\t\t\tposX = scrollbar.$config.codeScrollLeft || posX || 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar visible_date = null;\r\n\t\tif(posX){\r\n\t\t\tvisible_date = gantt.dateFromPos(posX + this.config.task_scroll_offset);\r\n\t\t}\r\n\t\tcalculateScaleRange(this);\r\n\r\n\t\tthis.$layout.$config.autosize = this.config.autosize;\r\n\t\tthis.$layout.resize();\r\n\r\n\t\tif(this.config.preserve_scroll && pos){\r\n\r\n\t\t\tif(posX){\r\n\t\t\t\tvar new_pos = gantt.getScrollState();\r\n\t\t\t\tvar new_date = gantt.dateFromPos(new_pos.x);\r\n\t\t\t\tif(!(+visible_date == +new_date && new_pos.y == pos.y)){\r\n\t\t\t\t\tif(visible_date){\r\n\t\t\t\t\t\tthis.showDate(visible_date);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pos.y)\r\n\t\t\t\t\t\tgantt.scrollTo(undefined, pos.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onGanttRender\", []);\r\n\t};\r\n\r\n\t//TODO: add layout.resize method that wouldn't trigger data repaint\r\n\tgantt.setSizes = gantt.render;\r\n\r\n\tgantt._scroll_state = function(){\r\n\t\tvar result = {\r\n\t\t\tx: false,\r\n\t\t\ty: false,\r\n\t\t\tx_pos: 0,\r\n\t\t\ty_pos: 0,\r\n\t\t\tscroll_size: this.config.scroll_size + 1,//1px for inner content\r\n\t\t\tx_inner: 0,\r\n\t\t\ty_inner: 0\r\n\t\t};\r\n\r\n\t\tvar scrollVer = gantt._getVerticalScrollbar(),\r\n\t\t\tscrollHor = gantt._getHorizontalScrollbar();\r\n\t\tif(scrollHor){\r\n\t\t\tvar horState = scrollHor.getScrollState();\r\n\t\t\tif(horState.visible){\r\n\t\t\t\tresult.x = horState.size;\r\n\t\t\t\tresult.x_inner = horState.scrollSize;\r\n\t\t\t}\r\n\t\t\tresult.x_pos = horState.position || 0;\r\n\t\t}\r\n\r\n\t\tif(scrollVer){\r\n\t\t\tvar verState = scrollVer.getScrollState();\r\n\t\t\tif(verState.visible){\r\n\t\t\t\tresult.y = verState.size;\r\n\r\n\t\t\t\tresult.y_inner = verState.scrollSize;\r\n\t\t\t}\r\n\t\t\tresult.y_pos = verState.position || 0;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tgantt.locate = function(e) {\r\n\t\tvar trg = domHelpers.getTargetNode(e);\r\n\r\n\t\t//ignore empty cells\r\n\t\tvar className = domHelpers.getClassName(trg);\r\n\t\tif ((className || \"\").indexOf(\"gantt_task_cell\") >= 0) return null;\r\n\r\n\t\tvar targetAttribute = arguments[1] || this.config.task_attribute;\r\n\r\n\t\tvar node = domHelpers.locateAttribute(trg, targetAttribute);\r\n\t\tif(node){\r\n\t\t\treturn node.getAttribute(targetAttribute);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._locate_css = function(e, classname, strict){\r\n\t\treturn domHelpers.locateClassName(e, classname, strict);\r\n\t};\r\n\r\n\tgantt._locateHTML = function(e, attribute) {\r\n\t\treturn domHelpers.locateAttribute(e, attribute || this.config.task_attribute);\r\n\t};\r\n\r\n\tgantt.getTaskRowNode = function(id) {\r\n\t\tvar els = this.$grid_data.childNodes;\r\n\t\tvar attribute = this.config.task_attribute;\r\n\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\tif (els[i].getAttribute) {\r\n\t\t\t\tvar value = els[i].getAttribute(attribute);\r\n\t\t\t\tif (value == id) return els[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.changeLightboxType = function(type){\r\n\t\tif(this.getLightboxType() == type)\r\n\t\t\treturn true;\r\n\t\tgantt._silent_redraw_lightbox(type);\r\n\t};\r\n\r\n\r\n\tgantt._get_link_type = function (from_start, to_start) {\r\n\t\tvar type = null;\r\n\t\tif (from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_start;\r\n\t\t} else if (!from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_start;\r\n\t\t} else if (!from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_finish;\r\n\t\t} else if (from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_finish;\r\n\t\t}\r\n\t\treturn type;\r\n\t};\r\n\r\n\tgantt.isLinkAllowed = function (from, to, from_start, to_start) {\r\n\t\tvar link = null;\r\n\t\tif (typeof(from) == \"object\") {\r\n\t\t\tlink = from;\r\n\t\t} else {\r\n\t\t\tlink = {source: from, target: to, type: this._get_link_type(from_start, to_start)};\r\n\t\t}\r\n\r\n\t\tif (!link) return false;\r\n\t\tif (!(link.source && link.target && link.type)) return false;\r\n\t\tif (link.source == link.target) return false;\r\n\r\n\t\tvar res = true;\r\n\t\t//any custom rules\r\n\t\tif (this.checkEvent(\"onLinkValidation\"))\r\n\t\t\tres = this.callEvent(\"onLinkValidation\", [link]);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tgantt._correct_dst_change = function(date, prevOffset, step, unit){\r\n\t\tvar time_unit = helpers.getSecondsInUnit(unit) * step;\r\n\t\tif(time_unit > 60*60 && time_unit < 60*60*24){\r\n\t\t\t//correct dst change only if current unit is more than one hour and less than day (days have own checking), e.g. 12h\r\n\t\t\tvar offsetChanged = date.getTimezoneOffset() - prevOffset;\r\n\t\t\tif(offsetChanged){\r\n\t\t\t\tdate = gantt.date.add(date, offsetChanged, \"minute\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn date;\r\n\t};\r\n\r\n\tgantt.getGridColumns = function(){\r\n\t\treturn gantt.config.columns.slice();\r\n\t};\r\n\r\n\tgantt._is_icon_open_click = function(e) {\r\n\t\tif (!e)\r\n\t\t\treturn false;\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tif (!(target && target.className))\r\n\t\t\treturn false;\r\n\t\tvar className = domHelpers.getClassName(target);\r\n\t\tif (className.indexOf(\"gantt_tree_icon\") !== -1 && (className.indexOf(\"gantt_close\") !== -1 || className.indexOf(\"gantt_open\") !== -1))\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/gantt_core.js\n// module id = 106\n// module chunks = 0","/*\r\n \tasserts will be removed in final code, so you can place them anythere\r\n\twithout caring about performance impacts\r\n*/\r\n\r\nmodule.exports = function(gantt){\r\n\treturn function assert(check, message){\r\n\t\t//jshint -W087\r\n\t\tif (!check){\r\n\t\t\tif(gantt.config.show_errors && gantt.callEvent(\"onError\",[message]) !== false) {\r\n\t\t\t\tgantt.message({type: \"error\", text: message, expire: -1});\r\n\t\t\t\tdebugger;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/assert.js\n// module id = 107\n// module chunks = 0","function extend(gantt){\r\n\r\n\tgantt.destructor = function(){\r\n\t\tgantt.callEvent(\"onDestroy\", []);\r\n\r\n\t\tthis.clearAll();\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tif(this.$root){\r\n\t\t\tdelete this.$root.gantt;\r\n\t\t}\r\n\r\n\t\tthis._eventRemoveAll();\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t}\r\n\r\n\t\tthis.resetLightbox();\r\n\r\n\t\tif(this._dp && this._dp.destructor){\r\n\t\t\tthis._dp.destructor();\r\n\t\t}\r\n\r\n\t\tthis.$services.destructor();\r\n\r\n\t\tfor(var i in this){\r\n\t\t\tif(i.indexOf(\"$\") === 0){\r\n\t\t\t\tdelete this[i];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = extend;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/destructor.js\n// module id = 108\n// module chunks = 0","module.exports = function(gantt){\r\n\r\n\tfunction deprecated(badCode, goodCode) {\r\n\r\n\t\tvar formatting = gantt.env.isIE ? \"\" : \"%c\";\r\n\r\n\r\n\t\tvar message = [\r\n\t\t\tformatting, \"\\\"\", badCode, \"\\\"\",  formatting,\r\n\t\t\t\" has been deprecated in dhtmlxGantt v4.0 and will stop working in v6.0. Use \",\r\n\t\t\tformatting, \"\\\"\", goodCode, \"\\\"\",  formatting,\r\n\t\t\t\" instead. \\nSee more details at http://docs.dhtmlx.com/gantt/migrating.html \"\r\n\t\t].join(\"\");\r\n\r\n\t\tvar log = window.console.warn || window.console.log;\r\n\r\n\t\tvar args = [message];\r\n\t\tif(!gantt.env.isIE){\r\n\t\t\targs = args.concat([\"font-weight:bold\", \"font-weight:normal\", \"font-weight:bold\", \"font-weight:normal\"]);\r\n\t\t}\r\n\r\n\t\tlog.apply(window.console, args);\r\n\t}\r\n\r\n\tfunction wrapDeprecated(method) {\r\n\t\treturn function () {\r\n\t\t\tdeprecated(\"dhtmlx.\" + method, \"gantt.\" + method);\r\n\t\t\treturn gantt[method].apply(gantt, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\t/* dhtmlx */\r\n\r\n\r\n\tif (!window.dhtmlx)\r\n\t\twindow.dhtmlx = {};\r\n\r\n\tvar dhtmlxMethods = [\r\n\t\t\"message\",\r\n\t\t\"alert\",\r\n\t\t\"confirm\",\r\n\t\t\"modalbox\",\r\n\t\t\"uid\",\r\n\t\t\"copy\",\r\n\t\t\"mixin\",\r\n\t\t\"defined\",\r\n\t\t\"bind\",\r\n\t\t\"assert\"\r\n\t];\r\n\r\n\tvar dynMethods = [];\r\n\r\n\tfor(var i = 0; i < dhtmlxMethods.length; i++){\r\n\t\t// wrap dhtmlx methods with 'deprecated' warnings\r\n\t\t// do not wrap if methods are defined by dhtmlxSuite\r\n\t\tif(!window.dhtmlx[dhtmlxMethods[i]]){\r\n\t\t\tdynMethods.push(dhtmlxMethods[i]);\r\n\t\t\tdhtmlx[dhtmlxMethods[i]] = wrapDeprecated(dhtmlxMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tfor(var i = 0; i < dynMethods.length; i++){\r\n\t\t\tdelete window.dhtmlx[dynMethods[i]];\r\n\t\t}\r\n\t\tdynMethods = null;\r\n\r\n\t});\r\n\r\n\t/* global functions */\r\n\r\n\r\n\tif (!window.dataProcessor) {\r\n\t\twindow.dataProcessor = function (url) {\r\n\t\t\tdeprecated(\"new dataProcessor(url)\", \"new gantt.dataProcessor(url)\");\r\n\t\t\treturn new gantt.dataProcessor(url);\r\n\t\t};\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\twindow.dataProcessor = null;\r\n\t\t});\r\n\t}\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/deprecated_warnings.js\n// module id = 109\n// module chunks = 0"],"sourceRoot":""}